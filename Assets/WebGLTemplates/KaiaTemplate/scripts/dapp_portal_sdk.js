var DappPortalSDK=function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function o(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(AO){a=[6,AO],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function s(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(Ye){o={error:Ye}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function c(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var l=function(e){function n(t){var r=e.call(this,t.message)||this;return r.name="RpcException",r.code=t.code,r.data=t.data,Object.setPrototypeOf(r,n.prototype),r}return t(n,e),n}(Error),u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var f,p={},g={},v={},m={};function y(){return f||(f=1,e=m,Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectorState=e.CONNECT_PROTOCOL_VER=e.CONNECT_JSONRPC_VER=e.OKXCONNECTOR_MESSAGE_TTL=e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=e.OKXCONNECTOR_WS_URL_LIST=e.OKXCONNECTOR_WS_URL_IDX_KEY=e.OKXCONNECTOR_WS_URL_3=e.OKXCONNECTOR_WS_URL_2=e.OKXCONNECTOR_WS_URL_1=e.EVENT_EMITTER_MAX_LISTENERS=e.OKXCONNECTOR_PROTOCOL_VERSION=void 0,e.OKXCONNECTOR_PROTOCOL_VERSION=2,e.EVENT_EMITTER_MAX_LISTENERS=10,e.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.okx.ac/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_3="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",e.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",e.OKXCONNECTOR_WS_URL_LIST=[e.OKXCONNECTOR_WS_URL_1,e.OKXCONNECTOR_WS_URL_2,e.OKXCONNECTOR_WS_URL_3],e.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},e.OKXCONNECTOR_MESSAGE_TTL=3e5,e.CONNECT_JSONRPC_VER="2.0",e.CONNECT_PROTOCOL_VER=2,e.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}),m;var e}var b,w={};function C(){return b||(b=1,Object.defineProperty(w,"__esModule",{value:!0}),w.OKXCONNECTOR_STORAGE_PROTOCOL_CACHE=w.OKXCONNECTOR_STORAGE_CIPHER_METHOD=w.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=w.OKXCONNECTOR_STORAGER_CRYPTO_SALT=w.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=w.OKXCONNECTOR_TON_KEY=w.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=w.OKXCONNECTOR_TOKEN_CACHE=w.OKXCONNECTOR_JWT_KEY=w.OKXCONNECTOR_SESSION_PREFIX_KEY=w.OKXCONNECTOR_CRYPTO_KEY=w.OKXCONNECTOR_CACHE_KEY_DAPP=w.OKXCONNECTOR_CACHE_KEY=void 0,w.OKXCONNECTOR_CACHE_KEY="ck",w.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",w.OKXCONNECTOR_CRYPTO_KEY="cck_k",w.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",w.OKXCONNECTOR_JWT_KEY="cjk_k",w.OKXCONNECTOR_TOKEN_CACHE="ct",w.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",w.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",w.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",w.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",w.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",w.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc",w.OKXCONNECTOR_STORAGE_PROTOCOL_CACHE="okx_connect_split_cache_key"),w}var _={};function O(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var E,S={exports:{}},R=h(Object.freeze({__proto__:null,default:{}}));function T(){return E||(E=1,function(e){var t=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},n=function(){throw new Error("no PRNG")},r=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=t(),s=t([1]),a=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function p(e,t,n,r,o){var i,s=0;for(i=0;i<o;i++)s|=e[t+i]^n[r+i];return(1&s-1>>>8)-1}function g(e,t,n,r){return p(e,t,n,r,16)}function v(e,t,n,r){return p(e,t,n,r,32)}function m(e,t,n,r){!function(e,t,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,v=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,m=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,y=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,C=i,_=s,O=a,E=c,S=l,R=u,T=d,N=h,A=f,P=p,x=g,I=v,k=m,D=y,K=b,M=w,L=0;L<20;L+=2)C^=(o=(k^=(o=(A^=(o=(S^=(o=C+k|0)<<7|o>>>25)+C|0)<<9|o>>>23)+S|0)<<13|o>>>19)+A|0)<<18|o>>>14,R^=(o=(_^=(o=(D^=(o=(P^=(o=R+_|0)<<7|o>>>25)+R|0)<<9|o>>>23)+P|0)<<13|o>>>19)+D|0)<<18|o>>>14,x^=(o=(T^=(o=(O^=(o=(K^=(o=x+T|0)<<7|o>>>25)+x|0)<<9|o>>>23)+K|0)<<13|o>>>19)+O|0)<<18|o>>>14,M^=(o=(I^=(o=(N^=(o=(E^=(o=M+I|0)<<7|o>>>25)+M|0)<<9|o>>>23)+E|0)<<13|o>>>19)+N|0)<<18|o>>>14,C^=(o=(E^=(o=(O^=(o=(_^=(o=C+E|0)<<7|o>>>25)+C|0)<<9|o>>>23)+_|0)<<13|o>>>19)+O|0)<<18|o>>>14,R^=(o=(S^=(o=(N^=(o=(T^=(o=R+S|0)<<7|o>>>25)+R|0)<<9|o>>>23)+T|0)<<13|o>>>19)+N|0)<<18|o>>>14,x^=(o=(P^=(o=(A^=(o=(I^=(o=x+P|0)<<7|o>>>25)+x|0)<<9|o>>>23)+I|0)<<13|o>>>19)+A|0)<<18|o>>>14,M^=(o=(K^=(o=(D^=(o=(k^=(o=M+K|0)<<7|o>>>25)+M|0)<<9|o>>>23)+k|0)<<13|o>>>19)+D|0)<<18|o>>>14;C=C+i|0,_=_+s|0,O=O+a|0,E=E+c|0,S=S+l|0,R=R+u|0,T=T+d|0,N=N+h|0,A=A+f|0,P=P+p|0,x=x+g|0,I=I+v|0,k=k+m|0,D=D+y|0,K=K+b|0,M=M+w|0,e[0]=C>>>0&255,e[1]=C>>>8&255,e[2]=C>>>16&255,e[3]=C>>>24&255,e[4]=_>>>0&255,e[5]=_>>>8&255,e[6]=_>>>16&255,e[7]=_>>>24&255,e[8]=O>>>0&255,e[9]=O>>>8&255,e[10]=O>>>16&255,e[11]=O>>>24&255,e[12]=E>>>0&255,e[13]=E>>>8&255,e[14]=E>>>16&255,e[15]=E>>>24&255,e[16]=S>>>0&255,e[17]=S>>>8&255,e[18]=S>>>16&255,e[19]=S>>>24&255,e[20]=R>>>0&255,e[21]=R>>>8&255,e[22]=R>>>16&255,e[23]=R>>>24&255,e[24]=T>>>0&255,e[25]=T>>>8&255,e[26]=T>>>16&255,e[27]=T>>>24&255,e[28]=N>>>0&255,e[29]=N>>>8&255,e[30]=N>>>16&255,e[31]=N>>>24&255,e[32]=A>>>0&255,e[33]=A>>>8&255,e[34]=A>>>16&255,e[35]=A>>>24&255,e[36]=P>>>0&255,e[37]=P>>>8&255,e[38]=P>>>16&255,e[39]=P>>>24&255,e[40]=x>>>0&255,e[41]=x>>>8&255,e[42]=x>>>16&255,e[43]=x>>>24&255,e[44]=I>>>0&255,e[45]=I>>>8&255,e[46]=I>>>16&255,e[47]=I>>>24&255,e[48]=k>>>0&255,e[49]=k>>>8&255,e[50]=k>>>16&255,e[51]=k>>>24&255,e[52]=D>>>0&255,e[53]=D>>>8&255,e[54]=D>>>16&255,e[55]=D>>>24&255,e[56]=K>>>0&255,e[57]=K>>>8&255,e[58]=K>>>16&255,e[59]=K>>>24&255,e[60]=M>>>0&255,e[61]=M>>>8&255,e[62]=M>>>16&255,e[63]=M>>>24&255}(e,t,n,r)}function y(e,t,n,r){!function(e,t,n,r){for(var o,i=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,a=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,c=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,l=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,u=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,v=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,m=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,y=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,b=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,w=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,C=0;C<20;C+=2)i^=(o=(m^=(o=(f^=(o=(l^=(o=i+m|0)<<7|o>>>25)+i|0)<<9|o>>>23)+l|0)<<13|o>>>19)+f|0)<<18|o>>>14,u^=(o=(s^=(o=(y^=(o=(p^=(o=u+s|0)<<7|o>>>25)+u|0)<<9|o>>>23)+p|0)<<13|o>>>19)+y|0)<<18|o>>>14,g^=(o=(d^=(o=(a^=(o=(b^=(o=g+d|0)<<7|o>>>25)+g|0)<<9|o>>>23)+b|0)<<13|o>>>19)+a|0)<<18|o>>>14,w^=(o=(v^=(o=(h^=(o=(c^=(o=w+v|0)<<7|o>>>25)+w|0)<<9|o>>>23)+c|0)<<13|o>>>19)+h|0)<<18|o>>>14,i^=(o=(c^=(o=(a^=(o=(s^=(o=i+c|0)<<7|o>>>25)+i|0)<<9|o>>>23)+s|0)<<13|o>>>19)+a|0)<<18|o>>>14,u^=(o=(l^=(o=(h^=(o=(d^=(o=u+l|0)<<7|o>>>25)+u|0)<<9|o>>>23)+d|0)<<13|o>>>19)+h|0)<<18|o>>>14,g^=(o=(p^=(o=(f^=(o=(v^=(o=g+p|0)<<7|o>>>25)+g|0)<<9|o>>>23)+v|0)<<13|o>>>19)+f|0)<<18|o>>>14,w^=(o=(b^=(o=(y^=(o=(m^=(o=w+b|0)<<7|o>>>25)+w|0)<<9|o>>>23)+m|0)<<13|o>>>19)+y|0)<<18|o>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=u>>>0&255,e[5]=u>>>8&255,e[6]=u>>>16&255,e[7]=u>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,n,r)}var b=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,n,r,o,i,s){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=i[c];for(;o>=64;){for(m(u,l,s,b),c=0;c<64;c++)e[t+c]=n[r+c]^u[c];for(a=1,c=8;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;o-=64,t+=64,r+=64}if(o>0)for(m(u,l,s,b),c=0;c<o;c++)e[t+c]=n[r+c]^u[c];return 0}function C(e,t,n,r,o){var i,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=r[s];for(;n>=64;){for(m(c,a,o,b),s=0;s<64;s++)e[t+s]=c[s];for(i=1,s=8;s<16;s++)i=i+(255&a[s])|0,a[s]=255&i,i>>>=8;n-=64,t+=64}if(n>0)for(m(c,a,o,b),s=0;s<n;s++)e[t+s]=c[s];return 0}function _(e,t,n,r,o){var i=new Uint8Array(32);y(i,r,o,b);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=r[a+16];return C(e,t,n,s,i)}function E(e,t,n,r,o,i,s){var a=new Uint8Array(32);y(a,i,s,b);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=i[l+16];return w(e,t,n,r,o,c,a)}var S=function(e){var t,n,r,o,i,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|o<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function T(e,t,n,r,o,i){var s=new S(i);return s.update(n,r,o),s.finish(e,t),0}function N(e,t,n,r,o,i){var s=new Uint8Array(16);return T(s,0,n,r,o,i),g(e,t,s,0)}function A(e,t,n,r,o){var i;if(n<32)return-1;for(E(e,0,t,0,n,r,o),T(e,16,e,32,n-32,e),i=0;i<16;i++)e[i]=0;return 0}function P(e,t,n,r,o){var i,s=new Uint8Array(32);if(n<32)return-1;if(_(s,0,32,r,o),0!==N(t,16,t,32,n-32,s))return-1;for(E(e,0,t,0,n,r,o),i=0;i<32;i++)e[i]=0;return 0}function x(e,t){var n;for(n=0;n<16;n++)e[n]=0|t[n]}function I(e){var t,n,r=1;for(t=0;t<16;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function k(e,t,n){for(var r,o=~(n-1),i=0;i<16;i++)r=o&(e[i]^t[i]),e[i]^=r,t[i]^=r}function D(e,n){var r,o,i,s=t(),a=t();for(r=0;r<16;r++)a[r]=n[r];for(I(a),I(a),I(a),o=0;o<2;o++){for(s[0]=a[0]-65517,r=1;r<15;r++)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,k(a,s,1-i)}for(r=0;r<16;r++)e[2*r]=255&a[r],e[2*r+1]=a[r]>>8}function K(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return D(n,e),D(r,t),v(n,0,r,0)}function M(e){var t=new Uint8Array(32);return D(t,e),1&t[0]}function L(e,t){var n;for(n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function U(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]+n[r]}function j(e,t,n){for(var r=0;r<16;r++)e[r]=t[r]-n[r]}function W(e,t,n){var r,o,i=0,s=0,a=0,c=0,l=0,u=0,d=0,h=0,f=0,p=0,g=0,v=0,m=0,y=0,b=0,w=0,C=0,_=0,O=0,E=0,S=0,R=0,T=0,N=0,A=0,P=0,x=0,I=0,k=0,D=0,K=0,M=n[0],L=n[1],U=n[2],j=n[3],W=n[4],B=n[5],X=n[6],H=n[7],F=n[8],q=n[9],J=n[10],z=n[11],V=n[12],$=n[13],G=n[14],Q=n[15];i+=(r=t[0])*M,s+=r*L,a+=r*U,c+=r*j,l+=r*W,u+=r*B,d+=r*X,h+=r*H,f+=r*F,p+=r*q,g+=r*J,v+=r*z,m+=r*V,y+=r*$,b+=r*G,w+=r*Q,s+=(r=t[1])*M,a+=r*L,c+=r*U,l+=r*j,u+=r*W,d+=r*B,h+=r*X,f+=r*H,p+=r*F,g+=r*q,v+=r*J,m+=r*z,y+=r*V,b+=r*$,w+=r*G,C+=r*Q,a+=(r=t[2])*M,c+=r*L,l+=r*U,u+=r*j,d+=r*W,h+=r*B,f+=r*X,p+=r*H,g+=r*F,v+=r*q,m+=r*J,y+=r*z,b+=r*V,w+=r*$,C+=r*G,_+=r*Q,c+=(r=t[3])*M,l+=r*L,u+=r*U,d+=r*j,h+=r*W,f+=r*B,p+=r*X,g+=r*H,v+=r*F,m+=r*q,y+=r*J,b+=r*z,w+=r*V,C+=r*$,_+=r*G,O+=r*Q,l+=(r=t[4])*M,u+=r*L,d+=r*U,h+=r*j,f+=r*W,p+=r*B,g+=r*X,v+=r*H,m+=r*F,y+=r*q,b+=r*J,w+=r*z,C+=r*V,_+=r*$,O+=r*G,E+=r*Q,u+=(r=t[5])*M,d+=r*L,h+=r*U,f+=r*j,p+=r*W,g+=r*B,v+=r*X,m+=r*H,y+=r*F,b+=r*q,w+=r*J,C+=r*z,_+=r*V,O+=r*$,E+=r*G,S+=r*Q,d+=(r=t[6])*M,h+=r*L,f+=r*U,p+=r*j,g+=r*W,v+=r*B,m+=r*X,y+=r*H,b+=r*F,w+=r*q,C+=r*J,_+=r*z,O+=r*V,E+=r*$,S+=r*G,R+=r*Q,h+=(r=t[7])*M,f+=r*L,p+=r*U,g+=r*j,v+=r*W,m+=r*B,y+=r*X,b+=r*H,w+=r*F,C+=r*q,_+=r*J,O+=r*z,E+=r*V,S+=r*$,R+=r*G,T+=r*Q,f+=(r=t[8])*M,p+=r*L,g+=r*U,v+=r*j,m+=r*W,y+=r*B,b+=r*X,w+=r*H,C+=r*F,_+=r*q,O+=r*J,E+=r*z,S+=r*V,R+=r*$,T+=r*G,N+=r*Q,p+=(r=t[9])*M,g+=r*L,v+=r*U,m+=r*j,y+=r*W,b+=r*B,w+=r*X,C+=r*H,_+=r*F,O+=r*q,E+=r*J,S+=r*z,R+=r*V,T+=r*$,N+=r*G,A+=r*Q,g+=(r=t[10])*M,v+=r*L,m+=r*U,y+=r*j,b+=r*W,w+=r*B,C+=r*X,_+=r*H,O+=r*F,E+=r*q,S+=r*J,R+=r*z,T+=r*V,N+=r*$,A+=r*G,P+=r*Q,v+=(r=t[11])*M,m+=r*L,y+=r*U,b+=r*j,w+=r*W,C+=r*B,_+=r*X,O+=r*H,E+=r*F,S+=r*q,R+=r*J,T+=r*z,N+=r*V,A+=r*$,P+=r*G,x+=r*Q,m+=(r=t[12])*M,y+=r*L,b+=r*U,w+=r*j,C+=r*W,_+=r*B,O+=r*X,E+=r*H,S+=r*F,R+=r*q,T+=r*J,N+=r*z,A+=r*V,P+=r*$,x+=r*G,I+=r*Q,y+=(r=t[13])*M,b+=r*L,w+=r*U,C+=r*j,_+=r*W,O+=r*B,E+=r*X,S+=r*H,R+=r*F,T+=r*q,N+=r*J,A+=r*z,P+=r*V,x+=r*$,I+=r*G,k+=r*Q,b+=(r=t[14])*M,w+=r*L,C+=r*U,_+=r*j,O+=r*W,E+=r*B,S+=r*X,R+=r*H,T+=r*F,N+=r*q,A+=r*J,P+=r*z,x+=r*V,I+=r*$,k+=r*G,D+=r*Q,w+=(r=t[15])*M,s+=38*(_+=r*U),a+=38*(O+=r*j),c+=38*(E+=r*W),l+=38*(S+=r*B),u+=38*(R+=r*X),d+=38*(T+=r*H),h+=38*(N+=r*F),f+=38*(A+=r*q),p+=38*(P+=r*J),g+=38*(x+=r*z),v+=38*(I+=r*V),m+=38*(k+=r*$),y+=38*(D+=r*G),b+=38*(K+=r*Q),i=(r=(i+=38*(C+=r*L))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),i=(r=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(r/65536)),s=(r=s+o+65535)-65536*(o=Math.floor(r/65536)),a=(r=a+o+65535)-65536*(o=Math.floor(r/65536)),c=(r=c+o+65535)-65536*(o=Math.floor(r/65536)),l=(r=l+o+65535)-65536*(o=Math.floor(r/65536)),u=(r=u+o+65535)-65536*(o=Math.floor(r/65536)),d=(r=d+o+65535)-65536*(o=Math.floor(r/65536)),h=(r=h+o+65535)-65536*(o=Math.floor(r/65536)),f=(r=f+o+65535)-65536*(o=Math.floor(r/65536)),p=(r=p+o+65535)-65536*(o=Math.floor(r/65536)),g=(r=g+o+65535)-65536*(o=Math.floor(r/65536)),v=(r=v+o+65535)-65536*(o=Math.floor(r/65536)),m=(r=m+o+65535)-65536*(o=Math.floor(r/65536)),y=(r=y+o+65535)-65536*(o=Math.floor(r/65536)),b=(r=b+o+65535)-65536*(o=Math.floor(r/65536)),w=(r=w+o+65535)-65536*(o=Math.floor(r/65536)),i+=o-1+37*(o-1),e[0]=i,e[1]=s,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=h,e[8]=f,e[9]=p,e[10]=g,e[11]=v,e[12]=m,e[13]=y,e[14]=b,e[15]=w}function B(e,t){W(e,t,t)}function X(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=253;r>=0;r--)B(o,o),2!==r&&4!==r&&W(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function H(e,n){var r,o=t();for(r=0;r<16;r++)o[r]=n[r];for(r=250;r>=0;r--)B(o,o),1!==r&&W(o,o,n);for(r=0;r<16;r++)e[r]=o[r]}function F(e,n,r){var o,i,s=new Uint8Array(32),c=new Float64Array(80),l=t(),u=t(),d=t(),h=t(),f=t(),p=t();for(i=0;i<31;i++)s[i]=n[i];for(s[31]=127&n[31]|64,s[0]&=248,L(c,r),i=0;i<16;i++)u[i]=c[i],h[i]=l[i]=d[i]=0;for(l[0]=h[0]=1,i=254;i>=0;--i)k(l,u,o=s[i>>>3]>>>(7&i)&1),k(d,h,o),U(f,l,d),j(l,l,d),U(d,u,h),j(u,u,h),B(h,f),B(p,l),W(l,d,l),W(d,u,f),U(f,l,d),j(l,l,d),B(u,l),j(d,h,p),W(l,d,a),U(l,l,h),W(d,d,l),W(l,h,p),W(h,u,c),B(u,f),k(l,u,o),k(d,h,o);for(i=0;i<16;i++)c[i+16]=l[i],c[i+32]=d[i],c[i+48]=u[i],c[i+64]=h[i];var g=c.subarray(32),v=c.subarray(16);return X(g,g),W(v,v,g),D(e,v),0}function q(e,t){return F(e,t,o)}function J(e,t){return n(t,32),q(e,t)}function z(e,t,n){var o=new Uint8Array(32);return F(o,n,t),y(e,r,o,b)}S.prototype.blocks=function(e,t,n){for(var r,o,i,s,a,c,l,u,d,h,f,p,g,v,m,y,b,w,C,_=this.fin?0:2048,O=this.h[0],E=this.h[1],S=this.h[2],R=this.h[3],T=this.h[4],N=this.h[5],A=this.h[6],P=this.h[7],x=this.h[8],I=this.h[9],k=this.r[0],D=this.r[1],K=this.r[2],M=this.r[3],L=this.r[4],U=this.r[5],j=this.r[6],W=this.r[7],B=this.r[8],X=this.r[9];n>=16;)h=d=0,h+=(O+=8191&(r=255&e[t+0]|(255&e[t+1])<<8))*k,h+=(E+=8191&(r>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*X),h+=(S+=8191&(o>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*B),h+=(R+=8191&(i>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*W),d=(h+=(T+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*j))>>>13,h&=8191,h+=(N+=a>>>1&8191)*(5*U),h+=(A+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*L),h+=(P+=8191&(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*M),h+=(x+=8191&(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*K),f=d+=(h+=(I+=u>>>5|_)*(5*D))>>>13,f+=O*D,f+=E*k,f+=S*(5*X),f+=R*(5*B),d=(f+=T*(5*W))>>>13,f&=8191,f+=N*(5*j),f+=A*(5*U),f+=P*(5*L),f+=x*(5*M),d+=(f+=I*(5*K))>>>13,f&=8191,p=d,p+=O*K,p+=E*D,p+=S*k,p+=R*(5*X),d=(p+=T*(5*B))>>>13,p&=8191,p+=N*(5*W),p+=A*(5*j),p+=P*(5*U),p+=x*(5*L),g=d+=(p+=I*(5*M))>>>13,g+=O*M,g+=E*K,g+=S*D,g+=R*k,d=(g+=T*(5*X))>>>13,g&=8191,g+=N*(5*B),g+=A*(5*W),g+=P*(5*j),g+=x*(5*U),v=d+=(g+=I*(5*L))>>>13,v+=O*L,v+=E*M,v+=S*K,v+=R*D,d=(v+=T*k)>>>13,v&=8191,v+=N*(5*X),v+=A*(5*B),v+=P*(5*W),v+=x*(5*j),m=d+=(v+=I*(5*U))>>>13,m+=O*U,m+=E*L,m+=S*M,m+=R*K,d=(m+=T*D)>>>13,m&=8191,m+=N*k,m+=A*(5*X),m+=P*(5*B),m+=x*(5*W),y=d+=(m+=I*(5*j))>>>13,y+=O*j,y+=E*U,y+=S*L,y+=R*M,d=(y+=T*K)>>>13,y&=8191,y+=N*D,y+=A*k,y+=P*(5*X),y+=x*(5*B),b=d+=(y+=I*(5*W))>>>13,b+=O*W,b+=E*j,b+=S*U,b+=R*L,d=(b+=T*M)>>>13,b&=8191,b+=N*K,b+=A*D,b+=P*k,b+=x*(5*X),w=d+=(b+=I*(5*B))>>>13,w+=O*B,w+=E*W,w+=S*j,w+=R*U,d=(w+=T*L)>>>13,w&=8191,w+=N*M,w+=A*K,w+=P*D,w+=x*k,C=d+=(w+=I*(5*X))>>>13,C+=O*X,C+=E*B,C+=S*W,C+=R*j,d=(C+=T*U)>>>13,C&=8191,C+=N*L,C+=A*M,C+=P*K,C+=x*D,O=h=8191&(d=(d=((d+=(C+=I*k)>>>13)<<2)+d|0)+(h&=8191)|0),E=f+=d>>>=13,S=p&=8191,R=g&=8191,T=v&=8191,N=m&=8191,A=y&=8191,P=b&=8191,x=w&=8191,I=C&=8191,t+=16,n-=16;this.h[0]=O,this.h[1]=E,this.h[2]=S,this.h[3]=R,this.h[4]=T,this.h[5]=N,this.h[6]=A,this.h[7]=P,this.h[8]=x,this.h[9]=I},S.prototype.finish=function(e,t){var n,r,o,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=n,n=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,s[0]=this.h[0]+5,n=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+n,n=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,r=(1^n)-1,i=0;i<10;i++)s[i]&=r;for(r=~r,i=0;i<10;i++)this.h[i]=this.h[i]&r|s[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},S.prototype.update=function(e,t,n){var r,o;if(this.leftover){for((o=16-this.leftover)>n&&(o=n),r=0;r<o;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(o=n-n%16,this.blocks(e,t,o),t+=o,n-=o),n){for(r=0;r<n;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var V=A,$=P,G=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Q(e,t,n,r){for(var o,i,s,a,c,l,u,d,h,f,p,g,v,m,y,b,w,C,_,O,E,S,R,T,N,A,P=new Int32Array(16),x=new Int32Array(16),I=e[0],k=e[1],D=e[2],K=e[3],M=e[4],L=e[5],U=e[6],j=e[7],W=t[0],B=t[1],X=t[2],H=t[3],F=t[4],q=t[5],J=t[6],z=t[7],V=0;r>=128;){for(_=0;_<16;_++)O=8*_+V,P[_]=n[O+0]<<24|n[O+1]<<16|n[O+2]<<8|n[O+3],x[_]=n[O+4]<<24|n[O+5]<<16|n[O+6]<<8|n[O+7];for(_=0;_<80;_++)if(o=I,i=k,s=D,a=K,c=M,l=L,u=U,h=W,f=B,p=X,g=H,v=F,m=q,y=J,R=65535&(S=z),T=S>>>16,N=65535&(E=j),A=E>>>16,R+=65535&(S=(F>>>14|M<<18)^(F>>>18|M<<14)^(M>>>9|F<<23)),T+=S>>>16,N+=65535&(E=(M>>>14|F<<18)^(M>>>18|F<<14)^(F>>>9|M<<23)),A+=E>>>16,R+=65535&(S=F&q^~F&J),T+=S>>>16,N+=65535&(E=M&L^~M&U),A+=E>>>16,R+=65535&(S=G[2*_+1]),T+=S>>>16,N+=65535&(E=G[2*_]),A+=E>>>16,E=P[_%16],T+=(S=x[_%16])>>>16,N+=65535&E,A+=E>>>16,N+=(T+=(R+=65535&S)>>>16)>>>16,R=65535&(S=C=65535&R|T<<16),T=S>>>16,N=65535&(E=w=65535&N|(A+=N>>>16)<<16),A=E>>>16,R+=65535&(S=(W>>>28|I<<4)^(I>>>2|W<<30)^(I>>>7|W<<25)),T+=S>>>16,N+=65535&(E=(I>>>28|W<<4)^(W>>>2|I<<30)^(W>>>7|I<<25)),A+=E>>>16,T+=(S=W&B^W&X^B&X)>>>16,N+=65535&(E=I&k^I&D^k&D),A+=E>>>16,d=65535&(N+=(T+=(R+=65535&S)>>>16)>>>16)|(A+=N>>>16)<<16,b=65535&R|T<<16,R=65535&(S=g),T=S>>>16,N=65535&(E=a),A=E>>>16,T+=(S=C)>>>16,N+=65535&(E=w),A+=E>>>16,k=o,D=i,K=s,M=a=65535&(N+=(T+=(R+=65535&S)>>>16)>>>16)|(A+=N>>>16)<<16,L=c,U=l,j=u,I=d,B=h,X=f,H=p,F=g=65535&R|T<<16,q=v,J=m,z=y,W=b,_%16==15)for(O=0;O<16;O++)E=P[O],R=65535&(S=x[O]),T=S>>>16,N=65535&E,A=E>>>16,E=P[(O+9)%16],R+=65535&(S=x[(O+9)%16]),T+=S>>>16,N+=65535&E,A+=E>>>16,w=P[(O+1)%16],R+=65535&(S=((C=x[(O+1)%16])>>>1|w<<31)^(C>>>8|w<<24)^(C>>>7|w<<25)),T+=S>>>16,N+=65535&(E=(w>>>1|C<<31)^(w>>>8|C<<24)^w>>>7),A+=E>>>16,w=P[(O+14)%16],T+=(S=((C=x[(O+14)%16])>>>19|w<<13)^(w>>>29|C<<3)^(C>>>6|w<<26))>>>16,N+=65535&(E=(w>>>19|C<<13)^(C>>>29|w<<3)^w>>>6),A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,P[O]=65535&N|A<<16,x[O]=65535&R|T<<16;R=65535&(S=W),T=S>>>16,N=65535&(E=I),A=E>>>16,E=e[0],T+=(S=t[0])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[0]=I=65535&N|A<<16,t[0]=W=65535&R|T<<16,R=65535&(S=B),T=S>>>16,N=65535&(E=k),A=E>>>16,E=e[1],T+=(S=t[1])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[1]=k=65535&N|A<<16,t[1]=B=65535&R|T<<16,R=65535&(S=X),T=S>>>16,N=65535&(E=D),A=E>>>16,E=e[2],T+=(S=t[2])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[2]=D=65535&N|A<<16,t[2]=X=65535&R|T<<16,R=65535&(S=H),T=S>>>16,N=65535&(E=K),A=E>>>16,E=e[3],T+=(S=t[3])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[3]=K=65535&N|A<<16,t[3]=H=65535&R|T<<16,R=65535&(S=F),T=S>>>16,N=65535&(E=M),A=E>>>16,E=e[4],T+=(S=t[4])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[4]=M=65535&N|A<<16,t[4]=F=65535&R|T<<16,R=65535&(S=q),T=S>>>16,N=65535&(E=L),A=E>>>16,E=e[5],T+=(S=t[5])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[5]=L=65535&N|A<<16,t[5]=q=65535&R|T<<16,R=65535&(S=J),T=S>>>16,N=65535&(E=U),A=E>>>16,E=e[6],T+=(S=t[6])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[6]=U=65535&N|A<<16,t[6]=J=65535&R|T<<16,R=65535&(S=z),T=S>>>16,N=65535&(E=j),A=E>>>16,E=e[7],T+=(S=t[7])>>>16,N+=65535&E,A+=E>>>16,A+=(N+=(T+=(R+=65535&S)>>>16)>>>16)>>>16,e[7]=j=65535&N|A<<16,t[7]=z=65535&R|T<<16,V+=128,r-=128}return r}function Y(e,t,n){var r,o=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),a=n;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,Q(o,i,t,n),n%=128,r=0;r<n;r++)s[r]=t[a-n+r];for(s[n]=128,s[(n=256-128*(n<112?1:0))-9]=0,f(s,n-8,a/536870912|0,a<<3),Q(o,i,s,n),r=0;r<8;r++)f(e,8*r,o[r],i[r]);return 0}function Z(e,n){var r=t(),o=t(),i=t(),s=t(),a=t(),c=t(),u=t(),d=t(),h=t();j(r,e[1],e[0]),j(h,n[1],n[0]),W(r,r,h),U(o,e[0],e[1]),U(h,n[0],n[1]),W(o,o,h),W(i,e[3],n[3]),W(i,i,l),W(s,e[2],n[2]),U(s,s,s),j(a,o,r),j(c,s,i),U(u,s,i),U(d,o,r),W(e[0],a,c),W(e[1],d,u),W(e[2],u,c),W(e[3],a,d)}function ee(e,t,n){var r;for(r=0;r<4;r++)k(e[r],t[r],n)}function te(e,n){var r=t(),o=t(),i=t();X(i,n[2]),W(r,n[0],i),W(o,n[1],i),D(e,o),e[31]^=M(r)<<7}function ne(e,t,n){var r,o;for(x(e[0],i),x(e[1],s),x(e[2],s),x(e[3],i),o=255;o>=0;--o)ee(e,t,r=n[o/8|0]>>(7&o)&1),Z(t,e),Z(e,e),ee(e,t,r)}function re(e,n){var r=[t(),t(),t(),t()];x(r[0],u),x(r[1],d),x(r[2],s),W(r[3],u,d),ne(e,r,n)}function oe(e,r,o){var i,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(o||n(r,32),Y(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,re(a,s),te(e,a),i=0;i<32;i++)r[i+32]=e[i];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function se(e,t){var n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)t[o]+=n-16*t[r]*ie[o-(r-32)],n=Math.floor((t[o]+128)/256),t[o]-=256*n;t[o]+=n,t[r]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*ie[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*ie[o];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function ae(e){var t,n=new Float64Array(64);for(t=0;t<64;t++)n[t]=e[t];for(t=0;t<64;t++)e[t]=0;se(e,n)}function ce(e,n,r,o){var i,s,a=new Uint8Array(64),c=new Uint8Array(64),l=new Uint8Array(64),u=new Float64Array(64),d=[t(),t(),t(),t()];Y(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var h=r+64;for(i=0;i<r;i++)e[64+i]=n[i];for(i=0;i<32;i++)e[32+i]=a[32+i];for(Y(l,e.subarray(32),r+32),ae(l),re(d,l),te(e,d),i=32;i<64;i++)e[i]=o[i];for(Y(c,e,r+64),ae(c),i=0;i<64;i++)u[i]=0;for(i=0;i<32;i++)u[i]=l[i];for(i=0;i<32;i++)for(s=0;s<32;s++)u[i+s]+=c[i]*a[s];return se(e.subarray(32),u),h}function le(e,n,r,o){var a,l=new Uint8Array(32),u=new Uint8Array(64),d=[t(),t(),t(),t()],f=[t(),t(),t(),t()];if(r<64)return-1;if(function(e,n){var r=t(),o=t(),a=t(),l=t(),u=t(),d=t(),f=t();return x(e[2],s),L(e[1],n),B(a,e[1]),W(l,a,c),j(a,a,e[2]),U(l,e[2],l),B(u,l),B(d,u),W(f,d,u),W(r,f,a),W(r,r,l),H(r,r),W(r,r,a),W(r,r,l),W(r,r,l),W(e[0],r,l),B(o,e[0]),W(o,o,l),K(o,a)&&W(e[0],e[0],h),B(o,e[0]),W(o,o,l),K(o,a)?-1:(M(e[0])===n[31]>>7&&j(e[0],i,e[0]),W(e[3],e[0],e[1]),0)}(f,o))return-1;for(a=0;a<r;a++)e[a]=n[a];for(a=0;a<32;a++)e[a+32]=o[a];if(Y(u,e,r),ae(u),ne(d,f,u),re(f,n.subarray(32)),Z(d,f),te(l,d),r-=64,v(n,0,l,0)){for(a=0;a<r;a++)e[a]=0;return-1}for(a=0;a<r;a++)e[a]=n[a+64];return r}var ue=16,de=64,he=32,fe=64;function pe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function ge(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ve(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:y,crypto_stream_xor:E,crypto_stream:_,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:C,crypto_onetimeauth:T,crypto_onetimeauth_verify:N,crypto_verify_16:g,crypto_verify_32:v,crypto_secretbox:A,crypto_secretbox_open:P,crypto_scalarmult:F,crypto_scalarmult_base:q,crypto_box_beforenm:z,crypto_box_afternm:V,crypto_box:function(e,t,n,r,o,i){var s=new Uint8Array(32);return z(s,o,i),V(e,t,n,r,s)},crypto_box_open:function(e,t,n,r,o,i){var s=new Uint8Array(32);return z(s,o,i),$(e,t,n,r,s)},crypto_box_keypair:J,crypto_hash:Y,crypto_sign:ce,crypto_sign_keypair:oe,crypto_sign_open:le,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:de,crypto_sign_PUBLICKEYBYTES:he,crypto_sign_SECRETKEYBYTES:fe,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:c,L:ie,pack25519:D,unpack25519:L,M:W,A:U,S:B,Z:j,pow2523:H,add:Z,set25519:x,modL:se,scalarmult:ne,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,n){ge(e,t,n),pe(n,t);for(var r=new Uint8Array(32+e.length),o=new Uint8Array(r.length),i=0;i<e.length;i++)r[i+32]=e[i];return A(o,r,r.length,t,n),o.subarray(ue)},e.secretbox.open=function(e,t,n){ge(e,t,n),pe(n,t);for(var r=new Uint8Array(ue+e.length),o=new Uint8Array(r.length),i=0;i<e.length;i++)r[i+ue]=e[i];return r.length<32||0!==P(o,r,r.length,t,n)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ue,e.scalarMult=function(e,t){if(ge(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var n=new Uint8Array(32);return F(n,e,t),n},e.scalarMult.base=function(e){if(ge(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return q(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,n,r,o){var i=e.box.before(r,o);return e.secretbox(t,n,i)},e.box.before=function(e,t){ge(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var n=new Uint8Array(32);return z(n,e,t),n},e.box.after=e.secretbox,e.box.open=function(t,n,r,o){var i=e.box.before(r,o);return e.secretbox.open(t,n,i)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return J(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(ge(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return q(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(ge(e,t),t.length!==fe)throw new Error("bad secret key size");var n=new Uint8Array(de+e.length);return ce(n,e,e.length,t),n},e.sign.open=function(e,t){if(ge(e,t),t.length!==he)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=le(n,e,e.length,t);if(r<0)return null;for(var o=new Uint8Array(r),i=0;i<o.length;i++)o[i]=n[i];return o},e.sign.detached=function(t,n){for(var r=e.sign(t,n),o=new Uint8Array(de),i=0;i<o.length;i++)o[i]=r[i];return o},e.sign.detached.verify=function(e,t,n){if(ge(e,t,n),t.length!==de)throw new Error("bad signature size");if(n.length!==he)throw new Error("bad public key size");var r,o=new Uint8Array(de+e.length),i=new Uint8Array(de+e.length);for(r=0;r<de;r++)o[r]=t[r];for(r=0;r<e.length;r++)o[r+de]=e[r];return le(i,o,o.length,n)>=0},e.sign.keyPair=function(){var e=new Uint8Array(he),t=new Uint8Array(fe);return oe(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(ge(e),e.length!==fe)throw new Error("bad secret key size");for(var t=new Uint8Array(he),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(ge(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(he),n=new Uint8Array(fe),r=0;r<32;r++)n[r]=e[r];return oe(t,n,!0),{publicKey:t,secretKey:n}},e.sign.publicKeyLength=he,e.sign.secretKeyLength=fe,e.sign.seedLength=32,e.sign.signatureLength=de,e.hash=function(e){ge(e);var t=new Uint8Array(64);return Y(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return ge(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){n=e},function(){var t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&t.getRandomValues?e.setPRNG((function(e,n){var r,o=new Uint8Array(n);for(r=0;r<n;r+=65536)t.getRandomValues(o.subarray(r,r+Math.min(n-r,65536)));for(r=0;r<n;r++)e[r]=o[r];ve(o)})):void 0!==O&&(t=R)&&t.randomBytes&&e.setPRNG((function(e,n){var r,o=t.randomBytes(n);for(r=0;r<n;r++)e[r]=o[r];ve(o)}))}()}((e=S).exports?e.exports:self.nacl=self.nacl||{})),S.exports;var e}var N,A={},P={exports:{}},x=P.exports;var I=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==n[s])throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*l+1>>>0,s=new Uint8Array(i);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=i-1;(0!==u||d<o)&&-1!==h;h--,d++)u+=a*s[h]>>>0,s[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=i-o;f!==i&&0===s[f];)f++;for(var p=new Uint8Array(r+(i-f)),g=r;f!==i;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var s=(i-o)*u+1>>>0,l=new Uint8Array(s);o!==i;){for(var d=t[o],h=0,f=s-1;(0!==d||h<r)&&-1!==f;f--,h++)d+=256*l[f]>>>0,l[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,o++}for(var p=s-r;p!==s&&0===l[p];)p++;for(var g=c.repeat(n);p<s;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}},k=I;let D=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},K=class{constructor(e,t,n){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return L(this,e)}},M=class{constructor(e){this.decoders=e}or(e){return L(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const L=(e,t)=>new M({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});let U=class{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new D(e,t,n),this.decoder=new K(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const j=({name:e,prefix:t,encode:n,decode:r})=>new U(e,t,n,r),W=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=k(n,t);return j({prefix:e,name:t,encode:r,decode:e=>(e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")})(o(e))})},B=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>j({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let u=0;u<t.length;++u)o[t[u]]=u;let i=e.length;for(;"="===e[i-1];)--i;const s=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const t=o[e[u]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);c=c<<n|t,a+=n,a>=8&&(a-=8,s[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,r,n,e)}),X=j({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var H=Object.freeze({__proto__:null,identity:X});const F=B({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var q=Object.freeze({__proto__:null,base2:F});const J=B({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var z=Object.freeze({__proto__:null,base8:J});const V=W({prefix:"9",name:"base10",alphabet:"0123456789"});var $=Object.freeze({__proto__:null,base10:V});const G=B({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Q=B({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Y=Object.freeze({__proto__:null,base16:G,base16upper:Q});const Z=B({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ee=B({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),te=B({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ne=B({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),re=B({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),oe=B({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ie=B({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),se=B({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ae=B({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ce=Object.freeze({__proto__:null,base32:Z,base32hex:re,base32hexpad:ie,base32hexpadupper:se,base32hexupper:oe,base32pad:te,base32padupper:ne,base32upper:ee,base32z:ae});const le=W({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ue=W({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var de=Object.freeze({__proto__:null,base36:le,base36upper:ue});const he=W({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fe=W({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var pe=Object.freeze({__proto__:null,base58btc:he,base58flickr:fe});const ge=B({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ve=B({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),me=B({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ye=B({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var be=Object.freeze({__proto__:null,base64:ge,base64pad:ve,base64url:me,base64urlpad:ye});const we=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Ce=we.reduce(((e,t,n)=>(e[n]=t,e)),[]),_e=we.reduce(((e,t,n)=>(e[t.codePointAt(0)]=n,e)),[]);const Oe=j({prefix:"ðŸš€",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Ce[t]),"")},decode:function(e){const t=[];for(const n of e){const e=_e[n.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${n}`);t.push(e)}return new Uint8Array(t)}});var Ee=Object.freeze({__proto__:null,base256emoji:Oe});new TextEncoder,new TextDecoder;const Se={...H,...q,...z,...$,...Y,...ce,...de,...pe,...be,...Ee};function Re(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const Te=Re("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Ne=Re("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),Ae={utf8:Te,"utf-8":Te,hex:Se.base16,latin1:Ne,ascii:Ne,binary:Ne,...Se};var Pe,xe,Ie=Object.freeze({__proto__:null,toString:function(e,t="utf8"){const n=Ae[t];if(!n)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?n.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}}),ke=h(Ie),De={},Ke={},Me={};function Le(){if(xe)return Ke;xe=1,Object.defineProperty(Ke,"__esModule",{value:!0});var e,t=(Pe||(Pe=1,e=Me,Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0},e.add=function(e,t){return e+t|0},e.sub=function(e,t){return e-t|0},e.rotl=function(e,t){return e<<t|e>>>32-t},e.rotr=function(e,t){return e<<32-t|e>>>t},e.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}),Me);function n(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>8,t[n+1]=e>>>0,t}function r(e,t,n){return void 0===t&&(t=new Uint8Array(2)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function i(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function s(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function a(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function c(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>24,t[n+1]=e>>>16,t[n+2]=e>>>8,t[n+3]=e>>>0,t}function l(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),t[n+0]=e>>>0,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24,t}function u(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),c(e/4294967296>>>0,t,n),c(e>>>0,t,n+4),t}function d(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),l(e>>>0,t,n),l(e/4294967296>>>0,t,n+4),t}return Ke.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},Ke.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},Ke.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},Ke.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},Ke.writeUint16BE=n,Ke.writeInt16BE=n,Ke.writeUint16LE=r,Ke.writeInt16LE=r,Ke.readInt32BE=o,Ke.readUint32BE=i,Ke.readInt32LE=s,Ke.readUint32LE=a,Ke.writeUint32BE=c,Ke.writeInt32BE=c,Ke.writeUint32LE=l,Ke.writeInt32LE=l,Ke.readInt64BE=function(e,t){void 0===t&&(t=0);var n=o(e,t),r=o(e,t+4);return 4294967296*n+r-4294967296*(r>>31)},Ke.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*i(e,t)+i(e,t+4)},Ke.readInt64LE=function(e,t){void 0===t&&(t=0);var n=s(e,t);return 4294967296*s(e,t+4)+n-4294967296*(n>>31)},Ke.readUint64LE=function(e,t){void 0===t&&(t=0);var n=a(e,t);return 4294967296*a(e,t+4)+n},Ke.writeUint64BE=u,Ke.writeInt64BE=u,Ke.writeUint64LE=d,Ke.writeInt64LE=d,Ke.readUintBE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,o=1,i=e/8+n-1;i>=n;i--)r+=t[i]*o,o*=256;return r},Ke.readUintLE=function(e,t,n){if(void 0===n&&(n=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,o=1,i=n;i<n+e/8;i++)r+=t[i]*o,o*=256;return r},Ke.writeUintBE=function(e,n,r,o){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===o&&(o=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!t.isSafeInteger(n))throw new Error("writeUintBE value must be an integer");for(var i=1,s=e/8+o-1;s>=o;s--)r[s]=n/i&255,i*=256;return r},Ke.writeUintLE=function(e,n,r,o){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===o&&(o=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!t.isSafeInteger(n))throw new Error("writeUintLE value must be an integer");for(var i=1,s=o;s<o+e/8;s++)r[s]=n/i&255,i*=256;return r},Ke.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},Ke.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},Ke.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},Ke.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},Ke.writeFloat32BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e),t},Ke.writeFloat32LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(4)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),t},Ke.writeFloat64BE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e),t},Ke.writeFloat64LE=function(e,t,n){return void 0===t&&(t=new Uint8Array(8)),void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),t},Ke}var Ue,je,We={};function Be(){if(Ue)return We;return Ue=1,Object.defineProperty(We,"__esModule",{value:!0}),We.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e},We}var Xe,He={},Fe={},qe={},Je={exports:{}};function ze(){return Xe||(Xe=1,function(e,t){var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==u&&u,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==u&&u||{},r="URLSearchParams"in n,o="Symbol"in n&&"iterator"in Symbol,i="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(AO){return!1}}(),s="FormData"in n,a="ArrayBuffer"in n;if(a)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=g(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,o,i=g(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=v(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8",t.readAsText(e,o),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=h(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C(e,t){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,o,i=(t=t||{}).body;if(e instanceof C){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),w.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function O(e,t){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})},b.call(C.prototype),b.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},O.error=function(){var e=new O(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var E=[301,302,303,307,308];O.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new O(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(R){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,r){return new Promise((function(o,s){var c=new C(e,r);if(c.signal&&c.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function u(){l.abort()}if(l.onload=function(){var e,t,n={statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(Ye){console.warn("Response "+Ye.message)}}})),t)};0===c.url.indexOf("file://")&&(l.status<200||l.status>599)?n.status=200:n.status=l.status,n.url="responseURL"in l?l.responseURL:n.headers.get("X-Request-URL");var r="response"in l?l.response:l.responseText;setTimeout((function(){o(new O(r,n))}),0)},l.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},l.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},l.open(c.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(AO){return e}}(c.url),!0),"include"===c.credentials?l.withCredentials=!0:"omit"===c.credentials&&(l.withCredentials=!1),"responseType"in l&&(i?l.responseType="blob":a&&(l.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||n.Headers&&r.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){f.push(d(e)),l.setRequestHeader(e,h(r.headers[e]))})),c.headers.forEach((function(e,t){-1===f.indexOf(t)&&l.setRequestHeader(t,e)}))}else c.headers.forEach((function(e,t){l.setRequestHeader(t,e)}));c.signal&&(c.signal.addEventListener("abort",u),l.onreadystatechange=function(){4===l.readyState&&c.signal.removeEventListener("abort",u)}),l.send(void 0===c._bodyInit?null:c._bodyInit)}))}S.polyfill=!0,n.fetch||(n.fetch=S,n.Headers=p,n.Request=C,n.Response=O),t.Headers=p,t.Request=C,t.Response=O,t.fetch=S}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=n.fetch?n:r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(Je,Je.exports)),Je.exports}var Ve,$e,Ge={},Qe={},Ye={},Ze={};function et(){return Ve||(Ve=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ERROR=e.STANDARD_ERROR_MAP=e.SERVER_ERROR_CODE_RANGE=e.RESERVED_ERROR_CODES=e.SERVER_ERROR=e.INTERNAL_ERROR=e.INVALID_PARAMS=e.METHOD_NOT_FOUND=e.INVALID_REQUEST=e.PARSE_ERROR=e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;class t extends Error{constructor(e,r){null==r&&(r=function(e){if(e==n.UNKNOWN_ERROR)return"unknown error";if(e==n.BAD_REQUEST_ERROR)return"bad request error";if(e==n.ALREADY_CONNECTED_ERROR)return"already connected error";if(e==n.NOT_CONNECTED_ERROR)return"not connected error";if(e==n.UNKNOWN_APP_ERROR)return"unknown app error";if(e==n.USER_REJECTS_ERROR)return"user rejects error";if(e==n.USER_REJECTS_ERROR_CAUSE_REGISTER)return"wallet address are registering";if(e==n.METHOD_NOT_SUPPORTED)return"method not supported";if(e==n.CONNECTION_ERROR)return"connect error";if(e==n.CHAIN_NOT_SUPPORTED)return"chain not supported";return"unknown error"}(e)),super(r),this.code=e,this.message=`${t.prefix} ${r?"\n"+r:""}`,Object.setPrototypeOf(this,t.prototype)}toJSON(){return{message:this.message,code:this.code}}}var n;e.OKXConnectError=t,t.prefix="[OKX_CONNECT_SDK_ERROR]",function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",e[e.ALREADY_CONNECTED_ERROR=11]="ALREADY_CONNECTED_ERROR",e[e.NOT_CONNECTED_ERROR=12]="NOT_CONNECTED_ERROR",e[e.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",e[e.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",e[e.USER_REJECTS_ERROR_CAUSE_REGISTER=301]="USER_REJECTS_ERROR_CAUSE_REGISTER",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",e[e.CHAIN_NOT_SUPPORTED=500]="CHAIN_NOT_SUPPORTED",e[e.WALLET_NOT_SUPPORTED=600]="WALLET_NOT_SUPPORTED",e[e.CONNECTION_ERROR=700]="CONNECTION_ERROR"}(n||(e.OKX_CONNECT_ERROR_CODES=n={})),e.PARSE_ERROR="PARSE_ERROR",e.INVALID_REQUEST="INVALID_REQUEST",e.METHOD_NOT_FOUND="METHOD_NOT_FOUND",e.INVALID_PARAMS="INVALID_PARAMS",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],e.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],e.STANDARD_ERROR_MAP={[e.PARSE_ERROR]:{code:-32700,message:"Parse error"},[e.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[e.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[e.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[e.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[e.SERVER_ERROR]:{code:-32e3,message:"Server error"}},e.DEFAULT_ERROR=e.SERVER_ERROR}(Ze)),Ze}var tt,nt={};var rt,ot={};function it(){return rt||(rt=1,e=ot,Object.defineProperty(e,"__esModule",{value:!0}),e.OKX_MINI_WALLET_NAME=e.OKX_APP_WALLET_NAME=e.stackDeepLink=e.tgwalletAppName=e.tgwalletName=e.tonConnectSdkVersion=e.shortUniversalLink=e.standardDeeplink=e.downloadUrl=e.standardUniversalLink=e.okxDeeplink=void 0,e.getTestTwaUrl=function(){return window.okxTesttwaUrl},e.getTestTgTwaUrl=function(){return window.okxTestTgtwaUrl},e.getBotNameAndAppName=function(e){const t=new URL(e),n=t.pathname.split("/").filter(Boolean);if(n.length>=2)return{botName:n[0],appName:n[1]}},e.okxDeeplink="okx://web3",e.standardUniversalLink="undefined"!=typeof window&&window.location.hostname.includes("okx.com")?"https://link.okx.com/download":"https://www.okx.com/download",e.downloadUrl="https://www.okx.com/download",e.standardDeeplink=`${e.okxDeeplink}/wallet/connect`,e.shortUniversalLink="https://www.okx.com/ul/connect",e.tonConnectSdkVersion="1",e.tgwalletName="OKX_WALLET_BOT",e.tgwalletAppName="start",e.stackDeepLink="okx://web3?stack=true",e.OKX_APP_WALLET_NAME="OKX Wallet",e.OKX_MINI_WALLET_NAME="OKX Mini Wallet"),ot;var e}var st,at={},ct={};function lt(){if(st)return ct;st=1;var e=ct.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function t(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function n(e){return"result"in e}function r(e){return"error"in e}Object.defineProperty(ct,"__esModule",{value:!0}),ct.isJsonRpcPayload=t,ct.isJsonRpcRequest=function(e){return t(e)&&"method"in e},ct.isJsonRpcResponse=function(e){return t(e)&&(n(e)||r(e))},ct.isJsonRpcResult=n,ct.isJsonRpcError=r,ct.payloadId=l,ct.getBigIntRpcId=function(){const e=BigInt(Date.now())*BigInt(1e6),t=BigInt(c.getNextValue());return e+t},ct.formatJsonRpcRequest=function(e,t,n){return{id:n||l(),jsonrpc:"2.0",method:e,params:t}},ct.formatJsonRpcResult=function(e,t){return{id:e,jsonrpc:"2.0",result:t}},ct.formatJsonRpcError=function(e,t,n){return{id:e,jsonrpc:"2.0",error:f(t,n)}},ct.isReservedErrorCode=u,ct.getError=d,ct.getErrorByCode=h,ct.formatErrorMessage=f,ct.isHttpUrl=function(e){return p(e,"^https?:")},ct.isWsUrl=function(e){return p(e,"^wss?:")},ct.parseConnectionError=function(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e};const o=et(),i=e(T());class s{constructor(e){this.i=1,this.initialValue=e?i.default.randomBytes(e/8)[0]:0}getNextValue(){return this.initialValue+this.i++}}const a=new s(8),c=new s(16);function l(){return 1e3*Date.now()+a.getNextValue()}function u(e){return o.RESERVED_ERROR_CODES.includes(e)}function d(e){return Object.keys(o.STANDARD_ERROR_MAP).includes(e)?o.STANDARD_ERROR_MAP[e]:o.STANDARD_ERROR_MAP[o.DEFAULT_ERROR]}function h(e){const t=Object.values(o.STANDARD_ERROR_MAP).find((t=>t.code===e));return t||o.STANDARD_ERROR_MAP[o.DEFAULT_ERROR]}function f(e,t){return void 0===e?d(o.INTERNAL_ERROR):("string"==typeof e&&(e=Object.assign(Object.assign({},d(o.SERVER_ERROR)),{message:e})),void 0!==t&&(e.data=t),u(e.code)&&(e=h(e.code)),e)}function p(e,t){const n=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==n&&new RegExp(t).test(n)}return ct}var ut,dt,ht={},ft={exports:{}};function pt(){return ut||(ut=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,i),!0;case 6:return u.fn.call(u.context,t,r,o,i,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,o);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&l.push(a[c]);l.length?this._events[i]=1===l.length?l[0]:l:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(ft)),ft.exports}var gt,vt={},mt={};var yt,bt,wt={};function Ct(){return bt||(bt=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CONNECT_ITEM_ERROR_CODES=e.TONCHAIN=void 0;var t,n=(gt||(gt=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.TONCHAIN=void 0,function(e){e.MAINNET="-239"}(t||(mt.TONCHAIN=t={}))),mt);Object.defineProperty(e,"TONCHAIN",{enumerable:!0,get:function(){return n.TONCHAIN}});var r,o=(yt||(yt=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.CONNECT_ITEM_ERROR_CODES=void 0,function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"}(r||(wt.CONNECT_ITEM_ERROR_CODES=r={}))),wt);Object.defineProperty(e,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return o.CONNECT_ITEM_ERROR_CODES}})}(vt)),vt}var _t,Ot,Et={};function St(){return _t||(_t=1,e=Et,Object.defineProperty(e,"__esModule",{value:!0}),e.OKXInjectWalletName=e.OKXMiniWalletName=e.OKXWalletName=void 0,e.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:e.OKXWalletName,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png"}},e.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:e.OKXMiniWalletName,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png"}},e.creatOKXInjectWalletInfo=function(){return{appName:"okxInjectWallet",name:e.OKXInjectWalletName,imageUrl:""}},e.OKXWalletName="OKX Wallet",e.OKXMiniWalletName="OKX Mini Wallet",e.OKXInjectWalletName="OKX Inject Wallet"),Et;var e}function Rt(){return Ot||(Ot=1,function(e){var t=at.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=at.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXWalletName=e.creatOKXInjectWalletInfo=e.creatOKXMiniAppWalletInfo=e.creatOKXWalletInfo=e.ISignClientEvents=e.IEngine=e.IEngineEvents=e.ISignClient=e.getBigIntRpcId=e.formatJsonRpcRequest=e.isJsonRpcError=e.isJsonRpcResponse=e.parseConnectionError=e.isHttpUrl=e.formatJsonRpcError=void 0;var r=lt();Object.defineProperty(e,"formatJsonRpcError",{enumerable:!0,get:function(){return r.formatJsonRpcError}}),Object.defineProperty(e,"isHttpUrl",{enumerable:!0,get:function(){return r.isHttpUrl}}),Object.defineProperty(e,"parseConnectionError",{enumerable:!0,get:function(){return r.parseConnectionError}}),Object.defineProperty(e,"isJsonRpcResponse",{enumerable:!0,get:function(){return r.isJsonRpcResponse}}),Object.defineProperty(e,"isJsonRpcError",{enumerable:!0,get:function(){return r.isJsonRpcError}}),Object.defineProperty(e,"formatJsonRpcRequest",{enumerable:!0,get:function(){return r.formatJsonRpcRequest}}),Object.defineProperty(e,"getBigIntRpcId",{enumerable:!0,get:function(){return r.getBigIntRpcId}});var o=function(){if(dt)return ht;dt=1;var e=ht.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ht,"__esModule",{value:!0}),ht.IEngine=ht.ISignClient=ht.ISignClientEvents=ht.IEngineEvents=void 0;const t=e(pt());class n extends t.default{constructor(){super()}}ht.IEngineEvents=n;class r extends t.default{constructor(){super()}}return ht.ISignClientEvents=r,ht.ISignClient=class{constructor(e){this.data=e}},ht.IEngine=class{constructor(e){this.client=e}},ht}();Object.defineProperty(e,"ISignClient",{enumerable:!0,get:function(){return o.ISignClient}}),Object.defineProperty(e,"IEngineEvents",{enumerable:!0,get:function(){return o.IEngineEvents}}),Object.defineProperty(e,"IEngine",{enumerable:!0,get:function(){return o.IEngine}}),Object.defineProperty(e,"ISignClientEvents",{enumerable:!0,get:function(){return o.ISignClientEvents}}),n(Ct(),e);var i=St();Object.defineProperty(e,"creatOKXWalletInfo",{enumerable:!0,get:function(){return i.creatOKXWalletInfo}}),Object.defineProperty(e,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return i.creatOKXMiniAppWalletInfo}}),Object.defineProperty(e,"creatOKXInjectWalletInfo",{enumerable:!0,get:function(){return i.creatOKXInjectWalletInfo}}),Object.defineProperty(e,"OKXWalletName",{enumerable:!0,get:function(){return i.OKXWalletName}})}(at)),at}var Tt,Nt,At={};function Pt(){return Nt||(Nt=1,function(e){var t=Qe.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Qe.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.TON_CHAINS=e.COSMOS_CHAINS=e.APTOS_CHAINS=e.SUI_CHAINS=e.SOLANA_CHAINS=e.BTC_CHAINS=e.downloadUrl=e.okxDeeplink=e.tonConnectSdkVersion=e.standardDeeplink=e.standardUniversalLink=e.NameSpaceKeyStarknet=e.NameSpaceKeyTron=e.NameSpaceKeyCosmos=e.NameSpaceKeyAptos=e.NameSpaceKeyBtc=e.NameSpaceKeySui=e.NameSpaceKeyTON=e.NameSpaceKeySOL=e.NameSpaceKeyEip155=void 0,n(($e||($e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OKX_CONNECT_ERROR_CODES=e.OKXConnectError=void 0;var t=et();Object.defineProperty(e,"OKXConnectError",{enumerable:!0,get:function(){return t.OKXConnectError}}),Object.defineProperty(e,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return t.OKX_CONNECT_ERROR_CODES}})}(Ye)),Ye),e);var r=(tt||(tt=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.NameSpaceKeyStarknet=nt.NameSpaceKeyTron=nt.NameSpaceKeyCosmos=nt.NameSpaceKeyAptos=nt.NameSpaceKeyBtc=nt.NameSpaceKeySui=nt.NameSpaceKeyTON=nt.NameSpaceKeySOL=nt.NameSpaceKeyEip155=void 0,nt.NameSpaceKeyEip155="eip155",nt.NameSpaceKeySOL="solana",nt.NameSpaceKeyTON="ton",nt.NameSpaceKeySui="sui",nt.NameSpaceKeyBtc="btc",nt.NameSpaceKeyAptos="aptos",nt.NameSpaceKeyCosmos="cosmos",nt.NameSpaceKeyTron="tron",nt.NameSpaceKeyStarknet="starknet"),nt);Object.defineProperty(e,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return r.NameSpaceKeyEip155}}),Object.defineProperty(e,"NameSpaceKeySOL",{enumerable:!0,get:function(){return r.NameSpaceKeySOL}}),Object.defineProperty(e,"NameSpaceKeyTON",{enumerable:!0,get:function(){return r.NameSpaceKeyTON}}),Object.defineProperty(e,"NameSpaceKeySui",{enumerable:!0,get:function(){return r.NameSpaceKeySui}}),Object.defineProperty(e,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return r.NameSpaceKeyBtc}}),Object.defineProperty(e,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return r.NameSpaceKeyAptos}}),Object.defineProperty(e,"NameSpaceKeyCosmos",{enumerable:!0,get:function(){return r.NameSpaceKeyCosmos}}),Object.defineProperty(e,"NameSpaceKeyTron",{enumerable:!0,get:function(){return r.NameSpaceKeyTron}}),Object.defineProperty(e,"NameSpaceKeyStarknet",{enumerable:!0,get:function(){return r.NameSpaceKeyStarknet}});var o=it();Object.defineProperty(e,"standardUniversalLink",{enumerable:!0,get:function(){return o.standardUniversalLink}}),Object.defineProperty(e,"standardDeeplink",{enumerable:!0,get:function(){return o.standardDeeplink}}),Object.defineProperty(e,"tonConnectSdkVersion",{enumerable:!0,get:function(){return o.tonConnectSdkVersion}}),Object.defineProperty(e,"okxDeeplink",{enumerable:!0,get:function(){return o.okxDeeplink}}),Object.defineProperty(e,"downloadUrl",{enumerable:!0,get:function(){return o.downloadUrl}}),n(Rt(),e);var i=(Tt||(Tt=1,Object.defineProperty(At,"__esModule",{value:!0}),At.TON_CHAINS=At.COSMOS_CHAINS=At.APTOS_CHAINS=At.SUI_CHAINS=At.SOLANA_CHAINS=At.BTC_CHAINS=void 0,At.BTC_CHAINS={MAINNET:"btc:mainnet",FRACTAL:"fractal:mainnet"},At.SOLANA_CHAINS={MAINNET:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",TESTNET:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",SONIC_TESTNET:"sonic:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"},At.SUI_CHAINS={MAINNET:"sui:mainnet"},At.APTOS_CHAINS={MAINNET:"aptos:mainnet"},At.COSMOS_CHAINS={COSMOS_MAINNET:"cosmos:cosmoshub-4"},At.TON_CHAINS={MAINNET:"ton:-239"}),At);Object.defineProperty(e,"BTC_CHAINS",{enumerable:!0,get:function(){return i.BTC_CHAINS}}),Object.defineProperty(e,"SOLANA_CHAINS",{enumerable:!0,get:function(){return i.SOLANA_CHAINS}}),Object.defineProperty(e,"SUI_CHAINS",{enumerable:!0,get:function(){return i.SUI_CHAINS}}),Object.defineProperty(e,"APTOS_CHAINS",{enumerable:!0,get:function(){return i.APTOS_CHAINS}}),Object.defineProperty(e,"COSMOS_CHAINS",{enumerable:!0,get:function(){return i.COSMOS_CHAINS}}),Object.defineProperty(e,"TON_CHAINS",{enumerable:!0,get:function(){return i.TON_CHAINS}})}(Qe)),Qe}var xt,It,kt,Dt,Kt={},Mt={},Lt={exports:{}},Ut=Lt.exports;function jt(){return xt||(xt=1,e=Lt,t=Lt.exports,function(n,r){var o="function",i="undefined",s="object",a="string",c="major",l="model",u="name",d="type",h="vendor",f="version",p="architecture",g="console",v="mobile",m="tablet",y="smarttv",b="wearable",w="embedded",C="Amazon",_="Apple",O="ASUS",E="BlackBerry",S="Browser",R="Chrome",T="Firefox",N="Google",A="Huawei",P="LG",x="Microsoft",I="Motorola",k="Opera",D="Samsung",K="Sharp",M="Sony",L="Xiaomi",U="Zebra",j="Facebook",W="Chromium OS",B="Mac OS",X=" Browser",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},F=function(e,t){return typeof e===a&&-1!==q(t).indexOf(q(e))},q=function(e){return e.toLowerCase()},J=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===i?e:e.substring(0,500)},z=function(e,t){for(var n,i,a,c,l,u,d=0;d<t.length&&!l;){var h=t[d],f=t[d+1];for(n=i=0;n<h.length&&!l&&h[n];)if(l=h[n++].exec(e))for(a=0;a<f.length;a++)u=l[++i],typeof(c=f[a])===s&&c.length>0?2===c.length?typeof c[1]==o?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3===c.length?typeof c[1]!==o||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):r:this[c[0]]=u?c[1].call(this,u,c[2]):r:4===c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):r):this[c]=u||r;d+=2}},V=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var o=0;o<t[n].length;o++)if(F(t[n][o],e))return"?"===n?r:n}else if(F(t[n],e))return"?"===n?r:n;return t.hasOwnProperty("*")?t["*"]:e},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,f],[/opios[\/ ]+([\w\.]+)/i],[f,[u,k+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[u,k+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[u,k]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[u,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[f,[u,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[u,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[u,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[u,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[u,"UC"+S]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[u,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[u,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[u,"Smart Lenovo "+S]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+S],f],[/\bfocus\/([\w\.]+)/i],[f,[u,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[u,k+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[u,k+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[u,"MIUI"+X]],[/fxios\/([\w\.-]+)/i],[f,[u,T]],[/\bqihoobrowser\/?([\w\.]*)/i],[f,[u,"360"]],[/\b(qq)\/([\w\.]+)/i],[[u,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1"+X],f],[/samsungbrowser\/([\w\.]+)/i],[f,[u,D+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[f,[u,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[u,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[u,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[u],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[f,u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,j],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[u,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[u,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[u,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[u,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,R+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[u,"Android "+S]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[f,V,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],f],[/(wolvic|librewolf)\/([\w\.]+)/i],[u,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[u,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[u,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[u,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,q]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",q]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[h,D],[d,m]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[l,[h,D],[d,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[h,_],[d,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[h,_],[d,m]],[/(macintosh);/i],[l,[h,_]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[h,K],[d,v]],[/(?:honor)([-\w ]+)[;\)]/i],[l,[h,"Honor"],[d,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[h,A],[d,m]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[h,A],[d,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[l,/_/g," "],[h,L],[d,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[h,L],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[h,"OPPO"],[d,v]],[/\b(opd2\d{3}a?) bui/i],[l,[h,"OPPO"],[d,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[h,"Vivo"],[d,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[h,"Realme"],[d,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[h,I],[d,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[h,I],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[h,P],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[h,P],[d,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[h,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[h,"Nokia"],[d,v]],[/(pixel c)\b/i],[l,[h,N],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[h,N],[d,v]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[h,M],[d,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[h,M],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[h,"OnePlus"],[d,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[h,C],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[h,C],[d,v]],[/(playbook);[-\w\),; ]+(rim)/i],[l,h,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[h,E],[d,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[h,O],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[h,O],[d,v]],[/(nexus 9)/i],[l,[h,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[h,[l,/_/g," "],[d,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[l,[h,"TCL"],[d,m]],[/(itel) ((\w+))/i],[[h,q],l,[d,V,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[h,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[h,"Meizu"],[d,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[h,"Ulefone"],[d,v]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[l,[h,"Energizer"],[d,v]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[l,[h,"Cat"],[d,v]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[l,[h,"Smartfren"],[d,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[l,[h,"Nothing"],[d,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[h,l,[d,v]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[h,l,[d,m]],[/(surface duo)/i],[l,[h,x],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[h,"Fairphone"],[d,v]],[/(u304aa)/i],[l,[h,"AT&T"],[d,v]],[/\bsie-(\w*)/i],[l,[h,"Siemens"],[d,v]],[/\b(rct\w+) b/i],[l,[h,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[l,[h,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[l,[h,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[h,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[l,[h,"NuVision"],[d,m]],[/\b(k88) b/i],[l,[h,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[l,[h,"ZTE"],[d,v]],[/\b(gen\d{3}) b.+49h/i],[l,[h,"Swiss"],[d,v]],[/\b(zur\d{3}) b/i],[l,[h,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[l,[h,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[h,"Dragon Touch"],l,[d,m]],[/\b(ns-?\w{0,9}) b/i],[l,[h,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[h,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[h,"Voice"],l,[d,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[h,"LvTel"],l,[d,v]],[/\b(ph-1) /i],[l,[h,"Essential"],[d,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[h,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[l,[h,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[l,[h,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[l,[h,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[h,l,[d,v]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[h,x],[d,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[h,U],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[h,U],[d,v]],[/smart-tv.+(samsung)/i],[h,[d,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[h,D],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[h,P],[d,y]],[/(apple) ?tv/i],[h,[l,_+" TV"],[d,y]],[/crkey/i],[[l,R+"cast"],[h,N],[d,y]],[/droid.+aft(\w+)( bui|\))/i],[l,[h,C],[d,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[h,K],[d,y]],[/(bravia[\w ]+)( bui|\))/i],[l,[h,M],[d,y]],[/(mitv-\w{5}) bui/i],[l,[h,L],[d,y]],[/Hbbtv.*(technisat) (.*);/i],[h,l,[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[h,J],[l,J],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[h,l,[d,g]],[/droid.+; (shield) bui/i],[l,[h,"Nvidia"],[d,g]],[/(playstation [345portablevi]+)/i],[l,[h,M],[d,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[h,x],[d,g]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[l,[h,D],[d,b]],[/((pebble))app/i],[h,l,[d,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[h,_],[d,b]],[/droid.+; (glass) \d/i],[l,[h,N],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[l,[h,U],[d,b]],[/droid.+; (glass) \d/i],[l,[h,N],[d,b]],[/(pico) (4|neo3(?: link|pro)?)/i],[h,l,[d,b]],[/; (quest( \d| pro)?)/i],[l,[h,j],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[h,[d,w]],[/(aeobc)\b/i],[l,[h,C],[d,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[d,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,v]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[h,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[u,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[u,f],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[u,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[u,[f,V,$]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,V,$],[u,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,B],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,f],[/\(bb(10);/i],[f,[u,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[u,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[u,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,W],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,f],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[u,f]]},Q=function(e,t){if(typeof e===s&&(t=e,e=r),!(this instanceof Q))return new Q(e,t).getResult();var g=typeof n!==i&&n.navigator?n.navigator:r,y=e||(g&&g.userAgent?g.userAgent:""),b=g&&g.userAgentData?g.userAgentData:r,w=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,t):G,C=g&&g.userAgent==y;return this.getBrowser=function(){var e={};return e[u]=r,e[f]=r,z.call(e,y,w.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[f]),C&&g&&g.brave&&typeof g.brave.isBrave==o&&(e[u]="Brave"),e},this.getCPU=function(){var e={};return e[p]=r,z.call(e,y,w.cpu),e},this.getDevice=function(){var e={};return e[h]=r,e[l]=r,e[d]=r,z.call(e,y,w.device),C&&!e[d]&&b&&b.mobile&&(e[d]=v),C&&"Macintosh"==e[l]&&g&&typeof g.standalone!==i&&g.maxTouchPoints&&g.maxTouchPoints>2&&(e[l]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[u]=r,e[f]=r,z.call(e,y,w.engine),e},this.getOS=function(){var e={};return e[u]=r,e[f]=r,z.call(e,y,w.os),C&&!e[u]&&b&&b.platform&&"Unknown"!=b.platform&&(e[u]=b.platform.replace(/chrome os/i,W).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return y},this.setUA=function(e){return y=typeof e===a&&e.length>500?J(e,500):e,this},this.setUA(y),this};Q.VERSION="1.0.40",Q.BROWSER=H([u,f,c]),Q.CPU=H([p]),Q.DEVICE=H([l,h,d,g,v,y,m,b,w]),Q.ENGINE=Q.OS=H([u,f]),e.exports&&(t=e.exports=Q),t.UAParser=Q;var Y=typeof n!==i&&(n.jQuery||n.Zepto);if(Y&&!Y.ua){var Z=new Q;Y.ua=Z.getResult(),Y.ua.get=function(){return Z.getUA()},Y.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:Ut)),Lt.exports;var e,t}function Wt(){if(It)return Mt;It=1;var e=Mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.openLink=o,Mt.openLinkBlank=function(e){o(e,"_blank")},Mt.openDeeplinkWithFallback=function(e,t){const n=setTimeout((()=>{a("safari")||s("android")&&a("firefox")||t()}),500);window.addEventListener("blur",(()=>clearTimeout(n)),{once:!0}),s("android")&&(0,r.inTg)()?o(e,"_blank"):o(e,"_self")},Mt.isMobileUserAgent=function(){let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.slice(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},Mt.getUserAgent=i,Mt.isOS=s,Mt.isBrowser=a;const t=e(jt()),n=cn(),r=Bt();function o(e,t="_self"){(0,n.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function i(){var e,n,r;const o=(new t.default).getResult(),i=null===(e=o.os.name)||void 0===e?void 0:e.toLowerCase();let s;switch(!0){case"ipad"===(null===(n=o.device.model)||void 0===n?void 0:n.toLowerCase()):s="ipad";break;case"ios"===i:s="ios";break;case"android"===i:s="android";break;case"mac os"===i:s="macos";break;case"linux"===i:s="linux";break;case null==i?void 0:i.includes("windows"):s="windows"}const a=null===(r=o.browser.name)||void 0===r?void 0:r.toLowerCase();let c;switch(!0){case"chrome"===a:c="chrome";break;case"firefox"===a:c="firefox";break;case null==a?void 0:a.includes("safari"):c="safari";break;case null==a?void 0:a.includes("opera"):c="opera"}return{os:s,browser:c}}function s(...e){return e.includes(i().os)}function a(...e){return e.includes(i().browser)}return Mt}function Bt(){if(kt)return Kt;var e,t,n,r,o,i,s;kt=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.isTmaPlatform=function(...e){return e.includes(h)},Kt.isInTMA=p,Kt.inTg=function(){return g()||p()},Kt.isInTelegramBrowser=g,Kt.sendExpand=function(){m("web_app_expand",{})},Kt.sendOpenTelegramLink=function(e,t){const n=new URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${n}`)}if("t.me"!==n.hostname){if(t)return t();throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${n}`)}const r=n.pathname+n.search;v()||(o="6.1",b(f,o)>=0)?m("web_app_open_tg_link",{path_full:r}):(0,u.openLinkBlank)("https://t.me"+r);var o},Kt.versionCompare=b;const a=Xt(),c=cn(),l=Pt(),u=Wt();let d={};try{d=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=y(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=y(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,s=e.split("&");for(n=0;n<s.length;n++)r=s[n].split("="),o=y(r[0]),i=null==r[1]?null:y(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch(AO){}let h="unknown";if((null==d?void 0:d.tgWebAppPlatform)&&(h=null!==(e=d.tgWebAppPlatform)&&void 0!==e?e:"unknown"),"unknown"===h){const e=(0,a.getWindow)();h=null!==(r=null===(n=null===(t=null==e?void 0:e.Telegram)||void 0===t?void 0:t.WebApp)||void 0===n?void 0:n.platform)&&void 0!==r?r:"unknown"}let f="6.0";if((null==d?void 0:d.tgWebAppVersion)&&(f=d.tgWebAppVersion),!f){const e=(0,a.getWindow)();f=null!==(s=null===(i=null===(o=null==e?void 0:e.Telegram)||void 0===o?void 0:o.WebApp)||void 0===i?void 0:i.version)&&void 0!==s?s:"6.0"}function p(){var e;return"unknown"!==h||!!(null===(e=(0,a.getWindow)())||void 0===e?void 0:e.TelegramWebviewProxy)}function g(){var e;const t=!!(null===(e=(0,a.getWindow)())||void 0===e?void 0:e.TelegramWebview);return(p()||t)&&"unknown"===h}function v(){try{const e=(0,a.getWindow)();return!!e&&(null!=e.parent&&e!==e.parent)}catch(AO){return!1}}function m(e,t){try{const n=(0,a.getWindow)();if(!n)throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,c.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,c.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!v())throw new l.OKXConnectError(l.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA");{const r="*",o=JSON.stringify({eventType:e,eventData:t});(0,c.logDebug)("postEvent",e,t),n.parent.postMessage(o,r)}}}catch(AO){(0,c.logError)(`Can't post event to parent window: ${AO}`)}}function y(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(AO){return e}}function b(e,t){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t="");let n,r,o,i,s=e.replace(/^\s+|\s+$/g,"").split("."),a=t.replace(/^\s+|\s+$/g,"").split(".");for(n=Math.max(s.length,a.length),r=0;r<n;r++)if(o=parseInt(s[r])||0,i=parseInt(a[r])||0,o!==i)return o>i?1:-1;return 0}return Kt}function Xt(){if(Dt)return Ge;var e,t,n,r;Dt=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.removeUrlLastSlash=u,Ge.addPathToUrl=function(e,t){return u(e)+"/"+t},Ge.getUniversalLink=d,Ge.openOKXDeeplink=function(e){var t;const n=d(e),r=!!(null===(t=f())||void 0===t?void 0:t.TelegramWebviewProxy);console.log("openOKXDeeplink fullUrl:",n),!(0,a.isIos)()||(0,a.isInIOSLine)()?r?window.open(e,"_blank"):window.location.href=e:h(n)},Ge.openOKXUniversalLink=h,Ge.openOKXDeeplinkWithFallback=function(e){var t;const n=d(e),r=!!(null===(t=f())||void 0===t?void 0:t.TelegramWebviewProxy);console.log("openOKXDeeplinkWithFallback fullUrl:",n);let i=!1;o.standardUniversalLink,console.log("openOKXDeeplinkWithFallback standardUniversalLink:",o.standardUniversalLink);let s=null,c=()=>{console.log("fallbackToDownloadPage :empty")};(0,a.isIos)()?(0,a.isInIOSLine)()&&(c=()=>{i||window.open(n,"_self")}):c=()=>{i||(s?s.open(n,"_self"):window.open(n,"_blank"))};if(!(0,a.isIos)()||(0,a.isInIOSLine)()||(0,a.isInIOSLark)()||(0,a.isInIOSWeChat)()){r?s=window.open(e,"_blank"):window.location.href=e,setTimeout(c,3e3);let t=0,n=setInterval((()=>{t++,console.log("windowOpen --\x3e interval:",t,document.hidden,document.visibilityState),(t>=10||document.hidden)&&(i=!0,clearInterval(n),console.log("windowOpen :cleat: ${count}"))}),200);window.addEventListener("blur",(()=>{i=!0}),{once:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(i=!0)}))}else r?window.open(n,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null===window||void 0===window?void 0:window.okxLogDebug)?window.open(n,"_blank"):window.open(n,"_self"),console.log("windowOpen[after]: ",Date.now()))},Ge.getWindow=f,Ge.isTelegramUrl=function(e){if(!e)return!1;const t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname},Ge.encodeTelegramUrlParameters=function(e){let t=e;return t=t.replace(/\./g,"%2E"),t=t.replace(/-/g,"%2D"),t=t.replace(/_/g,"%5F"),t=t.replace(/&/g,"-"),t=t.replace(/=/g,"__"),t=t.replace(/%/g,"--"),t},Ge.encodeConnectParams=p,Ge.encodeTWAConnectURLParams=g,Ge.getAppWalletDeepLink=function(e){return`${o.standardDeeplink}?param=${e}`},Ge.getAppWalletShortDeepLink=v,Ge.getTelegramWalletTWAUrl=m,Ge.openOKXTMAWalletlinkWithFallback=function(e){var t,n,r,o,a;(0,i.logDebug)("[TWA] open link:",e,"isInTMA ==> ",_()),_()?(null===(n=null===(t=f())||void 0===t?void 0:t.Telegram)||void 0===n?void 0:n.WebApp)?null===(a=null===(o=null===(r=f())||void 0===r?void 0:r.Telegram)||void 0===o?void 0:o.WebApp)||void 0===a||a.openTelegramLink(e):(0,c.sendOpenTelegramLink)(e):(0,s.getTestTwaUrl)()?window.open(e,"_blank"):window.open(e,"_self")},Ge.isInTMA=_,Ge.isInTelegramBrowser=function(){var e;const t=!!(null===(e=f())||void 0===e?void 0:e.TelegramWebview);return(_()||t)&&"unknown"===C},Ge.getOKXLink=function(e,t=!1,n){if((0,i.logDebug)(`url  getOKXLink() called connectRequest==> ${JSON.stringify(e)}  useMini=> ${t}  tmaReturnUrl==> ${n}`),t)return m(e?g(e):void 0,null!=n?n:"back");if((0,a.useShortLink)())return e?v(e.topic,e.clientId):s.shortUniversalLink;if(e){const t=p(e);return`${o.standardDeeplink}?param=${t}`}return o.standardDeeplink};const o=Pt(),i=cn(),s=it(),a=rs(),c=Bt(),l=y();function u(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function d(e,t=!1){console.log("getUniversalLink deeplinkUrl:",e,", useStandardUniversalLink:",t);const n=encodeURIComponent(e);return console.log("getUniversalLink standardUniversalLink:",o.standardUniversalLink),console.log("getUniversalLink standardUniversalLink:",`${o.standardUniversalLink}?deeplink=${n}`),`${o.standardUniversalLink}?deeplink=${n}`}function h(e){(0,a.isIos)()?_()?window.open(e,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null===window||void 0===window?void 0:window.okxLogDebug)?window.open(e,"_blank"):window.open(e,"_self"),console.log("windowOpen[after]: ",Date.now())):window.open(e,"_blank")}function f(){if("undefined"!=typeof window)return window}function p(e){let t=Object.assign(Object.assign({},e),{protocolVersion:l.CONNECT_PROTOCOL_VER});const n=JSON.stringify(t);(0,i.logDebug)("url encodeConnectParams connectRequestStr ",n);const r=(new TextEncoder).encode(n),o=btoa(String.fromCharCode(...r));return(0,i.logDebug)("url encodeConnectParams base64Encoded ",o),o}function g(e){const t=JSON.stringify({topic:e.topic,clientId:e.clientId});(0,i.logDebug)("url encodeConnectParams connectRequestStr",t);const n=(new TextEncoder).encode(t);return btoa(String.fromCharCode(...n))}function v(e,t){return`${s.shortUniversalLink}?topic=${e}${(0,a.getLastSixMd5Hash)(t)}`}function m(e,t){let n={okxconnect:"",redirect:"",extraparams:"",fromtg:!1};e&&(n.okxconnect=e),t&&(n.redirect=t),_()?n.fromtg=!0:n.fromtg=!1,(0,i.logDebug)("getTelegramWalletTWAUrl redirect:",n.redirect);let r=JSON.stringify(n);const o=(new TextEncoder).encode(r),c=btoa(String.fromCharCode(...o)),l=(0,a.toSafeBase64FromBase64)(c);if((0,i.logDebug)("[TWA] open link:",n,c),e||t){if(_())return(0,s.getTestTgTwaUrl)()?`${(0,s.getTestTgTwaUrl)()}?startapp=${l}`:`https://t.me/${s.tgwalletName}/start?startapp=${l}`;if((0,s.getTestTwaUrl)())return`${(0,s.getTestTwaUrl)()}?tgWebAppStartParam=${l}`;if((0,s.getTestTgTwaUrl)()){let e=(0,s.getBotNameAndAppName)((0,s.getTestTgTwaUrl)());if(e){let{botName:t,appName:n}=e;return`tg://resolve?domain=${t}&appname=${n}&startapp=${l}`}return`tg://resolve?domain=${s.tgwalletName}&appname=${s.tgwalletAppName}&startapp=${l}`}return`tg://resolve?domain=${s.tgwalletName}&appname=${s.tgwalletAppName}&startapp=${l}`}if(_())return(0,s.getTestTgTwaUrl)()?`${(0,s.getTestTgTwaUrl)()}`:`https://t.me/${s.tgwalletName}/start`;if((0,s.getTestTwaUrl)())return`${(0,s.getTestTwaUrl)()}`;if((0,s.getTestTgTwaUrl)()){let e=(0,s.getBotNameAndAppName)((0,s.getTestTgTwaUrl)());if(e){let{botName:t,appName:n}=e;return`tg://resolve?domain=${t}&appname=${n}`}return`tg://resolve?domain=${s.tgwalletName}&appname=${s.tgwalletAppName}`}return`tg://resolve?domain=${s.tgwalletName}&appname=${s.tgwalletAppName}`}function b(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(AO){return e}}let w={};try{w=function(e){let t={};if(!(e=e.replace(/^#/,"")).length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=b(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=b(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,s=e.split("&");for(n=0;n<s.length;n++)r=s[n].split("="),o=b(r[0]),i=null==r[1]?null:b(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch(AO){}let C="unknown";if((null==w?void 0:w.tgWebAppPlatform)&&(C=null!==(e=w.tgWebAppPlatform)&&void 0!==e?e:"unknown"),"unknown"===C){const e=f();C=null!==(r=null===(n=null===(t=null==e?void 0:e.Telegram)||void 0===t?void 0:t.WebApp)||void 0===n?void 0:n.platform)&&void 0!==r?r:"unknown"}function _(){var e;return"unknown"!==C||!!(null===(e=f())||void 0===e?void 0:e.TelegramWebviewProxy)}return Ge}var Ht,Ft={},qt={};function Jt(){if(Ht)return qt;Ht=1;var e=qt.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};function t(t,n){return e(this,void 0,void 0,(function*(){return new Promise(((e,r)=>{var o,i;if(null===(o=null==n?void 0:n.signal)||void 0===o?void 0:o.aborted)return void r(new Error("Delay aborted"));const s=setTimeout((()=>e()),t);null===(i=null==n?void 0:n.signal)||void 0===i||i.addEventListener("abort",(()=>{clearTimeout(s),r(new Error("Delay aborted"))}))}))}))}return Object.defineProperty(qt,"__esModule",{value:!0}),qt.callForSuccess=function(n,r){return e(this,void 0,void 0,(function*(){var e,o;const i=null!==(e=null==r?void 0:r.attempts)&&void 0!==e?e:3,s=null!==(o=null==r?void 0:r.delayMs)&&void 0!==o?o:800;if("function"!=typeof n)throw new Error("Expected a function, got "+typeof n);let a,c=0;for(;c<i;)try{return yield n()}catch(l){a=l,c++,c<i&&(yield t(s))}throw a}))},qt.delay=t,qt}var zt,Vt={};var $t,Gt,Qt={};function Yt(){return Gt||(Gt=1,function(e){var t=Ft.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Ft.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.chainName2IdMap=e.replaceChainIdToChainName=e.replaceChainNameToChainId=e.checkMetaData=e.versionCompare=e.isBrowser=e.isOS=e.isMobileUserAgent=e.openDeeplinkWithFallback=e.openLinkBlank=e.openLink=e.getChainId=e.useShortLink=e.toSafeBase64FromBase64=e.isValidObject=e.isIos=e.base64decode=e.base64encode=e.splitToUint8Arrays=e.concatUint8Arrays=e.toHexString=e.hexToByteArray=e.getOKXLink=e.openOKXUniversalLink=e.getAppWalletShortDeepLink=e.encodeTWAConnectURLParams=e.encodeConnectParams=e.openOKXTMAWalletlinkWithFallback=e.getTelegramWalletTWAUrl=e.getAppWalletDeepLink=e.encodeTelegramUrlParameters=e.isTelegramUrl=e.openOKXDeeplinkWithFallback=e.openOKXDeeplink=e.getUniversalLink=e.safeJsonStringify=e.safeJsonParse=e.getDefaultReporter=e.reportEvent=e.reportLog=e.logWarning=e.logError=e.logDebug=e.callForSuccess=void 0;var r=Jt();Object.defineProperty(e,"callForSuccess",{enumerable:!0,get:function(){return r.callForSuccess}});var o=cn();Object.defineProperty(e,"logDebug",{enumerable:!0,get:function(){return o.logDebug}}),Object.defineProperty(e,"logError",{enumerable:!0,get:function(){return o.logError}}),Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return o.logWarning}}),Object.defineProperty(e,"reportLog",{enumerable:!0,get:function(){return o.reportLog}}),Object.defineProperty(e,"reportEvent",{enumerable:!0,get:function(){return o.reportEvent}}),Object.defineProperty(e,"getDefaultReporter",{enumerable:!0,get:function(){return o.getDefaultReporter}}),n((zt||(zt=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.Report_WalletType_Key=Vt.Report_Proceed_QRCode_Click=Vt.Report_ChooseType_Download_Click=Vt.Report_ChooseType_ConnectWallet_Click=Vt.Report_Proceed_Retry_Click=Vt.Report_ChooseType_ConnectWallet_View=Vt.Report_Loading_ConnectWallet_View=Vt.Report_Proceed_QRCode_View=Vt.Report_Proceed_Proceed_View=void 0,Vt.Report_Proceed_Proceed_View="OKXConnectSDK_Proceed_Proceed_View",Vt.Report_Proceed_QRCode_View="OKXConnectSDK_Proceed_QRCode_View",Vt.Report_Loading_ConnectWallet_View="OKXConnectSDK_Loading_ConnectWallet_View",Vt.Report_ChooseType_ConnectWallet_View="OKXConnectSDK_ChooseType_ConnectWallet_View",Vt.Report_Proceed_Retry_Click="OKXConnectSDK_Proceed_Retry_Click",Vt.Report_ChooseType_ConnectWallet_Click="OKXConnectSDK_ChooseType_ConnectWallet_Click",Vt.Report_ChooseType_Download_Click="OKXConnectSDK_ChooseType_Download_Click",Vt.Report_Proceed_QRCode_Click="OKXConnectSDK_Proceed_QRCode_Click",Vt.Report_WalletType_Key="wallet_type"),Vt),e),n(rn(),e);var i=ln();Object.defineProperty(e,"safeJsonParse",{enumerable:!0,get:function(){return i.safeJsonParse}}),Object.defineProperty(e,"safeJsonStringify",{enumerable:!0,get:function(){return i.safeJsonStringify}});var s=Xt();Object.defineProperty(e,"getUniversalLink",{enumerable:!0,get:function(){return s.getUniversalLink}}),Object.defineProperty(e,"openOKXDeeplink",{enumerable:!0,get:function(){return s.openOKXDeeplink}}),Object.defineProperty(e,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return s.openOKXDeeplinkWithFallback}}),Object.defineProperty(e,"isTelegramUrl",{enumerable:!0,get:function(){return s.isTelegramUrl}}),Object.defineProperty(e,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return s.encodeTelegramUrlParameters}}),Object.defineProperty(e,"getAppWalletDeepLink",{enumerable:!0,get:function(){return s.getAppWalletDeepLink}}),Object.defineProperty(e,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return s.getTelegramWalletTWAUrl}}),Object.defineProperty(e,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return s.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(e,"encodeConnectParams",{enumerable:!0,get:function(){return s.encodeConnectParams}}),Object.defineProperty(e,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return s.encodeTWAConnectURLParams}}),Object.defineProperty(e,"getAppWalletShortDeepLink",{enumerable:!0,get:function(){return s.getAppWalletShortDeepLink}}),Object.defineProperty(e,"openOKXUniversalLink",{enumerable:!0,get:function(){return s.openOKXUniversalLink}}),Object.defineProperty(e,"getOKXLink",{enumerable:!0,get:function(){return s.getOKXLink}});var a=rs();Object.defineProperty(e,"hexToByteArray",{enumerable:!0,get:function(){return a.hexToByteArray}}),Object.defineProperty(e,"toHexString",{enumerable:!0,get:function(){return a.toHexString}}),Object.defineProperty(e,"concatUint8Arrays",{enumerable:!0,get:function(){return a.concatUint8Arrays}}),Object.defineProperty(e,"splitToUint8Arrays",{enumerable:!0,get:function(){return a.splitToUint8Arrays}}),Object.defineProperty(e,"base64encode",{enumerable:!0,get:function(){return a.base64encode}}),Object.defineProperty(e,"base64decode",{enumerable:!0,get:function(){return a.base64decode}}),Object.defineProperty(e,"isIos",{enumerable:!0,get:function(){return a.isIos}}),Object.defineProperty(e,"isValidObject",{enumerable:!0,get:function(){return a.isValidObject}}),Object.defineProperty(e,"toSafeBase64FromBase64",{enumerable:!0,get:function(){return a.toSafeBase64FromBase64}}),Object.defineProperty(e,"useShortLink",{enumerable:!0,get:function(){return a.useShortLink}}),Object.defineProperty(e,"getChainId",{enumerable:!0,get:function(){return a.getChainId}});var c=Wt();Object.defineProperty(e,"openLink",{enumerable:!0,get:function(){return c.openLink}}),Object.defineProperty(e,"openLinkBlank",{enumerable:!0,get:function(){return c.openLinkBlank}}),Object.defineProperty(e,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return c.openDeeplinkWithFallback}}),Object.defineProperty(e,"isMobileUserAgent",{enumerable:!0,get:function(){return c.isMobileUserAgent}}),Object.defineProperty(e,"isOS",{enumerable:!0,get:function(){return c.isOS}}),Object.defineProperty(e,"isBrowser",{enumerable:!0,get:function(){return c.isBrowser}});var l=Bt();Object.defineProperty(e,"versionCompare",{enumerable:!0,get:function(){return l.versionCompare}});var u=function(){if($t)return Qt;$t=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.checkMetaData=function(t){if(!t)throw new e.OKXConnectError(e.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"You have to specify a `dappMetaData`in the options.");if(!t.name)throw new e.OKXConnectError(e.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"dappName is required");if(!t.icon)throw new e.OKXConnectError(e.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"icon is required");return!0};const e=Pt();return Qt}();Object.defineProperty(e,"checkMetaData",{enumerable:!0,get:function(){return u.checkMetaData}});var d=rs();Object.defineProperty(e,"replaceChainNameToChainId",{enumerable:!0,get:function(){return d.replaceChainNameToChainId}}),Object.defineProperty(e,"replaceChainIdToChainName",{enumerable:!0,get:function(){return d.replaceChainIdToChainName}}),Object.defineProperty(e,"chainName2IdMap",{enumerable:!0,get:function(){return d.chainName2IdMap}})}(Ft)),Ft}var Zt,en,tn={exports:{}};
/*!
        localForage -- Offline Storage, Improved
        Version 1.10.0
        https://localforage.github.io/localForage
        (c) 2013-2017 Mozilla, Apache License 2.0
    */function nn(){return Zt||(Zt=1,tn.exports=function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){if(!a&&O)return O(s);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){var n=t[s][1][e];return o(n||e)}),l,l.exports,e,t,n,r)}return n[s].exports}for(var i=O,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,s=new o(u),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}function d(e){1!==l.push(e)||r||n()}t.exports=d}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&f(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(AO){return i.reject(e,AO)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function s(){t(o,r)}var a=p(s);"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(AO){n.status="error",n.value=AO}return n}function g(e){return e instanceof this?e:i.resolve(new this(o),e)}function v(e){var t=new this(o);return i.reject(t,e)}function m(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,c=-1,l=new this(o);++c<n;)u(e[c],c);return l;function u(e,o){function c(e){s[o]=e,++a!==n||r||(r=!0,i.resolve(l,s))}t.resolve(e).then(c,(function(e){r||(r=!0,i.reject(l,e))}))}}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(o);++s<n;)c(e[s]);return a;function c(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(a,e))}),(function(e){r||(r=!0,i.reject(a,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=a,e.outcome=t;for(var o=-1,s=e.queue.length;++o<s;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=g,l.reject=v,l.all=m,l.race=y},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==u?u:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(AO){return}}var s=i();function a(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(AO){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(AO){if("TypeError"!==AO.name)throw AO;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,v={},m=Object.prototype.toString,y="readonly",b="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function C(e){return new l((function(t){var n=e.transaction(p,b),r=c([""]);n.objectStore(p).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function _(e){return"boolean"==typeof g?l.resolve(g):C(e).then((function(e){return g=e}))}function O(e){var t=v[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function E(e){var t=v[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function S(e,t){var n=v[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function R(e,t){return new l((function(n,r){if(v[e.name]=v[e.name]||M(),e.db){if(!t)return n(e.db);O(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=s.open.apply(s,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(p)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),E(e)}}))}function T(e){return R(e,!1)}function N(e){return R(e,!0)}function A(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function P(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function x(e){return c([w(atob(e.data))],{type:e.type})}function I(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,n=t._initReady().then((function(){var e=v[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function D(e){O(e);for(var t=v[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,T(e).then((function(t){return e.db=t,A(e)?N(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw S(e,t),t}))}function K(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),N(e)})).then((function(){return D(e).then((function(){K(e,t,n,r-1)}))})).catch(n);n(i)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=v[n.name];o||(o=M(),v[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=k);var i=[];function s(){return l.resolve()}for(var a=0;a<o.forages.length;a++){var c=o.forages[a];c!==t&&i.push(c._initReady().catch(s))}var u=o.forages.slice(0);return l.all(i).then((function(){return n.db=o.db,T(n)})).then((function(e){return n.db=e,A(n,t._defaultConfig.version)?N(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function U(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){K(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),I(e)&&(e=x(e)),t(e)},s.onerror=function(){r(s.error)}}catch(AO){r(AO)}}))})).catch(r)}));return u(r,t),r}function j(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){K(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;I(r)&&(r=x(r));var o=e(r,n.key,a++);void 0!==o?t(o):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(AO){r(AO)}}))})).catch(r)}));return u(r,t),r}function W(e,t,n){var r=this;e=h(e);var o=new l((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===m.call(t)?_(i.db).then((function(e){return e?t:P(t)})):t})).then((function(t){K(r._dbInfo,b,(function(i,s){if(i)return o(i);try{var a=s.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(AO){o(AO)}}))})).catch(o)}));return u(o,n),o}function B(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){K(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(s.error)},i.onabort=function(){var e=s.error?s.error:s.transaction.error;r(e)}}catch(AO){r(AO)}}))})).catch(r)}));return u(r,t),r}function X(e){var t=this,n=new l((function(e,n){t.ready().then((function(){K(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(AO){n(AO)}}))})).catch(n)}));return u(n,e),n}function H(e){var t=this,n=new l((function(e,n){t.ready().then((function(){K(t._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(AO){n(AO)}}))})).catch(n)}));return u(n,e),n}function F(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){K(n._dbInfo,y,(function(o,i){if(o)return r(o);try{var s=i.objectStore(n._dbInfo.storeName),a=!1,c=s.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(AO){r(AO)}}))})).catch(r)}));return u(r,t),r}function q(e){var t=this,n=new l((function(e,n){t.ready().then((function(){K(t._dbInfo,y,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];i.onsuccess=function(){var t=i.result;t?(s.push(t.key),t.continue()):e(s)},i.onerror=function(){n(i.error)}}catch(AO){n(AO)}}))})).catch(n)}));return u(n,e),n}function J(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?l.resolve(o._dbInfo.db):T(e).then((function(t){var n=v[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;O(e);var r=v[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var a=o[i];a._dbInfo.db=null,a._dbInfo.version=n}var c=new l((function(t,r){var o=s.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,E(n._dbInfo)}})).catch((function(t){throw(S(e,t)||l.resolve()).catch((function(){})),t}))}})):i.then((function(t){O(e);var n=v[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var i=new l((function(t,n){var r=s.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return i.then((function(e){n.db=e;for(var t=0;t<r.length;t++)E(r[t]._dbInfo)})).catch((function(t){throw(S(e,t)||l.resolve()).catch((function(){})),t}))}))}else r=l.reject("Invalid arguments");return u(r,t),r}var z={_driver:"asyncStorage",_initStorage:L,_support:a(),iterate:j,getItem:U,setItem:W,removeItem:B,clear:X,length:H,key:F,keys:q,dropInstance:J};function V(){return"function"==typeof openDatabase}var $="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",G="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,Y="__lfsc__:",Z=Y.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",se="si32",ae="ur16",ce="ui32",le="fl32",ue="fl64",de=Z+ee.length,he=Object.prototype.toString;function fe(e){var t,n,r,o,i,s=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),u=new Uint8Array(l);for(t=0;t<a;t+=4)n=$.indexOf(e[t]),r=$.indexOf(e[t+1]),o=$.indexOf(e[t+2]),i=$.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l}function pe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=$[n[t]>>2],r+=$[(3&n[t])<<4|n[t+1]>>4],r+=$[(15&n[t+1])<<2|n[t+2]>>6],r+=$[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ge(e,t){var n="";if(e&&(n=he.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,o=Y;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=ae:"[object Int32Array]"===n?o+=se:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=le:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+pe(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=G+e.type+"~"+pe(this.result);t(Y+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(AO){console.error("Couldn't convert value into a JSON string: ",e),t(null,AO)}}function ve(e){if(e.substring(0,Z)!==Y)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Z,de);if(r===te&&Q.test(n)){var o=n.match(Q);t=o[1],n=n.substring(o[0].length)}var i=fe(n);switch(r){case ee:return i;case te:return c([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case ae:return new Uint16Array(i);case se:return new Int32Array(i);case ce:return new Uint32Array(i);case le:return new Float32Array(i);case ue:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var me={serialize:ge,deserialize:ve,stringToBuffer:fe,bufferToString:pe};function ye(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function be(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(AO){return r(AO)}n.db.transaction((function(o){ye(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=me,o}function we(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?i(e,s):ye(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,s)}),i)}function Ce(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function _e(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,s=i.length,a=0;a<s;a++){var c=i.item(a),l=c.value;if(l&&(l=o.serializer.deserialize(l)),void 0!==(l=e(l,c.key,a+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Oe(e,t,n,r){var o=this;e=h(e);var i=new l((function(i,s){o.ready().then((function(){void 0===t&&(t=null);var a=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,l){l?s(l):c.db.transaction((function(n){we(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Oe.apply(o,[e,a,n,r-1]));s(t)}}))}))})).catch(s)}));return u(i,n),i}function Ee(e,t,n){return Oe.apply(this,[e,t,n,1])}function Se(e,t){var n=this;e=h(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Re(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Te(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ne(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){we(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ae(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Pe(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function xe(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return r=e.name?new l((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Pe(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function o(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],s=0,a=e.storeNames.length;s<a;s++)i.push(o(e.storeNames[s]));l.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),u(r,t),r}var Ie={_driver:"webSQLStorage",_initStorage:be,_support:V(),iterate:_e,getItem:Ce,setItem:Ee,removeItem:Se,clear:Re,length:Te,key:Ne,keys:Ae,dropInstance:xe};function ke(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(AO){return!1}}function De(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ke(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(AO){return!0}}function Me(){return!Ke()||localStorage.length>0}function Le(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=De(e,t._defaultConfig),Me()?(t._dbInfo=n,n.serializer=me,l.resolve()):l.reject()}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function je(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function We(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,s=1,a=0;a<i;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(o),s++)))return l}}}));return u(r,t),r}function Be(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(Ye){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function Xe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function He(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function Fe(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function qe(e,t,n){var r=this;e=h(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(o,i){var s=r._dbInfo;s.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(s.keyPrefix+e,t),o(n)}catch(AO){"QuotaExceededError"!==AO.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==AO.name||i(AO),i(AO)}}))}))}));return u(o,n),o}function Je(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new l((function(t){e.storeName?t(De(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),u(r,t),r}var ze={_driver:"localStorageWrapper",_initStorage:Le,_support:ke(),iterate:We,getItem:je,setItem:qe,removeItem:Fe,clear:Ue,length:He,key:Be,keys:Xe,dropInstance:Je},Ve=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},$e=function(e,t){for(var n=e.length,r=0;r<n;){if(Ve(e[r],t))return!0;r++}return!1},Ge=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qe={},Ze={},et={INDEXEDDB:z,WEBSQL:Ie,LOCALSTORAGE:ze},tt=[et.INDEXEDDB._driver,et.WEBSQL._driver,et.LOCALSTORAGE._driver],nt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(nt),ot={description:"",driver:tt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function st(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ge(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),et)if(et.hasOwnProperty(n)){var r=et[n],i=r._driver;this[n]=i,Qe[i]||this.defineDriver(r)}this._defaultConfig=st({},ot),this._config=st({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=rt.concat("_initStorage"),s=0,a=i.length;s<a;s++){var c=i[s];if((!$e(nt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=nt.length;n<r;n++){var o=nt[n];e[o]||(e[o]=t(o))}};d();var h=function(n){Qe[r]&&console.info("Redefining LocalForage driver: "+r),Qe[r]=e,Ze[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(h,n):h(!!e._support):h(!0)}catch(AO){n(AO)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Qe[e]?l.resolve(Qe[e]):l.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(me);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ge(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function s(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(s).catch(n)}i();var a=new Error("No available storage method found.");return r._driverSet=l.reject(a),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){st(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)it(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),ct=new at;t.exports=ct},{3:3}]},{},[4])(4)),tn.exports}function rn(){return en||(en=1,function(e){var t=qe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},n=qe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXReporter=e.OKXReportSide=e.OKXReportType=e.versionStr=void 0;const r=n(ze()),o=cn(),i=Xt(),s=Yt(),a=n(nn()),c=n(T());e.versionStr="1.7.0";const l=["https://www.okx.com/dappstat/wallet-connect","https://www.okx.ac/dappstat/wallet-connect"],u="OKX_RP_UUID_CK",d={headers:{Accept:"*/*","Content-Type":"text/plain"},method:"POST"};e.OKXReportType={PAGE_IN:"page_in",PAGE_OUT:"page_out",CLICK:"click",LOG:"log"},e.OKXReportSide={DAPP:"dapp",WALLET:"wallet"};e.OKXReporter=class{constructor(){this.currentSide=e.OKXReportSide.DAPP,this.currentVersion=e.versionStr,this.storage=a.default.createInstance({name:"OKXReporter"}),this.recordList=new Array,this.currentUUID=(0,s.toHexString)(c.default.randomBytes(16))}configVersionAndSide(e,t,n){this.currentVersion=e,this.currentSide=t,this.appName=n}get recordCacheKey(){return"OKX_RP_CK@"+this.appName}get reportPlatform(){return(0,s.isMobileUserAgent)()?(0,s.isIos)()?"iOS":"android":"pc"}beginReport(){return t(this,void 0,void 0,(function*(){this.startErrorCatching();let e=yield this.storage.getItem(this.recordCacheKey),t=yield this.storage.getItem(u);t?this.currentUUID=t:this.storage.setItem(u,this.currentUUID),e&&(this.recordList=e,(0,o.logDebug)("resume records from cache length: ",this.recordList.length),yield this.sendCachedRecords())}))}startErrorCatching(){(0,i.getWindow)()&&(0,o.logDebug)("begin capture console error")}cachedErrors(){return this.recordList}sendRecord(e){return t(this,void 0,void 0,(function*(){return new Promise(((n,i)=>t(this,void 0,void 0,(function*(){try{const s=JSON.stringify(e);(0,o.logDebug)("[REPORT] record: ",s);const a=yield((e,...n)=>t(void 0,[e,...n],void 0,(function*(e,t={},n=5e3){for(const o of e)try{const e=new AbortController,i=e.signal,s=(0,r.default)(o,Object.assign(Object.assign({},t),{signal:i})),a=new Promise(((t,r)=>setTimeout((()=>{e.abort(),r(new Error("Request timed out"))}),n))),c=yield Promise.race([s,a]);if(c.ok)return c;if(502==c.status)return console.error("Fetch error status 502",o),c}catch(Ye){console.error(`Fetch error for ${o}:`,Ye)}throw console.error("'All fetch attempts failed.'"),new Error("All fetch attempts failed.")})))(l,Object.assign(Object.assign({},d),{body:s}));(0,o.logDebug)("[REPORT] get rsp:",a),a&&a.status&&200==a.status?(this.recordList=this.recordList.filter((t=>t.timestamp!=e.timestamp||t.content!=e.content)),yield this.storage.setItem(this.recordCacheKey,this.recordList),n(!0)):i(!1)}catch(AO){(0,o.logDebug)("send record error:",AO),n(!0)}}))))}))}sendRecordContent(e,n,r){return t(this,void 0,void 0,(function*(){var t,o,s,a;let c=null===(t=(0,i.getWindow)())||void 0===t?void 0:t.location.pathname,l=null===(o=(0,i.getWindow)())||void 0===o?void 0:o.location.origin;c&&l&&(l+=c);let u=null===(s=(0,i.getWindow)())||void 0===s?void 0:s.navigator.language,d=null===(a=(0,i.getWindow)())||void 0===a?void 0:a.navigator.userAgent,h=this.reportPlatform,f={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:this.currentSide,timestamp:(new Date).getTime(),url:l,lang:u,type:n,platform:h,"user-agent":d};yield this.markRecordItem(f),yield this.sendRecord(f)}))}sendCachedRecords(){return t(this,void 0,void 0,(function*(){return new Promise(((e,n)=>t(this,void 0,void 0,(function*(){let t=this.recordList.map((e=>this.sendRecord(e)));(0,o.logDebug)("[REPORT] submit & clean recorded caches begin @",(new Date).toUTCString()),Promise.allSettled(t).then((t=>{(0,o.logDebug)("[REPORT] submit & clean recorded caches ends @",(new Date).toUTCString());let r=[];t.forEach(((e,t)=>{"rejected"==e.status&&r.push(t)})),this.recordList=this.recordList.filter(((e,t)=>!r.includes(t))),this.storage.setItem(this.recordCacheKey,this.recordList).then((function(t){e()})).catch((function(e){n(e)}))}))}))))}))}markRecordItem(e){return t(this,void 0,void 0,(function*(){if(this.recordList.push(e),this.recordList.length>100){let e=this.recordList.length-100;this.recordList.splice(0,e)}return new Promise(((t,n)=>{this.storage.setItem(this.recordCacheKey,this.recordList).then((function(n){t(e)})).catch((function(e){n(e)}))}))}))}markRecord(e,n,r,o){return t(this,void 0,void 0,(function*(){var t,s,a,c;let l=null===(t=(0,i.getWindow)())||void 0===t?void 0:t.location.pathname,u=null===(s=(0,i.getWindow)())||void 0===s?void 0:s.location.origin;l&&u&&(u+=l);let d=null===(a=(0,i.getWindow)())||void 0===a?void 0:a.navigator.language,h=this.reportPlatform,f=null===(c=(0,i.getWindow)())||void 0===c?void 0:c.navigator.userAgent,p={uuid:this.currentUUID,version:this.currentVersion,content:e,action:r,side:o,timestamp:(new Date).getTime(),url:u,lang:d,type:n,platform:h,"user-agent":f};return yield this.markRecordItem(p)}))}}}(qe)),qe}var on,sn,an={name:"@okxconnect/core",version:"1.7.0",description:"OKX Connect core",main:"./src/index.js",keywords:["OKXConnect","OKX Connect"],scripts:{build:"npx tsc",local:"yarn install && npx tsc",remove:"rm -rf ./src  && rm -rf ./node_modules"},author:"OKX Wallet",license:"MIT",dependencies:{"@stablelib/ed25519":"^1.0.2","@stablelib/random":"^1.0.1","@stablelib/sha256":"1.0.1",bs58:"^5.0.0","core-js":"2.6.12","cross-fetch":"^4.0.0","crypto-js":"^4.2.0",eventemitter3:"^5.0.1",isutf8:"^4.0.0",localforage:"^1.10.0",multiformats:"9.4.2",process:"^0.11.10",tweetnacl:"^1.0.3","tweetnacl-util":"^0.15.1","ua-parser-js":"^1.0.35",uint8arrays:"3.1.0"},devDependencies:{"@types/crypto-js":"^4.2.2","@types/ua-parser-js":"^0.7.36",assert:"^2.1.0",eslint:"^9.7.0",events:"^3.3.0",jest:"^29.7.0","ts-loader":"^9.5.1",typescript:"^5.5.2"},peerDependencies:{"@solana/web3.js":"^1.78.4"}};function cn(){if(on)return Fe;on=1;var e=Fe.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.getDefaultReporter=function(){return o},Fe.logDebug=function(...e){if("undefined"!=typeof console)try{(t||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.log(`[OKX_CONNECT_SDK] ${i} `,...e)}catch(Wu){}},Fe.logError=function(...e){if("undefined"!=typeof console)try{if((t||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.error(`[OKX_CONNECT_SDK] ${i} `,...e),n||!t){let t="";t+=[...e].reduce(((e,t)=>{"string"==typeof t?","+t:"object"==typeof t&&JSON.stringify(t)})),o.sendRecordContent(t,r.OKXReportType.LOG,"")}}catch(Wu){}},Fe.logWarning=function(...e){if("undefined"!=typeof console)try{(t||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.warn(`[OKX_CONNECT_SDK] ${i} `,...e)}catch(Wu){}},Fe.reportEvent=function(t,n,r){return e(this,void 0,void 0,(function*(){yield o.sendRecordContent(r,t,n)}))},Fe.reportLog=function(t){return e(this,arguments,void 0,(function*(e,t="default"){}))};const t=!1,n=!1,r=rn(),o=new r.OKXReporter;const i=an.version;return Fe}function ln(){if(sn)return He;sn=1,Object.defineProperty(He,"__esModule",{value:!0}),He.safeJsonParse=function(t){if("string"!=typeof t)throw(0,e.logDebug)(t),new Error("Cannot safe json parse value of type "+typeof t);try{return n(t)}catch(AO){return console.error("safeJsonParse error:",AO),t}},He.safeJsonStringify=function(e){return"string"==typeof e?e:t(e)||""};const e=cn(),t=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),n=e=>{const t=e.replace(/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,((e,t)=>`:"${t}n"`));try{return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))}catch(AO){return JSON.parse(e)}};return He}var un={};var dn=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(255!==n[s])throw new TypeError(i+" is ambiguous");n[s]=o}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var r=0,o=0;e[t]===c;)r++,t++;for(var i=(e.length-t)*l+1>>>0,s=new Uint8Array(i);e[t];){var u=n[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=i-1;(0!==u||d<o)&&-1!==h;h--,d++)u+=a*s[h]>>>0,s[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");o=d,t++}if(" "!==e[t]){for(var f=i-o;f!==i&&0===s[f];)f++;for(var p=new Uint8Array(r+(i-f)),g=r;f!==i;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var s=(i-o)*u+1>>>0,l=new Uint8Array(s);o!==i;){for(var d=t[o],h=0,f=s-1;(0!==d||h<r)&&-1!==f;f--,h++)d+=256*l[f]>>>0,l[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,o++}for(var p=s-r;p!==s&&0===l[p];)p++;for(var g=c.repeat(n);p<s;++p)g+=e.charAt(l[p]);return g},decodeUnsafe:d,decode:function(e){var n=d(e);if(n)return n;throw new Error(`Non-${t} character`)}}},hn=dn;const fn=new Uint8Array(0),pn=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0},gn=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},vn=e=>(new TextEncoder).encode(e),mn=e=>(new TextDecoder).decode(e);var yn=Object.freeze({__proto__:null,coerce:gn,empty:fn,equals:pn,fromHex:e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):fn},fromString:vn,isBinary:e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),toHex:e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),toString:mn});class bn{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class wn{constructor(e,t,n){this.name=e,this.prefix=t,this.baseDecode=n}decode(e){if("string"==typeof e){if(e[0]===this.prefix)return this.baseDecode(e.slice(1));throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}throw Error("Can only multibase decode strings")}or(e){const t={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new Cn(t)}}class Cn{constructor(e){this.decoders=e}or(e){const t=e.decoders||{[e.prefix]:e};return new Cn({...this.decoders,...t})}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}class _n{constructor(e,t,n,r){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=r,this.encoder=new bn(e,t,n),this.decoder=new wn(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const On=({name:e,prefix:t,encode:n,decode:r})=>new _n(e,t,n,r),En=({prefix:e,name:t,alphabet:n})=>{const{encode:r,decode:o}=hn(n,t);return On({prefix:e,name:t,encode:r,decode:e=>gn(o(e))})},Sn=({name:e,prefix:t,bitsPerChar:n,alphabet:r})=>On({prefix:t,name:e,encode:e=>((e,t,n)=>{const r="="===t[t.length-1],o=(1<<n)-1;let i="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>n;)s-=n,i+=t[o&a>>s];if(s&&(i+=t[o&a<<n-s]),r)for(;i.length*n&7;)i+="=";return i})(e,r,n),decode:t=>((e,t,n,r)=>{const o={};for(let u=0;u<t.length;++u)o[t[u]]=u;let i=e.length;for(;"="===e[i-1];)--i;const s=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const t=o[e[u]];if(void 0===t)throw new SyntaxError(`Non-${r} character`);c=c<<n|t,a+=n,a>=8&&(a-=8,s[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(t,r,n,e)}),Rn=On({prefix:"\0",name:"identity",encode:e=>mn(e),decode:e=>vn(e)});var Tn=Object.freeze({__proto__:null,identity:Rn});const Nn=Sn({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var An=Object.freeze({__proto__:null,base2:Nn});const Pn=Sn({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var xn=Object.freeze({__proto__:null,base8:Pn});const In=En({prefix:"9",name:"base10",alphabet:"0123456789"});var kn=Object.freeze({__proto__:null,base10:In});const Dn=Sn({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Kn=Sn({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Mn=Object.freeze({__proto__:null,base16:Dn,base16upper:Kn});const Ln=Sn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Un=Sn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jn=Sn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Wn=Sn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Bn=Sn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xn=Sn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Hn=Sn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fn=Sn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qn=Sn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Jn=Object.freeze({__proto__:null,base32:Ln,base32hex:Bn,base32hexpad:Hn,base32hexpadupper:Fn,base32hexupper:Xn,base32pad:jn,base32padupper:Wn,base32upper:Un,base32z:qn});const zn=En({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Vn=En({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $n=Object.freeze({__proto__:null,base36:zn,base36upper:Vn});const Gn=En({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Qn=En({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Yn=Object.freeze({__proto__:null,base58btc:Gn,base58flickr:Qn});const Zn=Sn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),er=Sn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tr=Sn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nr=Sn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var rr=Object.freeze({__proto__:null,base64:Zn,base64pad:er,base64url:tr,base64urlpad:nr}),or=function e(t,n,r){n=n||[];var o=r=r||0;for(;t>=ar;)n[r++]=255&t|ir,t/=128;for(;t&sr;)n[r++]=255&t|ir,t>>>=7;return n[r]=0|t,e.bytes=r-o+1,n},ir=128,sr=-128,ar=Math.pow(2,31);var cr=function e(t,n){var r,o=0,i=0,s=n=n||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");r=t[s++],o+=i<28?(r&ur)<<i:(r&ur)*Math.pow(2,i),i+=7}while(r>=lr);return e.bytes=s-n,o},lr=128,ur=127;var dr=Math.pow(2,7),hr=Math.pow(2,14),fr=Math.pow(2,21),pr=Math.pow(2,28),gr=Math.pow(2,35),vr=Math.pow(2,42),mr=Math.pow(2,49),yr=Math.pow(2,56),br=Math.pow(2,63),wr={encode:or,decode:cr,encodingLength:function(e){return e<dr?1:e<hr?2:e<fr?3:e<pr?4:e<gr?5:e<vr?6:e<mr?7:e<yr?8:e<br?9:10}};const Cr=e=>[wr.decode(e),wr.decode.bytes],_r=(e,t,n=0)=>(wr.encode(e,t,n),t),Or=e=>wr.encodingLength(e);var Er=Object.freeze({__proto__:null,decode:Cr,encodeTo:_r,encodingLength:Or});const Sr=(e,t)=>{const n=t.byteLength,r=Or(e),o=r+Or(n),i=new Uint8Array(o+n);return _r(e,i,0),_r(n,i,r),i.set(t,o),new Nr(e,n,t,i)},Rr=e=>{const t=gn(e),[n,r]=Cr(t),[o,i]=Cr(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new Nr(n,o,s,t)},Tr=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&pn(e.bytes,t.bytes);class Nr{constructor(e,t,n,r){this.code=e,this.size=t,this.digest=n,this.bytes=r}}var Ar=Object.freeze({__proto__:null,Digest:Nr,create:Sr,decode:Rr,equals:Tr});const Pr=({name:e,code:t,encode:n})=>new xr(e,t,n);class xr{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}async digest(e){if(e instanceof Uint8Array){const t=await this.encode(e);return Sr(this.code,t)}throw Error("Unknown type, must be binary type")}}var Ir=Object.freeze({__proto__:null,Hasher:xr,from:Pr});const kr=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Dr=Pr({name:"sha2-256",code:18,encode:kr("SHA-256")}),Kr=Pr({name:"sha2-512",code:19,encode:kr("SHA-512")});var Mr=Object.freeze({__proto__:null,sha256:Dr,sha512:Kr});const Lr=Pr({name:"identity",code:0,encode:e=>gn(e)});var Ur=Object.freeze({__proto__:null,identity:Lr});const jr=e=>gn(e),{name:Wr,code:Br,encode:Xr,decode:Hr}={name:"raw",code:85,decode:jr,encode:jr};var Fr=Object.freeze({__proto__:null,code:Br,decode:Hr,encode:Xr,name:Wr});const{name:qr,code:Jr,encode:zr,decode:Vr}={name:"json",code:512,encode:e=>(new TextEncoder).encode(JSON.stringify(e)),decode:e=>JSON.parse((new TextDecoder).decode(e))};var $r=Object.freeze({__proto__:null,code:Jr,decode:Vr,encode:zr,name:qr});class Gr{constructor(e,t,n,r){this.code=t,this.version=e,this.multihash=n,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:io,byteLength:io,code:oo,version:oo,multihash:oo,bytes:oo,_baseCache:io,asCID:io})}toV0(){if(0===this.version)return this;{const{code:e,multihash:t}=this;if(e!==eo)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==to)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Gr.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,n=Sr(e,t);return Gr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Tr(this.multihash,e.multihash)}toString(e){const{bytes:t,version:n,_baseCache:r}=this;return 0===n?Yr(t,r,e||Gn.encoder):Zr(t,r,e||Ln.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return so(/^0\.0/,ao),!(!e||!e[ro]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Gr)return e;if(null!=e&&e.asCID===e){const{version:t,code:n,multihash:r,bytes:o}=e;return new Gr(t,n,r,o||no(t,n,r.bytes))}if(null!=e&&!0===e[ro]){const{version:t,multihash:n,code:r}=e,o=Rr(n);return Gr.create(t,r,o)}return null}static create(e,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==eo)throw new Error(`Version 0 CID must use dag-pb (code: ${eo}) block encoding`);return new Gr(e,t,n,n.bytes);case 1:{const r=no(e,t,n.bytes);return new Gr(e,t,n,r)}default:throw new Error("Invalid version")}}static createV0(e){return Gr.create(0,eo,e)}static createV1(e,t){return Gr.create(1,e,t)}static decode(e){const[t,n]=Gr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=Gr.inspectBytes(e),n=t.size-t.multihashSize,r=gn(e.subarray(n,n+t.multihashSize));if(r.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=r.subarray(t.multihashSize-t.digestSize),i=new Nr(t.multihashCode,t.digestSize,o,r);return[0===t.version?Gr.createV0(i):Gr.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const n=()=>{const[n,r]=Cr(e.subarray(t));return t+=r,n};let r=n(),o=eo;if(18===r?(r=0,t=0):1===r&&(o=n()),0!==r&&1!==r)throw new RangeError(`Invalid CID version ${r}`);const i=t,s=n(),a=n(),c=t+a;return{version:r,codec:o,multihashCode:s,digestSize:a,multihashSize:c-i,size:c}}static parse(e,t){const[n,r]=Qr(e,t),o=Gr.decode(r);return o._baseCache.set(n,e),o}}const Qr=(e,t)=>{switch(e[0]){case"Q":{const n=t||Gn;return[Gn.prefix,n.decode(`${Gn.prefix}${e}`)]}case Gn.prefix:{const n=t||Gn;return[Gn.prefix,n.decode(e)]}case Ln.prefix:{const n=t||Ln;return[Ln.prefix,n.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},Yr=(e,t,n)=>{const{prefix:r}=n;if(r!==Gn.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(null==o){const o=n.encode(e).slice(1);return t.set(r,o),o}return o},Zr=(e,t,n)=>{const{prefix:r}=n,o=t.get(r);if(null==o){const o=n.encode(e);return t.set(r,o),o}return o},eo=112,to=18,no=(e,t,n)=>{const r=Or(e),o=r+Or(t),i=new Uint8Array(o+n.byteLength);return _r(e,i,0),_r(t,i,r),i.set(n,o),i},ro=Symbol.for("@ipld/js-cid/CID"),oo={writable:!1,configurable:!1,enumerable:!0},io={writable:!1,enumerable:!1,configurable:!1},so=(e,t)=>{if(!e.test("0.0.0-dev"))throw new Error(t);console.warn(t)},ao="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",co={...Tn,...An,...xn,...kn,...Mn,...Jn,...$n,...Yn,...rr},lo={...Mr,...Ur},uo={raw:Fr,json:$r};var ho,fo=h(Object.freeze({__proto__:null,CID:Gr,bases:co,bytes:yn,codecs:uo,digest:Ar,hasher:Ir,hashes:lo,varint:Er}));function po(){if(ho)return un;ho=1,Object.defineProperty(un,"__esModule",{value:!0}),un.okxfromString=function(e,n="utf8"){const r=s[n];if((0,t.logDebug)("okxfromstring ====> "),!r)throw new Error(`Unsupported encoding "${n}"`);return r.decoder.decode(`${r.prefix}${e}`)},un.okxtoString=function(e,n="utf8"){const r=s[n];if((0,t.logDebug)("okxtoString ====> "),!r)throw new Error(`Unsupported encoding "${n}"`);return r.encoder.encode(e).substring(1)},un.alloc=function(e=0){return new Uint8Array(e)},un.allocUnsafe=n;const e=fo,t=cn();function n(e=0){return new Uint8Array(e)}function r(e,t,n,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:r}}}const o=r("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),i=r("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++){let r=e[n];r&&String.fromCharCode(r)&&(t+=String.fromCharCode(r))}return t}),(e=>{const t=n((e=e.substring(1)).length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),s=Object.assign({utf8:o,"utf-8":o,hex:e.bases.base16,latin1:i,ascii:i,binary:i},e.bases);return un}var go,vo={exports:{}},mo={exports:{}};mo.exports;function yo(){return go||(go=1,mo.exports=(e=e||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==u&&u.crypto&&(n=u.crypto),!n)try{n=R}catch(v){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(v){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(v){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},s=i.lib={},a=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=a.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var s=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else for(var a=0;a<o;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new c.init(t,e)}}),l=i.enc={},d=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(AO){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},p=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,s=this.blockSize,a=i/(4*s),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,u=e.min(4*l,i);if(l){for(var d=0;d<l;d+=s)this._doProcessBlock(o,d);n=o.splice(0,l),r.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=p.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}});var g=i.algo={};return i}(Math),e)),mo.exports;var e}var bo,wo={exports:{}};wo.exports;function Co(){return bo||(bo=1,wo.exports=(e=yo(),function(t){var n=e,r=n.lib,o=r.Base,i=r.WordArray,s=n.x64={};s.Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}})}(),e)),wo.exports;var e}var _o,Oo={exports:{}};Oo.exports;function Eo(){return _o||(_o=1,Oo.exports=(e=yo(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],o=0;o<t;o++)r[o>>>2]|=e[o]<<24-o%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=t}}(),e.lib.WordArray)),Oo.exports;var e}var So,Ro={exports:{}};Ro.exports;function To(){return So||(So=1,Ro.exports=(e=yo(),function(){var t=e,n=t.lib.WordArray,r=t.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return n.create(r,2*t)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var s=o(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return n.create(r,2*t)}}}(),e.enc.Utf16)),Ro.exports;var e}var No,Ao={exports:{}};Ao.exports;function Po(){return No||(No=1,Ao.exports=(e=yo(),function(){var t=e,n=t.lib.WordArray;function r(e,t,r){for(var o=[],i=0,s=0;s<t;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;o[i>>>2]|=a<<24-i%4*8,i++}return n.create(o,i)}t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;a<4&&i+.75*a<n;a++)o.push(r.charAt(s>>>6*(3-a)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var s=n.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(t=a)}return r(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)),Ao.exports;var e}var xo,Io={exports:{}};Io.exports;function ko(){return xo||(xo=1,Io.exports=(e=yo(),function(){var t=e,n=t.lib.WordArray;function r(e,t,r){for(var o=[],i=0,s=0;s<t;s++)if(s%4){var a=r[e.charCodeAt(s-1)]<<s%4*2|r[e.charCodeAt(s)]>>>6-s%4*2;o[i>>>2]|=a<<24-i%4*8,i++}return n.create(o,i)}t.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,o=t?this._safe_map:this._map;e.clamp();for(var i=[],s=0;s<r;s+=3)for(var a=(n[s>>>2]>>>24-s%4*8&255)<<16|(n[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|n[s+2>>>2]>>>24-(s+2)%4*8&255,c=0;c<4&&s+.75*c<r;c++)i.push(o.charAt(a>>>6*(3-c)&63));var l=o.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,o=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var s=0;s<o.length;s++)i[o.charCodeAt(s)]=s}var a=o.charAt(64);if(a){var c=e.indexOf(a);-1!==c&&(n=c)}return r(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url)),Io.exports;var e}var Do,Ko={exports:{}};Ko.exports;function Mo(){return Do||(Do=1,Ko.exports=(e=yo(),function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,s=n.algo,a=[];!function(){for(var e=0;e<64;e++)a[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],g=e[t+4],v=e[t+5],m=e[t+6],y=e[t+7],b=e[t+8],w=e[t+9],C=e[t+10],_=e[t+11],O=e[t+12],E=e[t+13],S=e[t+14],R=e[t+15],T=i[0],N=i[1],A=i[2],P=i[3];T=l(T,N,A,P,s,7,a[0]),P=l(P,T,N,A,c,12,a[1]),A=l(A,P,T,N,f,17,a[2]),N=l(N,A,P,T,p,22,a[3]),T=l(T,N,A,P,g,7,a[4]),P=l(P,T,N,A,v,12,a[5]),A=l(A,P,T,N,m,17,a[6]),N=l(N,A,P,T,y,22,a[7]),T=l(T,N,A,P,b,7,a[8]),P=l(P,T,N,A,w,12,a[9]),A=l(A,P,T,N,C,17,a[10]),N=l(N,A,P,T,_,22,a[11]),T=l(T,N,A,P,O,7,a[12]),P=l(P,T,N,A,E,12,a[13]),A=l(A,P,T,N,S,17,a[14]),T=u(T,N=l(N,A,P,T,R,22,a[15]),A,P,c,5,a[16]),P=u(P,T,N,A,m,9,a[17]),A=u(A,P,T,N,_,14,a[18]),N=u(N,A,P,T,s,20,a[19]),T=u(T,N,A,P,v,5,a[20]),P=u(P,T,N,A,C,9,a[21]),A=u(A,P,T,N,R,14,a[22]),N=u(N,A,P,T,g,20,a[23]),T=u(T,N,A,P,w,5,a[24]),P=u(P,T,N,A,S,9,a[25]),A=u(A,P,T,N,p,14,a[26]),N=u(N,A,P,T,b,20,a[27]),T=u(T,N,A,P,E,5,a[28]),P=u(P,T,N,A,f,9,a[29]),A=u(A,P,T,N,y,14,a[30]),T=d(T,N=u(N,A,P,T,O,20,a[31]),A,P,v,4,a[32]),P=d(P,T,N,A,b,11,a[33]),A=d(A,P,T,N,_,16,a[34]),N=d(N,A,P,T,S,23,a[35]),T=d(T,N,A,P,c,4,a[36]),P=d(P,T,N,A,g,11,a[37]),A=d(A,P,T,N,y,16,a[38]),N=d(N,A,P,T,C,23,a[39]),T=d(T,N,A,P,E,4,a[40]),P=d(P,T,N,A,s,11,a[41]),A=d(A,P,T,N,p,16,a[42]),N=d(N,A,P,T,m,23,a[43]),T=d(T,N,A,P,w,4,a[44]),P=d(P,T,N,A,O,11,a[45]),A=d(A,P,T,N,R,16,a[46]),T=h(T,N=d(N,A,P,T,f,23,a[47]),A,P,s,6,a[48]),P=h(P,T,N,A,y,10,a[49]),A=h(A,P,T,N,S,15,a[50]),N=h(N,A,P,T,v,21,a[51]),T=h(T,N,A,P,O,6,a[52]),P=h(P,T,N,A,p,10,a[53]),A=h(A,P,T,N,C,15,a[54]),N=h(N,A,P,T,c,21,a[55]),T=h(T,N,A,P,b,6,a[56]),P=h(P,T,N,A,R,10,a[57]),A=h(A,P,T,N,m,15,a[58]),N=h(N,A,P,T,E,21,a[59]),T=h(T,N,A,P,g,6,a[60]),P=h(P,T,N,A,_,10,a[61]),A=h(A,P,T,N,f,15,a[62]),N=h(N,A,P,T,w,21,a[63]),i[0]=i[0]+T|0,i[1]=i[1]+N|0,i[2]=i[2]+A|0,i[3]=i[3]+P|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296),s=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,c=a.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,o,i,s){var a=e+(t&n|~t&r)+o+s;return(a<<i|a>>>32-i)+t}function u(e,t,n,r,o,i,s){var a=e+(t&r|n&~r)+o+s;return(a<<i|a>>>32-i)+t}function d(e,t,n,r,o,i,s){var a=e+(t^n^r)+o+s;return(a<<i|a>>>32-i)+t}function h(e,t,n,r,o,i,s){var a=e+(n^(t|~r))+o+s;return(a<<i|a>>>32-i)+t}n.MD5=i._createHelper(c),n.HmacMD5=i._createHmacHelper(c)}(Math),e.MD5)),Ko.exports;var e}var Lo,Uo={exports:{}};Uo.exports;function jo(){return Lo||(Lo=1,Uo.exports=(e=yo(),function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,s=[],a=i.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],c=n[4],l=0;l<80;l++){if(l<16)s[l]=0|e[t+l];else{var u=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+c+s[l];d+=l<20?1518500249+(o&i|~o&a):l<40?1859775393+(o^i^a):l<60?(o&i|o&a|i&a)-1894007588:(o^i^a)-899497514,c=a,a=i,i=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=o._createHelper(a),t.HmacSHA1=o._createHmacHelper(a)}(),e.SHA1)),Uo.exports;var e}var Wo,Bo={exports:{}};Bo.exports;function Xo(){return Wo||(Wo=1,Bo.exports=(e=yo(),function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,s=n.algo,a=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(a[o]=n(t.pow(r,.5))),c[o]=n(t.pow(r,1/3)),o++),r++}();var l=[],u=s.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],u=n[5],d=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var p=l[f-15],g=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,v=l[f-2],m=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;l[f]=g+l[f-7]+m+l[f-16]}var y=r&o^r&i^o&i,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&d)+c[f]+l[f];h=d,d=u,u=a,a=s+w|0,s=i,i=o,o=r,r=w+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(u),n.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256)),Bo.exports;var e}var Ho,Fo={exports:{}};Fo.exports;var qo,Jo={exports:{}};Jo.exports;function zo(){return qo||(qo=1,Jo.exports=(e=yo(),Co(),function(){var t=e,n=t.lib.Hasher,r=t.x64,o=r.Word,i=r.WordArray,s=t.algo;function a(){return o.create.apply(o,arguments)}var c=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=a()}();var u=s.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],a=n[4],u=n[5],d=n[6],h=n[7],f=r.high,p=r.low,g=o.high,v=o.low,m=i.high,y=i.low,b=s.high,w=s.low,C=a.high,_=a.low,O=u.high,E=u.low,S=d.high,R=d.low,T=h.high,N=h.low,A=f,P=p,x=g,I=v,k=m,D=y,K=b,M=w,L=C,U=_,j=O,W=E,B=S,X=R,H=T,F=N,q=0;q<80;q++){var J,z,V=l[q];if(q<16)z=V.high=0|e[t+2*q],J=V.low=0|e[t+2*q+1];else{var $=l[q-15],G=$.high,Q=$.low,Y=(G>>>1|Q<<31)^(G>>>8|Q<<24)^G>>>7,Z=(Q>>>1|G<<31)^(Q>>>8|G<<24)^(Q>>>7|G<<25),ee=l[q-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=l[q-7],se=ie.high,ae=ie.low,ce=l[q-16],le=ce.high,ue=ce.low;z=(z=(z=Y+se+((J=Z+ae)>>>0<Z>>>0?1:0))+re+((J+=oe)>>>0<oe>>>0?1:0))+le+((J+=ue)>>>0<ue>>>0?1:0),V.high=z,V.low=J}var de,he=L&j^~L&B,fe=U&W^~U&X,pe=A&x^A&k^x&k,ge=P&I^P&D^I&D,ve=(A>>>28|P<<4)^(A<<30|P>>>2)^(A<<25|P>>>7),me=(P>>>28|A<<4)^(P<<30|A>>>2)^(P<<25|A>>>7),ye=(L>>>14|U<<18)^(L>>>18|U<<14)^(L<<23|U>>>9),be=(U>>>14|L<<18)^(U>>>18|L<<14)^(U<<23|L>>>9),we=c[q],Ce=we.high,_e=we.low,Oe=H+ye+((de=F+be)>>>0<F>>>0?1:0),Ee=me+ge;H=B,F=X,B=j,X=W,j=L,W=U,L=K+(Oe=(Oe=(Oe=Oe+he+((de+=fe)>>>0<fe>>>0?1:0))+Ce+((de+=_e)>>>0<_e>>>0?1:0))+z+((de+=J)>>>0<J>>>0?1:0))+((U=M+de|0)>>>0<M>>>0?1:0)|0,K=k,M=D,k=x,D=I,x=A,I=P,A=Oe+(ve+pe+(Ee>>>0<me>>>0?1:0))+((P=de+Ee|0)>>>0<de>>>0?1:0)|0}p=r.low=p+P,r.high=f+A+(p>>>0<P>>>0?1:0),v=o.low=v+I,o.high=g+x+(v>>>0<I>>>0?1:0),y=i.low=y+D,i.high=m+k+(y>>>0<D>>>0?1:0),w=s.low=w+M,s.high=b+K+(w>>>0<M>>>0?1:0),_=a.low=_+U,a.high=C+L+(_>>>0<U>>>0?1:0),E=u.low=E+W,u.high=O+j+(E>>>0<W>>>0?1:0),R=d.low=R+X,d.high=S+B+(R>>>0<X>>>0?1:0),N=h.low=N+F,h.high=T+H+(N>>>0<F>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(u),t.HmacSHA512=n._createHmacHelper(u)}(),e.SHA512)),Jo.exports;var e}var Vo,$o={exports:{}};$o.exports;var Go,Qo={exports:{}};Qo.exports;function Yo(){return Go||(Go=1,Qo.exports=(e=yo(),Co(),function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,s=n.x64.Word,a=n.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,i=0;i<24;i++){for(var a=0,d=0,h=0;h<7;h++){if(1&o){var f=(1<<h)-1;f<32?d^=1<<f:a^=1<<f-32}128&o?o=o<<1^113:o<<=1}u[i]=s.create(a,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=s.create()}();var h=a.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var i=e[t+2*o],s=e[t+2*o+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(N=n[o]).high^=s,N.low^=i}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var f=0,p=0,g=0;g<5;g++)f^=(N=n[h+5*g]).high,p^=N.low;var v=d[h];v.high=f,v.low=p}for(h=0;h<5;h++){var m=d[(h+4)%5],y=d[(h+1)%5],b=y.high,w=y.low;for(f=m.high^(b<<1|w>>>31),p=m.low^(w<<1|b>>>31),g=0;g<5;g++)(N=n[h+5*g]).high^=f,N.low^=p}for(var C=1;C<25;C++){var _=(N=n[C]).high,O=N.low,E=c[C];E<32?(f=_<<E|O>>>32-E,p=O<<E|_>>>32-E):(f=O<<E-32|_>>>64-E,p=_<<E-32|O>>>64-E);var S=d[l[C]];S.high=f,S.low=p}var R=d[0],T=n[0];for(R.high=T.high,R.low=T.low,h=0;h<5;h++)for(g=0;g<5;g++){var N=n[C=h+5*g],A=d[C],P=d[(h+1)%5+5*g],x=d[(h+2)%5+5*g];N.high=A.high^~P.high&x.high,N.low=A.low^~P.low&x.low}N=n[0];var I=u[a];N.high^=I.high,N.low^=I.low}},_doFinalize:function(){var e=this._data,n=e.words;this._nDataBytes;var r=8*e.sigBytes,i=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,c=a/8,l=[],u=0;u<c;u++){var d=s[u],h=d.high,f=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(h)}return new o.init(l,a)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=i._createHelper(h),n.HmacSHA3=i._createHmacHelper(h)}(Math),e.SHA3)),Qo.exports;var e}var Zo,ei={exports:{}};ei.exports;var ti,ni={exports:{}};ni.exports;function ri(){return ti||(ti=1,ni.exports=(e=yo(),void function(){var t=e,n=t.lib.Base,r=t.enc.Utf8;t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),s=this._iKey=t.clone(),a=i.words,c=s.words,l=0;l<n;l++)a[l]^=1549556828,c[l]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}())),ni.exports;var e}var oi,ii={exports:{}};ii.exports;var si,ai={exports:{}};ai.exports;function ci(){return si||(si=1,ai.exports=(e=yo(),jo(),ri(),function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=t.algo,s=i.MD5,a=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),s=o.create(),a=s.words,c=r.keySize,l=r.iterations;a.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)n=i.finalize(n),i.reset();s.concat(n)}return s.sigBytes=4*c,s}});t.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)}}(),e.EvpKDF)),ai.exports;var e}var li,ui={exports:{}};ui.exports;function di(){return li||(li=1,ui.exports=(e=yo(),ci(),void(e.lib.Cipher||function(t){var n=e,r=n.lib,o=r.Base,i=r.WordArray,s=r.BufferedBlockAlgorithm,a=n.enc;a.Utf8;var c=a.Base64,l=n.algo.EvpKDF,u=r.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:m}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=n.mode={},h=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=d.CBC=function(){var e=h.extend();function n(e,n,r){var o,i=this._iv;i?(o=i,this._iv=t):o=this._prevBlock;for(var s=0;s<r;s++)e[n+s]^=o[s]}return e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize;n.call(this,e,t,o),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,i=e.slice(t,t+o);r.decryptBlock(e,t),n.call(this,e,t,o),this._prevBlock=i}}),e}(),p=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,s=[],a=0;a<r;a+=4)s.push(o);var c=i.create(s,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:f,padding:p}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var g=r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),v=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},m=r.SerializableCipher=o.extend({cfg:o.extend({format:v}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),i=o.finalize(t),s=o.cfg;return g.create({ciphertext:i,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(n.kdf={}).OpenSSL={execute:function(e,t,n,r,o){if(r||(r=i.random(8)),o)s=l.create({keySize:t+n,hasher:o}).compute(e,r);else var s=l.create({keySize:t+n}).compute(e,r);var a=i.create(s.words.slice(t),4*n);return s.sigBytes=4*t,g.create({key:s,iv:a,salt:r})}},b=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:y}),encrypt:function(e,t,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=o.iv;var i=m.encrypt.call(this,e,t,o.key,r);return i.mixIn(o),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=o.iv,m.decrypt.call(this,e,t,o.key,r)}})}()))),ui.exports;var e}var hi,fi={exports:{}};fi.exports;function pi(){return hi||(hi=1,fi.exports=(e=yo(),di(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var o,i=this._iv;i?(o=i.slice(0),this._iv=void 0):o=this._prevBlock,r.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize;n.call(this,e,t,o,r),this._prevBlock=e.slice(t,t+o)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,i=e.slice(t,t+o);n.call(this,e,t,o,r),this._prevBlock=i}}),t}(),e.mode.CFB)),fi.exports;var e}var gi,vi={exports:{}};vi.exports;function mi(){return gi||(gi=1,vi.exports=(n=yo(),di(),n.mode.CTR=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter;o&&(i=this._counter=o.slice(0),this._iv=void 0);var s=i.slice(0);n.encryptBlock(s,0),i[r-1]=i[r-1]+1|0;for(var a=0;a<r;a++)e[t+a]^=s[a]}}),e.Decryptor=t,e),n.mode.CTR)),vi.exports;var e,t,n}var yi,bi={exports:{}};bi.exports;function wi(){return yi||(yi=1,bi.exports=(e=yo(),di(),
/** @preserve
    			 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
    			 * derived from CryptoJS.mode.CTR
    			 * Jan Hruby jhruby.web@gmail.com
    			 */
e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}function r(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var o=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,s=this._counter;i&&(s=this._counter=i.slice(0),this._iv=void 0),r(s);var a=s.slice(0);n.encryptBlock(a,0);for(var c=0;c<o;c++)e[t+c]^=a[c]}});return t.Decryptor=o,t}(),e.mode.CTRGladman)),bi.exports;var e}var Ci,_i={exports:{}};_i.exports;function Oi(){return Ci||(Ci=1,_i.exports=(n=yo(),di(),n.mode.OFB=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._keystream;o&&(i=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var s=0;s<r;s++)e[t+s]^=i[s]}}),e.Decryptor=t,e),n.mode.OFB)),_i.exports;var e,t,n}var Ei,Si={exports:{}};Si.exports;var Ri,Ti={exports:{}};Ti.exports;var Ni,Ai={exports:{}};Ai.exports;var Pi,xi={exports:{}};xi.exports;var Ii,ki={exports:{}};ki.exports;var Di,Ki={exports:{}};Ki.exports;var Mi,Li={exports:{}};Li.exports;var Ui,ji={exports:{}};ji.exports;var Wi,Bi={exports:{}};Bi.exports;function Xi(){return Wi||(Wi=1,Bi.exports=(e=yo(),Po(),Mo(),ci(),di(),function(){var t=e,n=t.lib,r=n.WordArray,o=n.BlockCipher,i=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=s[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var o=this._subKeys=[],i=0;i<16;i++){var l=o[i]=[],u=c[i];for(n=0;n<24;n++)l[n/6|0]|=t[(a[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(a[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var o=n[r],i=this._lBlock,s=this._rBlock,a=0,c=0;c<8;c++)a|=l[c][((s^o[c])&u[c])>>>0];this._lBlock=s,this._rBlock=i^a}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function f(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=o._createHelper(d);var p=i.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),o=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(r.create(t)),this._des2=d.createEncryptor(r.create(n)),this._des3=d.createEncryptor(r.create(o))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=o._createHelper(p)}(),e.TripleDES)),Bi.exports;var e}var Hi,Fi={exports:{}};Fi.exports;var qi,Ji={exports:{}};Ji.exports;var zi,Vi={exports:{}};Vi.exports;var $i,Gi={exports:{}};Gi.exports;function Qi(){return $i||($i=1,Gi.exports=(e=yo(),Po(),Mo(),ci(),di(),function(){var t=e,n=t.lib.BlockCipher,r=t.algo;const o=16,i=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var a={pbox:[],sbox:[]};function c(e,t){let n=t>>24&255,r=t>>16&255,o=t>>8&255,i=255&t,s=e.sbox[0][n]+e.sbox[1][r];return s^=e.sbox[2][o],s+=e.sbox[3][i],s}function l(e,t,n){let r,i=t,s=n;for(let a=0;a<o;++a)i^=e.pbox[a],s=c(e,i)^s,r=i,i=s,s=r;return r=i,i=s,s=r,s^=e.pbox[o],i^=e.pbox[o+1],{left:i,right:s}}function u(e,t,n){let r,i=t,s=n;for(let a=o+1;a>1;--a)i^=e.pbox[a],s=c(e,i)^s,r=i,i=s,s=r;return r=i,i=s,s=r,s^=e.pbox[1],i^=e.pbox[0],{left:i,right:s}}function d(e,t,n){for(let o=0;o<4;o++){e.sbox[o]=[];for(let t=0;t<256;t++)e.sbox[o][t]=s[o][t]}let r=0;for(let s=0;s<o+2;s++)e.pbox[s]=i[s]^t[r],r++,r>=n&&(r=0);let a=0,c=0,u=0;for(let i=0;i<o+2;i+=2)u=l(e,a,c),a=u.left,c=u.right,e.pbox[i]=a,e.pbox[i+1]=c;for(let o=0;o<4;o++)for(let t=0;t<256;t+=2)u=l(e,a,c),a=u.left,c=u.right,e.sbox[o][t]=a,e.sbox[o][t+1]=c;return!0}var h=r.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;d(a,t,n)}},encryptBlock:function(e,t){var n=l(a,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=u(a,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(h)}(),e.Blowfish)),Gi.exports;var e}var Yi,Zi,es,ts;vo.exports;function ns(){return Yi||(Yi=1,vo.exports=function(e){return e}(yo(),Co(),Eo(),To(),Po(),ko(),Mo(),jo(),Xo(),(Ho||(Ho=1,Fo.exports=(e=yo(),Xo(),function(){var t=e,n=t.lib.WordArray,r=t.algo,o=r.SHA256,i=r.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(i),t.HmacSHA224=o._createHmacHelper(i)}(),e.SHA224)),Fo.exports),zo(),function(){return Vo||(Vo=1,$o.exports=(e=yo(),Co(),zo(),function(){var t=e,n=t.x64,r=n.Word,o=n.WordArray,i=t.algo,s=i.SHA512,a=i.SHA384=s.extend({_doReset:function(){this._hash=new o.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=s._createHelper(a),t.HmacSHA384=s._createHmacHelper(a)}(),e.SHA384)),$o.exports;var e}(),Yo(),function(){return Zo||(Zo=1,ei.exports=(e=yo(),
/** @preserve
    			(c) 2012 by CÃ©dric Mesnil. All rights reserved.

    			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

    			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
    			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

    			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
    			*/
function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,s=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=r.create([0,1518500249,1859775393,2400959708,2840853838]),d=r.create([1352829926,1548603684,1836072691,2053994217,0]),h=i.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i,h,b,w,C,_,O,E,S,R,T,N=this._hash.words,A=u.words,P=d.words,x=s.words,I=a.words,k=c.words,D=l.words;for(_=i=N[0],O=h=N[1],E=b=N[2],S=w=N[3],R=C=N[4],n=0;n<80;n+=1)T=i+e[t+x[n]]|0,T+=n<16?f(h,b,w)+A[0]:n<32?p(h,b,w)+A[1]:n<48?g(h,b,w)+A[2]:n<64?v(h,b,w)+A[3]:m(h,b,w)+A[4],T=(T=y(T|=0,k[n]))+C|0,i=C,C=w,w=y(b,10),b=h,h=T,T=_+e[t+I[n]]|0,T+=n<16?m(O,E,S)+P[0]:n<32?v(O,E,S)+P[1]:n<48?g(O,E,S)+P[2]:n<64?p(O,E,S)+P[3]:f(O,E,S)+P[4],T=(T=y(T|=0,D[n]))+R|0,_=R,R=S,S=y(E,10),E=O,O=T;T=N[1]+b+S|0,N[1]=N[2]+w+R|0,N[2]=N[3]+C+_|0,N[3]=N[4]+i+O|0,N[4]=N[0]+h+E|0,N[0]=T},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,i=o.words,s=0;s<5;s++){var a=i[s];i[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return o},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function f(e,t,n){return e^t^n}function p(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function v(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function y(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(h),t.HmacRIPEMD160=o._createHmacHelper(h)}(),e.RIPEMD160)),ei.exports;var e}(),ri(),function(){return oi||(oi=1,ii.exports=(e=yo(),Xo(),ri(),function(){var t=e,n=t.lib,r=n.Base,o=n.WordArray,i=t.algo,s=i.SHA256,a=i.HMAC,c=i.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=a.create(n.hasher,e),i=o.create(),s=o.create([1]),c=i.words,l=s.words,u=n.keySize,d=n.iterations;c.length<u;){var h=r.update(t).finalize(s);r.reset();for(var f=h.words,p=f.length,g=h,v=1;v<d;v++){g=r.finalize(g),r.reset();for(var m=g.words,y=0;y<p;y++)f[y]^=m[y]}i.concat(h),l[0]++}return i.sigBytes=4*u,i}});t.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)}}(),e.PBKDF2)),ii.exports;var e}(),ci(),di(),pi(),mi(),wi(),Oi(),function(){return Ei||(Ei=1,Si.exports=(t=yo(),di(),t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e),t.mode.ECB)),Si.exports;var e,t}(),function(){return Ri||(Ri=1,Ti.exports=(e=yo(),di(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,o=r-n%r,i=n+o-1;e.clamp(),e.words[i>>>2]|=o<<24-i%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923)),Ti.exports;var e}(),function(){return Ni||(Ni=1,Ai.exports=(e=yo(),di(),e.pad.Iso10126={pad:function(t,n){var r=4*n,o=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126)),Ai.exports;var e}(),function(){return Pi||(Pi=1,xi.exports=(e=yo(),di(),e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971)),xi.exports;var e}(),function(){return Ii||(Ii=1,ki.exports=(e=yo(),di(),e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding)),ki.exports;var e}(),function(){return Di||(Di=1,Ki.exports=(e=yo(),di(),e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding)),Ki.exports;var e}(),function(){return Mi||(Mi=1,Li.exports=(e=yo(),di(),function(){var t=e,n=t.lib.CipherParams,r=t.enc.Hex;t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return n.create({ciphertext:t})}}}(),e.format.Hex)),Li.exports;var e}(),function(){return Ui||(Ui=1,ji.exports=(e=yo(),Po(),Mo(),ci(),di(),function(){var t=e,n=t.lib.BlockCipher,r=t.algo,o=[],i=[],s=[],a=[],c=[],l=[],u=[],d=[],h=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,o[n]=p,i[p]=n;var g=e[n],v=e[g],m=e[v],y=257*e[p]^16843008*p;s[n]=y<<24|y>>>8,a[n]=y<<16|y>>>16,c[n]=y<<8|y>>>24,l[n]=y,y=16843009*m^65537*v^257*g^16843008*n,u[p]=y<<24|y>>>8,d[p]=y<<16|y>>>16,h[p]=y<<8|y>>>24,f[p]=y,n?(n=g^e[e[e[m^g]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],s=0;s<r;s++)s<n?i[s]=t[s]:(l=i[s-1],s%n?n>6&&s%n==4&&(l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l]):(l=o[(l=l<<8|l>>>24)>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l],l^=p[s/n|0]<<24),i[s]=i[s-n]^l);for(var a=this._invKeySchedule=[],c=0;c<r;c++){if(s=r-c,c%4)var l=i[s];else l=i[s-4];a[c]=c<4||s<=4?l:u[o[l>>>24]]^d[o[l>>>16&255]]^h[o[l>>>8&255]]^f[o[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,l,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,f,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,s,a){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],f=4,p=1;p<c;p++){var g=r[l>>>24]^o[u>>>16&255]^i[d>>>8&255]^s[255&h]^n[f++],v=r[u>>>24]^o[d>>>16&255]^i[h>>>8&255]^s[255&l]^n[f++],m=r[d>>>24]^o[h>>>16&255]^i[l>>>8&255]^s[255&u]^n[f++],y=r[h>>>24]^o[l>>>16&255]^i[u>>>8&255]^s[255&d]^n[f++];l=g,u=v,d=m,h=y}g=(a[l>>>24]<<24|a[u>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^n[f++],v=(a[u>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^n[f++],m=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&u])^n[f++],y=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[u>>>8&255]<<8|a[255&d])^n[f++],e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=y},keySize:8});t.AES=n._createHelper(g)}(),e.AES)),ji.exports;var e}(),Xi(),function(){return Hi||(Hi=1,Fi.exports=(e=yo(),Po(),Mo(),ci(),di(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;o=0;for(var i=0;o<256;o++){var s=o%n,a=t[s>>>2]>>>24-s%4*8&255;i=(i+r[o]+a)%256;var c=r[o];r[o]=r[i],r[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}t.RC4=n._createHelper(o);var s=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=n._createHelper(s)}(),e.RC4)),Fi.exports;var e}(),function(){return qi||(qi=1,Ji.exports=(e=yo(),Po(),Mo(),ci(),di(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=[],i=[],s=[],a=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=r[n+4&7];if(t){var i=t.words,s=i[0],a=i[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(o[0]^=l,o[1]^=d,o[2]^=u,o[3]^=h,o[4]^=l,o[5]^=d,o[6]^=u,o[7]^=h,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16,c=((o*o>>>17)+o*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=c^l}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=n._createHelper(a)}(),e.Rabbit)),Ji.exports;var e}(),function(){return zi||(zi=1,Vi.exports=(e=yo(),Po(),Mo(),ci(),di(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=[],i=[],s=[],a=r.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)c.call(this);for(o=0;o<8;o++)r[o]^=n[o+4&7];if(t){var i=t.words,s=i[0],a=i[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(r[0]^=l,r[1]^=d,r[2]^=u,r[3]^=h,r[4]^=l,r[5]^=d,r[6]^=u,r[7]^=h,o=0;o<4;o++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,a=r>>>16,c=((o*o>>>17)+o*a>>>15)+a*a,l=((4294901760&r)*r|0)+((65535&r)*r|0);s[n]=c^l}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=n._createHelper(a)}(),e.RabbitLegacy)),Vi.exports;var e}(),Qi())),vo.exports;var e}function rs(){return Zi||(Zi=1,function(e){var t=A.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.chainName2IdMap=e.isValidObject=e.RANDOM_LENGTH=e.isBrowser=e.resolveLocalStorage=e.hasLocalStorage=e.hasBuiltInWebSocket=e.resolveWebSocketImplementation=void 0,e.hexToByteArray=function(e){if(e.length%2!=0)throw new Error(`Cannot convert ${e} to bytesArray`);const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t},e.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},e.toHexString=function(e){let t="";return e.forEach((e=>{t+=("0"+(255&e).toString(16)).slice(-2)})),t},e.concatUint8Arrays=function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n},e.splitToUint8Arrays=function(e,t){if(t>=e.length)throw new Error("Index is out of buffer");const n=e.slice(0,t),r=e.slice(t);return[n,r]},e.base64encode=function(e,t){let n;e instanceof Uint8Array?n=e:("string"!=typeof e&&(e=(0,a.safeJsonStringify)(e)),n=r.default.decodeUTF8(e));return function(e,t){const n=r.default.encodeBase64(e);if(!t)return n;return encodeURIComponent(n)}(n,t)},e.base64decode=function(e,t){const n=function(e,t){t&&(e=decodeURIComponent(e));return r.default.decodeBase64(e)}(e,t);return{toString:()=>r.default.encodeUTF8(n),toObject(){try{return(0,a.safeJsonParse)(r.default.encodeUTF8(n))}catch(AO){return null}},toUint8Array:()=>n}},e.checkWSUrl=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];if(void 0===n)return!1;return new RegExp("^wss?:").test(n)},e.hashKey=f,e.generateRandomBytes32=p,e.generateTopic=function(){let e=p();return(0,c.logDebug)(`generate topic called ${e}`),f((0,i.toString)(e,h))},e.generateGroupId=function(){let e=n.default.randomBytes(16);return(0,c.logDebug)(`generate groupid called ${e}`),f((0,i.toString)(e,h))},e.isInIOSLine=function(){const e=navigator.userAgent;return e.includes("Safari Line/")&&g()},e.isInIOSLark=function(){const e=navigator.userAgent;return e.includes("Lark/")&&g()},e.isInIOSWeChat=function(){const e=navigator.userAgent;return e.includes("MicroMessenger/")&&g()},e.isIos=g,e.getLastSixMd5Hash=function(e){return d.default.MD5(e).toString().slice(-6)},e.toSafeBase64FromBase64=function(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},e.useShortLink=function(){return!1},e.replaceChainNameToChainId=function(t){return e.chainName2IdMap.forEach(((e,n)=>{t.includes(n)&&(t=t.replace(n,e))})),t},e.replaceChainIdToChainName=function(t){return e.chainName2IdMap.forEach(((e,n)=>{t.includes(e)&&(t=t.replace(e,n))})),t};const n=t(T()),r=t((N||(N=1,o=P,function(e,t){o.exports?o.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())}(x,(function(){var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw new TypeError("expected string");var t,n=unescape(encodeURIComponent(e)),r=new Uint8Array(n.length);for(t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r},e.encodeUTF8=function(e){var t,n=[];for(t=0;t<e.length;t++)n.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(n.join("")))},"undefined"==typeof atob?void 0!==Buffer.from?(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(String.fromCharCode(e[t]));return btoa(n.join(""))},e.decodeBase64=function(e){t(e);var n,r=atob(e),o=new Uint8Array(r.length);for(n=0;n<r.length;n++)o[n]=r.charCodeAt(n);return o}),e}))),P.exports));var o;const i=ke,s=(je||(je=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Le(),n=Be();e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},r.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var n=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[n++],t--;this._bufferLength===this.blockSize&&(i(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(n=i(this._temp,this._state,e,n,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[n++],t--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,o=n/536870912|0,s=n<<3,a=n%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<a-8;c++)this._buffer[c]=0;t.writeUint32BE(o,this._buffer,a-8),t.writeUint32BE(s,this._buffer,a-4),i(this._temp,this._state,this._buffer,0,a),this._finished=!0}for(c=0;c<this.digestLength/4;c++)t.writeUint32BE(this._state[c],e,4*c);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.state),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA256=r;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function i(e,n,r,i,s){for(;s>=64;){for(var a=n[0],c=n[1],l=n[2],u=n[3],d=n[4],h=n[5],f=n[6],p=n[7],g=0;g<16;g++){var v=i+4*g;e[g]=t.readUint32BE(r,v)}for(g=16;g<64;g++){var m=e[g-2],y=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,b=((m=e[g-15])>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;e[g]=(y+e[g-7]|0)+(b+e[g-16]|0)}for(g=0;g<64;g++)y=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&h^~d&f)|0)+(p+(o[g]+e[g]|0)|0)|0,b=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&l^c&l)|0,p=f,f=h,h=d,d=u+y|0,u=l,l=c,c=a,a=y+b|0;n[0]+=a,n[1]+=c,n[2]+=l,n[3]+=u,n[4]+=d,n[5]+=h,n[6]+=f,n[7]+=p,i+=64,s-=64}return i}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}}(De)),De),a=ln(),c=cn(),l=po(),d=t(ns()),h="base16";e.resolveWebSocketImplementation=()=>"undefined"!=typeof WebSocket?WebSocket:void 0!==u&&void 0!==u.WebSocket?u.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:"undefined"!=typeof self&&void 0!==self.WebSocket?self.WebSocket:WebSocket;e.hasBuiltInWebSocket=()=>"undefined"!=typeof WebSocket||void 0!==u&&void 0!==u.WebSocket||"undefined"!=typeof window&&void 0!==window.WebSocket||"undefined"!=typeof self&&void 0!==self.WebSocket;e.hasLocalStorage=()=>void 0!==u&&void 0!==u.localStorage||"undefined"!=typeof window&&void 0!==window.localStorage;e.resolveLocalStorage=()=>void 0!==u&&void 0!==u.localStorage?u.localStorage:"undefined"!=typeof window&&void 0!==window.localStorage?window.localStorage:localStorage;function f(e,t=h){(0,c.logDebug)(`hash key called ${e}`);const n=(0,s.hash)((0,l.okxfromString)(e,t));return(0,i.toString)(n,t)}function p(){return n.default.randomBytes(e.RANDOM_LENGTH)}e.isBrowser=()=>"undefined"!=typeof window,e.RANDOM_LENGTH=32;function g(){const e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,r=e.includes("Mac")&&t>1;return(0,c.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${r}`),n||r}e.isValidObject=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length,e.chainName2IdMap=new Map,e.chainName2IdMap.set("aptos:mainnet","aptos:637"),e.chainName2IdMap.set("movement:testnet","aptos:70000060"),e.chainName2IdMap.set("movement:mainnet","aptos:70000066"),e.chainName2IdMap.set("soon:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","svm:70000069"),e.chainName2IdMap.set("soon:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","svm:70000067"),e.chainName2IdMap.set("eclipse:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","svm:70000068")}(A)),A}function os(){if(es)return _;es=1;var e=_.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=_.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=_.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},n(e)};return function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var i=n(r),s=0;s<i.length;s++)"default"!==i[s]&&e(o,r,i[s]);return t(o,r),o}}(),r=_.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_,"__esModule",{value:!0}),_.Storage=void 0;const o=C(),i=r(T()),s=rs(),a=Yt(),c=n(cn()),l=Yt(),u=ns();class d{constructor(e,t=void 0){const n=(0,s.resolveLocalStorage)();this.storeKey="",this.cipherIV="",this.subKey=e,c.logDebug("--------get current local storage --------"),c.logDebug(n);const r=n.getItem(d.cacheKey+e);if(null==r)return c.logDebug("with no cache"),void(this.cache={});if(c.logDebug(r),(null==r?void 0:r.length)>0){var o=(0,a.safeJsonParse)(r);this.cache=o}c.logDebug(`get cache obj: ${this.cache}`),void 0!==this.cache&&null!=this.cache||(this.cache={})}checkAndUpgradeCache(e,t){if(e&&e.length>0&&t&&t.length>0){c.logDebug("--------get current local storage --------"),c.logDebug(localStorage);const n=localStorage.getItem(d.cacheKey+e);if(null==n)return void c.logDebug("no pre cache content");c.logDebug(n),(null==n?void 0:n.length)>0&&(c.logDebug("write in cache content: ",e,"->",t),localStorage.setItem(d.cacheKey+t,n),c.logDebug("clean in cache content: ",e),localStorage.removeItem(d.cacheKey+e))}else c.logDebug("no pre cache key:",e)}saveContent(e,t,n="-"){let r={id:n,timestamp:Date.now().toString(),content:e};this.saveItem(r,t)}saveItem(e,t){let n=d.cacheKey+this.subKey;const r=(0,s.resolveLocalStorage)();c.logDebug(this.cache),c.logDebug(`get cache obj: ${this.cache}, ${t}, ${e}`),this.cache[t]=e;let o=(0,a.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: ${t} @ ${this.cache}`),r.setItem(n,o)}getItem(e){return c.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,n,r;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let a=null===(t=this.getItem(o.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;a||(a=(0,s.toHexString)(i.default.randomBytes(24)),this.saveContent(a,o.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let c=null===(n=this.getItem(o.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;c||(c=(0,s.toHexString)(i.default.randomBytes(32)),this.saveContent(c,o.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let l=null===(r=this.getItem(o.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===r?void 0:r.content;if(!l){let e=i.default.randomBytes(16);l=(0,s.toHexString)(e),this.saveContent(l,o.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=l,this.storeKey=(0,u.PBKDF2)(c,a,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var r=u.AES.encrypt(e,n.pw).toString();this.saveContent(r,t),(0,l.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=u.AES.decrypt(t.content,e.pw).toString(u.enc.Utf8);return(0,l.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(e=void 0){if(void 0===e){const e=(0,s.resolveLocalStorage)();this.cache={};let t=d.cacheKey+this.subKey;e.setItem(t,"")}else{let t=d.cacheKey+this.subKey;const n=(0,s.resolveLocalStorage)();c.logDebug(this.cache),this.cache[e]=null;let r=(0,a.safeJsonStringify)(this.cache);c.logDebug(`STORAGE: clean key ${e} @ ${this.cache}`),n.setItem(t,r)}}}return _.Storage=d,d.cacheKey="OKXStorageKey",_}function is(){if(ts)return v;ts=1;var e=v.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=v.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=v.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},n(e)};return function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var i=n(r),s=0;s<i.length;s++)"default"!==i[s]&&e(o,r,i[s]);return t(o,r),o}}(),r=v.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(v,"__esModule",{value:!0}),v.OKXWalletConnector=void 0;const o=y(),i=C(),s=os(),a=Yt(),c=rs(),l=pt(),u=n(cn()),d=Pt(),h=rn(),f=(0,c.resolveWebSocketImplementation)();return v.OKXWalletConnector=class{constructor(e){if(this.events=new l.EventEmitter,this.state=o.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new s.Storage(i.OKXCONNECTOR_CACHE_KEY+i.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==o.ConnectorState.Connecting}onPayload(e){if(void 0!==e.data){if(u.logDebug("get received data"),u.logDebug(e),"string"==typeof e.data){if("pong"===e.data)return void u.logDebug(`CONNECT: receive pong ${Date.now().toString()}`)}this.events.emit("payload",e.data)}}onClose(e){var t;u.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){const n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=o.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return r(this,void 0,void 0,(function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){if(this.socket){if(this.socket.readyState===WebSocket.OPEN)u.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3);else if(u.logDebug("socket not ready"),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){u.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch(AO){u.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else if(u.logDebug("socket not exist"),this.state==o.ConnectorState.Connected||this.state==o.ConnectorState.OnError){u.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch(AO){u.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else u.logDebug("heart beat close")}))}registOpen(e=this.url,t=!1){if(!(0,c.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);return this.url=e,t||u.logDebug("Connection connect:",this.url,(new Date).toUTCString()),this.state=o.ConnectorState.Connecting,new URLSearchParams(e).get("origin"),new Promise(((t,n)=>{const r=new f(e,[]);u.logDebug("Connection connect Begin:",this.url,(new Date).toUTCString()),this.startTimeOutTimer(r),(0,c.hasBuiltInWebSocket)()?(u.logDebug("Add socket error handler"),r.onerror=()=>{n(new Error("socket error")),r.close()}):(u.logDebug("Add socket error handler"),r.on("error",(()=>{n(new Error("socket error")),r.close()}))),r.onopen=()=>{u.logDebug("socket opened"),this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(r),this.heartbeat(),t(r)}}))}checkMaxRetry(){return u.logDebug("current retry count:",this.retryCount,"of",o.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>3*o.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return r(this,void 0,void 0,(function*(){if(!this.checkMaxRetry()){this.retryCount+=1;let e=this.getNextSelectUrl();return u.logDebug("Connection retry:",e,(new Date).toUTCString()),this.registOpen(e,!0)}u.logDebug("Max Connection retry ",this.retryCount,(new Date).toUTCString())}))}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout((()=>{this.pendingSocket&&this.resetTimeOutTimer(o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)}),this.timeOutLimit)}resetTimeOutTimer(e){var t;if(e==o.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)throw clearTimeout(this.connectionTimeoutTimer),null===(t=this.pendingSocket)||void 0===t||t.close(),this.pendingSocket=void 0,u.reportEvent(h.OKXReportType.LOG,"timeout",this.retryCount.toString()),new Error("socket timeout");this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),i.OKXCONNECTOR_CACHE_KEY)}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%o.OKXCONNECTOR_WS_URL_LIST.length,o.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return r(this,void 0,void 0,(function*(){if("visible"!==document.visibilityState||(u.logDebug(`get changed ${this.state}, ${this.socket}`),this.state!=o.ConnectorState.Connected||void 0!==this.socket));else{u.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch(AO){u.logError("regist open failed")}}}))}tryRegistOpen(){return r(this,arguments,void 0,(function*(e=this.url){if(this.connecting)return u.logDebug("tryRegistOpen => connecting state"),new Promise(((e,t)=>{this.events.once("fail",(e=>(u.logDebug("tryRegistOpen => connecting fail listener",e),t(e)))),this.events.once("open",(()=>void 0===this.socket?t(new Error("Connect lost")):e(this.socket)))}));u.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let t=!1;for(;!this.checkMaxRetry()&&!this.socket;)try{u.logDebug("tryRegistOpen => call registOpen, try count:",this.retryCount,t),yield this.registOpen(e,t)}catch(n){u.logDebug("tryRegistOpen => registOpen failed",n),this.retryCount+=1,e=this.getNextSelectUrl(),t=!0}if(u.logDebug("tryRegistOpen => exit while loop",this.retryCount,this.socket),!this.socket&&this.checkMaxRetry())throw u.logDebug("tryRegistOpen => failed to open a socket",this.retryCount,this.socket),this.retryCount=0,this.state=o.ConnectorState.OnError,this.emitError(new Error("tryRegistOpen failed")),new d.OKXConnectError(d.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")}))}connect(){return r(this,void 0,void 0,(function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(AO){throw u.logDebug("connect => failed to connect",AO),AO}}))}disconnect(){return r(this,void 0,void 0,(function*(){return this.state=o.ConnectorState.Disconnected,new Promise(((e,t)=>{void 0!==this.socket?(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer)):e()}))}))}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,o,i){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=s=>r(this,void 0,void 0,(function*(){var r;u.logDebug(`<<< get payload ${s}`);let c=(0,a.safeJsonParse)(s);if(c.params&&c.params.data){let a=null===(r=c.params.data)||void 0===r?void 0:r.message,l=!1;if(a&&i){let e=yield i(c.params.data);l=e.isSplitPackage&&!e.finalMessage,e.isSplitPackage&&(e.finalMessage&&e.finalMessage.length>0?(u.logDebug("CONNECT: update raw msg content"),a=e.finalMessage):(u.logDebug("CONNECT: skip raw msg content"),l=!0))}if(!l)try{let r=t(a);void 0===r?(u.logDebug("CONNECT: decrypt undefined"),o(e,"Decrypt undefined")):n(e,r)}catch(s){u.logDebug(`CONNECT: decrypt failed: ${s}`),o(e,s.message)}}})),this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(u.logDebug(`CONNECT failed: ${t}`),o(e,t.message)):o(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>r(this,void 0,void 0,(function*(){u.logDebug(`CONNECTION @[${(new Date).toUTCString()}] <<<< received e:${t}`);let n=(0,a.safeJsonParse)(t);yield e(n)})),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return r(this,void 0,void 0,(function*(){try{void 0===this.socket&&(u.logDebug(`>>> send payload undefined ${t}`),yield e()),u.logDebug(`CONNECTION @[${(new Date).toUTCString()}]>>> send payload ${(0,a.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,a.safeJsonStringify)(t))}catch(AO){this.onError(t.id,AO)}}))}getMsgPayloadFromHistory(e){return r(this,void 0,void 0,(function*(){if(void 0===e)return;let t={params:{data:e}},n=(0,a.safeJsonStringify)(e);u.logDebug("get received data from history"),u.logDebug(n),n=(0,a.safeJsonStringify)(t),this.events.emit("payload",n)}))}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>r(this,void 0,void 0,(function*(){u.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> ws opened: `),yield e()})),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}},v}var ss,as={},cs={};function ls(){return ss||(ss=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.CONNECT_METHOD_BATCH_FETCHMSG=cs.CONNECT_METHOD_FETCHMSG=cs.CONNECT_METHOD_RECEIVE=cs.CONNECT_METHOD_UNSUB=cs.CONNECT_METHOD_SUB=cs.CONNECT_METHOD_PUBLISH=cs.CONNECT_METHOD_LOGIN=cs.CONNECT_METHOD_PUSH=void 0,cs.CONNECT_METHOD_PUSH="push",cs.CONNECT_METHOD_LOGIN="login",cs.CONNECT_METHOD_PUBLISH="publish",cs.CONNECT_METHOD_SUB="subscribe",cs.CONNECT_METHOD_UNSUB="unsubscribe",cs.CONNECT_METHOD_RECEIVE="receive",cs.CONNECT_METHOD_FETCHMSG="fetchMessages",cs.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"),cs}var us,ds={};function hs(){return us||(us=1,Object.defineProperty(ds,"__esModule",{value:!0}),ds.OKXCONNECTOR_JWT_TTL=ds.OKXCONNECTOR_JWT_WALLET_SIDE=ds.OKXCONNECTOR_JWT_SIDE=void 0,ds.OKXCONNECTOR_JWT_SIDE="wallet",ds.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",ds.OKXCONNECTOR_JWT_TTL=864e5),ds}var fs,ps={};function gs(){if(fs)return ps;fs=1;var e=ps.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ps,"__esModule",{value:!0}),ps.SessionCrypto=void 0;const t=e(T()),n=rs();return ps.SessionCrypto=class{constructor(e=void 0){this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return t.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,n.hexToByteArray)(e.publicKey),secretKey:(0,n.hexToByteArray)(e.secretKey)}}createNonce(){return t.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,r){const o=(new TextEncoder).encode(e),i=this.createNonce(),s=t.default.box(o,i,(0,n.hexToByteArray)(r),this.keyPair.secretKey);let a=(0,n.concatUint8Arrays)(i,s);var c=(0,n.toHexString)(a),l=(new TextEncoder).encode(c);return(0,n.base64encode)(l,!1)}encryptWallet(e,r){const o=(new TextEncoder).encode(e),i=this.createNonce(),s=t.default.box(o,i,(0,n.hexToByteArray)(r),this.keyPair.secretKey);let a=(0,n.concatUint8Arrays)(i,s);return(0,n.base64encode)(a,!1)}decrypt(e,r){let o=(0,n.base64decode)(e,!0).toUint8Array();const[i,s]=(0,n.splitToUint8Arrays)(o,this.nonceLength),a=t.default.box.open(s,i,(0,n.hexToByteArray)(r),this.keyPair.secretKey);if(!a)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${r.toString()} \n keypair pubkey: ${(0,n.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,n.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(a)}decryptWallet(e,r){let o=(0,n.base64decode)(e,!0),i=(0,n.hexToByteArray)(o.toString());const[s,a]=(0,n.splitToUint8Arrays)(i,this.nonceLength),c=t.default.box.open(a,s,(0,n.hexToByteArray)(r),this.keyPair.secretKey);if(!c)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${r.toString()} \n keypair pubkey: ${(0,n.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,n.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(c)}stringifyKeypair(){return{publicKey:(0,n.toHexString)(this.keyPair.publicKey),secretKey:(0,n.toHexString)(this.keyPair.secretKey)}}},ps}var vs,ms={},ys={},bs={},ws={},Cs={};var _s,Os,Es,Ss={};function Rs(){if(Os)return ws;Os=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.SystemRandomSource=void 0;const e=(vs||(vs=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.BrowserRandomSource=void 0,Cs.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let n=0;n<t.length;n+=65536)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,65536)));return t}}),Cs),t=function(){if(_s)return Ss;_s=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.NodeRandomSource=void 0;const e=Be();return Ss.NodeRandomSource=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,void 0!==O){const e=R;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(t);if(n.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=n[e];return(0,e.wipe)(n),r}},Ss}();return ws.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new e.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new t.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}},ws}var Ts,Ns,As,Ps={};function xs(){return Ns||(Ns=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const t=(Es||(Es=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=Rs(),n=Le(),r=Be();function o(t,n=e.defaultRandomSource){return n.randomBytes(t)}e.defaultRandomSource=new t.SystemRandomSource,e.randomBytes=o,e.randomUint32=function(t=e.defaultRandomSource){const i=o(4,t),s=(0,n.readUint32LE)(i);return(0,r.wipe)(i),s};const i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(t,n=i,s=e.defaultRandomSource){if(n.length<2)throw new Error("randomString charset is too short");if(n.length>256)throw new Error("randomString charset is too long");let a="";const c=n.length,l=256-256%c;for(;t>0;){const e=o(Math.ceil(256*t/l),s);for(let r=0;r<e.length&&t>0;r++){const o=e[r];o<l&&(a+=n.charAt(o%c),t--)}(0,r.wipe)(e)}return a}e.randomString=s,e.randomStringForEntropy=function(t,n=i,r=e.defaultRandomSource){return s(Math.ceil(t/(Math.log(n.length)/Math.LN2)),n,r)}}(bs)),bs),n=(Ts||(Ts=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Le(),n=Be();e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var r=function(){function r(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return r.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},r.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},r.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},r.prototype.update=function(t,n){if(void 0===n&&(n=t.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var r=0;if(this._bytesHashed+=n,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&n>0;)this._buffer[this._bufferLength++]=t[r++],n--;this._bufferLength===this.blockSize&&(i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(n>=this.blockSize&&(r=i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,t,r,n),n%=this.blockSize);n>0;)this._buffer[this._bufferLength++]=t[r++],n--;return this},r.prototype.finish=function(e){if(!this._finished){var n=this._bytesHashed,r=this._bufferLength,o=n/536870912|0,s=n<<3,a=n%128<112?128:256;this._buffer[r]=128;for(var c=r+1;c<a-8;c++)this._buffer[c]=0;t.writeUint32BE(o,this._buffer,a-8),t.writeUint32BE(s,this._buffer,a-4),i(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,a),this._finished=!0}for(c=0;c<this.digestLength/8;c++)t.writeUint32BE(this._stateHi[c],e,8*c),t.writeUint32BE(this._stateLo[c],e,8*c+4);return this},r.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},r.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},r.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},r.prototype.cleanSavedState=function(e){n.wipe(e.stateHi),n.wipe(e.stateLo),e.buffer&&n.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},r}();e.SHA512=r;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function i(e,n,r,i,s,a,c){for(var l,u,d,h,f,p,g,v,m=r[0],y=r[1],b=r[2],w=r[3],C=r[4],_=r[5],O=r[6],E=r[7],S=i[0],R=i[1],T=i[2],N=i[3],A=i[4],P=i[5],x=i[6],I=i[7];c>=128;){for(var k=0;k<16;k++){var D=8*k+a;e[k]=t.readUint32BE(s,D),n[k]=t.readUint32BE(s,D+4)}for(k=0;k<80;k++){var K,M,L=m,U=y,j=b,W=w,B=C,X=_,H=O,F=S,q=R,J=T,z=N,V=A,$=P,G=x;if(f=65535&(u=I),p=u>>>16,g=65535&(l=E),v=l>>>16,f+=65535&(u=(A>>>14|C<<18)^(A>>>18|C<<14)^(C>>>9|A<<23)),p+=u>>>16,g+=65535&(l=(C>>>14|A<<18)^(C>>>18|A<<14)^(A>>>9|C<<23)),v+=l>>>16,f+=65535&(u=A&P^~A&x),p+=u>>>16,g+=65535&(l=C&_^~C&O),v+=l>>>16,l=o[2*k],f+=65535&(u=o[2*k+1]),p+=u>>>16,g+=65535&l,v+=l>>>16,l=e[k%16],p+=(u=n[k%16])>>>16,g+=65535&l,v+=l>>>16,g+=(p+=(f+=65535&u)>>>16)>>>16,f=65535&(u=h=65535&f|p<<16),p=u>>>16,g=65535&(l=d=65535&g|(v+=g>>>16)<<16),v=l>>>16,f+=65535&(u=(S>>>28|m<<4)^(m>>>2|S<<30)^(m>>>7|S<<25)),p+=u>>>16,g+=65535&(l=(m>>>28|S<<4)^(S>>>2|m<<30)^(S>>>7|m<<25)),v+=l>>>16,p+=(u=S&R^S&T^R&T)>>>16,g+=65535&(l=m&y^m&b^y&b),v+=l>>>16,K=65535&(g+=(p+=(f+=65535&u)>>>16)>>>16)|(v+=g>>>16)<<16,M=65535&f|p<<16,f=65535&(u=z),p=u>>>16,g=65535&(l=W),v=l>>>16,p+=(u=h)>>>16,g+=65535&(l=d),v+=l>>>16,y=L,b=U,w=j,C=W=65535&(g+=(p+=(f+=65535&u)>>>16)>>>16)|(v+=g>>>16)<<16,_=B,O=X,E=H,m=K,R=F,T=q,N=J,A=z=65535&f|p<<16,P=V,x=$,I=G,S=M,k%16==15)for(D=0;D<16;D++)l=e[D],f=65535&(u=n[D]),p=u>>>16,g=65535&l,v=l>>>16,l=e[(D+9)%16],f+=65535&(u=n[(D+9)%16]),p+=u>>>16,g+=65535&l,v+=l>>>16,d=e[(D+1)%16],f+=65535&(u=((h=n[(D+1)%16])>>>1|d<<31)^(h>>>8|d<<24)^(h>>>7|d<<25)),p+=u>>>16,g+=65535&(l=(d>>>1|h<<31)^(d>>>8|h<<24)^d>>>7),v+=l>>>16,d=e[(D+14)%16],p+=(u=((h=n[(D+14)%16])>>>19|d<<13)^(d>>>29|h<<3)^(h>>>6|d<<26))>>>16,g+=65535&(l=(d>>>19|h<<13)^(h>>>29|d<<3)^d>>>6),v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,e[D]=65535&g|v<<16,n[D]=65535&f|p<<16}f=65535&(u=S),p=u>>>16,g=65535&(l=m),v=l>>>16,l=r[0],p+=(u=i[0])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[0]=m=65535&g|v<<16,i[0]=S=65535&f|p<<16,f=65535&(u=R),p=u>>>16,g=65535&(l=y),v=l>>>16,l=r[1],p+=(u=i[1])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[1]=y=65535&g|v<<16,i[1]=R=65535&f|p<<16,f=65535&(u=T),p=u>>>16,g=65535&(l=b),v=l>>>16,l=r[2],p+=(u=i[2])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[2]=b=65535&g|v<<16,i[2]=T=65535&f|p<<16,f=65535&(u=N),p=u>>>16,g=65535&(l=w),v=l>>>16,l=r[3],p+=(u=i[3])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[3]=w=65535&g|v<<16,i[3]=N=65535&f|p<<16,f=65535&(u=A),p=u>>>16,g=65535&(l=C),v=l>>>16,l=r[4],p+=(u=i[4])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[4]=C=65535&g|v<<16,i[4]=A=65535&f|p<<16,f=65535&(u=P),p=u>>>16,g=65535&(l=_),v=l>>>16,l=r[5],p+=(u=i[5])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[5]=_=65535&g|v<<16,i[5]=P=65535&f|p<<16,f=65535&(u=x),p=u>>>16,g=65535&(l=O),v=l>>>16,l=r[6],p+=(u=i[6])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[6]=O=65535&g|v<<16,i[6]=x=65535&f|p<<16,f=65535&(u=I),p=u>>>16,g=65535&(l=E),v=l>>>16,l=r[7],p+=(u=i[7])>>>16,g+=65535&l,v+=l>>>16,v+=(g+=(p+=(f+=65535&u)>>>16)>>>16)>>>16,r[7]=E=65535&g|v<<16,i[7]=I=65535&f|p<<16,a+=128,c-=128}return a}e.hash=function(e){var t=new r;t.update(e);var n=t.digest();return t.clean(),n}}(Ps)),Ps),r=Be();function o(e){const t=new Float64Array(16);if(e)for(let n=0;n<e.length;n++)t[n]=e[n];return t}e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;new Uint8Array(32)[0]=9;const i=o(),s=o([1]),a=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),c=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),u=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function h(e,t){for(let n=0;n<16;n++)e[n]=0|t[n]}function f(e){let t=1;for(let n=0;n<16;n++){let r=e[n]+t+65535;t=Math.floor(r/65536),e[n]=r-65536*t}e[0]+=t-1+37*(t-1)}function p(e,t,n){const r=~(n-1);for(let o=0;o<16;o++){const n=r&(e[o]^t[o]);e[o]^=n,t[o]^=n}}function g(e,t){const n=o(),r=o();for(let o=0;o<16;o++)r[o]=t[o];f(r),f(r),f(r);for(let o=0;o<2;o++){n[0]=r[0]-65517;for(let t=1;t<15;t++)n[t]=r[t]-65535-(n[t-1]>>16&1),n[t-1]&=65535;n[15]=r[15]-32767-(n[14]>>16&1);const e=n[15]>>16&1;n[14]&=65535,p(r,n,1-e)}for(let o=0;o<16;o++)e[2*o]=255&r[o],e[2*o+1]=r[o]>>8}function v(e,t){let n=0;for(let r=0;r<32;r++)n|=e[r]^t[r];return(1&n-1>>>8)-1}function m(e,t){const n=new Uint8Array(32),r=new Uint8Array(32);return g(n,e),g(r,t),v(n,r)}function y(e){const t=new Uint8Array(32);return g(t,e),1&t[0]}function b(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]+n[r]}function w(e,t,n){for(let r=0;r<16;r++)e[r]=t[r]-n[r]}function C(e,t,n){let r,o,i=0,s=0,a=0,c=0,l=0,u=0,d=0,h=0,f=0,p=0,g=0,v=0,m=0,y=0,b=0,w=0,C=0,_=0,O=0,E=0,S=0,R=0,T=0,N=0,A=0,P=0,x=0,I=0,k=0,D=0,K=0,M=n[0],L=n[1],U=n[2],j=n[3],W=n[4],B=n[5],X=n[6],H=n[7],F=n[8],q=n[9],J=n[10],z=n[11],V=n[12],$=n[13],G=n[14],Q=n[15];r=t[0],i+=r*M,s+=r*L,a+=r*U,c+=r*j,l+=r*W,u+=r*B,d+=r*X,h+=r*H,f+=r*F,p+=r*q,g+=r*J,v+=r*z,m+=r*V,y+=r*$,b+=r*G,w+=r*Q,r=t[1],s+=r*M,a+=r*L,c+=r*U,l+=r*j,u+=r*W,d+=r*B,h+=r*X,f+=r*H,p+=r*F,g+=r*q,v+=r*J,m+=r*z,y+=r*V,b+=r*$,w+=r*G,C+=r*Q,r=t[2],a+=r*M,c+=r*L,l+=r*U,u+=r*j,d+=r*W,h+=r*B,f+=r*X,p+=r*H,g+=r*F,v+=r*q,m+=r*J,y+=r*z,b+=r*V,w+=r*$,C+=r*G,_+=r*Q,r=t[3],c+=r*M,l+=r*L,u+=r*U,d+=r*j,h+=r*W,f+=r*B,p+=r*X,g+=r*H,v+=r*F,m+=r*q,y+=r*J,b+=r*z,w+=r*V,C+=r*$,_+=r*G,O+=r*Q,r=t[4],l+=r*M,u+=r*L,d+=r*U,h+=r*j,f+=r*W,p+=r*B,g+=r*X,v+=r*H,m+=r*F,y+=r*q,b+=r*J,w+=r*z,C+=r*V,_+=r*$,O+=r*G,E+=r*Q,r=t[5],u+=r*M,d+=r*L,h+=r*U,f+=r*j,p+=r*W,g+=r*B,v+=r*X,m+=r*H,y+=r*F,b+=r*q,w+=r*J,C+=r*z,_+=r*V,O+=r*$,E+=r*G,S+=r*Q,r=t[6],d+=r*M,h+=r*L,f+=r*U,p+=r*j,g+=r*W,v+=r*B,m+=r*X,y+=r*H,b+=r*F,w+=r*q,C+=r*J,_+=r*z,O+=r*V,E+=r*$,S+=r*G,R+=r*Q,r=t[7],h+=r*M,f+=r*L,p+=r*U,g+=r*j,v+=r*W,m+=r*B,y+=r*X,b+=r*H,w+=r*F,C+=r*q,_+=r*J,O+=r*z,E+=r*V,S+=r*$,R+=r*G,T+=r*Q,r=t[8],f+=r*M,p+=r*L,g+=r*U,v+=r*j,m+=r*W,y+=r*B,b+=r*X,w+=r*H,C+=r*F,_+=r*q,O+=r*J,E+=r*z,S+=r*V,R+=r*$,T+=r*G,N+=r*Q,r=t[9],p+=r*M,g+=r*L,v+=r*U,m+=r*j,y+=r*W,b+=r*B,w+=r*X,C+=r*H,_+=r*F,O+=r*q,E+=r*J,S+=r*z,R+=r*V,T+=r*$,N+=r*G,A+=r*Q,r=t[10],g+=r*M,v+=r*L,m+=r*U,y+=r*j,b+=r*W,w+=r*B,C+=r*X,_+=r*H,O+=r*F,E+=r*q,S+=r*J,R+=r*z,T+=r*V,N+=r*$,A+=r*G,P+=r*Q,r=t[11],v+=r*M,m+=r*L,y+=r*U,b+=r*j,w+=r*W,C+=r*B,_+=r*X,O+=r*H,E+=r*F,S+=r*q,R+=r*J,T+=r*z,N+=r*V,A+=r*$,P+=r*G,x+=r*Q,r=t[12],m+=r*M,y+=r*L,b+=r*U,w+=r*j,C+=r*W,_+=r*B,O+=r*X,E+=r*H,S+=r*F,R+=r*q,T+=r*J,N+=r*z,A+=r*V,P+=r*$,x+=r*G,I+=r*Q,r=t[13],y+=r*M,b+=r*L,w+=r*U,C+=r*j,_+=r*W,O+=r*B,E+=r*X,S+=r*H,R+=r*F,T+=r*q,N+=r*J,A+=r*z,P+=r*V,x+=r*$,I+=r*G,k+=r*Q,r=t[14],b+=r*M,w+=r*L,C+=r*U,_+=r*j,O+=r*W,E+=r*B,S+=r*X,R+=r*H,T+=r*F,N+=r*q,A+=r*J,P+=r*z,x+=r*V,I+=r*$,k+=r*G,D+=r*Q,r=t[15],w+=r*M,C+=r*L,_+=r*U,O+=r*j,E+=r*W,S+=r*B,R+=r*X,T+=r*H,N+=r*F,A+=r*q,P+=r*J,x+=r*z,I+=r*V,k+=r*$,D+=r*G,K+=r*Q,i+=38*C,s+=38*_,a+=38*O,c+=38*E,l+=38*S,u+=38*R,d+=38*T,h+=38*N,f+=38*A,p+=38*P,g+=38*x,v+=38*I,m+=38*k,y+=38*D,b+=38*K,o=1,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,r=w+o+65535,o=Math.floor(r/65536),w=r-65536*o,i+=o-1+37*(o-1),o=1,r=i+o+65535,o=Math.floor(r/65536),i=r-65536*o,r=s+o+65535,o=Math.floor(r/65536),s=r-65536*o,r=a+o+65535,o=Math.floor(r/65536),a=r-65536*o,r=c+o+65535,o=Math.floor(r/65536),c=r-65536*o,r=l+o+65535,o=Math.floor(r/65536),l=r-65536*o,r=u+o+65535,o=Math.floor(r/65536),u=r-65536*o,r=d+o+65535,o=Math.floor(r/65536),d=r-65536*o,r=h+o+65535,o=Math.floor(r/65536),h=r-65536*o,r=f+o+65535,o=Math.floor(r/65536),f=r-65536*o,r=p+o+65535,o=Math.floor(r/65536),p=r-65536*o,r=g+o+65535,o=Math.floor(r/65536),g=r-65536*o,r=v+o+65535,o=Math.floor(r/65536),v=r-65536*o,r=m+o+65535,o=Math.floor(r/65536),m=r-65536*o,r=y+o+65535,o=Math.floor(r/65536),y=r-65536*o,r=b+o+65535,o=Math.floor(r/65536),b=r-65536*o,r=w+o+65535,o=Math.floor(r/65536),w=r-65536*o,i+=o-1+37*(o-1),e[0]=i,e[1]=s,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=h,e[8]=f,e[9]=p,e[10]=g,e[11]=v,e[12]=m,e[13]=y,e[14]=b,e[15]=w}function _(e,t){C(e,t,t)}function O(e,t){const n=o();let r;for(r=0;r<16;r++)n[r]=t[r];for(r=253;r>=0;r--)_(n,n),2!==r&&4!==r&&C(n,n,t);for(r=0;r<16;r++)e[r]=n[r]}function E(e,t){const n=o(),r=o(),i=o(),s=o(),a=o(),l=o(),u=o(),d=o(),h=o();w(n,e[1],e[0]),w(h,t[1],t[0]),C(n,n,h),b(r,e[0],e[1]),b(h,t[0],t[1]),C(r,r,h),C(i,e[3],t[3]),C(i,i,c),C(s,e[2],t[2]),b(s,s,s),w(a,r,n),w(l,s,i),b(u,s,i),b(d,r,n),C(e[0],a,l),C(e[1],d,u),C(e[2],u,l),C(e[3],a,d)}function S(e,t,n){for(let r=0;r<4;r++)p(e[r],t[r],n)}function R(e,t){const n=o(),r=o(),i=o();O(i,t[2]),C(n,t[0],i),C(r,t[1],i),g(e,r),e[31]^=y(n)<<7}function T(e,t,n){h(e[0],i),h(e[1],s),h(e[2],s),h(e[3],i);for(let r=255;r>=0;--r){const o=n[r/8|0]>>(7&r)&1;S(e,t,o),E(t,e),E(e,e),S(e,t,o)}}function N(e,t){const n=[o(),o(),o(),o()];h(n[0],l),h(n[1],u),h(n[2],s),C(n[3],l,u),T(e,n,t)}function A(t){if(t.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const r=(0,n.hash)(t);r[0]&=248,r[31]&=127,r[31]|=64;const i=new Uint8Array(32),s=[o(),o(),o(),o()];N(s,r),R(i,s);const a=new Uint8Array(64);return a.set(t),a.set(i,32),{publicKey:i,secretKey:a}}e.generateKeyPairFromSeed=A,e.generateKeyPair=function(e){const n=(0,t.randomBytes)(32,e),o=A(n);return(0,r.wipe)(n),o},e.extractPublicKeyFromSecretKey=function(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))};const P=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function x(e,t){let n,r,o,i;for(r=63;r>=32;--r){for(n=0,o=r-32,i=r-12;o<i;++o)t[o]+=n-16*t[r]*P[o-(r-32)],n=Math.floor((t[o]+128)/256),t[o]-=256*n;t[o]+=n,t[r]=0}for(n=0,o=0;o<32;o++)t[o]+=n-(t[31]>>4)*P[o],n=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=n*P[o];for(r=0;r<32;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function I(e){const t=new Float64Array(64);for(let n=0;n<64;n++)t[n]=e[n];for(let n=0;n<64;n++)e[n]=0;x(e,t)}function k(e,t){const n=o(),r=o(),c=o(),l=o(),u=o(),f=o(),p=o();return h(e[2],s),function(e,t){for(let n=0;n<16;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}(e[1],t),_(c,e[1]),C(l,c,a),w(c,c,e[2]),b(l,e[2],l),_(u,l),_(f,u),C(p,f,u),C(n,p,c),C(n,n,l),function(e,t){const n=o();let r;for(r=0;r<16;r++)n[r]=t[r];for(r=250;r>=0;r--)_(n,n),1!==r&&C(n,n,t);for(r=0;r<16;r++)e[r]=n[r]}(n,n),C(n,n,c),C(n,n,l),C(n,n,l),C(e[0],n,l),_(r,e[0]),C(r,r,l),m(r,c)&&C(e[0],e[0],d),_(r,e[0]),C(r,r,l),m(r,c)?-1:(y(e[0])===t[31]>>7&&w(e[0],i,e[0]),C(e[3],e[0],e[1]),0)}e.sign=function(e,t){const r=new Float64Array(64),i=[o(),o(),o(),o()],s=(0,n.hash)(e.subarray(0,32));s[0]&=248,s[31]&=127,s[31]|=64;const a=new Uint8Array(64);a.set(s.subarray(32),32);const c=new n.SHA512;c.update(a.subarray(32)),c.update(t);const l=c.digest();c.clean(),I(l),N(i,l),R(a,i),c.reset(),c.update(a.subarray(0,32)),c.update(e.subarray(32)),c.update(t);const u=c.digest();I(u);for(let n=0;n<32;n++)r[n]=l[n];for(let n=0;n<32;n++)for(let e=0;e<32;e++)r[n+e]+=u[n]*s[e];return x(a.subarray(32),r),a},e.verify=function(t,r,i){const s=new Uint8Array(32),a=[o(),o(),o(),o()],c=[o(),o(),o(),o()];if(i.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(k(c,t))return!1;const l=new n.SHA512;l.update(i.subarray(0,32)),l.update(t),l.update(r);const u=l.digest();return I(u),T(a,c,u),N(c,i.subarray(32)),E(a,c),R(s,a),!v(i,s)},e.convertPublicKeyToX25519=function(e){let t=[o(),o(),o(),o()];if(k(t,e))throw new Error("Ed25519: invalid public key");let n=o(),r=o(),i=t[1];b(n,s,i),w(r,s,i),O(r,r),C(n,n,r);let a=new Uint8Array(32);return g(a,n),a},e.convertSecretKeyToX25519=function(e){const t=(0,n.hash)(e.subarray(0,32));t[0]&=248,t[31]&=127,t[31]|=64;const o=new Uint8Array(t.subarray(0,32));return(0,r.wipe)(t),o}}(ys)),ys}function Is(){return As||(As=1,function(e){var t=ms.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=ms.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=ms.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},e(t)};return function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var i=e(r),s=0;s<i.length;s++)"default"!==i[s]&&t(o,r,i[s]);return n(o,r),o}}(),o=ms.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=ms.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.MULTICODEC_ED25519_LENGTH=e.MULTICODEC_ED25519_HEADER=e.MULTICODEC_ED25519_BASE=e.MULTICODEC_ED25519_ENCODING=e.DID_METHOD=e.DID_PREFIX=e.DID_DELIMITER=e.KEY_PAIR_SEED_LENGTH=e.DATA_ENCODING=e.JSON_ENCODING=e.JWT_ENCODING=e.JWT_DELIMITER=e.JWT_IRIDIUM_TYP=e.JWT_IRIDIUM_ALG=e.JWTHeaderType=void 0,e.generateKeyPair=function(){return l.default.sign.keyPair()},e.decodeJSON=h,e.encodeJSON=f,e.encodeIss=p,e.decodeIss=g,e.encodeSig=v,e.decodeSig=m,e.encodeData=y,e.decodeData=function(t){var n,r;const o=(0,d.okxtoString)(t,e.DATA_ENCODING).split(e.JWT_DELIMITER),i=h(null!==(n=o[0])&&void 0!==n?n:"{}"),s=h(null!==(r=o[1])&&void 0!==r?r:"{}");return{header:i,payload:s}},e.encodeJWT=b,e.decodeJWT=w,e.signJWT=function(t,n,r,i){return o(this,arguments,void 0,(function*(t,n,r,o,i=Math.floor(Date.now())){const s={alg:e.JWT_IRIDIUM_ALG,typ:e.JWT_IRIDIUM_TYP},a={iss:p(o.publicKey),sub:t,aud:n,act:"authenticate user",iat:i,exp:i+r},c=y({header:s,payload:a});u.logDebug(`get sec kp: ${o.secretKey} {${o.secretKey.length}}`);return b({header:s,payload:a,signature:l.default.sign.detached(c,o.secretKey)})}))},e.verifyJWT=function(t){return o(this,void 0,void 0,(function*(){const{header:n,payload:r,data:o,signature:i}=w(t);if(n.alg!==e.JWT_IRIDIUM_ALG||n.typ!==e.JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const a=g(r.iss);return s.verify(a,o,i)}))};const s=r(xs()),a=ln(),c=rs(),l=i(T()),u=r(cn()),d=po();function h(t){return(0,a.safeJsonParse)((0,d.okxtoString)((0,d.okxfromString)(t,e.JWT_ENCODING),e.JSON_ENCODING))}function f(t){return(0,d.okxtoString)((0,d.okxfromString)((0,a.safeJsonStringify)(t),e.JSON_ENCODING),e.JWT_ENCODING)}function p(t){u.logDebug(`publicKey: ${(0,c.toHexString)(t)}`);var n=(0,d.okxtoString)(t,e.MULTICODEC_ED25519_ENCODING);return[e.DID_PREFIX,e.DID_METHOD,n].join(e.DID_DELIMITER)}function g(t){const[n,r,o]=t.split(e.DID_DELIMITER);if(n!==e.DID_PREFIX||r!==e.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(void 0===o)throw new Error("multicodec is undefined");const i=(0,d.okxfromString)(o,e.MULTICODEC_ED25519_ENCODING);if(void 0===i||i.length!==e.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return i}function v(t){return(0,d.okxtoString)(t,e.JWT_ENCODING)}function m(t){return(0,d.okxfromString)(t,e.JWT_ENCODING)}function y(t){return(0,d.okxfromString)([f(t.header),f(t.payload)].join(e.JWT_DELIMITER),e.DATA_ENCODING)}function b(t){return[f(t.header),f(t.payload),v(t.signature)].join(e.JWT_DELIMITER)}function w(t){var n,r,o;const i=t.split(e.JWT_DELIMITER);return{header:h(null!==(n=i[0])&&void 0!==n?n:"{}"),payload:h(null!==(r=i[1])&&void 0!==r?r:"{}"),signature:m(null!==(o=i[2])&&void 0!==o?o:"{}"),data:(0,d.okxfromString)(i.slice(0,2).join(e.JWT_DELIMITER),e.DATA_ENCODING)}}e.JWTHeaderType="dapp",e.JWT_IRIDIUM_ALG="EdDSA",e.JWT_IRIDIUM_TYP="JWT",e.JWT_DELIMITER=".",e.JWT_ENCODING="base64url",e.JSON_ENCODING="utf8",e.DATA_ENCODING="utf8",e.KEY_PAIR_SEED_LENGTH=32,e.DID_DELIMITER=":",e.DID_PREFIX="did",e.DID_METHOD="key",e.MULTICODEC_ED25519_ENCODING="base58btc",e.MULTICODEC_ED25519_BASE="z",e.MULTICODEC_ED25519_HEADER="K36",e.MULTICODEC_ED25519_LENGTH=32}(ms)),ms}var ks,Ds,Ks={};function Ms(){if(ks)return Ks;ks=1;var e=Ks.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=Ks.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=Ks.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},n(e)};return function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var i=n(r),s=0;s<i.length;s++)"default"!==i[s]&&e(o,r,i[s]);return t(o,r),o}}(),r=Ks.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=Ks.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.ConnectionSplitPackages=void 0;const i=C(),s=o(nn()),a=rs(),c=ln(),l=n(cn()),u=cn(),d="ConnectionReceiveKey",h="ConnectionSendKey",f="ConnectionSenderVersionKey";return Ks.ConnectionSplitPackages=class{constructor(e){this.splitMessageSendArray=new Map,this.splitMessageReceivedArray=new Map,this.splitMessageSenderVersionMap=new Map,this.splitPackageCache=s.default.createInstance({name:i.OKXCONNECTOR_STORAGE_PROTOCOL_CACHE+e})}init(e){return r(this,void 0,void 0,(function*(){if(yield this.recoverFromCache(),this.splitMessageSendArray.size>0){for(const[t,n]of this.splitMessageSendArray.entries())for(let r=0;r<n.length;){const o=n[r];try{yield e((0,c.safeJsonStringify)(o),t),l.logDebug(`Successfully sent payload: ${(0,c.safeJsonStringify)(o)} to topic: ${t}`),n.splice(r,1)}catch(Ye){l.logError(`Failed to send payload: ${(0,c.safeJsonStringify)(o)} to topic: ${t}`,Ye),o.retryCount=(o.retryCount||0)+1,o.retryCount>3?(l.logError(`Payload failed after 3 retries: ${(0,c.safeJsonStringify)(o)}`),n.splice(r,1)):r++}}yield this.syncCache()}}))}tryParseMessageSplitPayload(e){var t;let n;try{if(e.trimStart().startsWith("{")){let r=(0,c.safeJsonParse)(e);if(r&&r.protocol_version&&r.protocol_version>=2){let e=r;e.package_group_id&&(null===(t=e.package_group_id)||void 0===t?void 0:t.length)>0&&(n=r)}}else(0,u.logDebug)("not split packages")}catch(Ye){(0,u.logDebug)("not split packages")}return n}updateTopicSenderVersion(e,t){return r(this,void 0,void 0,(function*(){this.splitMessageSenderVersionMap.set(e,t),yield this.syncCache(),(0,u.logDebug)("get update topic sender version: ",e,t)}))}sendSplitPackages(e,t,n,o){return r(this,void 0,void 0,(function*(){if(!e)return void l.logError("sendSplitPackages invalid topic");let r=this.splitMessageSenderVersionMap.get(e),i=t.length;try{if(i<63e3)throw new Error(`no need to split (size:${i})`);if(!r||r&&r<2)throw new Error(`version not support split (version: ${r})`);const n=[];let s=63e3;for(let e=0;e<t.length;e+=s)e+s<t.length?n.push(t.slice(e,e+s)):n.push(t.slice(e));let u=(0,a.generateGroupId)(),d=n.map(((t,r)=>({topicId:e,protocol_version:2,total_count:n.length,package_index:r,package_group_id:u,content:t})));this.mergePackageArray(!0,d);for(let t=0;t<d.length;){const n=d[t],r=(0,c.safeJsonStringify)(n);try{yield o(r,e),l.logDebug(`Successfully sent payload: ${r} to topic: ${e}`),d.splice(t,1)}catch(Ye){l.logError(`Failed to send payload: ${r} to topic: ${e}`,Ye),n.retryCount=(n.retryCount||0)+1,n.retryCount>3?(l.logError(`Payload failed after 3 retries: ${r}`),d.splice(t,1)):t++}}this.splitMessageSendArray.set(e,[]),yield this.syncCache()}catch(AO){(0,u.logDebug)("send split packages no split"),(0,u.logDebug)(AO),yield n(e,t)}}))}onReceivedPackageCheck(e){return r(this,void 0,void 0,(function*(){this.mergePackageArray(!1,[e]);let t=new Map,n=e.topicId;this.splitMessageReceivedArray.forEach(((n,r)=>{r==e.topicId&&n.forEach((e=>{if(e.messageObject.package_group_id){let n=t.get(e.messageObject.package_group_id);n||(n=new Array),n.push(e),t.set(e.messageObject.package_group_id,n)}}))})),(0,u.logDebug)("on received message, check message cache");let r={isSplitPackage:!1};if(e.messageObject.package_group_id){r.isSplitPackage=!0;let o=t.get(e.messageObject.package_group_id);if(null==o?void 0:o.length){let t=new Set;if(o.forEach((e=>{void 0!==e.messageObject.package_index&&t.add(e.messageObject.package_index)})),t.size==e.messageObject.total_count){o.sort(((e,t)=>!e.messageObject.package_index&&0!==e.messageObject.package_index||!t.messageObject.package_index&&0!==t.messageObject.package_index?0:e.messageObject.package_index-t.messageObject.package_index));let e=o.reduce(((e,t)=>(e.push(t.messageObject.content),e)),[]),t=o.reduce(((e,t)=>(e.push(t.messageId),e)),[]);r.isSplitPackage=!0,r.finalMessage=e.join(""),r.completeMessageIdList=t;let i=this.splitMessageReceivedArray.get(n);i&&(i=i.filter((e=>!t.includes(e.messageId))),this.splitMessageReceivedArray.set(n,i)),yield this.syncCache()}}}return r}))}mergePackageArray(e,t){return r(this,void 0,void 0,(function*(){if((0,u.logDebug)("append sending array"),e){let e=t.filter((e=>{let t=e.topicId,n=!0,r=this.splitMessageSendArray.get(t);return null==r||r.forEach((t=>{t.package_group_id==e.package_group_id&&t.total_count==e.total_count&&t.package_index==e.package_index&&(n=!1)})),n}));if(e.length>0){let t=e[0].topicId,n=this.splitMessageSendArray.get(t);n||(n=new Array),n=n.concat(e),this.splitMessageSendArray.set(t,n),(0,u.logDebug)("append sending array (after filted): ",n)}}else{let e=t.filter((e=>{let t=e.topicId,n=!0,r=this.splitMessageReceivedArray.get(t);return null==r||r.forEach((t=>{t.messageId==e.messageId&&(n=!1)})),n}));if(e.length>0){let t=e[0].topicId,n=this.splitMessageReceivedArray.get(t);n||(n=new Array),n=n.concat(e),this.splitMessageReceivedArray.set(t,n),(0,u.logDebug)("append received array (after filted): ",n)}}}))}syncCache(){return r(this,void 0,void 0,(function*(){(0,u.logDebug)("sync split message cache"),yield this.splitPackageCache.setItem(d,this.splitMessageReceivedArray),yield this.splitPackageCache.setItem(h,this.splitMessageSendArray),yield this.splitPackageCache.setItem(f,this.splitMessageSenderVersionMap)}))}recoverFromCache(){return r(this,void 0,void 0,(function*(){let e=yield this.splitPackageCache.getItem(d);this.splitMessageReceivedArray=e||new Map;let t=yield this.splitPackageCache.getItem(h);this.splitMessageSendArray=t||new Map;let n=yield this.splitPackageCache.getItem(f);this.splitMessageSenderVersionMap=n||new Map}))}},Ks}function Ls(){if(Ds)return as;Ds=1;var e=as.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=as.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=as.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},n(e)};return function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var i=n(r),s=0;s<i.length;s++)"default"!==i[s]&&e(o,r,i[s]);return t(o,r),o}}(),r=as.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(as,"__esModule",{value:!0}),as.ConnectionManager=void 0;const o=is(),i=ls(),s=C(),a=hs(),c=y(),l=pt(),u=os(),d=rs(),h=gs(),f=Is(),p=ln(),g=n(cn()),v=cn(),m=rn(),b=Xt(),w=Ms();return as.ConnectionManager=class{constructor(e=void 0){this.events=new l.EventEmitter,this.splitManager=new w.ConnectionSplitPackages("dapp"),this.connectStorage=new u.Storage(s.OKXCONNECTOR_CACHE_KEY_DAPP+e,s.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new h.SessionCrypto;let t=(0,b.isInTMA)();if((0,v.logDebug)("do init:",t),g.reportLog("connection manager do init"),t)try{const e=this.getCachedCryptoKeyPair();(0,v.logDebug)("use same pk:",e),this.crypto=new h.SessionCrypto(e)}catch(Ye){this.connectStorage.clearCache(),g.reportEvent(m.OKXReportType.LOG,"cache_fail","cache failed")}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new o.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",g.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){let e=Date.now();e==this.packageId&&(this.packageId=e+1),this.packageId=e}saveCryptoKeyPair(e){let t=(0,p.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,s.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){const e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY);if("string"==typeof e){return g.logDebug("get cached crypto key:"),g.logDebug(e),(0,p.safeJsonParse)(e)}return this.connectStorage.clearCache(),null}saveJWTKeyPair(e){var t={publicKey:(0,d.toHexString)(e.publicKey),secretKey:(0,d.toHexString)(e.secretKey)};g.logDebug("save jwt kp");let n=(0,p.safeJsonStringify)(t);g.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){try{const e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){g.logDebug("get cached jwt kp:"),g.logDebug(e);let t=(0,p.safeJsonParse)(e);return g.logDebug("save jwt kp"),g.logDebug(t),{publicKey:(0,d.hexToByteArray)(t.publicKey),secretKey:(0,d.hexToByteArray)(t.secretKey)}}return(0,f.generateKeyPair)()}catch(Ye){return g.reportEvent(m.OKXReportType.LOG,"cache_fail","cache failed"),(0,f.generateKeyPair)()}}isWalletPKReady(){return g.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return r(this,void 0,void 0,(function*(){return yield(0,f.signJWT)(e,a.OKXCONNECTOR_JWT_SIDE,a.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parsePackage(e){return r(this,arguments,void 0,(function*(e,t=!1){var n,o,i,a,c,l,u,d,h,f,p,g,v;if(this.events.emit(e.id,e),!t){yield this.sendACK(e.id,!0);let t=null===(n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE))||void 0===n?void 0:n.content;if(t){let n=e;if(null===(i=null===(o=n.params)||void 0===o?void 0:o.data)||void 0===i?void 0:i.messageId){let e=this.splitManager.tryParseMessageSplitPayload(null===(c=null===(a=n.params)||void 0===a?void 0:a.data)||void 0===c?void 0:c.message);if(e){let o={topicId:null===(u=null===(l=n.params)||void 0===l?void 0:l.data)||void 0===u?void 0:u.topic,messageId:null===(h=null===(d=n.params)||void 0===d?void 0:d.data)||void 0===h?void 0:h.messageId,messageObject:e,publishedAt:null===(p=null===(f=n.params)||void 0===f?void 0:f.data)||void 0===p?void 0:p.publishedAt},i=yield this.splitManager.onReceivedPackageCheck(o);i.completeMessageIdList&&i.completeMessageIdList.forEach((e=>r(this,void 0,void 0,(function*(){this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}))))}else this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(v=null===(g=n.params)||void 0===g?void 0:g.data)||void 0===v?void 0:v.messageId,t)}}}}))}restoreConnect(e){return r(this,void 0,void 0,(function*(){if(g.reportLog("connection manager restore connection"),g.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!=typeof e||0===e.length)throw new Error("CONNECTION: invalid topic");g.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,s.OKXCONNECTOR_TOKEN_CACHE),g.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)}))}getConnectInfo(){var e=(0,d.generateTopic)();g.logDebug(`generate topic token: ${e}`),g.reportLog("connection manager generate connection info"),this.currentTopic=e;return{channelId:e,clientId:this.crypto.stringifyKeypair().publicKey}}connect(){return r(this,arguments,void 0,(function*(e=!1){this.timeLog=(new Date).getTime(),(0,v.logDebug)("ConnectTime---enter->",this.timeLog),g.reportLog("connection manager begin connect");let t=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);var n=this.currentTopic;if(g.logDebug(`generate topic token: ${n}`),e){null!=t&&(g.logDebug(`read last connect id: ${t}`),n=t.content);var o=this.connectStorage.getItem(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);o&&(this.connectedWalletPK=o.content,(0,v.logDebug)(`connectionManager connect() this.connectedWalletPK : ${this.connectedWalletPK}`)),g.reportLog("connection manager do restore connection")}if(e)try{const e=this.getCachedCryptoKeyPair();e&&(this.crypto=new h.SessionCrypto(e))}catch(Ye){throw g.logError("get crypto key pair from cache failed"),g.reportEvent(m.OKXReportType.LOG,"cache_fail","cache failed"),this.connectStorage.clearCache(),new Error("crypto cache failed")}g.logDebug(`use crypto client id: ${this.crypto.stringifyKeypair().publicKey}`),this.connectStorage.saveContent(n,s.OKXCONNECTOR_TOKEN_CACHE);var a=yield this.makeJWT(n);return g.logDebug(`generate jwt token: ${a}`),this.connectStorage.saveContent(a,"jwt"),new Promise(((e,t)=>{this.connector.onOpen((()=>r(this,void 0,void 0,(function*(){g.logDebug("1. connector on open"),g.reportLog("1. connect ws open");const o=(new Date).getTime();(0,v.logDebug)("ConnectTime---open->",o-this.timeLog),this.events.once(this.packageId.toString(),(o=>r(this,void 0,void 0,(function*(){if(o&&o.error){g.logError("failed when login"),g.reportLog("2. connect login failed"),yield this.connector.disconnect();var s=new Error;s.message=o.error.message,s.name=o.error.code.toString(),t(s)}this.refreshPackageId(),this.events.once(this.packageId.toString(),(o=>r(this,void 0,void 0,(function*(){if(o&&o.error){g.logError("failed when subscribe"),g.reportLog("3. connect subscribe failed"),yield this.connector.disconnect();var r=new Error;r.message=o.error.message,r.name=o.error.code.toString(),t(r)}this.refreshPackageId(),g.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`),g.reportLog("4. subscribe callback then send fetch");const i=(new Date).getTime();(0,v.logDebug)("ConnectTime--subscribe callback->",i-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),n),g.logDebug(`5. splitmanager init: ${this.packageId}`),g.reportLog("5. splitmanager init"),yield this.splitManager.init(this.sendRaw.bind(this)),e()})))),g.logDebug(`3. login callback then send subscribe: ${this.packageId}`),g.reportLog("3. connect subscribe failed");const a=(new Date).getTime();(0,v.logDebug)("ConnectTime---login callback->",a-this.timeLog),yield this.connector.send((()=>r(this,void 0,void 0,(function*(){g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("ConnectionManager connect error",e),t(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_SUB,params:{topic:n}})})))),g.logDebug("2. login called"),g.reportLog("2. connection manager connect call login"),yield this.connector.send((()=>r(this,void 0,void 0,(function*(){g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,v.logDebug)("ConnectionManager connect error",e),t(e)}))}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_LOGIN,params:{token:a}}),this.connector.addPackageParse((e=>{var t;if(g.logDebug("connect: parse package"),g.logDebug(e),!("params"in e)||!("data"in e.params))return void this.parsePackage(e,!0);let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if(void 0!==n){n=n.replace(/'/g,'"');let e=(0,p.safeJsonParse)(n);"string"!=typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,g.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===i.CONNECT_METHOD_RECEIVE)}))})))),this.connector.connect().catch((e=>{(0,v.logDebug)("ConnectionManager connect error",e),t(e)}))}))}))}disconnect(){return r(this,arguments,void 0,(function*(e=!1){yield this.connector.disconnect(),g.reportLog("connect disconnect"),this.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),e||(this.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.connectedWalletPK="",(0,v.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${this.connectedWalletPK}`))}))}updateProtocolVersion(e,t){this.splitManager.updateTopicSenderVersion(e,t)}addListener(e,t,n){this.connector.addListener((0,p.safeJsonStringify)(e),(e=>{if(e=e.replace(/'/g,'"'),g.logDebug(`addListener ===> ${e}`),void 0!==e){var t=(0,p.safeJsonParse)(e),n=t.message;let r;return n.trimStart().startsWith("{")?r=n:(t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),g.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),g.logDebug(`this.cryptoKey  addListener   ${(0,d.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair())),r=this.crypto.decrypt(n,this.connectedWalletPK)),g.logDebug(`addListener ===> ${r}`),r}}),t,n,(e=>new Promise(((t,n)=>r(this,void 0,void 0,(function*(){let n=this.splitManager.tryParseMessageSplitPayload(e.message);if(n){let r={topicId:e.topic,messageId:null==e?void 0:e.messageId,messageObject:n,publishedAt:null==e?void 0:e.publishedAt},o=yield this.splitManager.onReceivedPackageCheck(r);t(o)}else t({isSplitPackage:!1})}))))))}sendRaw(e){return r(this,void 0,void 0,(function*(){g.logDebug(`message send =====> ${e}`),g.reportLog("connect send raw msg");let t=e;g.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);g.logDebug(`message send =====topic>>>> ${null==n?void 0:n.content}`),this.refreshPackageId();const o={id:this.packageId.toString(),method:i.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:null==n?void 0:n.content,message:t,ttl:c.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>r(this,void 0,void 0,(function*(){e&&e.error?g.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&g.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o),this.packageId}))}sendEncryptedMsg(e,t){return r(this,arguments,void 0,(function*(e,t,n=c.OKXCONNECTOR_MESSAGE_TTL){this.refreshPackageId();const o={id:this.packageId.toString(),method:i.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:t,ttl:n}}};this.events.once(this.packageId.toString(),(e=>r(this,void 0,void 0,(function*(){e&&e.error?g.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&g.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}send(e){return r(this,arguments,void 0,(function*(e,t=c.OKXCONNECTOR_MESSAGE_TTL){if(g.logDebug(`message send =====> ${e}`),g.reportLog("connect send msg"),!this.isWalletPKReady())throw new Error("connection not finish");let n=this.crypto.encrypt(e,this.connectedWalletPK);g.logDebug(`message send =====encrypt message.length>>>> ${n.length}`),g.reportEvent(m.OKXReportType.LOG,"msg_size",n.length.toString());let r=this.connectStorage.getItem(s.OKXCONNECTOR_TOKEN_CACHE);return g.logDebug(`message send =====topic>>>> ${null==r?void 0:r.content}`),yield this.splitManager.sendSplitPackages(null==r?void 0:r.content,n,this.sendEncryptedMsg.bind(this),this.sendRaw.bind(this)),this.packageId}))}sendACK(e,t){return r(this,arguments,void 0,(function*(e,t,n=void 0){if(!0===t){const t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(n){const t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}))}sendReceive(e,t,n){return r(this,void 0,void 0,(function*(){const o={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}sendFetchAndConsumeMessages(e,t){return r(this,void 0,void 0,(function*(){this.events.once(e,(e=>r(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;g.reportLog("5. get fetch result"),this.splitManager.tryParseMessageSplitPayload(n.message)?(yield this.connector.getMsgPayloadFromHistory(n),g.logDebug("skip receive")):(yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t))}}o&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else g.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),g.logDebug("5. send fetch more"),g.reportLog("5. send fetch more");const n=(new Date).getTime();(0,v.logDebug)("ConnectTime---5->",n-this.timeLog);const o={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return g.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}cleanCache(){g.reportLog("connection cache clean called"),this.connectStorage.clearCache()}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,p.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){try{let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t){return(0,p.safeJsonParse)(t)}}catch(Ye){this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}}getCurrentConnectionReady(){let e=!1;try{this.getCachedCryptoKeyPair()&&(e=!0)}catch(Ye){g.logError("check connection ready failed")}return this.isWalletPKReady()&&e}getCryptoKeyEnable(){let e=!1;try{this.getCachedCryptoKeyPair()&&(e=!0)}catch(Ye){g.logError("check connection ready failed")}return e}},as}var Us,js,Ws={},Bs={};function Xs(){if(js)return Ws;js=1;var e=Ws.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),t=Ws.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=Ws.__importStar||function(){var n=function(e){return n=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},n(e)};return function(r){if(r&&r.__esModule)return r;var o={};if(null!=r)for(var i=n(r),s=0;s<i.length;s++)"default"!==i[s]&&e(o,r,i[s]);return t(o,r),o}}(),r=Ws.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.WalletConnectionManager=void 0;const o=is(),i=ls(),s=C(),a=hs(),c=y(),l=(Us||(Us=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.WalletConnectionManagerEvent=Bs.WalletConnectionManagerTopicInfoCacheKey=void 0,Bs.WalletConnectionManagerTopicInfoCacheKey="wcmtic",Bs.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}),Bs),u=Ms(),d=pt(),h=os(),f=rs(),p=gs(),g=Is(),v=ln(),m=n(cn()),b=cn(),w=Yt();return Ws.WalletConnectionManager=class{constructor(){this.events=new d.EventEmitter,this.communicateEvents=new d.EventEmitter,this.splitManager=new u.ConnectionSplitPackages("wallet"),m.logDebug("connect manager construct"),this.connectStorage=new h.Storage(s.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new o.OKXWalletConnector(c.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(e=0){let t=Date.now()+e;t==this.packageId&&(this.packageId=t+1),this.packageId=t}saveCryptoKeyPair(e,t){let n=(0,v.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){const t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_CRYPTO_KEY+e);if("string"==typeof t){return m.logDebug("get cached crypto key:"),m.logDebug(t),(0,v.safeJsonParse)(t)}return this.connectStorage.clearCache(),null}saveJWTKeyPair(e){var t={publicKey:(0,f.toHexString)(e.publicKey),secretKey:(0,f.toHexString)(e.secretKey)};m.logDebug("save jwt kp");let n=(0,v.safeJsonStringify)(t);m.logDebug(n),this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_JWT_KEY),m.logDebug("after save jwt kp")}getCachedJWTKeyPair(){const e=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_JWT_KEY);if("string"==typeof e){m.logDebug("get cached jwt kp:"),m.logDebug(e);let t=(0,v.safeJsonParse)(e);return m.logDebug("save jwt kp"),m.logDebug(t),{publicKey:(0,f.hexToByteArray)(t.publicKey),secretKey:(0,f.hexToByteArray)(t.secretKey)}}return(0,g.generateKeyPair)()}isTopicPublicKeyExist(e){return m.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return r(this,void 0,void 0,(function*(){return yield(0,g.signJWT)(e,a.OKXCONNECTOR_JWT_WALLET_SIDE,a.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parseInternalMsg(e){try{let t=(0,v.safeJsonParse)(e)["ivur-igbfft-ptjip"];if(t&&t.length>0){return(0,w.base64decode)(t,!0).toString()}}catch(Ye){m.logError("parse internal msg",Ye)}}updateClientId(e,t){let n=this.sessionCryptoInfoMap.get(e);if((0,b.logDebug)("updateClientId",n,e,t),n&&t&&t.length>0){if(n.cid){let r=(0,f.getLastSixMd5Hash)(t);n.cid==r?n.dappPublicKey=t:m.logError("cid check failed",n,e,t)}else n.dappPublicKey=t;this.syncCacheSessionInfo()}return!1}parsePackage(e,t){return r(this,arguments,void 0,(function*(e,t,n=!1){var o,i,s,a,c,l,u,d,h,f,p,g,y,C,_,O,E;this.events.emit(t.id,t);let S=this.sessionCryptoInfoMap.get(e);m.logDebug("get sessionInfo for decrypt topic:",e),m.logDebug("get sessionInfo for decrypt:",t.id,e,S,this.sessionCryptoInfoMap);let R=!1;if(S&&t.params.data&&(null===(o=t.params.data)||void 0===o?void 0:o.message))if(null===(i=t.params.data)||void 0===i?void 0:i.isInternalData){let e=null===(s=t.params.data)||void 0===s?void 0:s.message,n=null===(a=t.params.data)||void 0===a?void 0:a.topic,r=this.parseInternalMsg(e);(0,b.logDebug)("parse internal origin: ",r),r&&r.length>0&&this.communicateEvents.emit("origin",r,n)}else try{let n=null===(c=t.params.data)||void 0===c?void 0:c.message;if(n.trimStart().startsWith("{")){let o=this.splitManager.tryParseMessageSplitPayload(n);if(o){(0,b.logDebug)("parse split msg object: ",o),R=!0;let n={topicId:null===(u=null===(l=t.params)||void 0===l?void 0:l.data)||void 0===u?void 0:u.topic,messageId:null===(h=null===(d=t.params)||void 0===d?void 0:d.data)||void 0===h?void 0:h.messageId,messageObject:o,publishedAt:null===(p=null===(f=t.params)||void 0===f?void 0:f.data)||void 0===p?void 0:p.publishedAt},i=yield this.splitManager.onReceivedPackageCheck(n);if(i.completeMessageIdList&&i.completeMessageIdList.forEach((t=>r(this,void 0,void 0,(function*(){this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),t,e)})))),i.finalMessage){let t=S.crypto.decryptWallet(i.finalMessage,S.dappPublicKey);(0,b.logDebug)("<<< receive msg from split:",e,t),this.communicateEvents.emit(e,t)}}else{let t=(0,v.safeJsonParse)(n);if(t.method){if("session_info"==t.method){let n=t.params.sessionInfo,r=(0,w.base64decode)(n,!1);(0,b.logDebug)("wallet connection manager requset base64Content:",r),(0,b.logDebug)("base64Content:"+r);let o=r.toObject();this.updateClientId(e,o.clientId)}(0,b.logDebug)("<<< parse raw msg:",e,t),this.communicateEvents.emit(e,n)}}}else{let n=S.crypto.decryptWallet(null===(g=t.params.data)||void 0===g?void 0:g.message,S.dappPublicKey);(0,b.logDebug)("<<< receive msg:",e,n),this.communicateEvents.emit(e,n)}}catch(Ye){let r=S.crypto.decryptWallet(null===(y=t.params.data)||void 0===y?void 0:y.message,S.dappPublicKey);(0,b.logDebug)("<<< receive msg:",e,r),this.communicateEvents.emit(e,r)}if(!n&&(yield this.sendACK(t.id,!0),e&&!R)){let n=t;(null===(_=null===(C=n.params)||void 0===C?void 0:C.data)||void 0===_?void 0:_.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(E=null===(O=n.params)||void 0===O?void 0:O.data)||void 0===E?void 0:E.messageId,e))}}))}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(l.WalletConnectionManagerTopicInfoCacheKey);if(m.logDebug("get cached sessionInfos:",e),e){let t=(0,v.safeJsonParse)(e);for(let e in t){let n=t[e];m.logDebug("make topicItem:",n);let r={topic:e,crypto:new p.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey,cid:n.cid};this.sessionCryptoInfoMap.set(e,r)}}m.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[n,r]of this.sessionCryptoInfoMap)m.logDebug("for each Keys",n),r&&(e[n]={cryptoKeyPair:r.crypto.stringifyKeypair(),dappPublicKey:r.dappPublicKey,cid:r.cid});let t=(0,v.safeJsonStringify)(e);m.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,l.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t,n=!0){let r=t.dappPublicKey,o=[];for(let[i,s]of this.sessionCryptoInfoMap)m.logDebug("for each Keys",i),s.dappPublicKey==r&&(m.logDebug("duplicated dapp public key:",i,r),o.push(i));for(let[i,s]of this.sessionCryptoInfoMap)o.includes(i)&&this.sessionCryptoInfoMap.delete(i);return m.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),m.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),o}updateProtocolVersion(e,t){this.splitManager.updateTopicSenderVersion(e,t)}appendTopic(e,t,n){return r(this,void 0,void 0,(function*(){return(0,b.logDebug)("4.1. get append Topic:",e),new Promise(((o,i)=>r(this,void 0,void 0,(function*(){if(!this.isLogined){var r=new Error;return r.message="connection is not logined",r.name="append error",void i(r)}let s={topic:e,crypto:new p.SessionCrypto,dappPublicKey:t||"",cid:n},a=this.cacheSessionInfo(e,s,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),m.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`),m.reportLog("5. subscribe callback then fetch append message");const c=(new Date).getTime();(0,b.logDebug)("Append --subscribe callback->",c-this.timeLog),o(a)}))))}))}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return r(this,void 0,void 0,(function*(){this.timeLog=(new Date).getTime(),(0,b.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog),m.reportLog("wallet connect connect called");let e=Date.now().toString();var t=yield this.makeJWT(e);return m.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise(((e,n)=>{this.inLogin=!0,this.connector.onOpen((()=>r(this,void 0,void 0,(function*(){m.logDebug("1. connector on open"),m.reportLog("1. wallet connect connect on open");const o=(new Date).getTime();(0,b.logDebug)("ConnectTime---open->",o-this.timeLog),this.events.once(this.packageId.toString(),(t=>r(this,void 0,void 0,(function*(){if(t&&t.error){m.logError("failed when login"),yield this.connector.disconnect();var r=new Error;r.message=t.error.message,r.name=t.error.code.toString(),n(r)}else this.isLogined=!0,e(),m.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),m.reportLog("3. wallet connect connect subscribe cached topics"),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})))),m.logDebug("2. login called"),m.reportLog("2. wallet connect login called"),yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_LOGIN,params:{token:t}})})))),this.connector.connect().catch((e=>{(0,b.logDebug)("WalletConnectionManager connect error",e),n(e)})),this.connector.addPackageParse((e=>{var t,n;m.logDebug("connect: parse package"),m.logDebug(e),"params"in e&&"data"in e.params?(null===(t=e.params.data)||void 0===t?void 0:t.topic)&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===i.CONNECT_METHOD_RECEIVE):this.parsePackage("",e,!0)}))}))}))}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,f.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return r(this,arguments,void 0,(function*(e=!1){yield this.connector.disconnect(),this.connectStorage.clearCache(s.OKXCONNECTOR_TOKEN_CACHE),e||this.connectStorage.clearCache(s.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)}))}sendRaw(e,t){return r(this,void 0,void 0,(function*(){t&&(yield this.sendMsg(t,e,c.OKXCONNECTOR_MESSAGE_TTL))}))}sendMsg(e,t,n){return r(this,void 0,void 0,(function*(){if(t){this.refreshPackageId();const o={id:this.packageId.toString(),method:i.CONNECT_METHOD_PUBLISH,jsonrpc:c.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:t,ttl:n}}};this.events.once(this.packageId.toString(),(e=>r(this,void 0,void 0,(function*(){e&&e.error?m.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&m.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}}))}send(e,t){return r(this,arguments,void 0,(function*(e,t,n=!1,r=c.OKXCONNECTOR_MESSAGE_TTL,o=!1){var i,s;if(m.logDebug(`message send =====> ${t}`),!this.isTopicPublicKeyExist(e))throw new Error("connection not finish");let a,l=null===(i=this.sessionCryptoInfoMap.get(e))||void 0===i?void 0:i.dappPublicKey,u=null===(s=this.sessionCryptoInfoMap.get(e))||void 0===s?void 0:s.crypto;o&&(a={message:t});let d=!1;if(u&&l&&!o){d=!0,a={message:u.encryptWallet(t,l)}}if(a){n&&u&&(a.clientId=(0,f.toHexString)(u.keyPair.publicKey));let t=(0,v.safeJsonStringify)(a);!o&&d?yield this.splitManager.sendSplitPackages(e,t,this.sendMsg.bind(this),this.sendRaw.bind(this)):yield this.sendMsg(e,t,r)}}))}sendACK(e,t){return r(this,arguments,void 0,(function*(e,t,n=void 0){if(!0===t){const t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(n){const t={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}))}sendReceive(e,t,n){return r(this,void 0,void 0,(function*(){const o={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}sendUnsubscribe(e){return r(this,void 0,void 0,(function*(){yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()}))}sendFetchAndConsumeMessages(e,t){return r(this,void 0,void 0,(function*(){this.events.once(e,(e=>r(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}o&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else m.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),m.logDebug("5. send fetch more");const n=(new Date).getTime();(0,b.logDebug)("ConnectTime---5->",n-this.timeLog);const o={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}sendBatchFetchAndConsumeMessages(e,t){return r(this,void 0,void 0,(function*(){this.events.once(e,(e=>r(this,void 0,void 0,(function*(){var n,r;if(e.result){var o=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let t=i[e];if(t&&t.topic){if(this.splitManager.tryParseMessageSplitPayload(t.message))yield this.connector.getMsgPayloadFromHistory(t);else{let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}}o&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else m.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(r=e.error)||void 0===r?void 0:r.message}`)})))),m.logDebug("5. send fetch more"),m.reportLog("5. send fetch more");const n=(new Date).getTime();(0,b.logDebug)("ConnectTime---5->",n-this.timeLog);const o={id:e,jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send((()=>r(this,void 0,void 0,(function*(){m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}cleanCache(){return r(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,v.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,s.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(s.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t){return(0,v.safeJsonParse)(t)}}subscribeTopics(e){return r(this,void 0,void 0,(function*(){(0,b.logDebug)("4. topicid list",e),m.reportLog("4. topicid list"),this.refreshPackageId();const t=(new Date).getTime();return(0,b.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise(((t,n)=>r(this,void 0,void 0,(function*(){let n=0;for(let o=0;o<e.length;++o){let s=e[o];this.refreshPackageId(o),this.events.once(this.packageId.toString(),(i=>r(this,void 0,void 0,(function*(){if(i&&i.error){m.logError("failed when subscribe"),yield this.connector.disconnect();var r=new Error;r.message=i.error.message,r.name=i.error.code.toString(),n+=1,n==e.length&&t()}this.refreshPackageId(o);const a=(new Date).getTime();(0,b.logDebug)("ConnectTime--subscribe callback->",a-this.timeLog),n+=1,n==e.length&&(m.logDebug(`5. send fetch msg: ${this.packageId}, ${s}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),yield this.splitManager.init(this.sendRaw.bind(this)),t())})))),m.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${s}`),m.reportLog("3. login callback then send subscribe");const a=(new Date).getTime();(0,b.logDebug)("ConnectTime---login callback->",a-this.timeLog),yield this.connector.send((()=>r(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:c.CONNECT_JSONRPC_VER,method:i.CONNECT_METHOD_SUB,params:{topic:s}})}}))))}))}},Ws}var Hs,Fs={},qs={};function Js(){return Hs||(Hs=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.OKX_TG_WALLET=qs.OKX_APP_WALLET=qs.OKX_INJECT_WALLET=void 0,qs.OKX_INJECT_WALLET="okx_inject_wallet",qs.OKX_APP_WALLET="okx_app_wallet",qs.OKX_TG_WALLET="okx_tg_wallet"),qs}var zs,Vs,$s,Gs={};function Qs(){if(zs)return Gs;zs=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.buildNameSpacesByConnectResponse=function(e){return t(e)},Gs.buildRequestAccountNameSpacesByConnectResponse=t,Gs.buildAccountNameSpaces=n;const e=cn();function t(t){let r={};(0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse111>>",JSON.stringify(t));let o=t.payload.responses.find((e=>"requestAccounts"===e.name));if(o&&o.accounts){let t=[];for(const n of o.accounts)"ton"===n.namespace?n.data&&n.data.ton_addr&&n.data.ton_addr.address&&n.data.ton_addr.address.length>0&&((0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse start TON>>",JSON.stringify(n)),t.push(n)):((0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse start other>>",JSON.stringify(n)),t.push(n));o.accounts=t}const i=t.payload.responses.find((e=>"ton_addr"===e.name)),s=t.payload.responses.find((e=>"ton_proof"===e.name));if(i&&!o){(0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let t=i.address;t="ton:"+i.network+":"+t;let n={ton_addr:i};s&&(n.ton_proof=s),o={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[t],methods:["ton_sendTransaction"],extra:{},data:n}]}}return(0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(o)),n(o.accounts,r),r}function n(t,n){t.forEach((t=>{var r=[],o=[];t.addresses.forEach((t=>{var n=t.split(":");if((0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",n.length),n.length>=3){let i=n.slice(0,2).join(":");r.push(i),o.push(t),(0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",i,"addressItem:",t)}})),t.data&&t.data.ton_addr&&(t.data.ton_addr.name="ton_addr"),t.data&&t.data.ton_proof&&(t.data.ton_proof.name="ton_proof"),n[t.namespace]={chains:r,accounts:o,methods:t.methods,extra:t.extra,payload:t.data},(0,e.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(n))}))}return Gs}function Ys(){if(Vs)return Fs;Vs=1;var e=Fs.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.Engine=void 0;const t=Pt(),n=y(),r=Yt(),o=Js(),i=Ls(),s=Qs(),a=St();return Fs.Engine=class{constructor(e){this.connectors=[],this.useConnector=void 0,this.connectionManager=new i.ConnectionManager(e),this.addConnectionListener()}getConnector(){if(this.useConnector)return this.useConnector}setAccountChangeListener(e){this.accountChangeListener=e,(0,r.logDebug)("setAccountChangeListener: engine",e);for(const t of this.connectors)t.setAccountChangeListener(e)}registerConnector(e){this.connectors=e;for(const t of e)t.setConnectionManager(this.connectionManager)}hasWsConnector(){for(const e of this.connectors)if(this.isWsConnector(e))return!0;return!1}isWsConnector(e){return!!e&&(e.getTag()===o.OKX_TG_WALLET||e.getTag()===o.OKX_APP_WALLET)}isInjectedConnector(e){return!!e&&e.getTag()===o.OKX_INJECT_WALLET}universalConnect(n,i,c){return e(this,void 0,void 0,(function*(){return this.addConnectionListener(),new Promise(((l,u)=>e(this,void 0,void 0,(function*(){var e,d,h,f;try{(0,r.logDebug)("engine universalConnect request :",JSON.stringify(n)),(0,r.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(i));let g=[];n.forEach((e=>{let t=e.name;(t.startsWith("requestAccounts")||t.startsWith("ton"))&&g.push(e)})),(0,r.logDebug)("engine universalConnect universalRequest :",JSON.stringify(g));const v=this.connectionManager.getConnectInfo(),m=Date.now().toString();let y=null!==(e=i.openUniversalUrl)&&void 0!==e&&e;const b={protocolVer:Number(t.tonConnectSdkVersion),topic:v.channelId,clientId:v.clientId,requestId:m,dAppInfo:i.dappInfo,requests:g,redirect:null!==(d=null==i?void 0:i.redirect)&&void 0!==d?d:"none"},w=(0,r.encodeConnectParams)(b);b.redirect=null!==(h=null==i?void 0:i.redirect)&&void 0!==h?h:"none",(0,r.logDebug)("engine universalConnect ==>>universalConnectRequest:",JSON.stringify(b));var p="";y&&(p=(0,r.getOKXLink)(b,i.useMini,i.tmaReturnUrl),(0,r.logDebug)("engine universalConnect ==>>openOKXLink:",p));const C=()=>1==this.connectors.length&&this.connectors[0].getTag()===o.OKX_INJECT_WALLET?this.connectors[0].openWallet({connectRequest:b}):i.useMini?(0,r.openOKXTMAWalletlinkWithFallback)(p):(0,r.useShortLink)()?(0,r.openOKXUniversalLink)(p):(0,r.openOKXDeeplinkWithFallback)(p);(0,r.logDebug)("engine universalConnect ==>>openOKXLink:",p);const _=(0,r.isIos)();if(_&&y&&((0,r.logDebug)(`engine universalConnect ==>>isIOS: ${_}   openUniversalLink: ${y}`),C()),this.addOnConnectResultListener((e=>{var n,c,d,h;try{this.addOnConnectResultListener(void 0);let u=e;if("connect"==u.method){(0,r.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(u));let e=(0,s.buildNameSpacesByConnectResponse)(u);if(!e)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);{let s;var f;switch((null===(c=null===(n=u.payload)||void 0===n?void 0:n.responses)||void 0===c?void 0:c[0])&&"walletName"in u.payload.responses[0]&&(s=u.payload.responses[0].walletName),null===(d=u.payload)||void 0===d?void 0:d.wallet.appName){case a.OKXWalletName:f=o.OKX_APP_WALLET;break;case a.OKXMiniWalletName:f=o.OKX_TG_WALLET;break;case a.OKXInjectWalletName:f=o.OKX_INJECT_WALLET}var p=this.connectors.find((e=>e.getTag()===f));if(!p)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);let h=Object.assign({topic:v.channelId,sessionConfig:i,namespaces:e},u.payload&&{wallet:Object.assign(Object.assign({},u.payload.wallet),{walletName:s})}),g=u.payload.responses.find((e=>"requestAccounts"===e.name));g&&g.connectRequestMethods&&(h.signResponse=g.connectRequestMethods),(0,r.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(h)),this.isWsConnector(p)&&((0,r.logDebug)("engine update protocol version"),this.connectionManager.updateProtocolVersion(v.channelId,u.payload.wallet.maxProtocolVersion)),l(h),this.setUseConnector(p)}}else if("connect_error"==u.method&&null!=(null===(h=u.payload)||void 0===h?void 0:h.code))throw new t.OKXConnectError(u.payload.code)}catch(AO){u(AO)}})),this.hasWsConnector()){yield null===(f=this.connectionManager)||void 0===f?void 0:f.disconnect(!1);try{yield this.connectionManager.connect()}catch(AO){throw(0,r.logDebug)("Engine universalConnect error",AO),AO}(0,r.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",c),this.sendSession(w)}if(!_&&y&&C(),(0,r.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",c),c){const e={connectRequest:b,redirect:i.redirect,tmaReturnUrl:i.tmaReturnUrl};(0,r.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),c(e)}}catch(Ye){(0,r.logDebug)("Engine universalConnect catch error",Ye),u(Ye)}}))))}))}addOnConnectResultListener(e){for(const t of this.connectors)this.isInjectedConnector(t)&&t.setOnConnectResultListener(e);this.connectResultListener=e}openWallet(e,t){var n;t?t.openWallet(e):null===(n=this.getConnector())||void 0===n||n.openWallet(e)}send(t,n,r){return e(this,void 0,void 0,(function*(){var e;return null===(e=this.getConnector())||void 0===e?void 0:e.send(t,n,r)}))}clearData(){var e;null===(e=this.getConnector())||void 0===e||e.clearData()}addDisconnectListener(e){var t;null===(t=this.getConnector())||void 0===t||t.addDisconnectListener(e)}saveSessionContent(e,t){this.connectionManager.saveSessionContent(e,t)}getSessionContent(e){var t,n=this.connectionManager.getSessionContent(e);if(n){var r="";if("object"==typeof n&&(r=this.getTagByappName(null===(t=n.wallet)||void 0===t?void 0:t.appName)),this.connectors.find((e=>e.getTag()===r)))return n}}getTagByappName(e){var t="";if(e)switch(e){case a.OKXWalletName:t=o.OKX_APP_WALLET;break;case a.OKXMiniWalletName:t=o.OKX_TG_WALLET;break;case a.OKXInjectWalletName:t=o.OKX_INJECT_WALLET}return t}setConnectConnector(e){var t=this.getTagByappName(null==e?void 0:e.appName);t&&this.setUseConnector(this.connectors.find((e=>e.getTag()===t)))}setUseConnector(e){this.useConnector=e,this.isWsConnector(e)&&e.addConnectionListener()}setSessionConnectingListener(e){this.sessionConnectingListener=e}restoreconnect(t,n){return e(this,void 0,void 0,(function*(){var e;yield null===(e=this.getConnector())||void 0===e?void 0:e.restoreconnect(t,n)}))}restoreconnectFromTopic(t){return e(this,void 0,void 0,(function*(){this.isWsConnector(this.getConnector())&&(yield this.getConnector().restoreconnectFromTopic(t))}))}getCurrentConnectionReady(e){var t;return!!(null===(t=this.getConnector())||void 0===t?void 0:t.getCurrentConnectionReady(e))}connectManagerDisconnect(){return e(this,arguments,void 0,(function*(e=!1){var t;yield null===(t=this.getConnector())||void 0===t?void 0:t.connectManagerDisconnect(e)}))}sendSession(t){return e(this,void 0,void 0,(function*(){(0,r.logDebug)("[Connect] sendSession called:",t);const e=Date.now().toString();let o={method:"session_info",params:{protocolVersion:n.CONNECT_PROTOCOL_VER,sessionInfo:t}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},o),{requestId:e})))}))}addConnectionListener(){var e;null===(e=this.connectionManager)||void 0===e||e.addListener("sdk_response",((e,t)=>{var n=(0,r.safeJsonParse)(t);(0,r.logDebug)(`Engine ==>> addListener ==> success ==> ${n}`),"connect"===n.method||"connect_error"===n.method?this.connectResultListener&&this.connectResultListener(n):"session_connecting"===n.method&&((0,r.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener"),this.sessionConnectingListener&&((0,r.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener not null"),this.sessionConnectingListener(),this.sessionConnectingListener=void 0))}),(function(){}))}},Fs}var Zs,ea={},ta={};function na(){if(Zs)return ta;return Zs=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.SuiMethods=ta.TONMethods=ta.AptosMethods=ta.SOLANAMethods=ta.Eip55Methods=void 0,ta.hasOKXInjectedProvider=function(){if(void 0!==function(e){const t=(e,n)=>{const[r,...o]=n.split("."),i=e[r];if(i)return 0===o.length?i:t(i,o.join("."))};if("undefined"!=typeof window)return t(window,e)}("okxwallet"))return!0;return!1},ta.Eip55Methods=["personal_sign","eth_signTypedData_v4","eth_sendTransaction","wallet_addEthereumChain","wallet_watchAsset","wallet_switchEthereumChain","eth_requestAccounts","eth_accounts","eth_chainId"],ta.SOLANAMethods=["solana_signTransaction","solana_signMessage","solana_signAllTransactions","solana_signAndSendTransaction"],ta.AptosMethods=["aptos_signMessage","aptos_signTransaction","aptos_signAndSubmitTransaction"],ta.TONMethods=["ton_sendTransaction"],ta.SuiMethods=["sui_signMessage","sui_signPersonalMessage","sui_signTransactionBlock","sui_signAndExecuteTransactionBlock"],ta}var ra,oa,ia,sa,aa={},ca={},la={};function ua(){return ra||(ra=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.mediaNotTouch=e.mediaTouch=e.maxWidth=void 0,e.isDevice=function(i){var s;const a=(0,r.getWindow)();if(!a)return"desktop"===i;if((0,n.isTmaPlatform)("weba"))return!0;const c=a.innerWidth;switch(i){case"desktop":return c>e.maxWidth.tablet;case"tablet":return c>e.maxWidth.mobile;default:let n=c<=e.maxWidth.mobile||(0,t.isOS)("ios","android","ipad");if(n){const e=!!(null===(s=(0,r.getWindow)())||void 0===s?void 0:s.TelegramWebviewProxy),t=navigator.maxTouchPoints||0;e&&0===t&&(n=!1),(0,o.logDebug)("isDevice mobile isTelegram and maxTouchPoints:",n,e,t)}return n}},e.media=function(t){switch(t){case"mobile":return`@media (max-width: ${e.maxWidth.mobile}px)`;case"tablet":return`@media (max-width: ${e.maxWidth.tablet}px) (min-width: ${e.maxWidth.mobile}px)`;default:return`@media (min-width: ${e.maxWidth.tablet}px)`}},e.mediaMin=function(e){return`@media (min-width: ${e}px)`},e.mediaMax=function(e){return`@media (max-width: ${e}px)`},e.mediaMinMax=function(e,t){return`@media (min-width: ${e}px) and (max-width: ${t}px)`};const t=Wt(),n=Bt(),r=Xt(),o=cn();e.maxWidth={mobile:440,tablet:1020},e.mediaTouch="@media (hover: none)",e.mediaNotTouch="@media not all and (hover: none)"}(la)),la}function da(){if(oa)return ca;oa=1;var e=ca.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(ca,"__esModule",{value:!0}),ca.Eip155Provider=void 0;const t=Pt(),n=Yt(),r=ua(),o=na();return ca.Eip155Provider=class{send(r){return e(this,void 0,void 0,(function*(){var e;try{(0,n.logDebug)("Eip155Provider send request:",(0,n.safeJsonStringify)(r)),yield this.restoreConnect();let o=null;switch(r.method){case"personal_sign":r.params&&"message"in r.params&&(o={method:r.method,params:[r.params.message,r.address]});break;case"eth_sendTransaction":case"wallet_addEthereumChain":case"wallet_switchEthereumChain":r.params&&(o={method:r.method,params:[r.params]});break;case"eth_signTypedData_v4":r.params&&"typedDataJson"in r.params&&(null===(e=r.params)||void 0===e?void 0:e.typedDataJson)&&"string"==typeof r.params.typedDataJson&&(o={method:r.method,params:[r.address,r.params.typedDataJson]});break;case"wallet_watchAsset":r.params&&(o={method:r.method,params:r.params});break;default:throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if(!o)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);if(("wallet_switchEthereumChain"===r.method||"wallet_addEthereumChain"===r.method)&&r.params&&"chainId"in r.params){(0,n.logDebug)("Eip155Provider send request switch requestParams:",(0,n.safeJsonStringify)(o));const e=parseInt(r.params.chainId,16).toString();yield window.okxwallet.request(o);const t=`eip155:${e}:${r.address}`;return(0,n.logDebug)("Eip155Provider send request switch result:",t),{result:t,method:r.method}}{const e=(0,n.getChainId)(r.chainId),t=`0x${Number(e).toString(16)}`;if((0,n.logDebug)("Eip155Provider current chainId:",e,t),t){yield window.okxwallet.request({method:"wallet_switchEthereumChain",params:[{chainId:t}]}),(0,n.logDebug)("Eip155Provider send request requestParams:",t,(0,n.safeJsonStringify)(o));const e=yield window.okxwallet.request(o);return(0,n.logDebug)("Eip155Provider send request result:",(0,n.safeJsonStringify)(e)),{result:e,method:r.method}}}}catch(Ye){throw(0,n.logDebug)("Eip155Provider encountered an error:",Ye),Ye}}))}connectReady(){return!0}restoreConnect(){return(0,r.isDevice)("mobile")?window.okxwallet.request({method:"eth_requestAccounts"}):Promise.resolve()}parseConnectResponse(r,i,s,a,c,l){return e(this,void 0,void 0,(function*(){try{let e=[];a.forEach((n=>{n.namespace===t.NameSpaceKeyEip155&&e.push(...n.chains)}));let r=[],i={};if(e.forEach((e=>{let t=(0,n.getChainId)(e),o=c.address.find((n=>n.chainId===t&&60===n.coinType||n.namespaceChainId===e));o&&(r.push(e+":"+o.address),i[e]={publicKey:o.publicKey})})),r&&r.length>0){return{namespace:t.NameSpaceKeyEip155,addresses:r,methods:[...o.Eip55Methods],extra:i}}return}catch(Ye){throw Ye}}))}connect(t,n){return e(this,void 0,void 0,(function*(){return window.okxwallet.request({method:"eth_requestAccounts"})}))}},ca}function ha(){return sa||(sa=1,e=ea,t=ea.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=ea.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(na(),e),n(function(){return ia||(ia=1,e=aa,t=aa.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=aa.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(da(),e)),aa;var e,t,n}(),e)),ea;var e,t,n}var fa,pa,ga={},va={},ma={};function ya(){if(fa)return ma;fa=1;var e=ma.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(ma,"__esModule",{value:!0}),ma.WsConnector=void 0;const t=ln(),n=cn();return ma.WsConnector=class{constructor(){this.disconnectListener=[],this.walletName="",this.walletNameKey="",this.enable=!0,this.pendingRequests=new Map,(0,n.getDefaultReporter)().beginReport()}setAccountChangeListener(e){this.accountChangeListener=e}setConnectionManager(e){this.connectionManager=e}addConnectionListener(){var e;null===(e=this.connectionManager)||void 0===e||e.addListener("sdk_response",((e,r)=>{var o=(0,t.safeJsonParse)(r);(0,n.logDebug)(`Engine ==>> addListener ==> success ==> ${o}`),this.handleResponse(e,o)}),(function(){}))}addDisconnectListener(e){this.disconnectListener.push(e)}connectManagerDisconnect(){return e(this,arguments,void 0,(function*(e=!1){var t;yield null===(t=this.connectionManager)||void 0===t?void 0:t.disconnect(e)}))}openWallet(e){}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(r,o,i){return e(this,void 0,void 0,(function*(){var e,s;(0,n.logDebug)("Engine ==>> send  request==>",JSON.stringify(r));const a=this.getRequestId();try{let c=yield null===(e=this.connectionManager)||void 0===e?void 0:e.send(JSON.stringify(Object.assign(Object.assign({},r),{requestId:a})),i);c&&(null===(s=this.connectionManager)||void 0===s||s.events.once(c.toString(),(e=>{var r;(0,n.logDebug)(`Engine ==> send => onAck => ${(0,t.safeJsonStringify)(e)}`),e&&e.result&&(null===(r=o.onAck)||void 0===r||r.call(o))}))),o.resolve&&this.bindRequestForPromise(a,o.resolve)}catch(AO){return Promise.reject(AO)}}))}restoreconnect(t,n){return e(this,void 0,void 0,(function*(){var e;yield null===(e=this.connectionManager)||void 0===e?void 0:e.restoreConnect(t.topic),n(t)}))}restoreconnectFromTopic(t){return e(this,void 0,void 0,(function*(){var e;yield null===(e=this.connectionManager)||void 0===e?void 0:e.restoreConnect(t)}))}getRequestId(){const e=Date.now().toString();return(0,n.logDebug)("Engine ==>> getRequestId ==>",e),e}handleResponse(e,r){if((0,n.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,t.safeJsonStringify)(r)}`,e),"requestId"in r){(0,n.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=r.requestId;const t=this.pendingRequests.get(e);t?((0,n.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",t),t(r),this.pendingRequests.delete(e)):((0,n.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===r.method&&(this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],this.clearData()))}}getCurrentConnectionReady(){var e;return!!(null===(e=this.connectionManager)||void 0===e?void 0:e.getCurrentConnectionReady())}saveSessionContent(e,t){var n;null===(n=this.connectionManager)||void 0===n||n.saveSessionContent(e,t)}getSessionContent(e){var t;return null===(t=this.connectionManager)||void 0===t?void 0:t.getSessionContent(e)}setOnConnectResultListener(e){this.connectResultListener=e}getTag(){return""}toJSON(){return"ws-connector"}clearData(){this.pendingRequests.clear()}},ma}var ba,wa,Ca,_a,Oa,Ea={},Sa={};function Ra(){if(_a)return Ca;_a=1;const e=(wa||(wa=1,ba=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var o=e.charAt(r),i=o.charCodeAt(0);if(255!==t[i])throw new TypeError(o+" is ambiguous");t[i]=r}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,o=0;e[n]===a;)r++,n++;for(var i=(e.length-n)*c+1>>>0,l=new Uint8Array(i);e[n];){var u=t[e.charCodeAt(n)];if(255===u)return;for(var d=0,h=i-1;(0!==u||d<o)&&-1!==h;h--,d++)u+=s*l[h]>>>0,l[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");o=d,n++}for(var f=i-o;f!==i&&0===l[f];)f++;for(var p=new Uint8Array(r+(i-f)),g=r;f!==i;)p[g++]=l[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var c=(i-o)*l+1>>>0,u=new Uint8Array(c);o!==i;){for(var d=t[o],h=0,f=c-1;(0!==d||h<r)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,o++}for(var p=c-r;p!==c&&0===u[p];)p++;for(var g=a.repeat(n);p<c;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}),ba);return Ca=e("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}function Ta(){if(Oa)return Sa;Oa=1;var e=Sa.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},t=Sa.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.SolProvider=void 0;const n=Pt(),r=Yt(),o=t(Ra()),i=ua(),s=na();return Sa.SolProvider=class{send(t){return e(this,void 0,void 0,(function*(){var e;try{yield this.restoreConnect(),(0,r.logDebug)("SolProvider send request:",JSON.stringify(t));const a=t.method;let c;if(!t.injectParams)throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`param is error method: '${a}'`);switch(a){case"solana_signMessage":if(t.injectParams&&"object"==typeof t.injectParams&&"message"in t.injectParams){var i=null===(e=t.injectParams)||void 0===e?void 0:e.message;const n=(new TextEncoder).encode(i),s=yield window.okxwallet.solana.signMessage(n,"utf8");return c={method:t.method,result:o.default.encode(s.signature)},(0,r.logDebug)("SolProvider send result:",JSON.stringify(s)),c}throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`param is error method: '${a}'`);case"solana_signTransaction":{let e=yield window.okxwallet.solana.signTransaction(t.injectParams);return(0,r.logDebug)("SolProvider send bufferResult:",JSON.stringify(e)),c={method:t.method,injectResult:e},(0,r.logDebug)("SolProvider send result:",(0,r.safeJsonStringify)(c)),c}case"solana_signAllTransactions":{let e=yield window.okxwallet.solana.signAllTransactions(t.injectParams);return(0,r.logDebug)("SolProvider send result:",(0,r.safeJsonStringify)(e)),c={method:t.method,injectResult:e},c}case"solana_signAndSendTransaction":var s=yield window.okxwallet.solana.signAndSendTransaction(t.injectParams);return(0,r.logDebug)("SolProvider send result:",(0,r.safeJsonStringify)(s)),c={method:t.method,injectResult:s},c;default:throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,`method: '${a}'`)}}catch(Ye){throw(0,r.logDebug)("SolProvider send error:",Ye),Ye}}))}connectReady(){return!0}disconnect(){}restoreConnect(){return(0,i.isDevice)("mobile")?this.connect(void 0):Promise.resolve()}parseConnectResponse(t,o,i,a,c,l){return e(this,void 0,void 0,(function*(){let e=[];a.forEach((t=>{t.namespace===n.NameSpaceKeySOL&&e.push(...t.chains)}));let t=[],o={},i={};if(e.forEach((e=>{let n=c.address.find((t=>"501"===t.chainId&&501===t.coinType||t.namespaceChainId===e));n&&(t.push(e+":"+n.address),o[e]="publicKey"in i?i:{publicKey:n.publicKey})})),t.length>0){let e={namespace:n.NameSpaceKeySOL,addresses:t,methods:[...s.SOLANAMethods],extra:o};return(0,r.logDebug)("parseConnectResponse nameSpaceResponse :",JSON.stringify(e)),e}}))}connect(t,n){return e(this,void 0,void 0,(function*(){return window.okxwallet.solana.connect()}))}},Sa}var Na,Aa={};function Pa(){if(Na)return Aa;Na=1;var e=Aa.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.AptosProvider=void 0;const t=Pt(),n=Yt(),r=na(),o=ua();return Aa.AptosProvider=class{send(r){return e(this,void 0,void 0,(function*(){try{(0,n.logDebug)("AptosProvider send request:",(0,n.safeJsonStringify)(r)),yield this.restoreConnect();const e=r.method;let o;switch(e){case"aptos_signMessage":if(r.injectParams){let e=yield window.okxwallet.aptos.signMessage(r.injectParams);return o={method:r.method,result:e.signature},(0,n.logDebug)("AptosProvider send result:",(0,n.safeJsonStringify)(o)),o}throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`param is error method: '${e}'`);case"aptos_signTransaction":{(0,n.logDebug)("AptosProvider Method>>>> :",e);let t=yield window.okxwallet.aptos.signTransaction(r.params);return o={method:r.method,result:t},(0,n.logDebug)("AptosProvider send result:",(0,n.safeJsonStringify)(o)),o}case"aptos_signAndSubmitTransaction":{(0,n.logDebug)("AptosProvider Method>>>> :",e);let t=yield window.okxwallet.aptos.signAndSubmitTransaction(r.params);return o={method:r.method,result:t.hash},(0,n.logDebug)("AptosProvider send result:",(0,n.safeJsonStringify)(o)),o}default:throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,` method: '${e}'`)}}catch(Ye){throw(0,n.logDebug)("AptosProvider send error:",Ye),Ye}}))}connectReady(){return!0}disconnect(){}restoreConnect(){return(0,o.isDevice)("mobile")?window.okxwallet.aptos.connect():Promise.resolve()}parseConnectResponse(o,i,s,a,c,l){return e(this,void 0,void 0,(function*(){let e=[];a.forEach((n=>{n.namespace===t.NameSpaceKeyAptos&&e.push(...n.chains)}));let o=[],i={};if((0,n.logDebug)("AptosProvider parseConnectResponse connectChain",JSON.stringify(e)),e.forEach((e=>{let t=c.address.find((t=>"637"===t.chainId&&637===t.coinType||t.namespaceChainId===e));t&&(o.push(e+":"+t.address),i[e]={publicKey:t.publicKey})})),(0,n.logDebug)("AptosProvider parseConnectResponse addresses",JSON.stringify(o)),o.length>0){return{namespace:t.NameSpaceKeyAptos,addresses:o,methods:[...r.AptosMethods],extra:i}}}))}connect(t,n){return e(this,void 0,void 0,(function*(){return window.okxwallet.aptos.connect()}))}},Aa}var xa,Ia={};function ka(){if(xa)return Ia;xa=1;var e=Ia.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.TONProvider=void 0;const t=Pt(),n=Yt(),r=ua(),o=na();return Ia.TONProvider=class{constructor(){this.signalChainConnectResult=void 0}send(r){return e(this,void 0,void 0,(function*(){try{(0,n.logDebug)("TONProvider send request:",(0,n.safeJsonStringify)(r));let e=null;if("ton_sendTransaction"!==r.method)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);if(r.params&&(e={method:"sendTransaction",params:[JSON.stringify(r.params)],id:Date.now().toString()},(0,n.logDebug)("TONProvider tonParams first:",JSON.stringify(e))),e){const o=yield window.okxTonWallet.tonconnect.send(e);if((0,n.logDebug)("TONProvider send request result:",(0,n.safeJsonStringify)(o)),o.error)throw new t.OKXConnectError(o.error.code,o.error.message);return{result:o.result,method:r.method}}throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}catch(Ye){throw(0,n.logDebug)("TONProvider encountered an error:",Ye),Ye}}))}connectReady(){return!0}restoreConnect(){return Promise.resolve()}parseConnectResponse(i,s,a,c,l,u){return e(this,void 0,void 0,(function*(){try{let e=[];c.forEach((n=>{n.namespace===t.NameSpaceKeyTON&&e.push(...n.chains)}));let d=[],h={};if(e.forEach((e=>{(0,n.getChainId)(e);let t=l.address.find((t=>"607"===t.chainId&&607===t.coinType||t.namespaceChainId===e));t&&(d.push(e+":"+t.address),h[e]={publicKey:t.publicKey})})),(0,n.logDebug)("tonprovider parseConnectResponse needPop and addresses: ",i,JSON.stringify(d)),d&&d.length>0){let e,l=c.find((e=>e.namespace===t.NameSpaceKeyTON));if((0,n.logDebug)("tonprovider parseConnectResponse ton: ",JSON.stringify(l)),!(l&&l.params&&u&&u.manifestUrl))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"manifestUrl is nil");{this.dappInfo=u;let t=[l.params.ton_addr],o={manifestUrl:u.manifestUrl,items:t};(i||s)&&l.params.ton_proof&&t.push(l.params.ton_proof),(0,n.logDebug)("parseConnectResponse ton connect params: ",JSON.stringify(o)),e=(0,r.isDevice)("mobile")||i||s?yield window.okxTonWallet.tonconnect.connect(2,o):yield window.okxTonWallet.tonconnect.restoreConnection()}if(a&&this.signalChainConnectResult&&(e=this.signalChainConnectResult,this.signalChainConnectResult=void 0),(0,n.logDebug)("parseConnectResponse ton connect result: ",JSON.stringify(e)),e&&l){if("connect_error"===e.event)throw new t.OKXConnectError(e.payload.code,e.payload.message);{let r=e.payload.items.find((e=>"ton_addr"===e.name)),i=e.payload.items.find((e=>"ton_proof"===e.name));return(0,n.logDebug)("tonprovider connect isSignalChain: ",a),{namespace:t.NameSpaceKeyTON,addresses:d,methods:[...o.TONMethods],extra:h,data:{ton_addr:r,ton_proof:i,manifestUrl:u.manifestUrl}}}}}return}catch(Ye){throw(0,n.logDebug)("tonprovider parseConnectResponse error: ",JSON.stringify(Ye)),Ye}}))}connect(r,o){return e(this,void 0,void 0,(function*(){if(!(r&&o&&o.manifestUrl&&r.params))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"manifestUrl or params is nil");{this.dappInfo=o;let e=[r.params.ton_addr],i={manifestUrl:o.manifestUrl,items:e};r.params.ton_proof&&e.push(r.params.ton_proof),(0,n.logDebug)("tonprovider connect params: ",JSON.stringify(i));try{let e=yield window.okxTonWallet.tonconnect.connect(2,i);return(0,n.logDebug)("tonprovider connect tonResult: ",JSON.stringify(e)),this.signalChainConnectResult=e,e}catch(Ye){throw(0,n.logDebug)("tonprovider connect error: ",JSON.stringify(Ye)),new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"tonconnect error")}}}))}},Ia}var Da,Ka,Ma={};function La(){if(Da)return Ma;Da=1;var e=Ma.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.SuiProvider=void 0;const t=Pt(),n=Yt(),r=ua(),o=na();return Ma.SuiProvider=class{constructor(){}connectReady(){return!0}getSuiPublicKey(){return e(this,void 0,void 0,(function*(){return(yield this.connect(void 0)).accounts[0].publicKey}))}parseConnectResponse(r,i,s,a,c,l){return e(this,void 0,void 0,(function*(){try{let e=[];a.forEach((n=>{n.namespace===t.NameSpaceKeySui&&e.push(...n.chains)}));let r=[],i={};if(0==e.length)return;const s=yield this.getSuiPublicKey();if(e.forEach((e=>{var t;(0,n.getChainId)(e);let o=c.address.find((t=>784===t.coinType||t.namespaceChainId===e));o&&(r.push(e+":"+o.address),i[e]={publicKey:null!==(t=o.publicKey)&&void 0!==t?t:s})})),r&&r.length>0){return{namespace:t.NameSpaceKeySui,addresses:r,methods:[...o.SuiMethods],extra:i}}return}catch(Ye){throw Ye}}))}restoreConnect(){return(0,r.isDevice)("mobile")?this.connect(void 0):Promise.resolve()}getSuiWallet(){return window.okxwallet.sui}send(t){return e(this,void 0,void 0,(function*(){try{yield this.restoreConnect(),(0,n.logDebug)("suiProvider send request:",JSON.stringify(t));const e=t.method;let r;if(t.injectParams&&this.getSuiWallet()){let n=t.injectParams;switch(e){case"sui_signTransactionBlock":r={method:"sui_signTransactionBlock",result:(yield this.getSuiWallet().features["sui:signTransactionBlock"].signTransactionBlock(n)).signature};break;case"sui_signAndExecuteTransactionBlock":r={method:"sui_signAndExecuteTransactionBlock",result:(yield this.getSuiWallet().features["sui:signAndExecuteTransactionBlock"].signAndExecuteTransactionBlock(n)).digest};break;case"sui_signMessage":r={method:"sui_signMessage",result:(yield this.getSuiWallet().features["sui:signMessage"].signMessage(n)).signature};break;case"sui_signPersonalMessage":r={method:"sui_signPersonalMessage",result:(yield this.getSuiWallet().features["sui:signPersonalMessage"].signPersonalMessage(n)).signature}}}return r}catch(AO){throw(0,n.logDebug)("suiProvider send error:",AO),AO}}))}connect(t,n){return e(this,void 0,void 0,(function*(){var e;return null===(e=this.getSuiWallet())||void 0===e?void 0:e.features["standard:connect"].connect()}))}},Ma}function Ua(){if(Ka)return Ea;Ka=1;var e=Ea.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.InjectConnector=void 0;const t=Pt(),n=Yt(),r=Js(),o=Ta(),i=St(),s=Pa(),a=ua(),c=ka(),l=ha(),u=La(),d=rs(),h=Qs();return Ea.InjectConnector=class{constructor(){this.disconnectListener=[],this.providerMap=new Map,this.accountChangedEVMHandler=null,this.accountChangedSolanaPublicKeyHandler=null,this.accountChangedTONHandler=null,this.disconnectHandler=null,this.walletName="",this.walletNameKey="",this.enable=!0,this.providerMap.set(t.NameSpaceKeyEip155,new l.Eip155Provider),this.providerMap.set(t.NameSpaceKeySOL,new o.SolProvider),this.providerMap.set(t.NameSpaceKeyAptos,new s.AptosProvider),this.providerMap.set(t.NameSpaceKeyTON,new c.TONProvider),this.providerMap.set(t.NameSpaceKeySui,new u.SuiProvider)}setAccountChangeListener(e){(0,n.logDebug)("setAccountChangeListener: inject",e),this.accountChangeListener=e}setConnectionManager(e){this.connectionManager=e}getInjectProvider(e){for(const[t,n]of this.providerMap.entries())if(e.includes(t))return n}openWallet(r){return e(this,void 0,void 0,(function*(){var e,o,s;if((0,n.logDebug)("InjectEngine connect begin:",JSON.stringify(r)),!r)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR);this.dappInfo=r.connectRequest.dAppInfo;var c=r.connectRequest;try{if(!window||!window.okxwallet)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR);if(c.requests){let n=c.requests.find((e=>"requestAccounts"===e.name)),r=yield window.okxwallet.getVersion(),u={method:"connect",requestId:c.requestId,payload:{wallet:{platform:null!==(e=navigator.platform)&&void 0!==e?e:"/",appName:i.OKXInjectWalletName,appVersion:null!=r?r:"1.0.0",maxProtocolVersion:1},responses:[]}},d={name:"requestAccounts",accounts:[]};u.payload.responses.push(d),yield this.disconnect();const h=null!==(o=n.requiredNamespaces)&&void 0!==o?o:[],f=null!==(s=n.optionalNamespaces)&&void 0!==s?s:[];let p=!0,g=!1;if(h.length+f.length===1&&!(0,a.isDevice)("mobile")){const e=1===h.length?h[0]:f[0],t=this.getInjectProvider(e.namespace);yield null==t?void 0:t.connect(e,this.dappInfo),g=!0,p=!1}var l=yield this.getAccountByRequestWallets(p,!1,g,h,f);if(!l)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connect requestWallets is null");if(d.accounts.push(...l),0===d.accounts.length)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connect connectAccounts is null");this.connectResultListener&&(this.disconnectHandler&&window.okxwallet.removeListener("disconnect",this.disconnectHandler),this.disconnectHandler=()=>{console.log("window.okxwallet disconnect:"),this.disconnectListener.forEach((e=>e())),this.disconnectListener=[]},window.okxwallet.on("disconnect",this.disconnectHandler),this.connectResultListener(u))}}catch(Ye){var u=t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR;Ye instanceof t.OKXConnectError&&(u=Ye.code,Ye.message),this.connectResultListener&&this.connectResultListener({requestId:"-1",method:"connect_error",payload:{code:u}})}}))}disconnect(){return e(this,void 0,void 0,(function*(){(0,n.logDebug)("InjectEngine ==>> disconnect  okxwallet.disconnect()"),window.okxwallet&&(yield window.okxwallet.disconnect(),(0,n.logDebug)("InjectEngine ==>> disconnect end okxwallet.disconnect()"))}))}getRequestId(){const e=Date.now().toString();return(0,n.logDebug)("InjectEngine ==>> getRequestId ==>",e),e}send(r,o){return e(this,void 0,void 0,(function*(){var e;try{(0,n.logDebug)("InjectEngine send  > request:",(0,n.safeJsonStringify)(r));let i=r;if("disconnect"===i.method)return yield this.disconnect(),this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],void(null===(e=o.onAck)||void 0===e||e.call(o));yield this.checkWalletMatch();const s=this.getInjectProvider(i.chainId);if(s)return void s.send(i).then((e=>{var t;(0,n.logDebug)("InjectEngine ==>> send > result:",e),null===(t=o.resolve)||void 0===t||t.call(o,e)})).catch((e=>{var i;let s=e.code;4001===s&&(s=t.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR);let a={requestId:this.getRequestId(),method:r.method,error:{code:s,message:e.message}};(0,n.logDebug)("InjectEngine ==>> send > errorResponse:",JSON.stringify(a)),null===(i=o.resolve)||void 0===i||i.call(o,a)}));throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED)}catch(Ye){return(0,n.logDebug)("InjectEngine ==>> send  ===> error:",Ye),Promise.reject(Ye)}}))}checkWalletMatch(){return e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{var r;let o=null===(r=this.connectionManager)||void 0===r?void 0:r.getSessionContent("connectSession");o||n(new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED)),this.restoreconnect(o,(r=>{r?e():n(new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED))}))}))}))}checkAccountChanged(){return e(this,void 0,void 0,(function*(){var e;try{let r=null===(e=this.connectionManager)||void 0===e?void 0:e.getSessionContent("connectSession");if(!r)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.WALLET_NOT_SUPPORTED);(0,n.logDebug)("inject-connector checkAccountChanged --sessionInfo:",JSON.stringify(r));let o=this.getRequireNameSpaceFromSession(r);(0,n.logDebug)("inject-connector checkAccountChanged --requiredNamespaces:",JSON.stringify(o));let i=yield this.getAccountByRequestWallets(!1,!0,!1,o,[]);if((0,n.logDebug)("inject-connector checkAccountChanged --accounts:",JSON.stringify(i)),!i)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connect requestWallets is null");{let e={};(0,h.buildAccountNameSpaces)(i,e),this.compareAndModifyNamespaces(r.namespaces,e)||((0,n.logDebug)("inject-connector checkAccountChanged --result sessionLocal:",JSON.stringify(r)),this.accountChangeListener?((0,n.logDebug)("inject-connector checkAccountChanged -accountChangeListener:",this.accountChangeListener),this.accountChangeListener(r)):((0,n.logDebug)("inject-connector checkAccountChanged disconnect:"),yield this.disconnect()))}}catch(AO){throw(0,n.logDebug)("inject-connector restoreconnect catch error",JSON.stringify(AO)),AO}}))}compareAndModifyNamespaces(e,t){let r=!0;for(const o in e)if(t[o]){const i=e[o],s=t[o];(0,n.logDebug)("inject-connector checkAccountChanged ns1:",JSON.stringify(i)),(0,n.logDebug)("inject-connector checkAccountChanged ns2:",JSON.stringify(s));JSON.stringify([...i.accounts].sort())===JSON.stringify([...s.accounts].sort())||(r=!1,i.accounts=[...s.accounts],i.extra=Object.assign({},s.extra),i.payload=Object.assign({},s.payload)),(0,n.logDebug)("inject-connector checkAccountChanged new ns1:",JSON.stringify(i))}return(0,n.logDebug)(`inject-connector checkAccountChanged compareAndModifyNamespaces ===> ${r}`),r}clearData(){this.connectResultListener=void 0}addDisconnectListener(e){this.disconnectListener.push(e)}setOnConnectResultListener(e){this.connectResultListener=e}connectManagerDisconnect(){return e(this,arguments,void 0,(function*(e=!1){}))}getCurrentConnectionReady(e){if(!e)return!1;const t=e.every((e=>{var t;return null===(t=this.getInjectProvider(e))||void 0===t?void 0:t.connectReady()}));return t}getTag(){return r.OKX_INJECT_WALLET}toJSON(){return"inject-connector"}getRequireNameSpaceFromSession(e){var n,r,o=[];for(let i in e.namespaces){let s=e.namespaces[i],a={namespace:i,chains:s.chains};if(i===t.NameSpaceKeyAptos){let e=[];s.chains.forEach((t=>{let n=(0,d.replaceChainNameToChainId)(t);e.push(n)})),a={namespace:i,chains:e}}else if(i===t.NameSpaceKeyTON){let e,t;(null===(n=s.payload)||void 0===n?void 0:n.ton_proof)&&(e=null===(r=s.payload)||void 0===r?void 0:r.ton_proof,e.proof.payload&&(t={name:"ton_proof",payload:e.proof.payload})),a={namespace:i,chains:s.chains,params:{ton_addr:{name:"ton_addr"},ton_proof:t}}}o.push(a)}return o}restoreconnect(e,r){var o;if(window.okxwallet){this.dappInfo=null===(o=e.sessionConfig)||void 0===o?void 0:o.dappInfo,(0,n.logDebug)("inject-connector restoreconnect --sessionInfo:",JSON.stringify(e));var i=this.getRequireNameSpaceFromSession(e);(0,n.logDebug)("inject-connector restoreconnect --requiredNamespaces:",JSON.stringify(i)),this.getAccountByRequestWallets(!1,!1,!1,i,[]).then((o=>{(0,n.logDebug)("inject-connector restoreconnect --accounts:",JSON.stringify(o));let i=!0;for(let r in e.namespaces){var s=o.find((e=>e.namespace===r)),a=e.namespaces[r].accounts;if(!s)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"resotreconnect error: accountItem error");s.addresses.length===a.length&&s.addresses.slice().sort().every(((e,o)=>{if(r===t.NameSpaceKeyAptos){let t=a.slice().sort()[o];return(0,n.logDebug)("check aptos address -value and aptosAdd--",e,t),t=(0,d.replaceChainNameToChainId)(t),t===e}return e===a.slice().sort()[o]}))||(i=!1)}if(!i)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"resotreconnect error: address not as same as session");r(e)})).catch((e=>{(0,n.logDebug)("inject-connector restoreconnect catch error",JSON.stringify(e)),r(null)}))}else r(null)}getAccountByRequestWallets(r,o,i,s,c){return e(this,void 0,void 0,(function*(){try{var e=[],l=[];if((0,a.isDevice)("mobile")){var u=yield window.okxwallet.connectWallet(r,{requiredNamespaces:s,optionalNamespaces:c});e.push(u)}else e=yield window.okxwallet.requestWallets(r);var d=[...null!=s?s:[],...null!=c?c:[]];let h,f=e[0];(0,n.logDebug)(" InjectEngine connect connectAccounts:",JSON.stringify(f));let p=!1;if(d&&f&&f.address)for(const[e,n]of this.providerMap.entries()){let s=yield n.parseConnectResponse(r,o,i,d,f,this.dappInfo);s&&(h=e,l.push(s),e===t.NameSpaceKeyTON&&(p=!0))}let g=s.every((e=>{let t=l.find((t=>t.namespace===e.namespace));if(t){let n=e.chains.every((e=>{let n=t.addresses.find((t=>t.startsWith(e+":")));return!!n}));return n}return!1}));if((0,n.logDebug)("InjectEngine connect requiredNamespaces:",JSON.stringify(s)),(0,n.logDebug)("InjectEngine connect accountResult:",JSON.stringify(l)),!g)throw yield this.disconnect(),new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED);return(0,a.isDevice)("mobile")||(this.configEventWithKey(h,p),yield window.okxwallet.requestWallets(r)),l}catch(AO){if(AO&&"object"==typeof AO&&"code"in AO&&4001===AO.code)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR);throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR)}}))}configEventWithKey(e,n){if(window.okxwallet&&e)if(this.accountChangedEVMHandler&&window.okxwallet.removeListener("accountsChanged",this.accountChangedEVMHandler),this.accountChangedSolanaPublicKeyHandler&&(window.okxwallet.solana.removeListener("accountChanged",this.accountChangedSolanaPublicKeyHandler),window.okxwallet.sui.removeListener("accountChanged",this.accountChangedSolanaPublicKeyHandler)),this.accountChangedTONHandler&&window.okxTonWallet.tonconnect.off("accountChanged",this.accountChangedTONHandler),n)console.log("window.okxwallet configEventWithKey:",e),this.accountChangedTONHandler=()=>{console.log("window.okxwallet configEventWithKey_TON:",Date.now(),e),this.checkAccountChanged().catch((e=>{console.log("window.okxwallet configEventWithKey error: ",e)}))},window.okxTonWallet.tonconnect.on("accountChanged",this.accountChangedTONHandler);else switch(e){case t.NameSpaceKeyEip155:console.log("window.okxwallet configEventWithKey:",e),this.accountChangedEVMHandler=t=>{console.log("window.okxwallet configEventWithKey_evm:",Date.now(),e,t),t&&t.length>0&&this.checkAccountChanged().catch((e=>{console.log("window.okxwallet configEventWithKey error: ",e)}))},window.okxwallet.on("accountsChanged",this.accountChangedEVMHandler);break;case t.NameSpaceKeySOL:console.log("window.okxwallet configEventWithKey:",e),this.accountChangedSolanaPublicKeyHandler=t=>{console.log("window.okxwallet configEventWithKey_solana:",Date.now(),e,t),t&&this.checkAccountChanged().catch((e=>{console.log("window.okxwallet configEventWithKey error: ",e)}))},window.okxwallet.solana.on("accountChanged",this.accountChangedSolanaPublicKeyHandler);break;case t.NameSpaceKeySui:console.log("window.okxwallet configEventWithKey:",e),this.accountChangedSolanaPublicKeyHandler=t=>{console.log("window.okxwallet configEventWithKey_sui:",Date.now(),e,t),t&&this.checkAccountChanged().catch((e=>{console.log("window.okxwallet configEventWithKey error: ",e)}))},window.okxwallet.sui.on("accountChanged",this.accountChangedSolanaPublicKeyHandler);break;case t.NameSpaceKeyTON:console.log("window.okxwallet configEventWithKey:",e)}}},Ea}var ja,Wa={};var Ba,Xa,Ha,Fa={};function qa(){return Xa||(Xa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OkxwalletInjectConnector=e.WsConnector=e.TgwalletConnector=e.InjectConnector=e.OKX_INJECT_WALLET=e.OKX_APP_WALLET=e.OKX_TG_WALLET=e.AppwalletConnector=void 0;var t=function(){if(pa)return va;pa=1,Object.defineProperty(va,"__esModule",{value:!0}),va.AppwalletConnector=void 0;const e=ya(),t=Js(),n=Yt(),r=it();class o extends e.WsConnector{static getConnector(){return new o}constructor(){super(),this.walletName="OKX App",this.walletNameKey="walletModal.mobileConnectionModal.connectApp"}getTag(){return t.OKX_APP_WALLET}openWallet(e){var t;if(e&&e.connectRequest){let r=e.connectRequest;if((0,n.logDebug)(`appwallet-connector openwallet before useSHortLink engineConnectInfo.connectRequest JSON ${JSON.stringify(e)}`),(0,n.useShortLink)()){let e=(0,n.getOKXLink)(r);(0,n.openOKXUniversalLink)(e)}else{(0,n.logDebug)(`appwallet-connector openwallet else connectRequest ${r}`);let o=(0,n.encodeConnectParams)(Object.assign(Object.assign({},r),{redirect:null!==(t=e.redirect)&&void 0!==t?t:"none"})),i=(0,n.getAppWalletDeepLink)(o);(0,n.openOKXDeeplinkWithFallback)(i)}}else(0,n.isOS)("android")?(0,n.openDeeplinkWithFallback)(r.stackDeepLink,(()=>{})):(0,n.openLinkBlank)(r.standardUniversalLink)}}return va.AppwalletConnector=o,va}();Object.defineProperty(e,"AppwalletConnector",{enumerable:!0,get:function(){return t.AppwalletConnector}});var n=Js();Object.defineProperty(e,"OKX_TG_WALLET",{enumerable:!0,get:function(){return n.OKX_TG_WALLET}}),Object.defineProperty(e,"OKX_APP_WALLET",{enumerable:!0,get:function(){return n.OKX_APP_WALLET}}),Object.defineProperty(e,"OKX_INJECT_WALLET",{enumerable:!0,get:function(){return n.OKX_INJECT_WALLET}});var r=Ua();Object.defineProperty(e,"InjectConnector",{enumerable:!0,get:function(){return r.InjectConnector}});var o=function(){if(ja)return Wa;ja=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.TgwalletConnector=void 0;const e=ya(),t=Js(),n=Yt();class r extends e.WsConnector{static getConnector(){return new r}constructor(){super(),this.walletName="OKX Mini Wallet",this.walletNameKey="walletModal.mobileConnectionModal.connectMini"}getTag(){return t.OKX_TG_WALLET}openWallet(e){var t,r;e&&e.connectRequest&&(r=(0,n.encodeTWAConnectURLParams)(Object.assign(Object.assign({},e.connectRequest),{redirect:"none"})));var o=(0,n.getTelegramWalletTWAUrl)(r,null!==(t=null==e?void 0:e.tmaReturnUrl)&&void 0!==t?t:"back");(0,n.openOKXTMAWalletlinkWithFallback)(o)}}return Wa.TgwalletConnector=r,Wa}();Object.defineProperty(e,"TgwalletConnector",{enumerable:!0,get:function(){return o.TgwalletConnector}});var i=ya();Object.defineProperty(e,"WsConnector",{enumerable:!0,get:function(){return i.WsConnector}});var s=function(){if(Ba)return Fa;Ba=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.OkxwalletInjectConnector=void 0;const e=Ua();class t extends e.InjectConnector{static getConnector(){return new t}constructor(){super(),this.walletName="OKX Wallet extension",this.walletNameKey="walletModal.mobileConnectionModal.connectInjected"}}return Fa.OkxwalletInjectConnector=t,Fa}();Object.defineProperty(e,"OkxwalletInjectConnector",{enumerable:!0,get:function(){return s.OkxwalletInjectConnector}})}(ga)),ga}function Ja(){return Ha||(Ha=1,e=p,t=p.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=p.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(($s||($s=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=e.Engine=e.WalletConnectionManager=e.ConnectionManager=e.OKXWalletConnector=void 0;var t=is();Object.defineProperty(e,"OKXWalletConnector",{enumerable:!0,get:function(){return t.OKXWalletConnector}});var n=Ls();Object.defineProperty(e,"ConnectionManager",{enumerable:!0,get:function(){return n.ConnectionManager}});var r=Xs();Object.defineProperty(e,"WalletConnectionManager",{enumerable:!0,get:function(){return r.WalletConnectionManager}});var o=Ys();Object.defineProperty(e,"Engine",{enumerable:!0,get:function(){return o.Engine}});var i=os();Object.defineProperty(e,"Storage",{enumerable:!0,get:function(){return i.Storage}})}(g)),g),e),n(Pt(),e),n(Yt(),e),n(ha(),e),n(qa(),e)),p;var e,t,n}var za,Va=Ja(),$a={},Ga={},Qa={},Ya={},Za={};var ec,tc={};function nc(){if(ec)return tc;ec=1;var e=tc.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(tc,"__esModule",{value:!0}),tc.BridgeConnectionStorage=void 0;const t=Ja();return tc.BridgeConnectionStorage=class{constructor(e){this.storage=e,this.storeKey="ton_connect_info_adapter_universal"}storeConnection(n){return e(this,void 0,void 0,(function*(){return(0,t.logDebug)("BridgeConnectionStorage ==>> storeConnection ==>> connection:",n),this.storage.saveContent(JSON.stringify(n),this.storeKey)}))}removeConnection(){return e(this,void 0,void 0,(function*(){return(0,t.logDebug)("BridgeConnectionStorage ==>> removeConnection"),this.storage.clearCache(this.storeKey)}))}getConnection(){return e(this,void 0,void 0,(function*(){const e=this.storage.getItem(this.storeKey);if((0,t.logDebug)("BridgeConnectionStorage ==>> getConnection ==>>this.storage: ",this.storage),!e||!(null==e?void 0:e.content))return null;try{const n=null==e?void 0:e.content;if(n){let e;return e=JSON.parse(n),(0,t.logDebug)("BridgeConnectionStorage ==>> getConnection ==>>connection: ",e),e}return null}catch(Ye){return null}}))}getHttpConnection(){return e(this,void 0,void 0,(function*(){const e=yield this.getConnection();if(!e)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Trying to read HTTP connection source while nothing is stored");return e}))}storeLastWalletEventId(t){return e(this,void 0,void 0,(function*(){const e=yield this.getConnection();if(e&&"connectEvent"in e)return e.lastWalletEventId=t,this.storeConnection(e)}))}getLastWalletEventId(){return e(this,void 0,void 0,(function*(){const e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId}))}},tc}var rc,oc={};function ic(){return rc||(rc=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.OKXCONNECTOR_TON_KEY=oc.OKXtonConnectSdkVersion=void 0,oc.OKXtonConnectSdkVersion="1",oc.OKXCONNECTOR_TON_KEY="OKXStorage_ctc"),oc}var sc,ac={},cc={};function lc(){if(sc)return cc;function e(e){return{okx_ton_connect_sdk_lib:e.okx_ton_connect_sdk_lib,okx_connect_ui_lib:e.okx_connect_ui_lib}}function t(t,n){var r,o,i,s,a,c,l,u;const d=(null===(r=null==n?void 0:n.connectItems)||void 0===r?void 0:r.tonProof)&&"proof"in n.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:null!==(i=null===(o=null==n?void 0:n.account)||void 0===o?void 0:o.address)&&void 0!==i?i:null,wallet_type:null!==(s=null==n?void 0:n.device.appName)&&void 0!==s?s:null,wallet_version:null!==(a=null==n?void 0:n.device.appVersion)&&void 0!==a?a:null,auth_type:d,custom_data:Object.assign({chain_id:null!==(l=null===(c=null==n?void 0:n.account)||void 0===c?void 0:c.chain)&&void 0!==l?l:null,provider:null!==(u=null==n?void 0:n.provider)&&void 0!==u?u:null},e(t))}}function n(e,t){var n,r,o,i;return{valid_until:null!==(n=String(t.validUntil))&&void 0!==n?n:null,from:null!==(i=null!==(r=t.from)&&void 0!==r?r:null===(o=null==e?void 0:e.account)||void 0===o?void 0:o.address)&&void 0!==i?i:null,messages:t.messages.map((e=>{var t,n;return{address:null!==(t=e.address)&&void 0!==t?t:null,amount:null!==(n=e.amount)&&void 0!==n?n:null}}))}}return sc=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.createRequestVersionEvent=function(){return{type:"request-version"}},cc.createResponseVersionEvent=function(e){return{type:"response-version",version:e}},cc.createVersionInfo=e,cc.createConnectionStartedEvent=function(t){return{type:"connection-started",custom_data:e(t)}},cc.createConnectionDeepLinkEvent=function(e){return{type:"connection-get-deeplink",deeplinkUrl:e}},cc.createConnectionInfoBeforeJumpEvent=function(e){return{type:"connection-info-before-jump",connectInfo:e}},cc.createConnectionCompletedEvent=function(e,n){return Object.assign({type:"connection-completed",is_success:!0},t(e,n))},cc.createConnectionErrorEvent=function(t,n,r){return{type:"connection-error",is_success:!1,error_message:n,error_code:null!=r?r:null,custom_data:e(t)}},cc.createConnectionRestoringStartedEvent=function(t){return{type:"connection-restoring-started",custom_data:e(t)}},cc.createConnectionRestoringCompletedEvent=function(e,n){return Object.assign({type:"connection-restoring-completed",is_success:!0},t(e,n))},cc.createConnectionRestoringErrorEvent=function(t,n){return{type:"connection-restoring-error",is_success:!1,error_message:n,custom_data:e(t)}},cc.createTransactionSentForSignatureEvent=function(e,r,o){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},t(e,r)),n(r,o))},cc.createTransactionSignedEvent=function(e,r,o,i){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:i.boc},t(e,r)),n(r,o))},cc.createTransactionSigningFailedEvent=function(e,r,o,i,s){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:i,error_code:null!=s?s:null},t(e,r)),n(r,o))},cc.createDisconnectionEvent=function(e,n,r){return Object.assign({type:"disconnection",scope:r},t(e,n))},cc}var uc,dc,hc,fc={};function pc(){if(uc)return fc;uc=1;var e=fc.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(fc,"__esModule",{value:!0}),fc.BrowserEventDispatcher=void 0;return fc.BrowserEventDispatcher=class{constructor(){this.window=window}dispatchEvent(t,n){return e(this,void 0,void 0,(function*(){var e;const r=new CustomEvent(t,{detail:n});null===(e=this.window)||void 0===e||e.dispatchEvent(r)}))}addEventListener(t,n,r){return e(this,void 0,void 0,(function*(){var e;return null===(e=this.window)||void 0===e||e.addEventListener(t,n,r),()=>{var e;return null===(e=this.window)||void 0===e?void 0:e.removeEventListener(t,n)}}))}},fc}function gc(){if(dc)return ac;dc=1;var e=ac.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(ac,"__esModule",{value:!0}),ac.TonConnectTracker=void 0;const t=lc(),n=pc();return ac.TonConnectTracker=class{get version(){return(0,t.createVersionInfo)({okx_ton_connect_sdk_lib:this.OKXtonConnectSdkVersion,okx_connect_ui_lib:this.OKXConnectUiVersion})}constructor(e){this.eventPrefix="okx-ton-connect-",this.OKXConnectUiVersion=null,this.eventDispatcher=new n.BrowserEventDispatcher,this.OKXtonConnectSdkVersion=e.OKXtonConnectSdkVersion,this.init().catch()}init(){return e(this,void 0,void 0,(function*(){try{yield this.setRequestVersionHandler(),this.OKXConnectUiVersion=yield this.requestTonConnectUiVersion()}catch(AO){}}))}setRequestVersionHandler(){return e(this,void 0,void 0,(function*(){yield this.eventDispatcher.addEventListener("okx-ton-connect-request-version",(()=>e(this,void 0,void 0,(function*(){yield this.eventDispatcher.dispatchEvent("okx-ton-connect-response-version",(0,t.createResponseVersionEvent)(this.OKXtonConnectSdkVersion))}))))}))}requestTonConnectUiVersion(){return e(this,void 0,void 0,(function*(){return new Promise(((n,r)=>e(this,void 0,void 0,(function*(){try{yield this.eventDispatcher.addEventListener("okx-connect-ui-response-version",(e=>{n(e.detail.version)}),{once:!0}),yield this.eventDispatcher.dispatchEvent("okx-connect-ui-request-version",(0,t.createRequestVersionEvent)())}catch(AO){r(AO)}}))))}))}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch(AO){}}trackConnectionStarted(...e){try{const n=(0,t.createConnectionStartedEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackConnectionDeepLink(...e){try{const n=(0,t.createConnectionDeepLinkEvent)(...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackConnectionCompleted(...e){try{const n=(0,t.createConnectionCompletedEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackConnectionInfoBeforeJump(e){try{const n=(0,t.createConnectionInfoBeforeJumpEvent)(e);this.dispatchUserActionEvent(n)}catch(AO){}}trackConnectionError(...e){try{const n=(0,t.createConnectionErrorEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackConnectionRestoringStarted(...e){try{const n=(0,t.createConnectionRestoringStartedEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackConnectionRestoringCompleted(...e){try{const n=(0,t.createConnectionRestoringCompletedEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackConnectionRestoringError(...e){try{const n=(0,t.createConnectionRestoringErrorEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackDisconnection(...e){try{const n=(0,t.createDisconnectionEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackTransactionSentForSignature(...e){try{const n=(0,t.createTransactionSentForSignatureEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackTransactionSigned(...e){try{const n=(0,t.createTransactionSignedEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}trackTransactionSigningFailed(...e){try{const n=(0,t.createTransactionSigningFailedEvent)(this.version,...e);this.dispatchUserActionEvent(n)}catch(AO){}}},ac}function vc(){if(hc)return Ya;hc=1;var e=Ya.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.BridgeProvider=void 0;const t=(za||(za=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.isPendingConnectionHttp=function(e){return!("connectEvent"in e)}),Za),n=Ja(),r=nc(),o=ic(),i=gc();class s{constructor(e,t=void 0,s){this.storage=e,this.type="http",this.listeners=[],this.walletConnectionSource={universalLink:n.standardUniversalLink},this.openUniversalLink=!1,this.engine=new n.Engine(t+"_okxton"),this.engine.registerConnector(s),this.connectionStorage=new r.BridgeConnectionStorage(e),this.tracker=new i.TonConnectTracker({OKXtonConnectSdkVersion:o.OKXtonConnectSdkVersion}),(0,n.getDefaultReporter)().configVersionAndSide("tonsdk-1.5.2","dapp",t)}static fromStorage(o){return e(this,arguments,void 0,(function*(e,o=void 0,i){(0,n.logDebug)("bridge-provider ==>> fromStorage ==>>storage:",e),(0,n.reportLog)("bridge-provider ==>> fromStorage");const a=new r.BridgeConnectionStorage(e),c=yield a.getHttpConnection();if((0,t.isPendingConnectionHttp)(c))return null;const l=new s(e,o,i);return l.openUniversalLink=c.openUniversalLink,l}))}isCryptoEnable(){return this.engine.connectionManager.getCryptoKeyEnable()}connect(t,r,o,i){return e(this,void 0,void 0,(function*(){return(0,n.logDebug)("bridge-provider ==>> connect_1 ==>>message:",t),(0,n.logDebug)("bridge-provider ==>> connect_1 ==>>redirect:",r),(0,n.logDebug)("bridge-provider ==>> connect_1 ==>>openUniversalLink:",o),(0,n.logDebug)("bridge-provider ==>> connect_1 ==>>tmaReturnUrl:",i),(0,n.reportLog)("bridge-provider ==>> connect"),new Promise(((e,s)=>{try{this.openUniversalLink=o,void 0===this.openUniversalLink&&(this.openUniversalLink=(0,n.isMobileUserAgent)());let a={name:"requestAccounts",requiredNamespaces:[{namespace:"ton",chains:["ton:-239"],params:t.params}]},c=[];t.params.ton_addr&&c.push(t.params.ton_addr),t.params.ton_proof&&c.push(t.params.ton_proof),c.push(a);let l={dappInfo:t.dappInfo,openUniversalUrl:this.openUniversalLink,redirect:r,tmaReturnUrl:i};this.engine.universalConnect(c,l,(t=>{(0,n.logDebug)(`bridge-provider: connect: info>>>> ${JSON.stringify(t)}`);try{const r=(0,n.encodeConnectParams)(t.connectRequest),o=(0,n.getAppWalletDeepLink)(r),i=(0,n.getUniversalLink)(o);this.tracker.trackConnectionInfoBeforeJump(t),e(i)}catch(Ye){s(Ye)}})).then((e=>{(0,n.logDebug)(`bridge-provider: connect: success>>>> ${JSON.stringify(e)}`),this.connectSuccessHandle(e)})).catch((e=>{(0,n.logDebug)(`bridge-provider: connect: catch>>>> ${JSON.stringify(e)}`);const t={event:"connect_error",requestId:Number(Date.now()),payload:{code:e.code,message:e.message}};(0,n.logDebug)("bridge-provider ==>> connectListener_4 ==>>connect_error:",t),this.listeners.forEach((e=>e(t))),s(e)}))}catch(Ye){console.error("bridge-provider connect try catch error:>>>",JSON.stringify(Ye)),s(Ye)}}))}))}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter((t=>t!==e))}disconnectListener(){return e(this,void 0,void 0,(function*(){(0,n.logDebug)("bridge-provider ==>> disconnectListener"),(0,n.reportLog)("bridge-provider ==>> disconnectListener");const e={event:"disconnect",requestId:Number(1),payload:{}};this.listeners.forEach((t=>t(e))),yield this.closeConnection()}))}connectSuccessHandle(t){return e(this,void 0,void 0,(function*(){var e,r;try{const o=null===(e=t.namespaces)||void 0===e?void 0:e.ton,i=o.payload,s=t.wallet;if(!(o&&i&&s&&i.ton_addr))throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);i.ton_addr;const a=t.sessionConfig;let c=[];i.ton_addr&&c.push(i.ton_addr),i.ton_proof&&c.push(i.ton_proof);const l={platform:s.platform,appName:s.appName,appVersion:s.appVersion,maxProtocolVersion:s.maxProtocolVersion,features:["ton_sendTransaction"]},u={type:"http",lastWalletEventId:Number(Date.now()),connectEvent:{event:"connect",payload:{items:c,device:l}},connectionSource:this.walletConnectionSource,channelId:t.topic,openUniversalLink:null==a?void 0:a.openUniversalUrl};(0,n.logDebug)("bridge-provider ==>> connectSuccessHandle_2 ==>>storeConnection:",u),yield this.connectionStorage.storeConnection(u),null===(r=this.engine)||void 0===r||r.addDisconnectListener(this.disconnectListener.bind(this));const d={event:"connect",requestId:u.lastWalletEventId,payload:u.connectEvent.payload};(0,n.logDebug)("bridge-provider ==>> connectSuccessHandle_3 ==>>listeners.forEach:",d),this.listeners.forEach((e=>e(d)))}catch(Ye){(0,n.logDebug)("bridge-provider ==>> connectSuccessHandle_4 ==>>error:",Ye);const t={event:"connect_error",requestId:Number(Date.now()),payload:{code:n.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,message:"Connect success  connectSuccessHandle response error"}};(0,n.logDebug)("bridge-provider ==>> connectSuccessHandle_4 ==>>connect_error:",t),this.listeners.forEach((e=>e(t)))}}))}closeConnection(){return e(this,arguments,void 0,(function*(e=!1,t=!1){var r,o;(0,n.logDebug)("bridge-provider ==>> closeConnection ==>>fromRestore:",e," needOpenUrl:",t),(0,n.reportLog)("bridge-provider ==>> closeConnection"),this.listeners=[],t||(yield null===(r=this.engine)||void 0===r?void 0:r.connectManagerDisconnect(e)),e||(null===(o=this.engine)||void 0===o||o.clearData(),yield this.connectionStorage.removeConnection())}))}restoreConnection(){return e(this,void 0,void 0,(function*(){var e;(0,n.logDebug)("bridge-provider ==>> restoreConnection_1"),(0,n.reportLog)("bridge-provider ==>> restoreConnection");const r=yield this.connectionStorage.getHttpConnection(),o=this.engine.connectionManager.getCryptoKeyEnable();if(r&&o&&!(0,t.isPendingConnectionHttp)(r))if((0,n.logDebug)("bridge-provider ==>> restoreConnection_2 ==>>storedConnection.channelId:",r.channelId),r.channelId)try{const t={event:"connect",requestId:Number(0),payload:r.connectEvent.payload};this.listeners.forEach((e=>e(t))),this.engine.setConnectConnector(r.connectEvent.payload.device);const o=r.channelId;(0,n.logDebug)("bridge-provider ==>> restoreConnection_3 ==>>this.engine.restoreConnect:",o),null===(e=this.engine)||void 0===e||e.addDisconnectListener(this.disconnectListener.bind(this)),yield this.engine.restoreconnectFromTopic(o)}catch(AO){(0,n.logDebug)("bridge-provider ==>> restoreConnection_4 ==>>closeConnection_1"),yield this.closeConnection()}else(0,n.logDebug)("bridge-provider ==>> restoreConnection_4 ==>>closeConnection_2"),yield this.closeConnection()}))}openOKXWallet(){(0,n.logDebug)("bridge-provider ==>> openOKXWallet",this.openUniversalLink),(0,n.reportLog)("bridge-provider ==>> openOKXWallet"),this.openUniversalLink&&(0,n.openOKXDeeplink)(n.standardDeeplink)}disconnect(){return e(this,void 0,void 0,(function*(){return(0,n.logDebug)("bridge-provider ==>> disconnect_1"),(0,n.reportLog)("bridge-provider ==>> disconnect"),new Promise((t=>e(this,void 0,void 0,(function*(){let e=!1;const n=()=>{e||(e=!0,this.closeConnection().then(t))};try{yield this.sendRequest({method:"disconnect"},{onRequestSent:n,attempts:1})}catch(AO){e||this.closeConnection().then(t)}finally{n()}}))))}))}sendRequest(t,r,o){return(0,n.logDebug)("bridge-provider ==>> sendRequest"),(0,n.reportLog)("bridge-provider ==>> sendRequest"),new Promise(((n,i)=>e(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.engine)||void 0===e?void 0:e.send(t,{resolve:function(e){n(e)},onAck:function(){var e;null===(e=null==r?void 0:r.onRequestSent)||void 0===e||e.call(r)}},o)}catch(AO){i(AO)}}))))}connectorOpenWallet(){this.engine.openWallet()}}return Ya.BridgeProvider=s,Ya}var mc,yc={};var bc,wc,Cc,_c,Oc={},Ec={};function Sc(){if(wc)return Oc;wc=1;var e=Oc.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.sendTransactionParser=void 0;const t=(bc||(bc=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.RpcParser=void 0,Ec.RpcParser=class{isError(e){return"error"in e}}),Ec);class n extends t.RpcParser{convertToRpcRequest(t){const{redirect:n}=t;return{method:"ton_sendTransaction",redirect:n,params:e(t,["redirect"])}}convertFromRpcResponse(e){return{boc:e.result.toString()}}}return Oc.sendTransactionParser=new n,Oc}function Rc(){if(Cc)return Qa;Cc=1;var e=Qa.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},t=Qa.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.OKXTonConnectInner=void 0;const n=vc(),r=Ja(),o=function(){if(mc)return yc;mc=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.checkSendTransactionSupport=function(t,n){if(!t.includes("ton_sendTransaction"))throw new e.OKXConnectError(e.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Wallet doesn't support SendTransaction feature.");if(4<n.requiredMessagesNumber)throw new e.OKXConnectError(e.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,`Wallet is not able to handle such SendTransaction request. Max support messages number is 4, but ${n.requiredMessagesNumber} is required.`)};const e=Ja();return yc}(),i=gc(),s=Sc(),a=nc(),c=ic();class l{constructor(e){if(this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.openUniversalLink=!!this.provider&&this.provider.openUniversalLink,this.connectors=[r.AppwalletConnector.getConnector()],(0,r.checkMetaData)(e.metaData),!e.metaData)throw(0,r.logDebug)("OKXTonConnect constructor error: options.metaData is nil"),new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"dapp metaData can not be null");(0,r.logDebug)("OKXTonConnect constructor options:",JSON.stringify(e)),this.dappSettings={metaData:Object.assign(Object.assign({},e.metaData),{url:window.location.hostname,origin:window.location.origin})},this.tracker=new i.TonConnectTracker({OKXtonConnectSdkVersion:c.OKXtonConnectSdkVersion}),this.storage=new r.Storage(c.OKXCONNECTOR_TON_KEY+this.dappSettings.metaData.name,c.OKXCONNECTOR_TON_KEY),this.bridgeConnectionStorage=new a.BridgeConnectionStorage(this.storage)}registerConnector(e){this.connectors=e}get connected(){return null!==this._wallet}get account(){var e;return(null===(e=this._wallet)||void 0===e?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach((e=>e(this._wallet)))}connect(t){return e(this,void 0,void 0,(function*(){var e;return(0,r.logDebug)("ton-Connect ==>> connect_1 >> request:",t),this.connected&&(0,r.logError)("It's already connected to OKX Wallet, please call disconnect() first"),yield null===(e=this.provider)||void 0===e?void 0:e.closeConnection(!1,!0),this.provider||(this.provider=new n.BridgeProvider(this.storage,this.dappSettings.metaData.name,this.connectors)),this.provider.listen(this.walletEventsListener.bind(this)),this.tracker.trackConnectionStarted(),yield this.provider.connect(this.createConnectRequest(t),null==t?void 0:t.redirect,null==t?void 0:t.openUniversalLink,null==t?void 0:t.tmaReturnUrl)}))}walletEventsListener(e){switch((0,r.logDebug)("ton-Connect ==>> walletEventsListener_1 >> e:",e),e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.onWalletConnectError(e.payload);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){(0,r.logDebug)("ton-Connect ==>> onWalletConnected_1 >> connectEvent:",e);const t=e.items.find((e=>"ton_addr"===e.name)),n=e.items.find((e=>"ton_proof"===e.name));if(!t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_addr connection item was not found");const o={device:e.device,provider:this.provider.type,account:{address:t.address,chain:t.network,walletStateInit:t.walletStateInit,publicKey:t.publicKey}};n&&(o.connectItems={tonProof:n}),this.wallet=o,(0,r.logDebug)("ton-Connect ==>> onWalletConnected_2 >> wallet:",o),this.tracker.trackConnectionCompleted(o)}onWalletConnectError(e){var t;(0,r.logDebug)("ton-Connect ==>> onWalletConnectError_1 >> connectEventError:",e);const n=new r.OKXConnectError(e.code,e.message);(0,r.logDebug)("ton-Connect ==>> onWalletConnectError_1 >> error:",n),this.statusChangeErrorSubscriptions.forEach((e=>e(n))),this.tracker.trackConnectionError(null!==(t=e.message)&&void 0!==t?t:"",e.code)}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}disconnect(){return e(this,void 0,void 0,(function*(){var e;if((0,r.logDebug)("ton-Connect ==>> disconnect_1"),!this.connected)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"wallet is not connected");(0,r.logDebug)("ton-Connect ==>> disconnect_222"),this.onWalletDisconnected("dapp"),yield null===(e=this.provider)||void 0===e?void 0:e.disconnect()}))}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter((t=>t!==e)),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter((e=>e!==t)))}}restoreConnection(){return e(this,void 0,void 0,(function*(){var e;(0,r.logDebug)("ton-Connect ==>> restoreConnection_1"),this.tracker.trackConnectionRestoringStarted();let t=null;try{if(t=yield n.BridgeProvider.fromStorage(this.storage,this.dappSettings.metaData.name,this.connectors),!(null==t?void 0:t.isCryptoEnable()))return this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),null==t||t.closeConnection(),void(t=null)}catch(Bu){return this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),null==t||t.closeConnection(),void(t=null)}if(!t)return(0,r.logError)("Provider is not restored"),void this.tracker.trackConnectionRestoringError("Provider is not restored");(0,r.logDebug)("ton-Connect ==>> restoreConnection_2 ==>> Provider is restored "),null===(e=this.provider)||void 0===e||e.closeConnection(!0,!1),this.provider=t,t.listen(this.walletEventsListener.bind(this)),yield this.provider.restoreConnection(),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}))}sendTransaction(n,i){return e(this,void 0,void 0,(function*(){var e;(0,r.logDebug)("ton-Connect ==>> sendTransaction_1",n),this.checkConnection(),(0,o.checkSendTransactionSupport)(this.wallet.device.features,{requiredMessagesNumber:n.messages.length}),this.tracker.trackTransactionSentForSignature(this.wallet,n),(0,r.logDebug)("ton-Connect ==>> sendTransaction_2 ==>> check params");const{validUntil:a}=n,c=t(n,["validUntil"]),l=n.from||this.account.address;let u=this.account.chain;(0,r.logDebug)("ton-Connect ==>> sendTransaction_2 ==>> await sendRequest",u),(0,r.isIos)()&&!(null==i?void 0:i.doNotOpenWallet)&&(null===(e=this.provider)||void 0===e||e.openOKXWallet());const d=yield this.provider.sendRequest(s.sendTransactionParser.convertToRpcRequest(Object.assign(Object.assign({},c),{valid_until:a,from:l,network:u})),{onRequestSent:()=>{var e,t;(0,r.isIos)()||(null==i?void 0:i.doNotOpenWallet)||null===(e=this.provider)||void 0===e||e.openOKXWallet(),null===(t=null==i?void 0:i.onRequestSent)||void 0===t||t.call(i)}});if((0,r.logDebug)("ton-Connect ==>> sendTransaction_3 ==>>sendRequest response:",d),s.sendTransactionParser.isError(d))throw this.tracker.trackTransactionSigningFailed(this.wallet,n,d.error.message,d.error.code),new r.OKXConnectError(d.error.code,d.error.message);const h=s.sendTransactionParser.convertFromRpcResponse(d);return this.tracker.trackTransactionSigned(this.wallet,n,h),h}))}checkConnection(){if((0,r.logDebug)("ton-Connect ==>> checkConnection"),!this.connected)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Wallet not connected")}createConnectRequest(e){(0,r.logDebug)("ton-Connect ==>> createConnectRequest");const t={ton_addr:{name:"ton_addr"}};return(null==e?void 0:e.tonProof)&&(t.ton_proof={name:"ton_proof",payload:e.tonProof}),{dappInfo:this.dappSettings.metaData,params:t}}static getWallets(){return this.walletsList}}return Qa.OKXTonConnectInner=l,l.walletsList=[(0,r.creatOKXWalletInfo)()],Qa}function Tc(){if(_c)return Ga;_c=1;var e=Ga.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.OKXTonConnect=void 0;const t=Ja(),n=Rc();return Ga.OKXTonConnect=class{constructor(e){try{(0,t.logDebug)("OKXTonConnect constructor called"),window&&window.okxConnectTonsdkinwindow&&window.okxConnectTonsdkinwindow instanceof n.OKXTonConnectInner?(this.tonInner=window.okxConnectTonsdkinwindow,(0,t.logDebug)("OKXTonConnect constructor old called")):(this.tonInner=new n.OKXTonConnectInner(e),(0,t.logDebug)("OKXTonConnect constructor new called"),this.registerConnector([t.AppwalletConnector.getConnector()]),window&&(window.okxConnectTonsdkinwindow=this.tonInner))}catch(Ye){throw Ye}}get connected(){return this.tonInner.connected}get openUniversalLink(){return this.tonInner.openUniversalLink}get provider(){return this.tonInner.provider}get account(){return this.tonInner.account}get wallet(){return this.tonInner.wallet}set wallet(e){this.tonInner.wallet=e}connect(t){return e(this,void 0,void 0,(function*(){return this.tonInner.connect(t)}))}disconnect(){return e(this,void 0,void 0,(function*(){return this.tonInner.disconnect()}))}onStatusChange(e,t){return this.tonInner.onStatusChange(e,t)}restoreConnection(){return e(this,void 0,void 0,(function*(){return this.tonInner.restoreConnection()}))}sendTransaction(t,n){return e(this,void 0,void 0,(function*(){return this.tonInner.sendTransaction(t,n)}))}static getWallets(){return n.OKXTonConnectInner.getWallets()}registerConnector(e){this.tonInner.registerConnector(e)}},Ga}var Nc,Ac,Pc={},xc={};function Ic(){return Ac||(Ac=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserEventDispatcher=e.createVersionInfo=e.createTransactionSigningFailedEvent=e.createTransactionSignedEvent=e.createTransactionSentForSignatureEvent=e.createDisconnectionEvent=e.createConnectionStartedEvent=e.createConnectionRestoringStartedEvent=e.createConnectionRestoringErrorEvent=e.createConnectionRestoringCompletedEvent=e.createConnectionErrorEvent=e.createConnectionCompletedEvent=e.createResponseVersionEvent=e.createRequestVersionEvent=e.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=void 0;var t,n=(Nc||(Nc=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=void 0,function(e){e.OKX_TON_CONNECTION_STARTED="okx-ton-connect-connection-started",e.OKX_TON_CONNECTION_COMPLETED="okx-ton-connect-connection-completed",e.OKX_TON_CONNECTION_ERROR="okx-ton-connect-connection-error",e.OKX_TON_CONNECTION_RESTORING_STARTED="okx-ton-connect-connection-restoring-started",e.OKX_TON_CONNECTION_RESTORING_COMPLETED="okx-ton-connect-connection-restoring-completed",e.OKX_TON_CONNECTION_RESTORING_ERROR="okx-ton-connect-connection-restoring-error",e.OKX_TON_DISCONNECTION="okx-ton-connect-disconnection",e.OKX_TON_TRANSACTION_SENT_FOR_SIGNATURE="okx-ton-connect-transaction-sent-for-signature",e.OKX_TON_TRANSACTION_SIGNED="okx-ton-connect-transaction-signed",e.OKX_TON_TRANSACTION_SIGNING_FAILED="okx-ton-connect-transaction-signing-failed"}(t||(xc.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=t={}))),xc);Object.defineProperty(e,"OKX_TON_CONNECTION_AND_TRANSACTION_EVENT",{enumerable:!0,get:function(){return n.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT}});var r=lc();Object.defineProperty(e,"createRequestVersionEvent",{enumerable:!0,get:function(){return r.createRequestVersionEvent}}),Object.defineProperty(e,"createResponseVersionEvent",{enumerable:!0,get:function(){return r.createResponseVersionEvent}}),Object.defineProperty(e,"createConnectionCompletedEvent",{enumerable:!0,get:function(){return r.createConnectionCompletedEvent}}),Object.defineProperty(e,"createConnectionErrorEvent",{enumerable:!0,get:function(){return r.createConnectionErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringCompletedEvent",{enumerable:!0,get:function(){return r.createConnectionRestoringCompletedEvent}}),Object.defineProperty(e,"createConnectionRestoringErrorEvent",{enumerable:!0,get:function(){return r.createConnectionRestoringErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringStartedEvent",{enumerable:!0,get:function(){return r.createConnectionRestoringStartedEvent}}),Object.defineProperty(e,"createConnectionStartedEvent",{enumerable:!0,get:function(){return r.createConnectionStartedEvent}}),Object.defineProperty(e,"createDisconnectionEvent",{enumerable:!0,get:function(){return r.createDisconnectionEvent}}),Object.defineProperty(e,"createTransactionSentForSignatureEvent",{enumerable:!0,get:function(){return r.createTransactionSentForSignatureEvent}}),Object.defineProperty(e,"createTransactionSignedEvent",{enumerable:!0,get:function(){return r.createTransactionSignedEvent}}),Object.defineProperty(e,"createTransactionSigningFailedEvent",{enumerable:!0,get:function(){return r.createTransactionSigningFailedEvent}}),Object.defineProperty(e,"createVersionInfo",{enumerable:!0,get:function(){return r.createVersionInfo}});var o=pc();Object.defineProperty(e,"BrowserEventDispatcher",{enumerable:!0,get:function(){return o.BrowserEventDispatcher}})}(Pc)),Pc}var kc,Dc={},Kc={};var Mc,Lc,Uc,jc={};function Wc(){if(Mc)return jc;Mc=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.toUserFriendlyAddress=function(r,i=!1){const{wc:s,hex:a}=function(e){if(!e.includes(":"))throw new Error(`Wrong address ${e}. Address must include ":".`);const t=e.split(":");if(2!==t.length)throw new Error(`Wrong address ${e}. Address must include ":" only once.`);const n=parseInt(t[0]);if(0!==n&&-1!==n)throw new Error(`Wrong address ${e}. WC must be eq 0 or -1, but ${n} received.`);const r=t[1];if(64!==(null==r?void 0:r.length))throw new Error(`Wrong address ${e}. Hex part must be 64bytes length, but ${null==r?void 0:r.length} received.`);return{wc:n,hex:o(r)}}(r);let c=t;i&&(c|=n);const l=new Int8Array(34);l[0]=c,l[1]=s,l.set(a,2);const u=new Uint8Array(36);return u.set(l),u.set(function(e){let t=0;const n=new Uint8Array(e.length+2);n.set(e);for(let r of n){let e=128;for(;e>0;)t<<=1,r&e&&(t+=1),e>>=1,t>65535&&(t&=65535,t^=4129)}return new Uint8Array([Math.floor(t/256),t%256])}(l),34),(0,e.base64encode)(u,!1).replace(/\+/g,"-").replace(/\//g,"_")};const e=Ja(),t=81,n=128;const r={};for(let i=0;i<=255;i++){let e=i.toString(16);e.length<2&&(e="0"+e),r[e]=i}function o(e){const t=(e=e.toLowerCase()).length;if(t%2!=0)throw new Error("Hex string must have length a multiple of 2: "+e);const n=t/2,o=new Uint8Array(n);for(let i=0;i<n;i++){const t=2*i,n=e.substring(t,t+2);if(!r.hasOwnProperty(n))throw new Error("Invalid hex character: "+n);o[i]=r[n]}return o}return jc}function Bc(){return Lc||(Lc=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toUserFriendlyAddress=e.removeUrlLastSlash=e.addPathToUrl=void 0;var t=function(){if(kc)return Kc;function e(e){return"/"===e.slice(-1)?e.slice(0,-1):e}return kc=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.removeUrlLastSlash=e,Kc.addPathToUrl=function(t,n){return e(t)+"/"+n},Kc}();Object.defineProperty(e,"addPathToUrl",{enumerable:!0,get:function(){return t.addPathToUrl}}),Object.defineProperty(e,"removeUrlLastSlash",{enumerable:!0,get:function(){return t.removeUrlLastSlash}});var n=Wc();Object.defineProperty(e,"toUserFriendlyAddress",{enumerable:!0,get:function(){return n.toUserFriendlyAddress}})}(Dc)),Dc}var Xc,Hc=(Uc||(Uc=1,function(e){var t=$a.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=$a.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.toUserFriendlyAddress=e.removeUrlLastSlash=e.addPathToUrl=e.createVersionInfo=e.BrowserEventDispatcher=e.createTransactionSigningFailedEvent=e.createTransactionSignedEvent=e.createTransactionSentForSignatureEvent=e.createDisconnectionEvent=e.createConnectionStartedEvent=e.createConnectionRestoringStartedEvent=e.createConnectionRestoringErrorEvent=e.createConnectionRestoringCompletedEvent=e.createConnectionErrorEvent=e.createConnectionCompletedEvent=e.createResponseVersionEvent=e.createRequestVersionEvent=e.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT=e.OKXTonConnect=void 0;var r=Tc();Object.defineProperty(e,"OKXTonConnect",{enumerable:!0,get:function(){return r.OKXTonConnect}}),n(Ja(),e);var o=Ic();Object.defineProperty(e,"OKX_TON_CONNECTION_AND_TRANSACTION_EVENT",{enumerable:!0,get:function(){return o.OKX_TON_CONNECTION_AND_TRANSACTION_EVENT}}),Object.defineProperty(e,"createRequestVersionEvent",{enumerable:!0,get:function(){return o.createRequestVersionEvent}}),Object.defineProperty(e,"createResponseVersionEvent",{enumerable:!0,get:function(){return o.createResponseVersionEvent}}),Object.defineProperty(e,"createConnectionCompletedEvent",{enumerable:!0,get:function(){return o.createConnectionCompletedEvent}}),Object.defineProperty(e,"createConnectionErrorEvent",{enumerable:!0,get:function(){return o.createConnectionErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringCompletedEvent",{enumerable:!0,get:function(){return o.createConnectionRestoringCompletedEvent}}),Object.defineProperty(e,"createConnectionRestoringErrorEvent",{enumerable:!0,get:function(){return o.createConnectionRestoringErrorEvent}}),Object.defineProperty(e,"createConnectionRestoringStartedEvent",{enumerable:!0,get:function(){return o.createConnectionRestoringStartedEvent}}),Object.defineProperty(e,"createConnectionStartedEvent",{enumerable:!0,get:function(){return o.createConnectionStartedEvent}}),Object.defineProperty(e,"createDisconnectionEvent",{enumerable:!0,get:function(){return o.createDisconnectionEvent}}),Object.defineProperty(e,"createTransactionSentForSignatureEvent",{enumerable:!0,get:function(){return o.createTransactionSentForSignatureEvent}}),Object.defineProperty(e,"createTransactionSignedEvent",{enumerable:!0,get:function(){return o.createTransactionSignedEvent}}),Object.defineProperty(e,"createTransactionSigningFailedEvent",{enumerable:!0,get:function(){return o.createTransactionSigningFailedEvent}}),Object.defineProperty(e,"BrowserEventDispatcher",{enumerable:!0,get:function(){return o.BrowserEventDispatcher}}),Object.defineProperty(e,"createVersionInfo",{enumerable:!0,get:function(){return o.createVersionInfo}});var i=Bc();Object.defineProperty(e,"addPathToUrl",{enumerable:!0,get:function(){return i.addPathToUrl}}),Object.defineProperty(e,"removeUrlLastSlash",{enumerable:!0,get:function(){return i.removeUrlLastSlash}}),Object.defineProperty(e,"toUserFriendlyAddress",{enumerable:!0,get:function(){return i.toUserFriendlyAddress}})}($a)),$a),Fc=d(jt()),qc={exports:{}};var Jc,zc,Vc,$c=(Xc||(Xc=1,Jc=qc,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var o=arguments[t];o&&(e=r(e,n(o)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var o="";for(var i in n)e.call(n,i)&&n[i]&&(o=r(o,i));return o}function r(e,t){return t?e?e+" "+t:e+t:e}Jc.exports?(t.default=t,Jc.exports=t):window.classNames=t}()),qc.exports),Gc=d($c);var Qc,Yc=function(){if(Vc)return zc;Vc=1;var e=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var n=Object.prototype.toString.call(e);return"[object RegExp]"===n||"[object Date]"===n||function(e){return e.$$typeof===t}(e)}(e)},t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,r){return e.concat(t).map((function(e){return n(e,r)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function i(e,t){try{return t in e}catch(cR){return!1}}function s(e,t,r){var s={};return r.isMergeableObject(e)&&o(e).forEach((function(t){s[t]=n(e[t],r)})),o(t).forEach((function(o){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(i(e,o)&&r.isMergeableObject(t[o])?s[o]=function(e,t){if(!t.customMerge)return a;var n=t.customMerge(e);return"function"==typeof n?n:a}(o,r)(e[o],t[o],r):s[o]=n(t[o],r))})),s}function a(t,o,i){(i=i||{}).arrayMerge=i.arrayMerge||r,i.isMergeableObject=i.isMergeableObject||e,i.cloneUnlessOtherwiseSpecified=n;var a=Array.isArray(o);return a===Array.isArray(t)?a?i.arrayMerge(t,o,i):s(t,o,i):n(o,i)}return a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return a(e,n,t)}),{})},zc=a}(),Zc=d(Yc),el={},tl={},nl={};var rl,ol,il={};function sl(){return ol||(ol=1,e=tl,t=tl.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=tl.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n((Qc||(Qc=1,Object.defineProperty(nl,"__esModule",{value:!0}),nl.IJSONRpcProvider=nl.IJSONRpcConnection=void 0,nl.IJSONRpcConnection=class{},nl.IJSONRpcProvider=class{constructor(e){}}),nl),e),n((rl||(rl=1,Object.defineProperty(il,"__esModule",{value:!0})),il),e)),tl;var e,t,n}var al,cl={},ll={},ul={},dl={},hl={},fl={};var pl,gl,vl,ml,yl,bl,wl={};function Cl(){return gl||(gl=1,e=hl,t=hl.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=hl.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(function(){if(al)return fl;al=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.getRpcUrl=function(e,t,r){var o;const i=n(e);return(null===(o=t.rpcMap)||void 0===o?void 0:o[i.reference])||""},fl.getChainId=function(e){return e.includes(":")?e.split(":")[1]:e},fl.fromAccountToAddress=function(t){if(!t)return"";try{let n=t.split(":").slice(2),r=n.length>0?n.join(":"):"";return(0,e.logDebug)("fromAccountToAddress address and account:",r,t),r}catch(AO){return(0,e.logError)("fromAccountToAddress error:",t),""}},fl.convertChainIdToNumber=function(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))},fl.parseChainId=n,fl.mergeArrays=function(e=[],t=[]){return[...new Set([...e,...t])]},fl.syncAddressAvailable=function(t){return!!t&&"OKX Wallet"===t.appName&&!((0,e.versionCompare)("6.97.0",t.appVersion)>0)&&r()},fl.syncAddressHostAvailable=r;const e=Ja(),t=":";function n(e){const[n,r]=e.split(t);return{namespace:n,reference:r}}function r(){try{return!!window.okxGlobal}catch(AO){return!1}}return fl}(),e),n(function(){if(pl)return wl;pl=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.setGlobal=wl.getGlobal=void 0;const e={};return wl.getGlobal=t=>e[t],wl.setGlobal=(t,n)=>{e[t]=n},wl}(),e)),hl;var e,t,n}function _l(){return vl||(vl=1,e=dl,t=dl.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=dl.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(sl(),e),n(Cl(),e)),dl;var e,t,n}function Ol(){return ml||(ml=1,function(e){var t=ul.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},n=ul.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectSupportMethods=void 0,e.creatNotSupportMethodItemReplay=function(e){let t=new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);return{method:e.method,chainId:e.chainId,error:{code:t.code,message:t.message}}},e.connectMethodsAdaptOldVersion=function(e,n){return t(this,void 0,void 0,(function*(){var t,s,a,c,l;try{(0,r.logDebug)("connectMethodsAdaptOldVersion start params :",JSON.stringify(e));let d={};if("solana_signMessage"===e.method){let a=null===(t=n.namespaces[r.NameSpaceKeySOL])||void 0===t?void 0:t.accounts.filter((function(t){return t.startsWith(e.chainId)}))[0];const c=(0,i.fromAccountToAddress)(a);if(e.params&&c&&"message"in e.params){let t=e.params.message;if("OKX Wallet"==(null===(s=n.wallet)||void 0===s?void 0:s.appName)){let e=(new TextEncoder).encode(t);t=o.default.encode(e)}return e.params={message:t,pubkey:c},e.injectParams=e.params,d={publicKey:c},(0,r.logDebug)("solana_signMessage account and address:",JSON.stringify(a),c),(0,r.logDebug)("solana_signMessage callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("sui_signMessage"===e.method||"sui_signPersonalMessage"===e.method){if("message"in e.params&&e.params.message){let t=JSON.parse(JSON.stringify(e.params.message)),n=Object.values(t),o=new Uint8Array(n),i=new TextDecoder("utf8"),s=btoa(i.decode(o));return e.params={message:atob(s)},e.injectParams={message:o},console.log("sui_signMessag suiMessagee suiMessageb64:>>>>",JSON.stringify(e.params),s),"sui_signMessage"===e.method?d={messageBytes:s,signature:""}:"sui_signPersonalMessage"===e.method&&(d={bytes:s,signature:""}),(0,r.logDebug)("sui_signMessage/sui_signPersonalMessage callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("btc_signMessage"===e.method){let t=(null===(a=n.namespaces[r.NameSpaceKeyBtc])||void 0===a?void 0:a.accounts.filter((function(t){return t.startsWith(e.chainId)})))[0];const o=(0,i.fromAccountToAddress)(t);if((0,r.logDebug)("btc_signMessage account and address:",JSON.stringify(t),o),o){if(!("message"in e.params)||!e.params.message||"string"!=typeof e.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);return e.params={from:o,signStr:e.params.message},e.params.from=o,(0,r.logDebug)("btc_signMessage callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("aptos_signMessage"===e.method){let t=e.params,o=null===(c=n.namespaces[r.NameSpaceKeyAptos])||void 0===c?void 0:c.accounts.filter((function(t){return t.startsWith(e.chainId)}))[0],s=(0,i.fromAccountToAddress)(o);if(t&&s){let n="APTOS",o="",i="";var u=n;let a=window.location.protocol+"//"+window.location.hostname;"address"in t&&t.address&&(u+="\naddress: "+s),"application"in t&&t.application&&(u+="\napplication: "+a);let c=1;"chainId"in t&&t.chainId&&("aptos:mainnet"==t.chainId?c=1:"movement:testnet"==t.chainId&&(c=2),u+="\nchainId: "+c),"message"in t&&(u+="\nmessage: "+t.message,o=t.message),"nonce"in t&&(u+="\nnonce: "+t.nonce,i=t.nonce);const l=(new TextEncoder).encode(u),h=Array.from(l).map((e=>e.toString(16).padStart(2,"0"))).join("");return e.params={message:h},(0,r.logDebug)("aptos_signMessage requestParams:",JSON.stringify(e)),d={address:s,application:a,chainId:c,fullMessage:u,message:o,nonce:i,prefix:n,signature:""},(0,r.logDebug)("aptos_signMessage callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}if("cosmos_signArbitrary"===e.method){let t=null===(l=null==n?void 0:n.namespaces[r.NameSpaceKeyCosmos])||void 0===l?void 0:l.accounts.filter((function(t){return t.startsWith(e.chainId)}))[0];const o=(0,i.fromAccountToAddress)(t);let s=e.params.message;const a=btoa(s);if((0,r.logDebug)("cosmos_signArbitrary account and address:",JSON.stringify(t),o),(0,r.logDebug)("cosmos_signArbitrary cosmosBase64Encoded:",a),s&&o){const t={chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:o,data:a}}],memo:""};return e.params={signer:o,chain_id:e.chainId.split(":")[1],data:t},(0,r.logDebug)("cosmos_signArbitrary callBackParams:",JSON.stringify(d)),d}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}(0,r.logDebug)("sol_handleSignatureData end params:",JSON.stringify(e))}catch(Ye){throw Ye}}))},e.connectMethodsResponseUpdate=function(e,n){return t(this,void 0,void 0,(function*(){var t;try{if(e.signResponse){(0,r.logDebug)("connectMethodsResponseUpdate signResponse:",JSON.stringify(e.signResponse)),(0,r.logDebug)("connectMethodsResponseUpdate session.namespaces:",JSON.stringify(e.namespaces));for(const s of e.signResponse)if((0,r.logDebug)("connectMethodsResponseUpdate methodItem:",JSON.stringify(s)),"result"in s)if("solana_signMessage"===s.method){let n=s.result;(0,r.logDebug)("solana_signMessage methodItem.chainId:",s.chainId);let a=null===(t=e.namespaces[r.NameSpaceKeySOL])||void 0===t?void 0:t.accounts.filter((function(e){return(0,r.logDebug)("solana_signMessage account:",e),e.startsWith(s.chainId)}))[0];(0,r.logDebug)("solana_signMessage result account:",n,a),n&&a&&(s.result={signature:o.default.decode(n),publicKey:(0,i.fromAccountToAddress)(a)})}else if("sui_signMessage"===s.method||"sui_signPersonalMessage"===s.method){let e=n.filter((function(e){return e.method===s.method}))[0];if(e&&e.params&&"message"in e.params){let t=e.params.message,n=btoa(t);console.log("sui_signMessag suiMessagee suiMessageb64:>>>>",t,n),"sui_signMessage"===s.method?s.result={messageBytes:n,signature:s.result}:"sui_signPersonalMessage"===s.method&&(s.result={bytes:n,signature:s.result})}}else if("aptos_signMessage"===s.method){if(s.chainId=(0,r.replaceChainIdToChainName)(s.chainId),s.result=JSON.parse(s.result),console.log("aptos_signMessage result methodItem.result before:>>>>",JSON.stringify(s.result)),s.result&&"signature"in s.result){let e=s.result.signature;e&&e.startsWith("0x")&&(e=e.slice(2,e.length),s.result.signature=e)}console.log("aptos_signMessage result methodItem.result after:>>>>",JSON.stringify(s.result))}else if("cosmos_signArbitrary"===s.method)s.result=JSON.parse(s.result);else if("starknet_signMessage"==s.method){let e=s.result;"string"==typeof e&&(e=JSON.parse(e)),s.result=[e.signedDataR,e.signedDataS]}else"sync_all_addresses"==s.method&&(s.result=c(s.result))}}catch(Ye){throw(0,r.logDebug)("connectMethodsResponseUpdate signResponse Error:",JSON.stringify(Ye)),Ye}}))},e.connectMethodsToConnectWalletMethods=function(n,c){return t(this,void 0,void 0,(function*(){try{(0,r.logDebug)("connectMethodsToConnectWalletMethods requestMethods:",JSON.stringify(n));const d=[];if(n&&n.length>1)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"connectAndSign/openModalAndSign signRequest only support one data");if(!c&&n&&n.length>0)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Connect request params error , RequestMethods cannot be added when the NameSpace is empty");for(const e of n){if("aptos_signMessage"===e.method&&(e.chainId=(0,r.replaceChainNameToChainId)(e.chainId)),"wallet_addEthereumChain"===e.method){if(!(null==c?void 0:c.some((e=>e.namespace.includes("eip155")))))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Connect request params error, When using '${e.method}', the EVM chain needs to be included in the NameSpace`)}else if("sync_all_addresses"===e.method){if(!(0,i.syncAddressHostAvailable)())throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED);e.chainId=""}else{if(!!!(null==c?void 0:c.some((t=>t.chains.some((t=>t.includes(`${e.chainId}`)))))))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Connect request params error, When using '${e.method}', NameSpace must contain '${e.chainId}'`)}}for(const i of n){if(!e.connectSupportMethods.includes(i.method))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect requestMethods not support method, method: '${i.method}'`);if("wallet_addEthereumChain"===i.method){if(Array.isArray(i.params)){const e=i.params;if(!e||1!==e.length)throw e&&e.length>1?new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params only support one data, method: '${i.method}'`):new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is nil, method: '${i.method}'`);{const t=e[0];s(t)&&(i.params=t)}}}else if("personal_sign"===i.method){if("object"==typeof(u=i.params)&&null!==u&&Array.isArray(u)){if(i.params&&1!==i.params.length)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params error,  method: '${i.method}' `);let e=i.params[0];if(!e||"string"!=typeof e)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);i.params={message:e}}}else if("sui_signMessage"===i.method||"sui_signPersonalMessage"===i.method){if(!s(i.params)||!("message"in i.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);if(!i.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);{(0,r.logDebug)("sui_signMessage item.params.message :",i.params.message);let e=JSON.parse(JSON.stringify(i.params.message)),t=Object.values(e),n=new Uint8Array(t),o=new TextDecoder("utf8"),s=btoa(o.decode(n));i.params.message=atob(s)}}else if("solana_signMessage"===i.method){if(!s(i.params)||!("message"in i.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);if(!i.params.message||"string"!=typeof i.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);{let e=(new TextEncoder).encode(i.params.message);i.params.bs58Message=o.default.encode(e)}}else if("aptos_signMessage"===i.method){if(!s(i.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);if(!i.chainId)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params chainId is error,  method: '${i.method}' `);{var t=i.params,l=window.location.protocol+"//"+window.location.hostname;let e=1;"aptos:637"===i.chainId||"aptos:70000060"===i.chainId&&(e=2),i.params={data:t,applicationUrl:l,prefix:"APTOS",aptosChainId:e}}}else if("cosmos_signArbitrary"===i.method){if(!s(i.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);if(!i.params.message||"string"!=typeof i.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params message is error,  method: '${i.method}' `);{const e=btoa(i.params.message);let t=i.chainId.split(":")[1];if(!t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params chainId is error,  method: '${i.method}' `);i.params={chain_id:t,data:{chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:"",data:e}}],memo:""}}}}else if("tron_signMessage"==i.method){if(!s(i.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);if(!("message"in i.params)||!i.params.message||"string"!=typeof i.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);i.params.message=a(i.params.message)}else if("btc_signMessage"==i.method){if(!s(i.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);if(!("message"in i.params)||!i.params.message||"string"!=typeof i.params.message)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`connect request params is error,  method: '${i.method}' `);i.params={signStr:i.params.message}}(0,r.logDebug)("connectMethodsToConnectWalletMethods item:",JSON.stringify(i)),d.push(i)}return d}catch(Ye){throw Ye}var u}))},e.syncResoonseToRequire=c;const r=Ja(),o=n(Ra()),i=_l();function s(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function a(e){let t="";for(let n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16).padStart(2,"0");return t}function c(e){const t=JSON.parse(e);return{type:t.type,isEvm:t.isEvm,walletName:t.walletName,deriveName:t.deriveName,addresses:t.addresses.map((e=>({coinId:e.ci,address:e.a&&"null"!==e.a?e.a:t.evmAddress})))}}e.connectSupportMethods=Object.freeze(["personal_sign","sui_signMessage","sui_signPersonalMessage","btc_signMessage","aptos_signMessage","cosmos_signArbitrary","tron_signMessage","tron_signMessageV2","starknet_signMessage","sync_all_addresses"])}(ul)),ul}function El(){return bl||(bl=1,e=cl,t=cl.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=cl.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n((yl||(yl=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.creatNotSupportMethodItemReplay=e.connectMethodsAdaptOldVersion=void 0;var t=Ol();Object.defineProperty(e,"connectMethodsAdaptOldVersion",{enumerable:!0,get:function(){return t.connectMethodsAdaptOldVersion}}),Object.defineProperty(e,"creatNotSupportMethodItemReplay",{enumerable:!0,get:function(){return t.creatNotSupportMethodItemReplay}})}(ll)),ll),e)),cl;var e,t,n}var Sl,Rl={},Tl={},Nl={},Al={};var Pl,xl,Il={};function kl(){return xl||(xl=1,e=Nl,t=Nl.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Nl.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(function(){return Sl||(Sl=1,e=Al,Object.defineProperty(e,"__esModule",{value:!0}),e.GENERIC_SUBPROVIDER_NAME=e.RPC_URL=e.STORAGE=e.CONTEXT=e.WC_VERSION=e.PROTOCOL=e.RELAY_URL=e.LOGGER=void 0,e.LOGGER="error",e.RELAY_URL="wss://relay.walletconnect.com",e.PROTOCOL="wc",e.WC_VERSION=2,e.CONTEXT="universal_provider",e.STORAGE=`${e.PROTOCOL}@${e.WC_VERSION}:${e.CONTEXT}:`,e.RPC_URL="https://rpc.walletconnect.com/v1/",e.GENERIC_SUBPROVIDER_NAME="generic"),Al;var e}(),e),n((Pl||(Pl=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.PROVIDER_EVENTS=void 0,Il.PROVIDER_EVENTS={DEFAULT_CHAIN_CHANGED:"default_chain_changed",UPDATE_NAMESPACES:"update_name_spaces",SESSION_CONNECTING:"session_connecting"}),Il),e)),Nl;var e,t,n}var Dl,Kl={};function Ml(){if(Dl)return Kl;Dl=1;var e=Kl.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.JsonRpcProvider=void 0;const t=pt(),n=sl(),r=Ja(),o=Ja();let i=class extends n.IJSONRpcProvider{constructor(e){super(e),this.events=new t.EventEmitter,this.connected=!1,this.connecting=!1,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}connect(){return e(this,arguments,void 0,(function*(e=this.connection){yield this.open(e)}))}disconnect(){return e(this,void 0,void 0,(function*(){yield this.close()}))}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}request(t,n){return e(this,void 0,void 0,(function*(){return this.requestStrict((0,r.formatJsonRpcRequest)(t.method,t.params||[],(0,r.getBigIntRpcId)().toString()),n)}))}requestStrict(t,n){return e(this,void 0,void 0,(function*(){return new Promise(((i,s)=>e(this,void 0,void 0,(function*(){if(!this.connection.connected)try{yield this.open()}catch(AO){s(AO)}this.events.on(`${t.id}`,(e=>{(0,r.isJsonRpcError)(e)?s(e.error):i(e.result)}));try{(0,o.logDebug)("[RPC] >>> send request",t,n),yield this.connection.send(t,n)}catch(AO){s(AO)}}))))}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,r.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}open(){return e(this,arguments,void 0,(function*(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(yield this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),yield this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}))}close(){return e(this,void 0,void 0,(function*(){yield this.connection.close()}))}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}};return Kl.JsonRpcProvider=i,Kl}var Ll,Ul,jl,Wl={},Bl={exports:{}};function Xl(){return Ll||(Ll=1,function(e,t){var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==u&&u,r=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==u&&u||{},r="URLSearchParams"in n,o="Symbol"in n&&"iterator"in Symbol,i="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(AO){return!1}}(),s="FormData"in n,a="ArrayBuffer"in n;if(a)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function f(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=g(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,o,i=g(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=v(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8",t.readAsText(e,o),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=h(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=h(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),f(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),f(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),f(e)},o&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function C(e,t){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,o,i=(t=t||{}).body;if(e instanceof C){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),w.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function O(e,t){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})},b.call(C.prototype),b.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},O.error=function(){var e=new O(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var E=[301,302,303,307,308];O.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new O(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(R){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,r){return new Promise((function(o,s){var c=new C(e,r);if(c.signal&&c.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function u(){l.abort()}if(l.onload=function(){var e,t,n={statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(Ye){console.warn("Response "+Ye.message)}}})),t)};0===c.url.indexOf("file://")&&(l.status<200||l.status>599)?n.status=200:n.status=l.status,n.url="responseURL"in l?l.responseURL:n.headers.get("X-Request-URL");var r="response"in l?l.response:l.responseText;setTimeout((function(){o(new O(r,n))}),0)},l.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},l.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},l.open(c.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(AO){return e}}(c.url),!0),"include"===c.credentials?l.withCredentials=!0:"omit"===c.credentials&&(l.withCredentials=!1),"responseType"in l&&(i?l.responseType="blob":a&&(l.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||n.Headers&&r.headers instanceof n.Headers)){var f=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){f.push(d(e)),l.setRequestHeader(e,h(r.headers[e]))})),c.headers.forEach((function(e,t){-1===f.indexOf(t)&&l.setRequestHeader(t,e)}))}else c.headers.forEach((function(e,t){l.setRequestHeader(t,e)}));c.signal&&(c.signal.addEventListener("abort",u),l.onreadystatechange=function(){4===l.readyState&&c.signal.removeEventListener("abort",u)}),l.send(void 0===c._bodyInit?null:c._bodyInit)}))}S.polyfill=!0,n.fetch||(n.fetch=S,n.Headers=p,n.Request=C,n.Response=O),t.Headers=p,t.Request=C,t.Response=O,t.fetch=S,Object.defineProperty(t,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=n.fetch?n:r;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(Bl,Bl.exports)),Bl.exports}function Hl(){if(Ul)return Wl;Ul=1;var e=Wl.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},t=Wl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.JsonRpcConnection=void 0;const n=pt(),r=t(Xl()),o=Ja(),i=Ja(),s={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};return Wl.JsonRpcConnection=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new n.EventEmitter,this.isAvailable=!1,this.registering=!1,!(0,i.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}open(){return e(this,arguments,void 0,(function*(e=this.url){yield this.register(e)}))}close(){return e(this,void 0,void 0,(function*(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}))}send(t){return e(this,void 0,void 0,(function*(){this.isAvailable||(yield this.register());try{const e=(0,o.safeJsonStringify)(t),n=yield(0,r.default)(this.url,Object.assign(Object.assign({},s),{body:e})),i=yield n.json();this.onPayload({data:i})}catch(AO){this.onError(t.id,AO)}}))}register(){return e(this,arguments,void 0,(function*(e=this.url){if(!(0,i.isHttpUrl)(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering)return new Promise(((e,t)=>{this.events.once("register_error",(e=>{t(e)})),this.events.once("open",(()=>{if(void 0===this.isAvailable)return t(new Error("HTTP connection is missing or invalid"));e()}))}));this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=(0,o.safeJsonStringify)({id:1,jsonrpc:"2.0",method:"test",params:[]});yield(0,r.default)(e,Object.assign(Object.assign({},s),{body:t}))}this.onOpen()}catch(AO){const t=this.parseError(AO);throw this.events.emit("register_error",t),this.onClose(),t}}))}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(void 0===e.data)return;const t="string"==typeof e.data?(0,o.safeJsonParse)(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),r=n.message||n.toString(),o=(0,i.formatJsonRpcError)(e,r);this.events.emit("payload",o)}parseError(e,t=this.url){return(0,i.parseConnectionError)(e,t,"HTTP")}},Wl}function Fl(){if(jl)return Tl;jl=1;var e=Tl.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.Eip155Provider=void 0;const t=Cl(),n=kl(),r=Ja(),o=Ml(),i=Hl();class s{constructor(e,t,n){this.name="eip155",this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=parseInt(this.getDefaultChain()),this.httpProviders=this.createHttpProviders(),(0,r.logDebug)("eip155 constructor --opts.namespace--\x3e",e.namespace)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}isArray(e){return"object"==typeof e&&null!==e&&Array.isArray(e)}updateRequestParams(e){let t=e.params&&"object"==typeof e.params&&!Array.isArray(e.params);if("wallet_switchEthereumChain"===e.method){const n=e.chainId.split(":")[1],o=parseInt(n,10);if(isNaN(o))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid decimal number,  chainId: '${n}' `);if(e.params){if(!t)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params error ,  method: '${e.method}' `);{let t=e.params;"chainId"in t||(t.chainId="0x"+o.toString(16),e.params=t)}}else e.params={chainId:"0x"+o.toString(16)}}else if("personal_sign"===e.method||"eth_signTypedData_v4"===e.method||"eth_sendTransaction"===e.method||"wallet_watchAsset"===e.method){if(!e.params)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params is nil, method: '${e.method}'`);if(!this.isRecord(e.params))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid request params type, method: '${e.method}'`);{let t=e.params;if((0,r.logDebug)("eip155 updateRequestParams params>",JSON.stringify(t)),"chainId"in t){const n=e.chainId.split(":")[1],o=parseInt(n,10);let i,s=String(t.chainId);if(s.startsWith(this.name)&&e.chainId===s)i=o;else if(s.startsWith("0x"))i=parseInt(s,16);else{if(isNaN(Number(s)))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Invalid params.chainId format, method: '${e.method}'`);i=parseInt(s,10)}if(o!==i)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Request params.chainId not equal chain,  method: '${e.method}' `)}}}}adaptArray(e){if("wallet_switchEthereumChain"===e.method||"wallet_addEthereumChain"===e.method||"wallet_watchAsset"===e.method||"eth_sendTransaction"===e.method){if(this.isArray(e.params)){let t=e.params;if(t){if(1!==t.length)throw t.length>1?new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `):new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);{let t=e.params[0];this.isRecord(t)&&(e.params=t)}}}}else if("eth_signTypedData_v4"===e.method){if(this.isArray(e.params)){let o=e.params;if(o&&o.length>2)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params only Support one data,  method: '${e.method}' `);if(o&&0===o.length)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let i={};if(o&&2===o.length){let n=e.params[0];if(!n||"string"!=typeof n)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error , not string,  method: '${e.method}' `);{let o=!1;if(this.namespace.accounts.forEach((e=>{(0,t.fromAccountToAddress)(e).toLowerCase()===n.toLowerCase()&&(o=!0)})),(0,r.logDebug)("eip155 adaptArray eth_signTypedData_v4 >>>isEqual: ",o),!o)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error, not equal,  method: '${e.method}' `);if(!this.isRecord(e.params[1]))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);i=e.params[1]}}else if(o&&1===o.length){if(!this.isRecord(e.params[0]))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params message data error,  method: '${e.method}' `);i=e.params[0]}try{let t=JSON.stringify(i);e.params={typedDataJson:t}}catch(n){throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params call JSON.stringify() failed,  method: '${e.method}' `)}}}else if("personal_sign"===e.method&&this.isArray(e.params)){if(e.params&&e.params.length>2)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params error,  method: '${e.method}' `);if(e.params&&0===e.params.length)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is nil,  method: '${e.method}' `);let n=e.params[0],o=e.params[1];if(o&&"string"==typeof o){let n=!1;if(this.namespace.accounts.forEach((e=>{(0,t.fromAccountToAddress)(e).toLowerCase()===o.toLowerCase()&&(n=!0)})),(0,r.logDebug)("eip155 adaptArray personal_sign >>>isEqual: ",n),!n)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params address error,  method: '${e.method}' `)}if(!n||"string"!=typeof n)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Request params is error,  method: '${e.method}' `);e.params={message:n}}}showRequestModal(e){switch(e.method){case"eth_requestAccounts":case"eth_accounts":case"eth_chainId":default:return!1;case"eth_sendTransaction":case"eth_signTransaction":case"eth_sign":case"personal_sign":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"eth_signTypedData_v4":return!0;case"wallet_switchEthereumChain":{this.adaptArray(e),this.updateRequestParams(e);const{parsedChainId:t,hexChainId:n}=this.getHexChainIdFromRequest(e);return!this.isChainApproved(t)}}return!1}configAddressAdaptInjectWallet(e){this.namespace.accounts.forEach((n=>{n.includes(e.chainId)&&(e.address=(0,t.fromAccountToAddress)(n))}))}request(t){return e(this,void 0,void 0,(function*(){switch(this.adaptArray(t),(0,r.logDebug)("eip155 request --args--string>",JSON.stringify(t)),this.updateRequestParams(t),(0,r.logDebug)("eip155 request --params--string>",JSON.stringify(t)),this.configAddressAdaptInjectWallet(t),t.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_switchEthereumChain":return yield this.handleSwitchChain(t);case"wallet_addEthereumChain":return this.addEthereumChain(t)}if(!this.namespace.methods.includes(t.method))return(0,r.logDebug)("[RPC] request begin"),yield this.getHttpProvider().request(t);try{const e=yield this.client.request(t);if((0,r.logDebug)("eip155 request --response----string>",JSON.stringify(e)),this.isRecord(e)&&"result"in e){let t=e.result;return!t||"string"!=typeof t||"true"!==t&&"false"!==t?e.result:((0,r.logDebug)("eip155 request --wallet_watchAsset>>>>","true"===t),"true"===t)}return e}catch(AO){throw(0,r.logDebug)(`eip155 request --response --error--string> e instanceof OKXConnectError ${AO instanceof r.OKXConnectError}`,JSON.stringify(AO)),AO}}))}addEthereumChain(t){return e(this,void 0,void 0,(function*(){let e=yield this.client.request(t);try{if("result"in e){let r=e.result;if(r){const e=r.split(":")[0],o=r.split(":")[1],i=e+":"+o;this.namespace;if(this.namespace.accounts.push(r),this.namespace.chains.push(i),this.isRecord(t.params)&&"rpcUrls"in t.params){let e=t.params.rpcUrls,n=e?e[0]:void 0;n&&(this.namespace.rpcMap?this.namespace.rpcMap[o]=n:this.namespace.rpcMap={[o]:n},this.setHttpProvider(o,n))}this.events.emit(n.PROVIDER_EVENTS.UPDATE_NAMESPACES,{eip155:this.namespace})}}else new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${t.method} request error`)}catch(Ye){throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method ${t.method} request  error`)}return null}))}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,o){if(this.chainId=parseInt(e),!this.httpProviders[e]){const n=o||(0,t.getRpcUrl)(`${this.name}:${e}`,this.namespace);n?this.setHttpProvider(e,n):(0,r.logError)(`No RPC url provided for chainId: ${e}`)}this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return(0,r.logDebug)("eip155 getAccounts ",e,this.chainId),e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>(0,t.fromAccountToAddress)(e))))]:[]}getHexChainIdFromRequest(e){let t=e.params,n="0x0";t&&"chainId"in t&&(n=t.chainId),n=n.startsWith("0x")?n:`0x${n}`,(0,r.logDebug)("handleSwitchChain --\x3eargs ",e),(0,r.logDebug)("handleSwitchChain --\x3ehexChainId ",n);const o=parseInt(n,16);return(0,r.logDebug)("handleSwitchChain --\x3eparsedChainId ",o),{parsedChainId:o,hexChainId:n}}handleSwitchChain(t){return e(this,void 0,void 0,(function*(){const{parsedChainId:e,hexChainId:n}=this.getHexChainIdFromRequest(t);if(!this.isChainApproved(e))throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED,`the method ${t.method} request  error`);this.setDefaultChain(`${e}`)}))}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}createHttpProvider(e,n){const s=n;if(s){return new o.JsonRpcProvider(new i.JsonRpcConnection(s,(0,t.getGlobal)("disableProviderPing")))}(0,r.logError)(`No RPC url provided for chainId: ${e}`)}createHttpProviders(){const e={};return this.namespace.chains.forEach((n=>{const o=(0,t.getChainId)(n),i=(0,t.getRpcUrl)(n,this.namespace);(0,r.logDebug)("get parsed chain and rpc:",o,i);let s=this.createHttpProvider(o,i);s&&(e[o]=s)})),(0,r.logDebug)("get http providermap:",e),e}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if((0,r.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}}return Tl.Eip155Provider=s,Tl.default=s,Tl}var ql,Jl={};function zl(){if(ql)return Jl;ql=1;var e=Jl.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.SuiProvider=void 0;const t=kl(),n=Ja(),r=Cl(),o=Hl(),i=Ml();class s{constructor(e,t,r){this.name=n.NameSpaceKeySui,this.namespace=e.namespace,this.events=r,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}request(t){return e(this,void 0,void 0,(function*(){return(0,n.logDebug)("sui request --args--string>",JSON.stringify(t)),(0,n.logDebug)("sui provider namespace: ",this.namespace),this.namespace.methods.includes(t.method)?this.client.request(t):this.getHttpProvider().request(t)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(t.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,r.getChainId)(t),o=(0,r.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,o);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if((0,n.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&((0,n.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=r)}createHttpProvider(e,t){const s=t;if(s){return new i.JsonRpcProvider(new o.JsonRpcConnection(s,(0,r.getGlobal)("disableProviderPing")))}(0,n.logError)(`No RPC url provided for chainId: ${e}`)}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(null==(e=this.namespace.defaultChain)?void 0:e.startsWith("sui"))||(e=`sui:${e}`),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){switch(e.method){case"sui_signMessage":case"sui_signPersonalMessage":case"sui_signTransactionBlock":case"sui_signAndExecuteTransactionBlock":return!0;default:return!1}return!1}}return Jl.SuiProvider=s,Jl.default=s,Jl}var Vl,$l,Gl={},Ql={};function Yl(){if(Vl)return Ql;Vl=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.getAccountsChains=function(e){const t=[];return e.forEach((e=>{const[n,r]=e.split(":");t.push(`${n}:${r}`)})),t},Ql.nameSpaceToConnectWalletNameSpace=function(t){var n=[];if(!t)return n;return Object.keys(t).forEach((r=>{r!==e.NameSpaceKeyEip155&&r!==e.NameSpaceKeySOL&&r!==e.NameSpaceKeySui&&r!==e.NameSpaceKeyAptos&&r!=e.NameSpaceKeyBtc&&r!==e.NameSpaceKeyTON&&r!==e.NameSpaceKeyCosmos&&r!==e.NameSpaceKeyTron&&r!==e.NameSpaceKeyStarknet||t[r].chains&&n.push({namespace:r,chains:t[r].chains,params:t[r].params})})),n},Ql.fillParamsToSession=function(t,n,r,o){const i=(e,t)=>{for(const o in t)t.hasOwnProperty(o)&&t[o].rpcMap&&(t[o].rpcMap&&(e[o].rpcMap||(e[o].rpcMap={}),n=e[o].rpcMap,r=t[o].rpcMap,Object.assign(n,r)),t[o].defaultChain&&void 0===e[o].defaultChain&&e[o].chains.some((e=>e.split(":")[1]===t[o].defaultChain))&&(e[o].defaultChain=t[o].defaultChain));var n,r};n&&i(t.namespaces,n);r&&i(t.namespaces,r);for(const e in t.namespaces){const n=t.namespaces[e];(null==n?void 0:n.accounts)&&0!==n.accounts.length||delete t.namespaces[e]}t.namespaces[e.NameSpaceKeyBtc]&&t.wallet.appName===e.OKXWalletName&&function(t){try{if(t&&t.extra){var n=t.extra;Object.keys(n).forEach((e=>{const t=n[e];6===Number(t.addressType)?t.publicKey=t.compressedPublicKey.slice(2):t.publicKey=t.compressedPublicKey}))}}catch(AO){(0,e.logDebug)("namespaces fixMobileBtcSession error")}}(t.namespaces[e.NameSpaceKeyBtc]);t.sessionConfig=o},Ql.isCaipNamespace=t,Ql.parseNamespaceKey=function(e){return t(e)?e.split(":")[0]:e};const e=Ja();function t(e){return e.includes(":")}return Ql}function Zl(){if($l)return Gl;$l=1;var e=Gl.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.SignClient=void 0;const t=Ja(),n=Yl(),r=Ol(),o=kl();class i extends t.ISignClient{constructor(i,s){super(i),this.connect=i=>e(this,void 0,void 0,(function*(){return new Promise(((s,a)=>e(this,void 0,void 0,(function*(){try{var c=[];(0,t.logDebug)("client connect params >>>",JSON.stringify(i));var l={name:"requestAccounts",requiredNamespaces:(0,n.nameSpaceToConnectWalletNameSpace)(i.namespaces),optionalNamespaces:(0,n.nameSpaceToConnectWalletNameSpace)(i.optionalNamespaces)};this.engine.setSessionConnectingListener((()=>{(0,t.logDebug)("sessionConnectingListener >>>"),this.events.emit(o.PROVIDER_EVENTS.SESSION_CONNECTING)})),i.signRequest&&(l.connectRequestMethods=yield(0,r.connectMethodsToConnectWalletMethods)(i.signRequest,l.requiredNamespaces)),c.push(l),(0,t.logDebug)("client connect connectRequest >>>",JSON.stringify(c)),this.engine.universalConnect(c,Object.assign({dappInfo:this.metadata},i.sessionConfig),(e=>{e&&e.connectRequest&&((0,t.logDebug)("universalConect info.connectRequest :",e.connectRequest),(0,t.logDebug)("universalConect url:",(0,t.getOKXLink)(e.connectRequest,this.sessionConfig.useMini)),this.events.emit("display_uri",(0,t.getOKXLink)(e.connectRequest,this.sessionConfig.useMini)),this.events.emit("short_display_uri",(0,t.getAppWalletShortDeepLink)(e.connectRequest.topic,e.connectRequest.clientId)),(0,t.logDebug)(`universalConect EngineConnectInfo  ${JSON.stringify(e)}`),this.events.emit("okx_engine_connect_params",e))})).then((o=>e(this,void 0,void 0,(function*(){(0,n.fillParamsToSession)(o,i.namespaces,i.optionalNamespaces,this.sessionConfig),(0,t.logDebug)(`signClient: connect: session ${JSON.stringify(o)}`),i.signRequest&&(yield(0,r.connectMethodsResponseUpdate)(o,i.signRequest)),s(o)})))).catch((e=>{(0,t.logDebug)(`signClient: connect: catch ${JSON.stringify(e)}`),this.events.emit("connect_error",e),a(e)}))}catch(Ye){(0,t.logDebug)(`signClient: connect:  ${JSON.stringify(Ye)}`),a(Ye)}}))))})),this.restoreconnect=t=>e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{this.engine.restoreconnect(t,(t=>{t?e(t):n()}))}))})),this.reject=t=>e(this,void 0,void 0,(function*(){})),this.request=n=>e(this,void 0,void 0,(function*(){return new Promise(((r,o)=>e(this,void 0,void 0,(function*(){var e,i;(0,t.logDebug)("clint request --params>>>> >",null===(e=this.sessionConfig)||void 0===e?void 0:e.openUniversalUrl,(0,t.safeJsonStringify)(n));try{(null===(i=this.sessionConfig)||void 0===i?void 0:i.openUniversalUrl)&&(0,t.isIos)()&&this.openOKXWallet(),yield this.engine.send(n,{resolve:e=>{if(delete e.requestId,(0,t.logDebug)("clint request --response >",(0,t.safeJsonStringify)(e)),"error"in e&&e.error){let n=e.error;o(new t.OKXConnectError(e.error.code,e.method+":"+n.message))}else r(e)},onAck:()=>{var e;!(0,t.isIos)()&&(null===(e=this.sessionConfig)||void 0===e?void 0:e.openUniversalUrl)&&this.openOKXWallet()}})}catch(AO){(0,t.logDebug)("clint request --error:",AO),o(AO)}}))))})),this.disconnect=()=>e(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this.engine.send({method:"disconnect"},{onAck:()=>{e()}},864e5).catch((e=>{console.log(`disconnect : ${JSON.stringify(e)}`),t(e)}))}))})),this.engine=new t.Engine(i.name),this.events=s,this.metadata=i}setAccountChangeListener(e){this.engine.setAccountChangeListener(e)}openOKXWallet(){(0,t.logDebug)("bridge-provider ==>> connect_5"),this.engine.openWallet({tmaReturnUrl:this.sessionConfig.tmaReturnUrl})}syncAllAddress(){return e(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{this.engine.send({method:"sync_all_addresses"},{resolve:o=>{if(delete o.requestId,(0,t.logDebug)("clint syncAllAddress --response >",JSON.stringify(o)),"error"in o&&o.error){let e=o.error;n(new t.OKXConnectError(o.error.code,o.method+":"+e.message))}else{let t=o.result;e((0,r.syncResoonseToRequire)(t))}}}).catch((e=>{console.log(`disconnect : ${JSON.stringify(e)}`),n(e)}))}))}))}registerConnector(e){this.engine.registerConnector(e)}openWallet(e,t){this.engine.openWallet(e,t)}setConnectConnector(e){this.engine.setConnectConnector(e)}}return Gl.SignClient=i,Gl}var eu,tu={};function nu(){if(eu)return tu;eu=1;var e=tu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(tu,"__esModule",{value:!0}),tu.SolanaProvider=void 0;const t=kl(),n=Ja(),r=Cl(),o=Hl(),i=Ml();class s{constructor(e,t,n,r){this.name="solana",this.namespace=e.namespace,this.events=r,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(t){return e(this,void 0,void 0,(function*(){if((0,n.logDebug)("solana request --args--string>",JSON.stringify(t)),(0,n.logDebug)("solana provider namespace: ",this.namespace),this.namespace.methods.includes(t.method))return this.client.request(t);throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(t.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,r.getChainId)(t),o=(0,r.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,o);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t;if(n){return new i.JsonRpcProvider(new o.JsonRpcConnection(n,(0,r.getGlobal)("disableProviderPing")))}}getPubkey(e){return this.getWalletAddress(e)}getWalletAddress(e){return e||(null==(e=this.namespace.defaultChain)?void 0:e.startsWith("solana"))||(e=`solana:${e}`),this.namespace.accounts.filter((function(t){return t.split(":").length>2&&t.startsWith(e)})).map((function(e){return e.split(":")[2]}))[0]}showRequestModal(e){return!0}}return tu.SolanaProvider=s,tu.default=s,tu}var ru,ou={};function iu(){if(ru)return ou;ru=1;var e=ou.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(ou,"__esModule",{value:!0});const t=kl(),n=Ja(),r=Cl(),o=Hl(),i=Ml();return ou.default=class{constructor(e,t,r,o){this.name=n.NameSpaceKeyBtc,this.namespace=e.namespace,this.events=o,this.client=r,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(t){return e(this,void 0,void 0,(function*(){return(0,n.logDebug)("btc request --args--string>",JSON.stringify(t)),(0,n.logDebug)("btc provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(t.method)?this.client.request(t):this.getHttpProvider().request(t)}))}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(t.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,r.getChainId)(t),o=(0,r.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,o);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const s=t;if(s){return new i.JsonRpcProvider(new o.JsonRpcConnection(s,(0,r.getGlobal)("disableProviderPing")))}(0,n.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return!0}},ou}var su,au={};function cu(){if(su)return au;su=1;var e=au.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(au,"__esModule",{value:!0});const t=kl(),n=Ja(),r=Cl(),o=Hl(),i=Ml();return au.default=class{constructor(e,t,n,r){this.name="aptos",this.namespace=e.namespace,this.events=r,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(t){return e(this,void 0,void 0,(function*(){if((0,n.logDebug)("aptos request --args--string>",(0,n.safeJsonStringify)(t)),(0,n.logDebug)("aptos provider namespace: ",this.namespace),this.namespace.methods.includes(t.method))return this.client.request(t);throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(t.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,r.getChainId)(t),o=(0,r.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,o);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t;if(n){return new i.JsonRpcProvider(new o.JsonRpcConnection(n,(0,r.getGlobal)("disableProviderPing")))}}showRequestModal(e){return!0}},au}var lu,uu={};function du(){if(lu)return uu;lu=1;var e=uu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},t=uu.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(uu,"__esModule",{value:!0});const n=kl(),r=Ja(),o=Cl(),i=Hl(),s=Ml();return uu.default=class{constructor(e,t,n){this.name=r.NameSpaceKeyTON,this.namespace=e.namespace,this.events=n,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}isRecord(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}request(n){return e(this,void 0,void 0,(function*(){var e,o,i,s;if((0,r.logDebug)("TONProvider request --args--string>",JSON.stringify(n)),(0,r.logDebug)("TONProvider request provider namespace: ",this.namespace),this.namespace.methods.includes(n.method)){if(!n.params)throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params is nil");if(this.isRecord(n.params)){const a=n.params,{validUntil:c}=a,l=t(a,["validUntil"]);let u=null===(o=null===(e=this.namespace.payload)||void 0===e?void 0:e.ton_addr)||void 0===o?void 0:o.address;"from"in l&&(u=l.from||(null===(s=null===(i=this.namespace.payload)||void 0===i?void 0:i.ton_addr)||void 0===s?void 0:s.address)),n.params.from=u,n.params.network=this.getDefaultChain(),n.params.valid_until=c;let d=yield this.client.request(n);if(this.isRecord(d)&&"result"in d){const e={boc:d.result.toString()};return(0,r.logDebug)("TONProvider request provider response: ",JSON.stringify(d)),(0,r.logDebug)("TONProvider request provider result: ",JSON.stringify(e)),e}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton_send request response is nil")}throw new r.OKXConnectError(r.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"ton request params type add nil")}return this.getHttpProvider().request(n)}))}requestAccounts(){return this.getAccounts()}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(n.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){var e,t;const n=this.namespace.accounts;if((0,r.logDebug)("ton getAccounts accounts :",n),(0,r.logDebug)("ton getAccounts .namespace :",JSON.stringify(this.namespace)),!n)return[];let o=null===(t=null===(e=this.namespace.payload)||void 0===e?void 0:e.ton_addr)||void 0===t?void 0:t.address;return(0,r.logDebug)("ton getAccounts address :",o),o?[o]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,o.getChainId)(t),r=(0,o.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,r);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if((0,r.logDebug)("[RPC] get http provider:",e,t),void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&((0,r.logDebug)("setHttpProvider",e,t),this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t;if(n){return new s.JsonRpcProvider(new i.JsonRpcConnection(n,(0,o.getGlobal)("disableProviderPing")))}(0,r.logError)(`No RPC url provided for chainId: ${e}`)}showRequestModal(e){return"ton_sendTransaction"===e.method}},uu}var hu,fu={};function pu(){if(hu)return fu;hu=1;var e=fu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(fu,"__esModule",{value:!0});const t=kl(),n=Ja(),r=Cl(),o=Hl(),i=Ml();return fu.default=class{constructor(e,t,r){this.name=n.NameSpaceKeyCosmos,this.namespace=e.namespace,this.events=r,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(t){return e(this,void 0,void 0,(function*(){if((0,n.logDebug)("cosmos request --args--string>",JSON.stringify(t)),(0,n.logDebug)("cosmos provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(t.method))return this.client.request(t);throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(t.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,r.getChainId)(t),o=(0,r.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,o);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t;if(n){return new i.JsonRpcProvider(new o.JsonRpcConnection(n,(0,r.getGlobal)("disableProviderPing")))}}showRequestModal(e){return!0}},fu}var gu,vu={};function mu(){if(gu)return vu;gu=1;var e=vu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(vu,"__esModule",{value:!0});const t=kl(),n=Ja(),r=Cl(),o=Hl(),i=Ml();return vu.default=class{constructor(e,t,r){this.name=n.NameSpaceKeyTron,this.namespace=e.namespace,this.events=r,this.client=t,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(t){return e(this,void 0,void 0,(function*(){if((0,n.logDebug)("tron request --args--string>",JSON.stringify(t)),(0,n.logDebug)("tron provider namespace: ",JSON.stringify(this.namespace)),this.namespace.methods.includes(t.method))return this.client.request(t);throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Please upgrade OKX APP")}))}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(t.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,r.getChainId)(t),o=(0,r.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,o);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t;if(n){return new i.JsonRpcProvider(new o.JsonRpcConnection(n,(0,r.getGlobal)("disableProviderPing")))}}showRequestModal(e){return!0}},vu}var yu,bu,wu={};function Cu(){if(yu)return wu;yu=1;var e=wu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(wu,"__esModule",{value:!0});const t=kl(),n=Ja(),r=Cl(),o=Hl(),i=Ml();return wu.default=class{constructor(e,t,n,r){this.name="starknet",this.namespace=e.namespace,this.events=r,this.client=n,this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders(),this.name=t}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(t){return e(this,void 0,void 0,(function*(){if((0,n.logDebug)("starknet request --args--string>",JSON.stringify(t)),(0,n.logDebug)("starknet provider namespace: ",this.namespace),this.namespace.methods.includes(t.method))return this.client.request(t);throw new n.OKXConnectError(n.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED,"Wallet doesn't support"+t.method)}))}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(t.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const n=(0,r.getChainId)(t),o=(0,r.getRpcUrl)(t,this.namespace);let i=this.createHttpProvider(n,o);i&&(e[n]=i)})),e}getHttpProvider(){const e=`${this.chainId}`,t=this.httpProviders[e];if(void 0===t)throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t;if(n){return new i.JsonRpcProvider(new o.JsonRpcConnection(n,(0,r.getGlobal)("disableProviderPing")))}}showRequestModal(e){return!0}},wu}function _u(){if(bu)return Rl;bu=1;var e=Rl.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},t=Rl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rl,"__esModule",{value:!0}),Rl.OKXUniversalProvider=void 0;const n=Fl(),r=zl(),o=kl(),i=t(pt()),s=Zl(),a=Ja(),c=Ja(),l=Yl(),u=t(nu()),d=t(iu()),h=t(cu()),f=t(du()),p=t(pu()),g=t(mu()),v=Cl(),m=El(),y=_l(),b=t(Cu());let w=class t{static init(n){return e(this,void 0,void 0,(function*(){let e;return(0,c.logDebug)("OKXUniversalProvider init() called"),(0,c.checkMetaData)(n.dappMetaData),(0,v.setGlobal)("disableProviderPing",!0),window&&window.okxConnectUniversalinwindow&&window.okxConnectUniversalinwindow instanceof t?((0,c.logDebug)("OKXUniversalConnect init() old called"),e=window.okxConnectUniversalinwindow):((0,c.logDebug)("OKXUniversalConnect init() new called"),e=new t(n),window&&(window.okxConnectUniversalinwindow=e),yield e.initialize()),(0,c.getDefaultReporter)().configVersionAndSide("universalprovider-1.5.2","dapp",e.providerOpts.dappMetaData.name),e}))}constructor(e){this.rpcProviders={},this.events=new i.default,e.connector&&0!=e.connector.length||(e.connector=[c.AppwalletConnector.getConnector(),c.TgwalletConnector.getConnector()]),this.providerOpts=e}request(t,n){return e(this,void 0,void 0,(function*(){if((0,c.logDebug)("OKXUniversalProvider request() called"),(0,c.reportLog)("OKXUniversalProvider request() called"),!this.connected())throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);(0,c.logDebug)("OKXUniversalProvider request()  connected ");const{namespace:e,requestParam:r}=this.buildRequestParamFromRequest(t,n);return yield this.getProvider(e).request(r)}))}buildRequestParamFromRequest(e,t){var n;(0,c.logDebug)("UniversalProvider request args >>>>>>>: ",t,(0,c.safeJsonStringify)(e));let[r,o]=this.validateChain(t);if(!this.session)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Please call connect() before request()");let i=Object.keys(this.session.namespaces);if(!t&&i&&i.length>1)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,"Multiple chains have been linked, the request method requires chain");let s=(0,a.replaceChainNameToChainId)(`${r}:${o}`);null!=s&&(r=s.split(":")[0],o=s.split(":")[1]);return{namespace:r,requestParam:Object.assign(Object.assign({},e),{chainId:`${r}:${o}`,redirect:null!==(n=e.redirect)&&void 0!==n?n:this.sessionConfig.redirect})}}enable(){return e(this,void 0,void 0,(function*(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.session){if(!this.connectOpts)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");yield this.connect(this.connectOpts)}return yield this.requestAccounts()}))}disconnect(){return e(this,void 0,void 0,(function*(){if((0,c.logDebug)("OKXUniversalProvider disconnect() called"),(0,c.reportLog)("provider disconnect called"),!this.session)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR);return new Promise((t=>e(this,void 0,void 0,(function*(){let n=!1;const r=()=>e(this,void 0,void 0,(function*(){n||(n=!0,yield this.disconnectAndEmit(),yield this.cleanup(),t(),(0,c.logDebug)("UniversalProvider disconnect Disconnected"),(0,c.reportLog)("provider disconnect disconnected"))}));try{yield this.client.disconnect(),yield r()}catch(AO){yield r()}}))))}))}disconnectAndEmit(){var e,t;this.client.engine.connectManagerDisconnect(),this.events.emit("disconnect",{topic:null===(e=this.session)||void 0===e?void 0:e.topic}),this.events.emit("session_delete",{topic:null===(t=this.session)||void 0===t?void 0:t.topic})}replaceNamespace(e,t){var n,r;let o=null===(n=e.namespaces)||void 0===n?void 0:n[t];if(null!=o){let n=this.replaceNamespaceInner(o);null!=e.namespaces&&t in e.namespaces&&null!=n&&(e.namespaces[t]=n)}let i=null===(r=e.optionalNamespaces)||void 0===r?void 0:r[t];if(null!=i){let n=this.replaceNamespaceInner(i);null!=e.optionalNamespaces&&t in e.optionalNamespaces&&null!=n&&(e.optionalNamespaces[t]=n)}return e}replaceNamespaceInner(e){var t;return null!=e&&(e.chains=null===(t=e.chains)||void 0===t?void 0:t.map((e=>(0,a.replaceChainNameToChainId)(e))),null!=e.defaultChain&&(e.defaultChain=(0,a.replaceChainNameToChainId)(e.defaultChain))),e}replaceSessionAptos(e,t){var n;let r=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n[t];if(null!=r&&null!=r.chains){r.chains=r.chains.map((e=>(0,a.replaceChainIdToChainName)(e))),r.accounts=r.accounts.map((e=>(0,a.replaceChainIdToChainName)(e)));let n={};Object.keys(r.extra||{}).forEach(((r,o)=>{(0,a.replaceChainIdToChainName)(r),n[(0,a.replaceChainIdToChainName)(r)]=Object.values((null==e?void 0:e.namespaces[t].extra)||{})[o]})),r.extra=n}(0,c.logDebug)("replaceSessionAptos",e)}connected(){(0,c.logDebug)("OKXUniversalProvider connected() called"),(0,c.reportLog)("provider connected called");let e=()=>{try{this.cleanup(),this.client.engine.connectManagerDisconnect()}catch(AO){(0,c.logDebug)("Error during disconnect:",AO)}};try{return!!this.session&&(!!this.client.engine.getCurrentConnectionReady(Object.keys(this.session.namespaces))||(e(),!1))}catch(AO){return e(),!1}}connectAndSign(t,n){return e(this,void 0,void 0,(function*(){(0,c.logDebug)("OKXUniversalProvider connectAndSign() called");const e=Object.assign(Object.assign({},t),{signRequest:n});return(0,c.logDebug)("OKXUniversalProvider connectAndSign() opts:",JSON.stringify(t)),(0,c.logDebug)("OKXUniversalProvider connectAndSign() signRequest:",JSON.stringify(n)),yield this.connect(e)}))}connect(t){return e(this,void 0,void 0,(function*(){if((0,c.logDebug)("OKXUniversalProvider connect() called"),(0,c.reportLog)("provider connect called"),!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(this.connected())return this.session;t=this.replaceNamespace(t,"aptos"),t=this.replaceNamespace(t,"solana"),(0,c.logDebug)("OKXUniversalProvider connect >>>>",JSON.stringify(t)),void 0===t.sessionConfig&&(t.sessionConfig={}),void 0===t.sessionConfig.openUniversalUrl&&(t.sessionConfig.openUniversalUrl=(0,c.isMobileUserAgent)()),this.setNamespaces(t);try{(0,c.logDebug)(`UniversalProvider connect opts.stringify ====> ${JSON.stringify(t)}`);let e=yield this.client.connect(t);if((0,c.logDebug)(`UniversalProvider connect success ====> ${JSON.stringify(e)}`),e){if(this.replaceSessionAptos(e,"aptos"),this.replaceSessionAptos(e,"solana"),this.session=e,this.client.session=e,this.setConnectConnector(),(0,c.logDebug)("OKXUniversalProvider connect success opts>>>>",JSON.stringify(t)),this.onConnect(),t.signRequest&&t.signRequest.length>0){let e=t.signRequest[0],n=[];"undefined"!=typeof window&&window&&window.okxConnectUniversalUIinwindow?((0,c.logDebug)("OKXUniversalProvider connect success, us UI SDK>>>>"),this.session.signResponse&&this.session.signResponse.length>0&&(n=this.session.signResponse)):((0,c.logDebug)("OKXUniversalProvider connect success, us Universal SDK>>>>"),this.session.signResponse&&this.session.signResponse.length>0?n=this.session.signResponse:n.push((0,m.creatNotSupportMethodItemReplay)(e))),(0,c.logDebug)(`UniversalProvider connect success connectRequestReply ====> ${JSON.stringify(n)}`),setTimeout((()=>{this.events.emit("connect_signResponse",n)}),100)}return e}return}catch(Ye){throw(0,c.logDebug)("UniversalProvider connect error ====> ",JSON.stringify(Ye)),Ye}}))}syncAllAddresses(){return e(this,void 0,void 0,(function*(){if((0,y.syncAddressAvailable)(this.session.wallet))return this.client.syncAllAddress();throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.METHOD_NOT_SUPPORTED)}))}setConnectConnector(){var e;this.client.setConnectConnector(null===(e=this.session)||void 0===e?void 0:e.wallet)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}setDefaultChain(e,t){(0,c.logDebug)("OKXUniversalProvider setDefaultChain() called");try{if(!this.connected())return;const[n,r]=this.validateChain(e);this.getProvider(n).setDefaultChain(r,t)}catch(Ye){if(!/Please call connect/.test(Ye.message))throw Ye}}checkStorage(){return e(this,void 0,void 0,(function*(){let e=yield this.getFromStore("connectSession");if((0,c.logDebug)(e),e){(0,c.logDebug)("checkStorage error start");try{let t=e;this.session=t,this.client.session=this.session,this.setConnectConnector(),yield this.client.restoreconnect(t),this.sessionConfig=t.sessionConfig,this.client.sessionConfig=this.sessionConfig,(0,c.logDebug)("[evm u-provider] do reconnection",this.session),this.createProviders(),this.registerEventListeners(),setTimeout((()=>{this.events.emit("reconnect",{session:this.session})}),100)}catch(AO){yield this.cleanup(),(0,c.logDebug)(`checkStorage error ${JSON.stringify(AO)}`)}}}))}initialize(){return e(this,void 0,void 0,(function*(){(0,c.logDebug)("OKXUniversalProvider initialize() called"),(0,c.reportLog)("provider initialize called");const e=Object.assign({url:window.location.hostname,origin:window.location.origin},this.providerOpts.dappMetaData);this.client=new s.SignClient(e,this.events),this.registerConnector(this.providerOpts.connector),yield this.checkStorage()}))}createProviders(){if(!this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client not initialized");if(!this.connected())throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).filter((e=>{var t,n;return(null===(n=null===(t=this.session.namespaces[e])||void 0===t?void 0:t.accounts)||void 0===n?void 0:n.length)>0})).map((e=>(0,l.parseNamespaceKey)(e))))];this.rpcProviders={},e.forEach((e=>{if(!this.session)return;const t=this.session.namespaces[e];switch((0,c.logDebug)("init eip155 >> ",t),e){case"eip155":const o={namespace:t};this.rpcProviders[e]=new n.Eip155Provider(o,this.client,this.events);break;case"solana":const i={namespace:t};let s=new u.default(i,"solana",this.client,this.events);this.rpcProviders[e]=s;let a=new u.default(i,"sonic",this.client,this.events);this.rpcProviders.sonic=a;let c=new u.default(i,"svm",this.client,this.events);this.rpcProviders.svm=c;let l=new u.default(i,"soon",this.client,this.events);this.rpcProviders.soon=l;let v=new u.default(i,"eclipse",this.client,this.events);this.rpcProviders.eclipse=v;break;case"ton":const m={namespace:t};let y=new f.default(m,this.client,this.events);this.rpcProviders[e]=y;break;case"sui":const w={namespace:t};let C=new r.SuiProvider(w,this.client,this.events);C.name="sui",this.rpcProviders[e]=C;break;case"btc":const _={namespace:t};let O=new d.default(_,"btc",this.client,this.events);this.rpcProviders.btc=O;let E=new d.default(_,"fractal",this.client,this.events);this.rpcProviders.fractal=E;break;case"aptos":let S=new h.default({namespace:t},"aptos",this.client,this.events);this.rpcProviders[e]=S;let R=new h.default({namespace:t},"movement",this.client,this.events);this.rpcProviders.movement=R;break;case"cosmos":let T=new p.default({namespace:t},this.client,this.events);this.rpcProviders[e]=T;break;case"tron":let N=new g.default({namespace:t},this.client,this.events);this.rpcProviders[e]=N;break;case"starknet":let A=new b.default({namespace:t},"starknet",this.client,this.events);this.rpcProviders[e]=A}}))}registerEventListeners(){if(void 0===this.client)throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Sign Client is not initialized");this.client.engine.addDisconnectListener((()=>{this.disconnectAndEmit(),this.cleanup()})),this.on(o.PROVIDER_EVENTS.DEFAULT_CHAIN_CHANGED,(e=>{this.onChainChanged(e)})),this.on(o.PROVIDER_EVENTS.UPDATE_NAMESPACES,(e=>{if(e){const t=Object.keys(e)[0];this.session&&(this.session.namespaces[t]=e[t],this.session&&(this.persist("connectSession",this.session),this.events.emit("session_update",this.session)),(0,c.logDebug)("PROVIDER_EVENTS.UPDATE_NAMESPACES this.session... ->>>",JSON.stringify(this.session)))}}))}getProvider(e){return(0,c.logDebug)("current get providers",this.rpcProviders),(0,c.logDebug)("query namespace: ",e),this.rpcProviders[e]}setNamespaces(e){this.connectOpts=e;const{namespaces:t,sessionConfig:n}=e,r={origin:window.location.origin,url:window.location.hostname,name:this.providerOpts.dappMetaData.name,icon:this.providerOpts.dappMetaData.icon,manifestUrl:this.providerOpts.dappMetaData.manifestUrl};this.sessionConfig=Object.assign({dappInfo:r},n),(0,c.logDebug)("setNamespaces sessionConfig>>>",this.sessionConfig),this.client.sessionConfig=this.sessionConfig,this.persist("sessionConfig",n)}validateChain(e){var t;let[n,r]=(null==e?void 0:e.split(":"))||["",""];if(!this.session||!this.session.namespaces||!Object.keys(this.session.namespaces).length)return(0,c.logDebug)("get name & chain",n,r),[n,r];if(n){if(!this.isChainNamespaceInSession(n))throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(r&&e){(0,c.logDebug)("this.session.namespaces --\x3e> ",n,JSON.stringify(this.session.namespaces));const r=null===(t=this.session.namespaces[n])||void 0===t?void 0:t.chains;if((0,c.logDebug)("get chainsArr & chain",JSON.stringify(r),e),r&&!r.includes(e))throw new c.OKXConnectError(c.OKX_CONNECT_ERROR_CODES.NOT_CONNECTED_ERROR,`Namespace not include the chain '${e}'`)}}if(n&&r)return(0,c.logDebug)("get name & chain",n,r),[n,r];let o=(0,l.parseNamespaceKey)(Object.keys(this.session.namespaces)[0]);const i=this.rpcProviders[o].getDefaultChain();return(0,c.logDebug)("get default chain:",i),[o,i]}isChainNamespaceInSession(e){var t,n;if(Object.keys((null===(t=this.session)||void 0===t?void 0:t.namespaces)||{}).map((e=>(0,l.parseNamespaceKey)(e))).includes(e))return!0;let r=!1;return Object.values((null===(n=this.session)||void 0===n?void 0:n.namespaces)||{}).forEach((t=>{t.chains.forEach((t=>{t.split(":")[0]==e&&(r=!0)}))})),r}requestAccountsWithNamespace(e){return this.getProvider(e).requestAccounts()}requestDefaultChainWithNamespace(e){return this.getProvider(e).getDefaultChain()}requestAccounts(){return e(this,void 0,void 0,(function*(){const[e]=this.validateChain();return yield this.getProvider(e).requestAccounts()}))}onChainChanged(e){var t;if(!(null===(t=this.session)||void 0===t?void 0:t.namespaces))return;const[n,r]=this.validateChain(e);r&&(this.session.namespaces[n]&&(this.session.namespaces[n].defaultChain=r,this.persist("connectSession",this.session)),this.events.emit("chainChanged",r))}onConnect(){this.createProviders(),this.session&&(this.persist("connectSession",this.session),console.log("window.okxwallet save session:",Date.now())),this.events.emit("connect",{session:this.session}),this.registerEventListeners()}cleanup(){return e(this,void 0,void 0,(function*(){this.session=void 0,this.client.session=void 0,this.setConnectConnector(),this.sessionProperties=void 0,this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),this.persist("connectSession",void 0)}))}persist(e,t){return(0,c.logDebug)("[evm u-provider] persisit data",e,t),this.client.engine.saveSessionContent(e,t)}getFromStore(t){return e(this,void 0,void 0,(function*(){return this.client.engine.getSessionContent(t)}))}showRequestModal(e,t){try{const{namespace:n,requestParam:r}=this.buildRequestParamFromRequest(e,t);return this.getProvider(n).showRequestModal(r)}catch(AO){return!1}}openWallet(e,t){this.client.openWallet(e,t)}registerConnector(e){this.client.registerConnector(e),this.client.setAccountChangeListener((e=>{(0,c.logDebug)("accountChangeListener sessionï¼š",this.events.listenerCount("accountChanged"),JSON.stringify(e));try{e&&this.events.listenerCount("accountChanged")&&(this.replaceSessionAptos(e,"aptos"),this.replaceSessionAptos(e,"solana"),this.session=e,this.client.session=e,this.session&&(this.persist("connectSession",this.session),console.log("window.okxwallet save session:",Date.now())),this.setConnectConnector(),this.createProviders(),this.events.emit("accountChanged",this.session))}catch(Ye){(0,c.logDebug)("setAccountChangeListener error:",JSON.stringify(Ye))}}))}};return Rl.OKXUniversalProvider=w,Rl.default=w,Rl}var Ou,Eu={};function Su(){if(Ou)return Eu;Ou=1;var e=Eu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.OKXBtcProvider=void 0;const t=ju(),n=Ja();let r=class{constructor(e){this.caip=["btc:mainnet","fractal:mainnet"],this.provider=e}getAddressForChainId(e){var n,r;if(null==this.checkChainId(e))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let o=null===(r=null===(n=this.provider.session)||void 0===n?void 0:n.namespaces.btc)||void 0===r?void 0:r.accounts.filter((function(t){return t.startsWith(e)}));if(null==o||o.length<0)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"no connected account");return o[0].split(":")[2]}getAccount(e){var n,r,o;if(null==this.checkChainId(e))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let i=null===(o=null===(r=null===(n=this.provider.session)||void 0===n?void 0:n.namespaces.btc)||void 0===r?void 0:r.extra)||void 0===o?void 0:o[e],s="";return null!=i&&(s=i.compressedPublicKey),{address:this.getAddressForChainId(e),publicKey:s}}signMessage(n,r,o){return e(this,void 0,void 0,(function*(){if(null==this.checkChainId(n))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signMessage parmas error");let e={signStr:r,from:this.getAddressForChainId(n)};o&&(e.type=o);try{const t=yield this.provider.request({method:"btc_signMessage",params:e},n);if("result"in t)return t.result;return t.error}catch(Ye){if(Ye instanceof t.OKXConnectError)throw Ye;throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}sendBitcoin(n,r,o,i){return e(this,void 0,void 0,(function*(){if(null==this.checkChainId(n))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let e={from:this.getAddressForChainId(n),to:r,value:(o/1e8).toString()};(null==i?void 0:i.feeRate)&&(e.satBytes=i.feeRate.toString());let s=yield this.send(n,e);return void 0!==s&&"txhash"in s?s.txhash:s}))}send(n,r){return e(this,void 0,void 0,(function*(){if(null==this.checkChainId(n))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(!this.checkParameters(r,"to","value"))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method send parmas  error");r.from=this.getAddressForChainId(n);try{const e=yield this.provider.request({method:"btc_send",params:r},n);if("result"in e)return{txhash:e.result};return e.error}catch(Ye){if(Ye instanceof t.OKXConnectError)throw Ye;throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${Ye}`)}}))}signPsbt(t,n,r){return e(this,void 0,void 0,(function*(){return new Promise(((e,o)=>{this.signPsbts(t,[n],[r]).then((t=>{let n=JSON.parse(t);e(n[0])})).catch((e=>{o(e)}))}))}))}signPsbts(n,r,o){return e(this,void 0,void 0,(function*(){if(null==this.checkChainId(n))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let e={psbtHexs:r,options:o};e.from=this.getAddressForChainId(n);try{const t=yield this.provider.request({method:"btc_signPsbts",params:e},n);if("result"in t)return t.result}catch(Ye){if(Ye instanceof t.OKXConnectError)throw Ye;throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${Ye}`)}}))}signAndPushPsbt(n,r,o){return e(this,void 0,void 0,(function*(){if(null==this.checkChainId(n))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if(void 0===r)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signPsbts params error");let e={psbtHex:r,options:o};e.from=this.getAddressForChainId(n);try{const t=yield this.provider.request({method:"btc_signAndPushPsbt",params:e},n);if("result"in t)return JSON.parse(t.result);return t.error}catch(Ye){if(Ye instanceof t.OKXConnectError)throw Ye;throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`the method send request error: ${Ye}`)}}))}sendInscription(n,r,o,i){return e(this,void 0,void 0,(function*(){let e={address:r,inscriptionId:o,options:i};if(null==this.checkChainId(n))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");if("undefined"===r)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method sendInscription params error");var s=0;i&&"feeRate"in i&&(s=i.feeRate);let a=this.getAddressForChainId(n);var c=7;if("undefined"!==o){let e="-Atomicals",t="-Ordinals";(null==o?void 0:o.toLowerCase().endsWith(e.toLowerCase()))?(c=8,o=this.removeSuffix(o,e)):(null==o?void 0:o.toLowerCase().endsWith(t.toLowerCase()))&&(o=this.removeSuffix(o,t))}let l={scenario:5,feeRate:s,txType:"20",to:r,batchBean:[{coinAmount:"1",nftId:o,protocolId:c,coinId:"",inscriptionId:"",from:a}],extension:e};try{const e=yield this.provider.request({method:"btc_sendInscription",params:l},n);if("result"in e)return e.result;return e.error}catch(Ye){if(Ye instanceof t.OKXConnectError)throw Ye;throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"the method signTransaction request error")}}))}sendRunes(r,o,i,s,a){return e(this,void 0,void 0,(function*(){try{if(!(r&&o&&i&&s))throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"The parameter is empty. Please check");let e,c=this.checkChainId(r);if(null!=c&&(c.startsWith("btc")?e=13:c.startsWith("fractal")&&(e=16)),null==c||null==e)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let l={fromAddress:this.getAddressForChainId(r),protocolId:e,address:o,runeid:i,amount:s,options:a};(0,n.logDebug)("OKXBtcProvider sendRunes --\x3e",JSON.stringify(l));return(yield this.provider.request({method:"btc_sendRunes",params:l},r)).result}catch(e){throw e}}))}inscribeTransfer(r,o,i){return e(this,void 0,void 0,(function*(){try{if(!r||!o||!i)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"The parameter is empty. Please check");let e,s=this.checkChainId(r);if(null!=s&&(s.startsWith("btc")?e=1:s.startsWith("fractal")&&(e=14)),null==s||null==e)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"invalid chainId");let a={fromAddress:this.getAddressForChainId(r),protocolId:e,ticker:o,amount:i};(0,n.logDebug)("OKXBtcProvider inscribeTransfer --\x3e",JSON.stringify(a));yield this.provider.request({method:"btc_inscribeTransfer",params:a},r)}catch(e){throw e}}))}removeSuffix(e,t){return e.endsWith(t)?e.slice(0,e.length-t.length):e}checkParameters(e,...t){var n=[];return t.forEach((t=>{`${t}`in e||n.push(t)})),!(n.length>0)||(console.log("not find key: ",n.join(",")),!1)}checkChainId(e){if(this.caip.includes(e)){let[t,n]=e.split(":");return t}}};return Eu.OKXBtcProvider=r,Eu.default=r,Eu}var Ru,Tu={};function Nu(){if(Ru)return Tu;Ru=1;var e=Tu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.OKXCosmosProvider=void 0;const t=Ja();return Tu.OKXCosmosProvider=class{constructor(e){this.provider=e}getAccount(e){var n,r,o,i,s,a;(0,t.logDebug)("OKXCosmosProvider getAccount chainId:",e),(0,t.logDebug)("OKXCosmosProvider getAccount namespaces:",JSON.stringify(null===(n=this.provider.session)||void 0===n?void 0:n.namespaces));let c=null===(o=null===(r=this.provider.session)||void 0===r?void 0:r.namespaces[t.NameSpaceKeyCosmos])||void 0===o?void 0:o.accounts.filter((function(t){return t.startsWith(e)}))[0];if((0,t.logDebug)("OKXCosmosProvider getAccount account:",JSON.stringify(c)),!c)return;const l=c.split(":"),u=c.split(":")[2];(0,t.logDebug)("OKXCosmosProvider getAccount address:",u);let d=null===(a=null===(s=null===(i=this.provider.session)||void 0===i?void 0:i.namespaces[t.NameSpaceKeyCosmos])||void 0===s?void 0:s.extra)||void 0===a?void 0:a[`${l[0]}:${l[1]}`],h="";return null!=d&&(h=d.publicKey,console.log("aptos_publicKey",h)),u?{algo:"secp256k1",address:u,bech32Address:u,pubKey:this.hexToUint8Array(h)}:void 0}signArbitrary(t,n,r){return e(this,void 0,void 0,(function*(){const e=window.btoa(r),o={chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:n,data:e}}],memo:""};let i={chainId:t,method:"cosmos_signArbitrary",params:{signer:n,chain_id:t.split(":")[1],data:o}};try{const e=yield this.provider.request(i,t);if("result"in e)return"string"==typeof e.result?JSON.parse(e.result):e.result;return e.error}catch(Ye){return Ye}}))}signAmino(t,n,r,o){return e(this,void 0,void 0,(function*(){if("sign/MsgSignData"==r.msgs[0].type){let e={chainId:t,method:"cosmos_signArbitrary",params:{signer:n,chain_id:t.split(":")[1],data:r}};try{const n=yield this.provider.request(e,t);if("result"in n)return n.result;return n.error}catch(Ye){return Ye}}else{let e={chainId:t,method:"cosmos_signAmino",params:{signer:n,chainId:t.split(":")[1],sign_doc:r,signOptions:o}};try{const n=yield this.provider.request(e,t);if("result"in n){const e=JSON.parse(n.result);return console.log("signdoc",r,e.signDoc),r.fee=e.signDoc.fee,{signed:r,signature:e.signature}}return n.error}catch(Ye){return Ye}}}))}signDirect(t,n,r,o){return e(this,void 0,void 0,(function*(){const e={bodyBytes:this.bufferToHex(r.bodyBytes),authInfoBytes:this.bufferToHex(r.authInfoBytes),chainId:r.chainId,accountNumber:r.accountNumber?r.accountNumber.toString():null,signOptions:o||null};let i={chainId:t,method:"cosmos_signDirect",params:{signer:n,chainId:t.split(":")[1],sign_doc:e}};try{const e=yield this.provider.request(i,t);if("result"in e){const t=JSON.parse(e.result);return console.log("signdirect result",t),r.authInfoBytes=this.messageToBuffer(t.signDoc.authInfoBytes),{signed:r,signature:t.signature}}}catch(Ye){return Ye}}))}messageToBuffer(e){var t=Uint8Array.from([]);try{t="string"==typeof e?this.hexToUint8Array(e.replace("0x","")):Uint8Array.from(e)}catch(n){console.log(`messageToBuffer error: ${n}`)}return t}bufferToHex(e){let t=[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("");return"0x"+t}hexToUint8Array(e){if(e.length%2!=0)throw"Invalid hexString";for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=parseInt(e.substr(n,2),16);if(isNaN(r))throw"Invalid hexString";t[n/2]=r}return t}},Tu}var Au,Pu={};function xu(){if(Au)return Pu;Au=1;var e=Pu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Pu,"__esModule",{value:!0}),Pu.OKXTonProvider=void 0;const t=ju(),n=Ja();let r=class{constructor(e){this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.provider=e,this.provider.on("connect",(()=>{let e=this.wallet();(0,n.logDebug)("OKXTONProvider event connect:",JSON.stringify(e)),this.statusChangeSubscriptions.forEach((t=>t(e)))})),this.provider.on("reconnect",(()=>{let e=this.wallet();(0,n.logDebug)("OKXTONProvider event reconnect:",JSON.stringify(e)),this.statusChangeSubscriptions.forEach((t=>t(e)))})),this.provider.on("disconnect",(()=>{(0,n.logDebug)("OKXTONProvider event disconnect:"),this.statusChangeSubscriptions.forEach((e=>e(null)))})),this.provider.on("connect_error",(e=>{(0,n.logDebug)("OKXTONProvider event connect_error:",JSON.stringify(e)),this.statusChangeErrorSubscriptions.forEach((t=>t(e)))}))}connected(){return!!this.provider.connected()&&!!this.provider.session.namespaces.ton}account(){try{if(!this.provider.session)return null;let e=this.provider.session.namespaces.ton;if(!e||!e.payload||!e.payload.ton_addr)return null;let t=e.payload.ton_addr;return{address:t.address,chain:t.network,walletStateInit:t.walletStateInit,publicKey:t.publicKey}}catch(AO){return(0,n.logDebug)("OKXTONProvider account  error:",JSON.stringify(AO)),null}}wallet(){if(this.connected())try{let e=this.provider.session.wallet;const t={device:{platform:e.platform,appName:e.appName,appVersion:e.appVersion,maxProtocolVersion:e.maxProtocolVersion,features:["ton_sendTransaction"]},provider:"http",account:this.account()};let r=this.provider.session.namespaces.ton;return r&&r.payload&&r.payload.ton_proof&&(t.connectItems={tonProof:r.payload.ton_proof}),(0,n.logDebug)("OKXTONProvider wallet :",JSON.stringify(t)),t}catch(AO){return(0,n.logDebug)("OKXTONProvider wallet  error:",JSON.stringify(AO)),null}return null}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter((t=>t!==e)),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter((e=>e!==t)))}}sendTransaction(r){return e(this,void 0,void 0,(function*(){if(r.network&&r.network!==n.TONCHAIN.MAINNET)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"OKXTONProvider sendTransaction network error");if(r.network||(r.network=n.TONCHAIN.MAINNET),this.provider.session&&!r.from){const e=this.provider.requestAccountsWithNamespace("ton");r.from=e[0]}const e={method:"ton_sendTransaction",params:r};let o="ton:"+n.TONCHAIN.MAINNET;return(0,n.logDebug)("OKXTONProvider sendTransaction transaction----:",o,JSON.stringify(e)),this.provider.request(e,o)}))}};return Pu.OKXTonProvider=r,Pu.default=r,Pu}var Iu,ku={};function Du(){if(Iu)return ku;Iu=1;var e=ku.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(ku,"__esModule",{value:!0}),ku.OKXTronProvider=void 0;const t=Ja();return ku.OKXTronProvider=class{constructor(e){this.TRON_CHAIN_ID="tron:mainnet",this.provider=e}getChain(e){if(null==e&&(e=this.TRON_CHAIN_ID),e!=this.TRON_CHAIN_ID)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED,"The chainId:"+e+"is wrong for OKXTronProvider");return e}getAccount(e){var n,r,o,i,s;e=this.getChain(e);let a=null===(r=null===(n=this.provider.session)||void 0===n?void 0:n.namespaces[t.NameSpaceKeyTron])||void 0===r?void 0:r.accounts.filter((function(t){return t.startsWith(e)}))[0];if(!a)return;const c=a.split(":"),l=a.split(":")[2];let u=null===(s=null===(i=null===(o=this.provider.session)||void 0===o?void 0:o.namespaces[t.NameSpaceKeyTron])||void 0===i?void 0:i.extra)||void 0===s?void 0:s[`${c[0]}:${c[1]}`];return null!=u&&u.publicKey,l?{address:l}:void 0}stringToHex(e){let t="";for(let n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16).padStart(2,"0");return t}signMessage(t,n){return e(this,void 0,void 0,(function*(){let e={chainId:n=this.getChain(n),method:"tron_signMessage",params:{message:this.stringToHex(t)}};try{const t=yield this.provider.request(e,n);if("result"in t)return t.result;return t.error}catch(Ye){return Ye}}))}signMessageV2(t,n){return e(this,void 0,void 0,(function*(){let e={chainId:n=this.getChain(n),method:"tron_signMessageV2",params:{message:t}};try{const t=yield this.provider.request(e,n);if("result"in t)return t.result;return t.error}catch(Ye){return Ye}}))}signTransaction(t,n){return e(this,void 0,void 0,(function*(){n=this.getChain(n);let e={method:"tron_signTransaction",params:t};try{const t=yield this.provider.request(e,n);if("result"in t){let e;e="string"==typeof t.result?JSON.parse(t.result):t.result;let n={};n.visible=e.visible,n.txID=e.txID;let r={};return r.contract=e.raw_data.contract,r.expiration=e.raw_data.expiration,r.ref_block_bytes=e.raw_data.ref_block_bytes,r.fee_limit=e.raw_data.fee_limit,r.ref_block_hash=e.raw_data.ref_block_hash,r.timestamp=e.raw_data.timestamp,n.raw_data=r,n.raw_data_hex=e.raw_data_hex,n.signature=e.signature,n}}catch(Ye){return Ye}}))}signAndSendTransaction(t,n){return e(this,void 0,void 0,(function*(){n=this.getChain(n);let e={method:"tron_signAndSendTransaction",params:t};try{const t=yield this.provider.request(e,n);if("result"in t)return t.result}catch(Ye){return Ye}}))}},ku}var Ku,Mu,Lu={};function Uu(){if(Ku)return Lu;Ku=1;var e=Lu.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(AO){i(AO)}}function a(e){try{c(r.throw(e))}catch(AO){i(AO)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.OKXStarknetProvider=void 0;const t=Ja();return Lu.OKXStarknetProvider=class{constructor(e){this.STARKNET_CHAIN_ID="starknet:mainnet",this.provider=e}getChain(e){if(null==e&&(e=this.STARKNET_CHAIN_ID),e!=this.STARKNET_CHAIN_ID)throw new t.OKXConnectError(t.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED,"The chainId:"+e+"is wrong for OKXStarknetProvider");return e}getAccount(e){var n,r,o,i,s;let a=null===(r=null===(n=this.provider.session)||void 0===n?void 0:n.namespaces[t.NameSpaceKeyStarknet])||void 0===r?void 0:r.accounts.filter((function(t){return t.startsWith(e)}))[0];if(!a)return;const c=a.split(":"),l=a.split(":")[2];let u=null===(s=null===(i=null===(o=this.provider.session)||void 0===o?void 0:o.namespaces[t.NameSpaceKeyStarknet])||void 0===i?void 0:i.extra)||void 0===s?void 0:s[`${c[0]}:${c[1]}`],d="";return null!=u&&(d=u.publicKey),l?{address:l,pubKey:d}:void 0}signMessage(t,n,r){return e(this,void 0,void 0,(function*(){r=this.getChain(r),0==t.length&&(t=this.getAccount(r).address);let e={chainId:r,method:"starknet_signMessage",params:{accountAddress:t,typedData:n}};try{const t=yield this.provider.request(e,r);if("result"in t){let e=t.result;return"string"==typeof e&&(e=JSON.parse(e)),[e.signedDataR,e.signedDataS]}return t.error}catch(Ye){return Ye}}))}sendTransaction(t,n,r){return e(this,void 0,void 0,(function*(){r=this.getChain(r);let e={accountAddress:t,executionRequest:n},o={method:"starknet_sendTransaction",params:{data:JSON.stringify(e),from:t}};try{const e=yield this.provider.request(o,r);if("result"in e)return{transaction_hash:e.result};return e.error}catch(Ye){return Ye}}))}signMessageDeclareContractPayload(t,n){return e(this,void 0,void 0,(function*(){n=this.getChain(n);try{let e={method:"starknet_signMessage",params:t};const r=yield this.provider.request(e,n);if("result"in r)return{transaction_hash:r.result.txHash,class_hash:r.result.classHash};return r.error}catch(Ye){return Ye}}))}sendMessageExecuteTransactionDetail(t,n,r,o,i){return e(this,void 0,void 0,(function*(){i=this.getChain(i);const e={calls:Array.isArray(n)?n:[n],abis:r,transactionsDetail:{nonce:null==o?void 0:o.nonce,maxFee:null==o?void 0:o.nonce,version:null==o?void 0:o.version}};return this.sendTransaction(t,e,i)}))}},Lu}function ju(){return Mu||(Mu=1,function(e){var t=el.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=el.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.OKXStarknetProvider=e.OKXTronProvider=e.OKXTonProvider=e.OKXCosmosProvider=e.OKXBtcProvider=e.OKXUniversalProvider=void 0,n(sl(),e),n(El(),e);var r=_u();Object.defineProperty(e,"OKXUniversalProvider",{enumerable:!0,get:function(){return r.OKXUniversalProvider}});var o=Su();Object.defineProperty(e,"OKXBtcProvider",{enumerable:!0,get:function(){return o.OKXBtcProvider}});var i=Nu();Object.defineProperty(e,"OKXCosmosProvider",{enumerable:!0,get:function(){return i.OKXCosmosProvider}});var s=xu();Object.defineProperty(e,"OKXTonProvider",{enumerable:!0,get:function(){return s.OKXTonProvider}});var a=Du();Object.defineProperty(e,"OKXTronProvider",{enumerable:!0,get:function(){return a.OKXTronProvider}});var c=Uu();Object.defineProperty(e,"OKXStarknetProvider",{enumerable:!0,get:function(){return c.OKXStarknetProvider}}),n(Ja(),e)}(el)),el}var Wu,Bu,Xu,Hu,Fu,qu,Ju,zu=ju(),Vu=Object.defineProperty,$u=Object.defineProperties,Gu=Object.getOwnPropertyDescriptors,Qu=Object.getOwnPropertySymbols,Yu=Object.prototype.hasOwnProperty,Zu=Object.prototype.propertyIsEnumerable,ed=(e,t,n)=>t in e?Vu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,td=(e,t)=>{for(var n in t||(t={}))Yu.call(t,n)&&ed(e,n,t[n]);if(Qu)for(var n of Qu(t))Zu.call(t,n)&&ed(e,n,t[n]);return e},nd=(e,t)=>$u(e,Gu(t)),rd=(e,t,n)=>(ed(e,"symbol"!=typeof t?t+"":t,n),n),od=(e,t,n)=>new Promise(((r,o)=>{var i=e=>{try{a(n.next(e))}catch(t){o(t)}},s=e=>{try{a(n.throw(e))}catch(t){o(t)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,s);a((n=n.apply(e,t)).next())})),id=(e=>(e.DARK="DARK",e.LIGHT="LIGHT",e))(id||{});class sd extends Va.OKXConnectError{constructor(e){super(1,e)}}const ad=Symbol("solid-proxy"),cd="function"==typeof Proxy,ld=Symbol("solid-track"),ud={equals:(e,t)=>e===t};let dd=Wd;const hd=1,fd=2,pd={owned:null,cleanups:null,context:null,owner:null};var gd=null;let vd=null,md=null,yd=null,bd=null,wd=0;function Cd(e,t){const n=md,r=gd,o=0===e.length,i=void 0===t?r:t,s=o?pd:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=o?e:()=>e((()=>Td((()=>Fd(s)))));gd=s,md=null;try{return jd(a,!0)}finally{md=n,gd=r}}function _d(e,t){const n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},ud,t):ud).equals||void 0};return[Dd.bind(n),e=>("function"==typeof e&&(e=e(n.value)),Kd(n,e))]}function Od(e,t,n){Md(Ld(e,t,!1,hd))}function Ed(e,t,n){dd=Bd;const r=Ld(e,t,!1,hd);n&&n.render||(r.user=!0),bd?bd.push(r):Md(r)}function Sd(e,t,n){n=n?Object.assign({},ud,n):ud;const r=Ld(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Md(r),Dd.bind(r)}function Rd(e){return jd(e,!1)}function Td(e){if(null===md)return e();const t=md;md=null;try{return e()}finally{md=t}}function Nd(e){Ed((()=>Td(e)))}function Ad(e){return null===gd||(null===gd.cleanups?gd.cleanups=[e]:gd.cleanups.push(e)),e}function Pd(){return md}function xd(e,t){const n=Symbol("context");return{id:n,Provider:zd(n),defaultValue:e}}function Id(e){let t;return gd&&gd.context&&void 0!==(t=gd.context[e.id])?t:e.defaultValue}function kd(e){const t=Sd(e),n=Sd((()=>Jd(t())));return n.toArray=()=>{const e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function Dd(){if(this.sources&&this.state)if(this.state===hd)Md(this);else{const e=yd;yd=null,jd((()=>Xd(this)),!1),yd=e}if(md){const e=this.observers?this.observers.length:0;md.sources?(md.sources.push(this),md.sourceSlots.push(e)):(md.sources=[this],md.sourceSlots=[e]),this.observers?(this.observers.push(md),this.observerSlots.push(md.sources.length-1)):(this.observers=[md],this.observerSlots=[md.sources.length-1])}return this.value}function Kd(e,t,n){let r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&jd((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],r=vd&&vd.running;r&&vd.disposed.has(n),(r?n.tState:n.state)||(n.pure?yd.push(n):bd.push(n),n.observers&&Hd(n)),r||(n.state=hd)}if(yd.length>1e6)throw yd=[],new Error}),!1)),t}function Md(e){if(!e.fn)return;Fd(e);const t=wd;!function(e,t,n){let r;const o=gd,i=md;md=gd=e;try{r=e.fn(t)}catch(s){return e.pure&&(e.state=hd,e.owned&&e.owned.forEach(Fd),e.owned=null),e.updatedAt=n+1,qd(s)}finally{md=i,gd=o}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?Kd(e,r):e.value=r,e.updatedAt=n)}(e,e.value,t)}function Ld(e,t,n,r=hd,o){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:gd,context:gd?gd.context:null,pure:n};return null===gd||gd!==pd&&(gd.owned?gd.owned.push(i):gd.owned=[i]),i}function Ud(e){if(0===e.state)return;if(e.state===fd)return Xd(e);if(e.suspense&&Td(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<wd);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if((e=t[n]).state===hd)Md(e);else if(e.state===fd){const n=yd;yd=null,jd((()=>Xd(e,t[0])),!1),yd=n}}function jd(e,t){if(yd)return e();let n=!1;t||(yd=[]),bd?n=!0:bd=[],wd++;try{const t=e();return function(e){yd&&(Wd(yd),yd=null);if(e)return;const t=bd;bd=null,t.length&&jd((()=>dd(t)),!1)}(n),t}catch(r){n||(bd=null),yd=null,qd(r)}}function Wd(e){for(let t=0;t<e.length;t++)Ud(e[t])}function Bd(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ud(r)}for(t=0;t<n;t++)Ud(e[t])}function Xd(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const e=r.state;e===hd?r!==t&&(!r.updatedAt||r.updatedAt<wd)&&Ud(r):e===fd&&Xd(r,t)}}}function Hd(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=fd,n.pure?yd.push(n):bd.push(n),n.observers&&Hd(n))}}function Fd(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Fd(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Fd(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function qd(e,t=gd){const n=function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e);throw n}function Jd(e){if("function"==typeof e&&!e.length)return Jd(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=Jd(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function zd(e,t){return function(t){let n;return Od((()=>n=Td((()=>(gd.context=nd(td({},gd.context),{[e]:t.value}),kd((()=>t.children)))))),void 0),n}}const Vd=Symbol("fallback");function $d(e){for(let t=0;t<e.length;t++)e[t]()}function Gd(e,t){return Td((()=>e(t||{})))}function Qd(){return!0}const Yd={get:(e,t,n)=>t===ad?n:e.get(t),has:(e,t)=>t===ad||e.has(t),set:Qd,deleteProperty:Qd,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:Qd,deleteProperty:Qd}),ownKeys:e=>e.keys()};function Zd(e){return(e="function"==typeof e?e():e)?e:{}}function eh(){for(let e=0,t=this.length;e<t;++e){const t=this[e]();if(void 0!==t)return t}}function th(...e){let t=!1;for(let s=0;s<e.length;s++){const n=e[s];t=t||!!n&&ad in n,e[s]="function"==typeof n?(t=!0,Sd(n)):n}if(cd&&t)return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=Zd(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in Zd(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(Zd(e[n])));return[...new Set(t)]}},Yd);const n={},r=Object.create(null);for(let s=e.length-1;s>=0;s--){const t=e[s];if(!t)continue;const o=Object.getOwnPropertyNames(t);for(let e=o.length-1;e>=0;e--){const i=o[e];if("__proto__"===i||"constructor"===i)continue;const s=Object.getOwnPropertyDescriptor(t,i);if(r[i]){const e=n[i];e&&(s.get?e.push(s.get.bind(t)):void 0!==s.value&&e.push((()=>s.value)))}else r[i]=s.get?{enumerable:!0,configurable:!0,get:eh.bind(n[i]=[s.get.bind(t)])}:void 0!==s.value?s:void 0}}const o={},i=Object.keys(r);for(let s=i.length-1;s>=0;s--){const e=i[s],t=r[e];t&&t.get?Object.defineProperty(o,e,t):o[e]=t?t.value:void 0}return o}function nh(e,...t){if(cd&&ad in e){const n=new Set(t.length>1?t.flat():t[0]),r=t.map((t=>new Proxy({get:n=>t.includes(n)?e[n]:void 0,has:n=>t.includes(n)&&n in e,keys:()=>t.filter((t=>t in e))},Yd)));return r.push(new Proxy({get:t=>n.has(t)?void 0:e[t],has:t=>!n.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!n.has(e)))},Yd)),r}const n={},r=t.map((()=>({})));for(const o of Object.getOwnPropertyNames(e)){const i=Object.getOwnPropertyDescriptor(e,o),s=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,c=0;for(const e of t)e.includes(o)&&(a=!0,s?r[c][o]=i.value:Object.defineProperty(r[c],o,i)),++c;a||(s?n[o]=i.value:Object.defineProperty(n,o,i))}return[...r,n]}const rh=e=>`Stale read from <${e}>.`;function oh(e){const t="fallback"in e&&{fallback:()=>e.fallback};return Sd(function(e,t,n={}){let r=[],o=[],i=[],s=0,a=t.length>1?[]:null;return Ad((()=>$d(i))),()=>{let c,l,u=e()||[],d=u.length;return u[ld],Td((()=>{let e,t,f,p,g,v,m,y,b;if(0===d)0!==s&&($d(i),i=[],r=[],o=[],s=0,a&&(a=[])),n.fallback&&(r=[Vd],o[0]=Cd((e=>(i[0]=e,n.fallback()))),s=1);else if(0===s){for(o=new Array(d),l=0;l<d;l++)r[l]=u[l],o[l]=Cd(h);s=d}else{for(f=new Array(d),p=new Array(d),a&&(g=new Array(d)),v=0,m=Math.min(s,d);v<m&&r[v]===u[v];v++);for(m=s-1,y=d-1;m>=v&&y>=v&&r[m]===u[y];m--,y--)f[y]=o[m],p[y]=i[m],a&&(g[y]=a[m]);for(e=new Map,t=new Array(y+1),l=y;l>=v;l--)b=u[l],c=e.get(b),t[l]=void 0===c?-1:c,e.set(b,l);for(c=v;c<=m;c++)b=r[c],l=e.get(b),void 0!==l&&-1!==l?(f[l]=o[c],p[l]=i[c],a&&(g[l]=a[c]),l=t[l],e.set(b,l)):i[c]();for(l=v;l<d;l++)l in f?(o[l]=f[l],i[l]=p[l],a&&(a[l]=g[l],a[l](l))):o[l]=Cd(h);o=o.slice(0,s=d),r=u.slice(0)}return o}));function h(e){if(i[l]=e,a){const[e,n]=_d(l);return a[l]=n,t(u[l],e)}return t(u[l])}}}((()=>e.each),e.children,t||void 0))}function ih(e){const t=e.keyed,n=Sd((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return Sd((()=>{const r=n();if(r){const o=e.children;return"function"==typeof o&&o.length>0?Td((()=>o(t?r:()=>{if(!Td(n))throw rh("Show");return e.when}))):o}return e.fallback}),void 0,void 0)}function sh(e){let t=!1;const n=kd((()=>e.children)),r=Sd((()=>{let e=n();Array.isArray(e)||(e=[e]);for(let n=0;n<e.length;n++){const r=e[n].when;if(r)return t=!!e[n].keyed,[n,r,e[n]]}return[-1]}),void 0,{equals:(e,n)=>(t?e[1]===n[1]:!e[1]==!n[1])&&e[2]===n[2]});return Sd((()=>{const[n,o,i]=r();if(n<0)return e.fallback;const s=i.children;return"function"==typeof s&&s.length>0?Td((()=>s(t?o:()=>{if(Td(r)[0]!==n)throw rh("Match");return i.when}))):s}),void 0,void 0)}function ah(e){return e}const ch=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline","allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),lh=new Set(["innerHTML","textContent","innerText","children"]),uh=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),dh=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});const hh=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),fh=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),ph={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};const gh="_$DX_DELEGATE";function vh(e,t,n){let r;const o=()=>{const t=document.createElement("template");return t.innerHTML=e,n?t.content.firstChild.firstChild:t.content.firstChild},i=t?()=>Td((()=>document.importNode(r||(r=o()),!0))):()=>(r||(r=o())).cloneNode(!0);return i.cloneNode=i,i}function mh(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function yh(e,t){null==t?e.removeAttribute("class"):e.className=t}function bh(e,t={},n,r){const o={};return Od((()=>o.children=Sh(e,t.children,o.children))),Od((()=>"function"==typeof t.ref&&wh(t.ref,e))),Od((()=>function(e,t,n,r,o={},i=!1){t||(t={});for(const s in o)if(!(s in t)){if("children"===s)continue;o[s]=Oh(e,s,null,o[s],n,i,t)}for(const s in t){if("children"===s)continue;const r=t[s];o[s]=Oh(e,s,r,o[s],n,i,t)}}(e,t,n,0,o,!0))),o}function wh(e,t,n){return Td((()=>e(t,n)))}function Ch(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return Sh(e,t,r,n);Od((r=>Sh(e,t(),r,n)),r)}function _h(e,t,n){const r=t.trim().split(/\s+/);for(let o=0,i=r.length;o<i;o++)e.classList.toggle(r[o],n)}function Oh(e,t,n,r,o,i,s){let a,c,l,u,d;if("style"===t)return function(e,t,n){if(!t)return n?mh(e,"style"):t;const r=e.style;if("string"==typeof t)return r.cssText=t;let o,i;for(i in"string"==typeof n&&(r.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[i]&&r.removeProperty(i),delete n[i];for(i in t)o=t[i],o!==n[i]&&(r.setProperty(i,o),n[i]=o);return n}(e,n,r);if("classList"===t)return function(e,t,n={}){const r=Object.keys(t||{}),o=Object.keys(n);let i,s;for(i=0,s=o.length;i<s;i++){const r=o[i];r&&"undefined"!==r&&!t[r]&&(_h(e,r,!1),delete n[r])}for(i=0,s=r.length;i<s;i++){const o=r[i],s=!!t[o];o&&"undefined"!==o&&n[o]!==s&&s&&(_h(e,o,!0),n[o]=s)}return n}(e,n,r);if(n===r)return r;if("ref"===t)i||n(e);else if("on:"===t.slice(0,3)){const o=t.slice(3);r&&e.removeEventListener(o,r,"function"!=typeof r&&r),n&&e.addEventListener(o,n,"function"!=typeof n&&n)}else if("oncapture:"===t.slice(0,10)){const o=t.slice(10);r&&e.removeEventListener(o,r,!0),n&&e.addEventListener(o,n,!0)}else if("on"===t.slice(0,2)){const o=t.slice(2).toLowerCase(),i=hh.has(o);if(!i&&r){const t=Array.isArray(r)?r[0]:r;e.removeEventListener(o,t)}(i||n)&&(function(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const r=n[0];e.addEventListener(t,n[0]=t=>r.call(e,n[1],t))}else e.addEventListener(t,n,"function"!=typeof n&&n)}(e,o,n,i),i&&function(e,t=window.document){const n=t[gh]||(t[gh]=new Set);for(let r=0,o=e.length;r<o;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,Eh))}}([o]))}else if("attr:"===t.slice(0,5))mh(e,t.slice(5),n);else if("bool:"===t.slice(0,5))!function(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}(e,t.slice(5),n);else if((d="prop:"===t.slice(0,5))||(l=lh.has(t))||!o&&((u=function(e,t){const n=dh[e];return"object"==typeof n?n[t]?n.$:void 0:n}(t,e.tagName))||(c=ch.has(t)))||(a=e.nodeName.includes("-")||"is"in s))d&&(t=t.slice(5),c=!0),"class"===t||"className"===t?yh(e,n):!a||c||l?e[u||t]=n:e[function(e){return e.toLowerCase().replace(/-([a-z])/g,((e,t)=>t.toUpperCase()))}(t)]=n;else{const r=o&&t.indexOf(":")>-1&&ph[t.split(":")[0]];r?function(e,t,n,r){null==r?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}(e,r,t,n):mh(e,uh[t]||t,n)}return n}function Eh(e){let t=e.target;const n=`$$${e.type}`,r=e.target,o=e.currentTarget,i=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),s=()=>{const r=t[n];if(r&&!t.disabled){const o=t[`${n}Data`];if(void 0!==o?r.call(t,o,e):r.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},a=()=>{for(;s()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),e.composedPath){const n=e.composedPath();i(n[0]);for(let e=0;e<n.length-2&&(t=n[e],s());e++){if(t._$host){t=t._$host,a();break}if(t.parentNode===o)break}}else a();i(r)}function Sh(e,t,n,r,o){for(;"function"==typeof n;)n=n();if(t===n)return n;const i=typeof t,s=void 0!==r;if(e=s&&n[0]&&n[0].parentNode||e,"string"===i||"number"===i){if("number"===i&&(t=t.toString())===n)return n;if(s){let o=n[0];o&&3===o.nodeType?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=Nh(e,n,r,o)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===i)n=Nh(e,n,r);else{if("function"===i)return Od((()=>{let o=t();for(;"function"==typeof o;)o=o();n=Sh(e,o,n,r)})),()=>n;if(Array.isArray(t)){const i=[],a=n&&Array.isArray(n);if(Rh(i,t,n,o))return Od((()=>n=Sh(e,i,n,r,!0))),()=>n;if(0===i.length){if(n=Nh(e,n,r),s)return n}else a?0===n.length?Th(e,i,r):function(e,t,n){let r=n.length,o=t.length,i=r,s=0,a=0,c=t[o-1].nextSibling,l=null;for(;s<o||a<i;)if(t[s]!==n[a]){for(;t[o-1]===n[i-1];)o--,i--;if(o===s){const t=i<r?a?n[a-1].nextSibling:n[i-a]:c;for(;a<i;)e.insertBefore(n[a++],t)}else if(i===a)for(;s<o;)l&&l.has(t[s])||t[s].remove(),s++;else if(t[s]===n[i-1]&&n[a]===t[o-1]){const r=t[--o].nextSibling;e.insertBefore(n[a++],t[s++].nextSibling),e.insertBefore(n[--i],r),t[o]=n[i]}else{if(!l){l=new Map;let e=a;for(;e<i;)l.set(n[e],e++)}const r=l.get(t[s]);if(null!=r)if(a<r&&r<i){let c,u=s,d=1;for(;++u<o&&u<i&&null!=(c=l.get(t[u]))&&c===r+d;)d++;if(d>r-a){const o=t[s];for(;a<r;)e.insertBefore(n[a++],o)}else e.replaceChild(n[a++],t[s++])}else s++;else t[s++].remove()}}else s++,a++}(e,n,i):(n&&Nh(e),Th(e,i));n=i}else if(t.nodeType){if(Array.isArray(n)){if(s)return n=Nh(e,n,r,t);Nh(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function Rh(e,t,n,r){let o=!1;for(let i=0,s=t.length;i<s;i++){let s,a=t[i],c=n&&n[e.length];if(null==a||!0===a||!1===a);else if("object"==(s=typeof a)&&a.nodeType)e.push(a);else if(Array.isArray(a))o=Rh(e,a,c)||o;else if("function"===s)if(r){for(;"function"==typeof a;)a=a();o=Rh(e,Array.isArray(a)?a:[a],Array.isArray(c)?c:[c])||o}else e.push(a),o=!0;else{const t=String(a);c&&3===c.nodeType&&c.data===t?e.push(c):e.push(document.createTextNode(t))}}return o}function Th(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function Nh(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let r=!1;for(let i=t.length-1;i>=0;i--){const s=t[i];if(o!==s){const t=s.parentNode===e;r||i?t&&s.remove():t?e.replaceChild(o,s):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}function Ah(e){const[t,n]=nh(e,["component"]),r=Sd((()=>t.component));return Sd((()=>{const e=r();switch(typeof e){case"function":return Td((()=>e(n)));case"string":const t=fh.has(e),r=function(e,t=!1){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e,t);return bh(r,n,t),r}}))}let Ph={data:""},xh=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ih=/\/\*[^]*?\*\/|  +/g,kh=/\n+/g,Dh=(e,t)=>{let n="",r="",o="";for(let i in e){let s=e[i];"@"==i[0]?"i"==i[1]?n=i+" "+s+";":r+="f"==i[1]?Dh(s,i):i+"{"+Dh(s,"k"==i[1]?"":t)+"}":"object"==typeof s?r+=Dh(s,t?t.replace(/([^,])+/g,(e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):i):null!=s&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Dh.p?Dh.p(i,s):i+":"+s+";")}return n+(t&&o?t+"{"+o+"}":o)+r},Kh={},Mh=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Mh(e[n]);return t}return e};function Lh(e){let t=this||{},n=e.call?e(t.p):e;return((e,t,n,r,o)=>{let i=Mh(e),s=Kh[i]||(Kh[i]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(i));if(!Kh[s]){let t=i!==e?e:(e=>{let t,n,r=[{}];for(;t=xh.exec(e.replace(Ih,""));)t[4]?r.shift():t[3]?(n=t[3].replace(kh," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(kh," ").trim();return r[0]})(e);Kh[s]=Dh(o?{["@keyframes "+s]:t}:t,n?"":"."+s)}let a=n&&Kh.g?Kh.g:null;return n&&(Kh.g=Kh[s]),c=Kh[s],l=t,u=r,(d=a)?l.data=l.data.replace(d,c):-1===l.data.indexOf(c)&&(l.data=u?c+l.data:l.data+c),s;var c,l,u,d})(n.unshift?n.raw?((e,t,n)=>e.reduce(((e,r,o)=>{let i=t[o];if(i&&i.call){let e=i(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":Dh(e,""):!1===e?"":e}return e+r+(null==i?"":i)}),""))(n,[].slice.call(arguments,1),t.p):n.reduce(((e,n)=>Object.assign(e,n&&n.call?n(t.p):n)),{}):n,(r=t.target,"object"==typeof window?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||Ph),t.g,t.o,t.k);var r}Lh.bind({g:1});let Uh=Lh.bind({k:1});const jh=xd();function Wh(e){return Gd(jh.Provider,{value:e.theme,get children(){return e.children}})}function Bh(){return Id(jh)}function Xh(e){let t=this||{};return(...n)=>{const r=r=>{const o=th(r,{theme:Id(jh)}),i=th(o,{get class(){const e=o.class,r="class"in o&&/^go[0-9]+/.test(e);return[e,Lh.apply({target:t.target,o:r,p:o,g:t.g},n)].filter(Boolean).join(" ")}}),[s,a]=nh(i,["as","theme"]),c=a,l=s.as||e;let u;return"function"==typeof l?u=l(c):1==t.g?(u=document.createElement(l),bh(u,c)):u=Ah(th({component:l},c)),u};return r.class=e=>Td((()=>Lh.apply({target:t.target,p:e,g:t.g},n))),r}}const Hh=new Proxy(Xh,{get:(e,t)=>e(t)});function Fh(){const e=Xh.call({g:1},"div").apply(null,arguments);return function(t){return e(t),null}}const qh="okxc-root",Jh="okxc-disable-scroll",zh="okxc-using-mouse",Vh=()=>{document.body.addEventListener("mousedown",(()=>document.body.classList.add(zh))),document.body.addEventListener("keydown",(e=>{"Tab"===e.key&&document.body.classList.remove(zh)}));return Gd(Fh`
    ${qh} * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        
        font-family: -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', Arial, Tahoma, Verdana, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;        
        -webkit-tap-highlight-color: transparent;
    }
    
    ${qh} img {
      -webkit-user-select: none;
      -webkit-touch-callout: none;
    }   
 
    ${qh} *:focus {
        outline: #08f auto 2px;
    }
    
    ${qh} li {
        list-style: none;
    }
    
    ${qh} button {
        outline: none;
    }
    
    body.${Jh} {
        position: fixed; 
        overflow-y: scroll;
        right: 0;
        left: 0;
    }
    
    body.${zh} ${qh} *:focus {
        outline: none;
    }
`,{})};function $h(e,t){return"#"===e[0]&&(e=function(e){"#"===e[0]&&(e=e.slice(1));const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t].join(",")}(e)),`rgba(${e}, ${t})`}function Gh(e){return e.toString()+"px"}const Qh=class{constructor(){rd(this,"storage",{})}static getInstance(){return Qh.instance||(Qh.instance=new Qh),Qh.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var t;return null!=(t=this.storage[e])?t:null}key(e){var t;const n=Object.keys(this.storage);return e<0||e>=n.length?null:null!=(t=n[e])?t:null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t}};let Yh=Qh;function Zh(...e){Va.logDebug(e)}rd(Yh,"instance");let ef={};try{ef=function(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=sf(e),t;let n=e.indexOf("?");if(n>=0){let r=e.substr(0,n);t._path=sf(r),e=e.substr(n+1)}let r=function(e){let t={};if(!e.length)return t;let n,r,o,i,s=e.split("&");for(n=0;n<s.length;n++)r=s[n].split("="),o=sf(r[0]),i=null==r[1]?null:sf(r[1]),t[o]=i;return t}(e);for(let o in r)t[o]=r[o];return t}(location.hash.toString())}catch(AT){}let tf="unknown";if((null==ef?void 0:ef.tgWebAppPlatform)&&(tf=null!=(Wu=ef.tgWebAppPlatform)?Wu:"unknown"),"unknown"===tf){const e=Zf();tf=null!=(Hu=null==(Xu=null==(Bu=null==e?void 0:e.Telegram)?void 0:Bu.WebApp)?void 0:Xu.platform)?Hu:"unknown"}let nf="6.0";if((null==ef?void 0:ef.tgWebAppVersion)&&(nf=ef.tgWebAppVersion),!nf){const e=Zf();nf=null!=(Ju=null==(qu=null==(Fu=null==e?void 0:e.Telegram)?void 0:Fu.WebApp)?void 0:qu.version)?Ju:"6.0"}function rf(){var e;return"unknown"!==tf||!!(null==(e=Zf())?void 0:e.TelegramWebviewProxy)}function of(){!function(e,t){try{const n=Zf();if(!n)throw new sd("Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)Zh("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)Zh("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!function(){try{const e=Zf();return!!e&&(null!=e.parent&&e!==e.parent)}catch(AT){return!1}}())throw new sd("Can't post event to TMA");{const r="*",o=JSON.stringify({eventType:e,eventData:t});Zh("postEvent",e,t),n.parent.postMessage(o,r)}}}catch(AT){!function(...e){Va.logError(e)}(`Can't post event to parent window: ${AT}`)}}("web_app_expand",{})}function sf(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(AT){return e}}const af=440,cf=1020;function lf(e){var t;const n=Zf();if(!n)return"desktop"===e;if(function(...e){return e.includes(tf)}("weba"))return!0;const r=n.innerWidth;switch(e){case"desktop":return r>cf;case"tablet":return r>af;default:let e=r<=af||function(...e){return e.includes(tp().os)}("ios","android","ipad");if(e){const n=!!(null==(t=Zf())?void 0:t.TelegramWebviewProxy),r=navigator.maxTouchPoints||0;n&&0===r&&(e=!1),Va.logDebug("isDevice mobile isTelegram and maxTouchPoints:",e,n,r)}return e}}function uf(e){switch(e){case"mobile":return`@media (max-width: ${af}px)`;case"tablet":return`@media (max-width: ${cf}px) (min-width: ${af}px)`;default:return`@media (min-width: ${cf}px)`}}const df="@media (hover: none)",hf="@media not all and (hover: none)",[ff,pf]=_d(lf("mobile")),gf=()=>pf(lf("mobile"));Zf()&&(window.addEventListener("resize",(()=>gf())),window.addEventListener("load",(()=>gf()),{once:!0}));const vf=Symbol("store-raw"),mf=Symbol("store-node"),yf=Symbol("store-has"),bf=Symbol("store-self");function wf(e){let t=e[ad];if(!t&&(Object.defineProperty(e,ad,{value:t=new Proxy(e,Rf)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,i=n.length;o<i;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Cf(e){let t;return null!=e&&"object"==typeof e&&(e[ad]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function _f(e,t=new Set){let n,r,o,i;if(n=null!=e&&e[vf])return n;if(!Cf(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,i=e.length;n<i;n++)o=e[n],(r=_f(o,t))!==o&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let a=0,c=n.length;a<c;a++)i=n[a],s[i].get||(o=e[i],(r=_f(o,t))!==o&&(e[i]=r))}return e}function Of(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Ef(e,t,n){if(e[t])return e[t];const[r,o]=_d(n,{equals:!1,internal:!0});return r.$=o,e[t]=r}function Sf(e){Pd()&&Ef(Of(e,mf),bf)()}const Rf={get(e,t,n){if(t===vf)return e;if(t===ad)return n;if(t===ld)return Sf(e),n;const r=Of(e,mf),o=r[t];let i=o?o():e[t];if(t===mf||t===yf||"__proto__"===t)return i;if(!o){const n=Object.getOwnPropertyDescriptor(e,t);!Pd()||"function"==typeof i&&!e.hasOwnProperty(t)||n&&n.get||(i=Ef(r,t,i)())}return Cf(i)?wf(i):i},has:(e,t)=>t===vf||t===ad||t===ld||t===mf||t===yf||"__proto__"===t||(Pd()&&Ef(Of(e,yf),t)(),t in e),set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return Sf(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.get&&n.configurable&&t!==ad&&t!==mf?(delete n.value,delete n.writable,n.get=()=>e[ad][t],n):n}};function Tf(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],i=e.length;void 0===n?(delete e[t],e[yf]&&e[yf][t]&&void 0!==o&&e[yf][t].$()):(e[t]=n,e[yf]&&e[yf][t]&&void 0===o&&e[yf][t].$());let s,a=Of(e,mf);if((s=Ef(a,t,o))&&s.$((()=>n)),Array.isArray(e)&&e.length!==i){for(let t=e.length;t<i;t++)(s=a[t])&&s.$();(s=Ef(a,"length",i))&&s.$(e.length)}(s=a[bf])&&s.$()}function Nf(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Tf(e,o,t[o])}}function Af(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,s=Array.isArray(e);if(Array.isArray(r)){for(let o=0;o<r.length;o++)Af(e,[r[o]].concat(t),n);return}if(s&&"function"===i){for(let o=0;o<e.length;o++)r(e[o],o)&&Af(e,[o].concat(t),n);return}if(s&&"object"===i){const{from:o=0,to:i=e.length-1,by:s=1}=r;for(let r=o;r<=i;r+=s)Af(e,[r].concat(t),n);return}if(t.length>1)return void Af(e[r],t,[r].concat(n));o=e[r],n=[r].concat(n)}let i=t[0];"function"==typeof i&&(i=i(o,n),i===o)||void 0===r&&null==i||(i=_f(i),void 0===r||Cf(o)&&Cf(i)&&!Array.isArray(i)?Nf(o,i):Tf(e,r,i))}function Pf(...[e,t]){const n=_f(e||{}),r=Array.isArray(n);return[wf(n),function(...e){Rd((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=_f(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&Tf(e,n,r)}Tf(e,"length",r)}else Nf(e,t)}(n,e[0]):Af(n,e)}))}]}const[xf,If]=Pf({language:"en_US"}),[kf,Df]=Pf({buttonRootId:null,language:"en_US"});function Kf(e,t){return!!t&&(e.name.toLowerCase()===t.toLowerCase()||e.appName.toLowerCase()===t.toLowerCase())}function Mf(){return function(){var e;const t=!!(null==(e=Zf())?void 0:e.TelegramWebview);return(rf()||t)&&"unknown"===tf}()||rf()}const Lf=[Va.NameSpaceKeySui,Va.NameSpaceKeySOL,Va.NameSpaceKeyEip155,Va.NameSpaceKeyTON,Va.NameSpaceKeyBtc,Va.NameSpaceKeyAptos,Va.NameSpaceKeyTron,Va.NameSpaceKeyStarknet,Va.NameSpaceKeyCosmos],Uf=[Va.NameSpaceKeyEip155,Va.NameSpaceKeySOL,Va.NameSpaceKeyTON,Va.NameSpaceKeySui],jf=[Va.NameSpaceKeySOL],Wf=[Va.SOLANA_CHAINS.MAINNET];function Bf(e,t){return!!Yf()&&(qf(e)&&qf(t))}function Xf(e,t){if(!e)return!0;for(const[n,r]of Object.entries(e)){if(jf.includes(n)){if(r.chains.some((e=>!Wf.includes(e))))return!1}else if(!Uf.includes(n))return!1;if(!Hf(n,t))return!1}return!0}function Hf(e,t){switch(e){case Va.NameSpaceKeySui:return!ff()||Gf("6.103.0");case Va.NameSpaceKeyTON:return!(!t||!t.manifestUrl)&&(!ff()||Gf("6.103.0"))}return!0}function Ff(e=!0){var t,n,r,o;const i=e?xf.walletConnector:kf.walletConnector;if(i)for(let c of i)switch(c.getTag()){case Va.OKX_TG_WALLET:if(e){var s=null==(t=xf.connectRequestParameters)?void 0:t.namespaces,a=null==(n=xf.connectRequestParameters)?void 0:n.optionalNamespaces;c.enable=Bf(s,a)}else c.enable=!0;break;case Va.OKX_APP_WALLET:c.enable=!0;break;case Va.OKX_INJECT_WALLET:if(e){s=null==(r=xf.connectRequestParameters)?void 0:r.namespaces,a=null==(o=xf.connectRequestParameters)?void 0:o.optionalNamespaces;c.enable=Xf(s,xf.dappMetaData)&&Xf(a,xf.dappMetaData)}else c.enable=!0}else Va.logWarning("not find connector yet")}function qf(e){try{if(!e)return!0;return Object.keys(e).every((e=>Lf.includes(e)))}catch(AT){return!1}}function Jf(e){return!!e&&e.name===Va.creatOKXWalletInfo().name}function zf(e,t,n){Va.logDebug("wallets openUniversalWallet"),function(e){return!!Yf()&&qf(e)}(n)&&function(e,t){Va.logDebug("wallets openWallet"),e&&(Jf(e)?(Va.logDebug("wallets openWallet openOKXDeeplinkWithFallback"),Va.openOKXDeeplink(Va.standardDeeplink)):(Va.logDebug("wallets openWallet openOKXTMAWalletlinkWithFallback"),Va.openOKXTMAWalletlinkWithFallback(Va.getTelegramWalletTWAUrl(void 0,t))))}(e,t)}function Vf(e){return!!e&&e.name===Va.creatOKXInjectWalletInfo().name}function $f(){try{return ff()?Gf("6.102.0"):!!window.okxwallet}catch(AT){return!1}}function Gf(e){let t=window.okxwallet;if(t){let n=t.appVersion;return Va.versionCompare(n,e)>=0}return!1}function Qf(){let e=[];return ff()&&window.okxwallet||e.push(Va.AppwalletConnector.getConnector()),!Yf()&&ff()||e.push(Va.TgwalletConnector.getConnector()),$f()&&e.push(Va.OkxwalletInjectConnector.getConnector()),e}function Yf(){return!!Mf()}function Zf(){if("undefined"!=typeof window)return window}function ep(){if(function(){try{return"undefined"!=typeof localStorage}catch(AT){return!1}}())return localStorage;if("undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node)throw new sd("`localStorage` is unavailable, but it is required for TonConnect");return Yh.getInstance()}function tp(){var e,t,n;const r=(new Fc).getResult(),o=null==(e=r.os.name)?void 0:e.toLowerCase();let i;switch(!0){case"ipad"===(null==(t=r.device.model)?void 0:t.toLowerCase()):i="ipad";break;case"ios"===o:i="ios";break;case"android"===o:i="android";break;case"mac os"===o:i="macos";break;case"linux"===o:i="linux";break;case null==o?void 0:o.includes("windows"):i="windows"}const s=null==(n=r.browser.name)?void 0:n.toLowerCase();let a;switch(!0){case"chrome"===s:a="chrome";break;case"firefox"===s:a="firefox";break;case null==s?void 0:s.includes("safari"):a="safari";break;case null==s?void 0:s.includes("opera"):a="opera"}return{os:i,browser:a}}class np{constructor(){rd(this,"localStorage"),rd(this,"storageKey","okx_wallet_connect_ui_last-selected-wallet-info"),this.localStorage=ep()}setLastSelectedWalletInfo(e){this.localStorage.setItem(this.storageKey,JSON.stringify(e))}getLastSelectedWalletInfo(){const e=this.localStorage.getItem(this.storageKey);return e?JSON.parse(e):null}removeLastSelectedWalletInfo(){this.localStorage.removeItem(this.storageKey)}}const[rp,op]=_d({status:"closed",closeReason:null});Sd((()=>"opened"===rp().status));const[ip,sp]=_d({status:"closed",closeReason:null});Sd((()=>"opened"===ip().status)),Sd((()=>{const e=ip();return"opened"===e.status?e.walletInfo:null}));let ap="undefined"!=typeof window?new np:void 0;_d((null==ap?void 0:ap.getLastSelectedWalletInfo())||null),_d(null);const cp=Hh.div`
    background-color: ${e=>e.theme.colors.background.secondary};
`,lp=e=>{let t;const[n,r]=_d(null);return Ed((()=>{const t=new window.Image;return t.src=e.src,t.alt=e.alt||"",t.setAttribute("draggable","false"),e.class&&t.classList.add(e.class),t.complete?r(t):(t.addEventListener("load",(()=>r(t))),()=>t.removeEventListener("load",(()=>r(t))))})),[Gd(ih,{get when(){return n()},get children(){return n()}}),Gd(ih,{get when(){return!n()},get children(){return Gd(cp,{get class(){return e.class},ref(e){"function"==typeof t?t(e):t=e}})}})]},up={m:"100vh",s:"8px",none:"0"},dp={s:.02,m:.04},hp=Hh.button`
    display: ${e=>e.leftIcon||e.rightIcon?"flex":"inline-block"};
    gap: ${e=>e.leftIcon||e.rightIcon?"4px":"unset"};
    align-items: ${e=>e.leftIcon||e.rightIcon?"center":"unset"};
    justify-content: ${e=>e.leftIcon||e.rightIcon?"space-between":"unset"};
    background-color: ${e=>"flat"===e.appearance?"transparent":"secondary"===e.appearance?e.theme.colors.background.tint:$h(e.theme.colors.accent,.12)};
    color: ${e=>"secondary"===e.appearance?e.theme.colors.text.primary:e.theme.colors.accent};

    padding: ${e=>"flat"===e.appearance?"0":"9px 16px"};
    padding-left: ${e=>e.leftIcon&&"flat"!==e.appearance?"12px":"16px"};
    padding-right: ${e=>e.rightIcon&&"flat"!==e.appearance?"12px":"16px"};
    border: none;
    border-radius: ${e=>up[e.theme.borderRadius]};
    cursor: ${e=>e.disabled?"not-allowed":"pointer"};

    font-size: 14px;
    font-weight: 510;
    line-height: 18px;

    transition: transform 0.125s ease-in-out;

    ${hf} {
        &:hover {
            transform: ${e=>e.disabled?"unset":`scale(${1+dp[e.scale]})`};
        }
    }

    &:active {
        transform: ${e=>e.disabled?"unset":`scale(${1-dp[e.scale]})`};
    }

    ${df} {
        &:active {
            transform: ${e=>e.disabled?"unset":`scale(${1-2*dp[e.scale]})`};
        }
    }
`;function fp(e){const t=Td((()=>Object.keys(e).filter((e=>e.startsWith("data-"))))),[n]=nh(e,t);return n}const pp=e=>{const t=fp(e);return Gd(hp,th({get appearance(){return e.appearance||"primary"},get class(){return e.class},onClick:t=>{var n;return null==(n=e.onClick)?void 0:n.call(e,t)},onMouseEnter:t=>{var n;return null==(n=e.onMouseEnter)?void 0:n.call(e,t)},onMouseLeave:t=>{var n;return null==(n=e.onMouseLeave)?void 0:n.call(e,t)},ref(t){var n=e.ref;"function"==typeof n?n(t):e.ref=t},get disabled(){return e.disabled},get scale(){return e.scale||"m"},get leftIcon(){return!!e.leftIcon},get rightIcon(){return!!e.rightIcon},"data-tc-button":"true"},t,{get children(){return[Sd((()=>e.leftIcon)),Sd((()=>e.children)),Sd((()=>e.rightIcon))]}}))};function gp(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}const vp=e=>{let t,n=!0;const[r,o]=_d(),[i,s]=_d(),a=kd((()=>e.children)),{onBeforeEnter:c,onEnter:l,onAfterEnter:u,onBeforeExit:d,onExit:h,onAfterExit:f}=e,p=Sd((()=>{const t=e.name||"s";return{enterActiveClass:e.enterActiveClass||t+"-enter-active",enterClass:e.enterClass||t+"-enter",enterToClass:e.enterToClass||t+"-enter-to",exitActiveClass:e.exitActiveClass||t+"-exit-active",exitClass:e.exitClass||t+"-exit",exitToClass:e.exitToClass||t+"-exit-to"}}));function g(t,a){if(!n||e.appear){let n=function(c){!t||c&&c.target!==t||(t.removeEventListener("transitionend",n),t.removeEventListener("animationend",n),t.classList.remove(...h),t.classList.remove(...f),Rd((()=>{r()!==t&&o(t),i()===t&&s(void 0)})),u&&u(t),"inout"===e.mode&&v(t,a))};const d=p().enterClass.split(" "),h=p().enterActiveClass.split(" "),f=p().enterToClass.split(" ");c&&c(t),t.classList.add(...d),t.classList.add(...h),gp((()=>{t.classList.remove(...d),t.classList.add(...f),l&&l(t,(()=>n())),(!l||l.length<2)&&(t.addEventListener("transitionend",n),t.addEventListener("animationend",n))}))}a&&!e.mode?s(t):o(t)}function v(t,n){const i=p().exitClass.split(" "),s=p().exitActiveClass.split(" "),a=p().exitToClass.split(" ");if(!n.parentNode)return c();function c(i){i&&i.target!==n||(n.removeEventListener("transitionend",c),n.removeEventListener("animationend",c),n.classList.remove(...s),n.classList.remove(...a),r()===n&&o(void 0),f&&f(n),"outin"===e.mode&&g(t,n))}d&&d(n),n.classList.add(...i),n.classList.add(...s),gp((()=>{n.classList.remove(...i),n.classList.add(...a)})),h&&h(n,(()=>c())),(!h||h.length<2)&&(n.addEventListener("transitionend",c),n.addEventListener("animationend",c))}var m;return Md(Ld((r=>{for(t=a();"function"==typeof t;)t=t();return Td((()=>(t&&t!==r&&("outin"!==e.mode?g(t,r):n&&o(t)),r&&r!==t&&"inout"!==e.mode&&v(t,r),n=!1,t)))}),m,!0,hd)),[r,i]};const mp="androidBackHandler",yp={[mp]:!0};var bp=vh('<svg><path fill-rule=evenodd clip-rule=evenodd d="M10.2122 14.3407C10.5384 14.0854 10.5959 13.614 10.3406 13.2878L6.20237 8.00003L10.3406 2.71227C10.5959 2.38607 10.5384 1.91469 10.2122 1.6594C9.88604 1.40412 9.41465 1.46161 9.15937 1.7878L4.65937 7.5378C4.44688 7.80932 4.44688 8.19074 4.65937 8.46226L9.15937 14.2123C9.41465 14.5385 9.88604 14.5959 10.2122 14.3407Z"></svg>',!1,!0);const wp={left:0,top:90,right:180,bottom:270},Cp=e=>{const t=Bh();return Gd(Hh("svg")`
        transform: rotate(${e=>wp[e.svgDirection]}deg);
        transition: transform 0.1s ease-in-out;
    `,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",get svgDirection(){return e.direction||"left"},get children(){var n=bp();return Od((()=>mh(n,"fill",e.fill||t.colors.icon.secondary))),n}})};var _p=vh('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M18.5303 6.53033C18.8232 6.23744 18.8232 5.76256 18.5303 5.46967C18.2374 5.17678 17.7626 5.17678 17.4697 5.46967L12 10.9393L6.53033 5.46967C6.23744 5.17678 5.76256 5.17678 5.46967 5.46967C5.17678 5.76256 5.17678 6.23744 5.46967 6.53033L10.9393 12L5.46967 17.4697C5.17678 17.7626 5.17678 18.2374 5.46967 18.5303C5.76256 18.8232 6.23744 18.8232 6.53033 18.5303L12 13.0607L17.4697 18.5303C17.7626 18.8232 18.2374 18.8232 18.5303 18.5303C18.8232 18.2374 18.8232 17.7626 18.5303 17.4697L13.0607 12L18.5303 6.53033Z">');const Op=e=>{const t=Bh();Zh(`CloseIcon  ${t}`);return n=_p(),r=n.firstChild,Od((()=>mh(r,"fill",e.fill||t.colors.icon.secondary))),n;var n,r};var Ep=vh('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16"fill=none><g clip-path=url(#clip0_3783_2045)><circle cx=8 cy=8.00098 r=8></circle><path d="M4.75 8.50098L7 10.751L11.75 6.00098"stroke-width=1.5 stroke-linecap=round stroke-linejoin=round></path></g><defs><clipPath id=clip0_3783_2045><rect width=16 height=16 fill=white transform="translate(0 0.000976562)">'),Sp=vh('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><circle cx=12 cy=12 r=11></circle><path d="M17.1364 9.6364C17.4879 9.28493 17.4879 8.71508 17.1364 8.36361C16.7849 8.01214 16.2151 8.01214 15.8636 8.36361L10 14.2272L8.1364 12.3636C7.78493 12.0121 7.21508 12.0121 6.86361 12.3636C6.51214 12.7151 6.51214 13.2849 6.86361 13.6364L9.36361 16.1364C9.71508 16.4879 10.2849 16.4879 10.6364 16.1364L17.1364 9.6364Z">'),Rp=vh('<svg width=72 height=72 viewBox="0 0 72 72"fill=none xmlns=http://www.w3.org/2000/svg><circle cx=36 cy=36 r=33></circle><path d="M50.9142 28.4142C51.6953 27.6332 51.6953 26.3668 50.9142 25.5858C50.1332 24.8047 48.8668 24.8047 48.0858 25.5858L30 43.6716L23.9142 37.5858C23.1332 36.8047 21.8668 36.8047 21.0858 37.5858C20.3047 38.3668 20.3047 39.6332 21.0858 40.4142L28.5858 47.9142C29.3668 48.6953 30.6332 48.6953 31.4142 47.9142L50.9142 28.4142Z">');const Tp=e=>{const t=Bh(),n=()=>e.size||"s",r=()=>e.fill||t.colors.icon.success;return Sd((()=>{return Sd((()=>"xs"===n()))()?(u=Ep(),d=u.firstChild.firstChild,h=d.nextSibling,Od((n=>{var o=e.class,i=r(),s=t.colors.constant.white;return o!==n.e&&mh(u,"class",n.e=o),i!==n.t&&mh(d,"fill",n.t=i),s!==n.a&&mh(h,"stroke",n.a=s),n}),{e:void 0,t:void 0,a:void 0}),u):Sd((()=>"s"===n()))()?(a=Sp(),c=a.firstChild,l=c.nextSibling,Od((n=>{var o=e.class,i=r(),s=t.colors.constant.white;return o!==n.e&&mh(a,"class",n.e=o),i!==n.t&&mh(c,"fill",n.t=i),s!==n.a&&mh(l,"fill",n.a=s),n}),{e:void 0,t:void 0,a:void 0}),a):(o=Rp(),i=o.firstChild,s=i.nextSibling,Od((n=>{var a=e.class,c=r(),l=t.colors.constant.white;return a!==n.e&&mh(o,"class",n.e=a),c!==n.t&&mh(i,"fill",n.t=c),l!==n.a&&mh(s,"fill",n.a=l),n}),{e:void 0,t:void 0,a:void 0}),o);var o,i,s,a,c,l,u,d,h}))};var Np=vh('<svg xmlns=http://www.w3.org/2000/svg width=103 height=102 viewBox="0 0 103 102"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M51.5 14.8747C31.5487 14.8747 15.375 31.0485 15.375 50.9997C15.375 70.951 31.5487 87.1247 51.5 87.1247C71.4513 87.1247 87.625 70.951 87.625 50.9997C87.625 31.0485 71.4513 14.8747 51.5 14.8747ZM9 50.9997C9 27.5276 28.0279 8.49974 51.5 8.49974C74.9721 8.49974 94 27.5276 94 50.9997C94 74.4718 74.9721 93.4997 51.5 93.4997C28.0279 93.4997 9 74.4718 9 50.9997ZM65.0234 37.4765C66.2682 38.7213 66.2682 40.7395 65.0234 41.9843L56.0078 50.9999L65.0234 60.0155C66.2682 61.2603 66.2682 63.2785 65.0234 64.5233C63.7786 65.7681 61.7604 65.7681 60.5156 64.5233L51.5 55.5077L42.4844 64.5233C41.2396 65.7681 39.2214 65.7681 37.9766 64.5233C36.7318 63.2785 36.7318 61.2603 37.9766 60.0155L46.9922 50.9999L37.9766 41.9843C36.7318 40.7395 36.7318 38.7213 37.9766 37.4765C39.2214 36.2317 41.2396 36.2317 42.4844 37.4765L51.5 46.4921L60.5156 37.4765C61.7604 36.2317 63.7787 36.2317 65.0234 37.4765Z"fill=#909090>'),Ap=vh('<svg xmlns=http://www.w3.org/2000/svg width=72 height=72 viewBox="0 0 103 102"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M51.5 14.8747C31.5487 14.8747 15.375 31.0485 15.375 50.9997C15.375 70.951 31.5487 87.1247 51.5 87.1247C71.4513 87.1247 87.625 70.951 87.625 50.9997C87.625 31.0485 71.4513 14.8747 51.5 14.8747ZM9 50.9997C9 27.5276 28.0279 8.49974 51.5 8.49974C74.9721 8.49974 94 27.5276 94 50.9997C94 74.4718 74.9721 93.4997 51.5 93.4997C28.0279 93.4997 9 74.4718 9 50.9997ZM65.0234 37.4765C66.2682 38.7213 66.2682 40.7395 65.0234 41.9843L56.0078 50.9999L65.0234 60.0155C66.2682 61.2603 66.2682 63.2785 65.0234 64.5233C63.7786 65.7681 61.7604 65.7681 60.5156 64.5233L51.5 55.5077L42.4844 64.5233C41.2396 65.7681 39.2214 65.7681 37.9766 64.5233C36.7318 63.2785 36.7318 61.2603 37.9766 60.0155L46.9922 50.9999L37.9766 41.9843C36.7318 40.7395 36.7318 38.7213 37.9766 37.4765C39.2214 36.2317 41.2396 36.2317 42.4844 37.4765L51.5 46.4921L60.5156 37.4765C61.7604 36.2317 63.7787 36.2317 65.0234 37.4765Z"fill=#909090>'),Pp=vh('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 103 102"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M51.5 14.8747C31.5487 14.8747 15.375 31.0485 15.375 50.9997C15.375 70.951 31.5487 87.1247 51.5 87.1247C71.4513 87.1247 87.625 70.951 87.625 50.9997C87.625 31.0485 71.4513 14.8747 51.5 14.8747ZM9 50.9997C9 27.5276 28.0279 8.49974 51.5 8.49974C74.9721 8.49974 94 27.5276 94 50.9997C94 74.4718 74.9721 93.4997 51.5 93.4997C28.0279 93.4997 9 74.4718 9 50.9997ZM65.0234 37.4765C66.2682 38.7213 66.2682 40.7395 65.0234 41.9843L56.0078 50.9999L65.0234 60.0155C66.2682 61.2603 66.2682 63.2785 65.0234 64.5233C63.7786 65.7681 61.7604 65.7681 60.5156 64.5233L51.5 55.5077L42.4844 64.5233C41.2396 65.7681 39.2214 65.7681 37.9766 64.5233C36.7318 63.2785 36.7318 61.2603 37.9766 60.0155L46.9922 50.9999L37.9766 41.9843C36.7318 40.7395 36.7318 38.7213 37.9766 37.4765C39.2214 36.2317 41.2396 36.2317 42.4844 37.4765L51.5 46.4921L60.5156 37.4765C61.7604 36.2317 63.7787 36.2317 65.0234 37.4765Z"fill=#909090>');const xp=e=>{Bh();const t=()=>e.size||"m";return Sd((()=>Sd((()=>"m"===t()))()?Np():Sd((()=>"s"===t()))()?Ap():Pp()))};var Ip=vh('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path d="M15.55 5.85123C18.9459 7.81184 20.1094 12.1541 18.1488 15.55C16.1882 18.9459 11.8459 20.1094 8.44998 18.1488C8.01952 17.9003 7.46909 18.0478 7.22056 18.4782C6.97203 18.9087 7.11952 19.4591 7.54998 19.7076C11.8068 22.1653 17.2499 20.7068 19.7076 16.45C22.1653 12.1932 20.7068 6.75005 16.45 4.29239C12.1932 1.83472 6.75003 3.29321 4.29236 7.55001C4.04383 7.98047 4.19132 8.53091 4.62178 8.77943C5.05224 9.02796 5.60268 8.88048 5.8512 8.45001C7.81181 5.05413 12.1541 3.89062 15.55 5.85123Z">'),kp=vh('<svg xmlns=http://www.w3.org/2000/svg width=44 height=44 viewBox="0 0 44 44"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M22 2.99951C11.5066 2.99951 3 11.5061 3 21.9995C3 32.4929 11.5066 40.9995 22 40.9995C22.8284 40.9995 23.5 41.6711 23.5 42.4995C23.5 43.3279 22.8284 43.9995 22 43.9995C9.84974 43.9995 0 34.1498 0 21.9995C0 9.84925 9.84974 -0.000488281 22 -0.000488281C34.1503 -0.000488281 44 9.84925 44 21.9995C44 22.8279 43.3284 23.4995 42.5 23.4995C41.6716 23.4995 41 22.8279 41 21.9995C41 11.5061 32.4934 2.99951 22 2.99951Z">'),Dp=vh('<svg width=72 height=72 viewBox="0 0 72 72"fill=none xmlns=http://www.w3.org/2000/svg><path d="M24 56.7846C35.479 63.412 50.1572 59.479 56.7846 47.9999C63.412 36.5209 59.479 21.8427 48 15.2153C36.521 8.58791 21.8428 12.5209 15.2154 23.9999"stroke-width=4 stroke-linecap=round stroke-linejoin=round>');const Kp=e=>{const t=Bh(),n=()=>e.size||"xs",r=()=>e.fill||t.colors.icon.tertiary,o=Lh`
        animation: ${Uh`
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
    `} 1s linear infinite;
    `;return Sd((()=>{return Sd((()=>"xs"===n()))()?(c=Ip(),l=c.firstChild,Od((t=>{var n=Gc(o,e.class),i=r();return n!==t.e&&mh(c,"class",t.e=n),i!==t.t&&mh(l,"fill",t.t=i),t}),{e:void 0,t:void 0}),c):Sd((()=>"s"===n()))()?(s=kp(),a=s.firstChild,Od((t=>{var n=Gc(o,e.class),i=r();return n!==t.e&&mh(s,"class",t.e=n),i!==t.t&&mh(a,"fill",t.t=i),t}),{e:void 0,t:void 0}),s):(t=Dp(),i=t.firstChild,Od((n=>{var s=Gc(o,e.class),a=r();return s!==n.e&&mh(t,"class",n.e=s),a!==n.t&&mh(i,"stroke",n.t=a),n}),{e:void 0,t:void 0}),t);var t,i,s,a,c,l}))};var Mp=vh('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M5.56608 4.42584C5.82527 3.32158 6.8176 2.5 8.00001 2.5C9.38072 2.5 10.5 3.61929 10.5 5C10.5 5.63026 10.3391 6.0386 10.1264 6.34455C9.90018 6.66993 9.58561 6.92478 9.18864 7.20877C9.12579 7.25372 9.05873 7.30025 8.9887 7.34883C8.27392 7.84472 7.25001 8.55507 7.25001 10V10.25C7.25001 10.6642 7.5858 11 8.00001 11C8.41422 11 8.75001 10.6642 8.75001 10.25V10C8.75001 9.36502 9.10777 9.1096 9.94554 8.51149L10.0614 8.42873C10.4769 8.13147 10.9748 7.75194 11.358 7.20076C11.7547 6.63015 12 5.91973 12 5C12 2.79086 10.2091 1 8.00001 1C6.10564 1 4.5205 2.31615 4.10577 4.08308C4.01112 4.48634 4.26129 4.88997 4.66454 4.98462C5.0678 5.07927 5.47143 4.8291 5.56608 4.42584ZM8.00001 15C8.60752 15 9.10001 14.5075 9.10001 13.9C9.10001 13.2925 8.60752 12.8 8.00001 12.8C7.39249 12.8 6.90001 13.2925 6.90001 13.9C6.90001 14.5075 7.39249 15 8.00001 15Z">');const Lp=e=>{const t=Bh();return n=Mp(),r=n.firstChild,Od((()=>mh(r,"fill",e.fill||t.colors.icon.secondary))),n;var n,r};var Up=vh('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 16 16"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M3.56176 1.87482C3.8379 1.87482 4.06176 2.09867 4.06176 2.37482V3.69674C5.09916 2.7469 6.48174 2.16666 7.99996 2.16666C11.2216 2.16666 13.8333 4.77834 13.8333 8C13.8333 11.2217 11.2216 13.8333 7.99996 13.8333C4.7783 13.8333 2.16663 11.2217 2.16663 8C2.16663 7.72385 2.39048 7.5 2.66663 7.5C2.94277 7.5 3.16663 7.72385 3.16663 8C3.16663 10.6694 5.33058 12.8333 7.99996 12.8333C10.6693 12.8333 12.8333 10.6694 12.8333 8C12.8333 5.33062 10.6693 3.16666 7.99996 3.16666C6.68645 3.16666 5.49513 3.69037 4.62354 4.54148H6.22843C6.50457 4.54148 6.72843 4.76534 6.72843 5.04148C6.72843 5.31763 6.50457 5.54148 6.22843 5.54148H3.56176C3.28562 5.54148 3.06176 5.31763 3.06176 5.04148V2.37482C3.06176 2.09867 3.28562 1.87482 3.56176 1.87482Z">');const jp=e=>{const t=Bh();return n=Up(),r=n.firstChild,Od((()=>mh(r,"fill",t.colors.text.primary))),n;var n,r};var Wp=vh('<svg xmlns=http://www.w3.org/2000/svg width=16 height=17 viewBox="0 0 16 17"fill=none><path fill-rule=evenodd clip-rule=evenodd d="M1 4.12695C1 3.07754 1 2.55284 1.19202 2.14684C1.38986 1.72856 1.7266 1.39181 2.14489 1.19397C2.55088 1.00195 3.07559 1.00195 4.125 1.00195C5.17441 1.00195 5.69912 1.00195 6.10511 1.19397C6.5234 1.39181 6.86014 1.72856 7.05798 2.14684C7.25 2.55284 7.25 3.07754 7.25 4.12695C7.25 5.17636 7.25 5.70107 7.05798 6.10706C6.86014 6.52535 6.5234 6.8621 6.10511 7.05993C5.69912 7.25195 5.17441 7.25195 4.125 7.25195C3.07559 7.25195 2.55088 7.25195 2.14489 7.05993C1.7266 6.8621 1.38986 6.52535 1.19202 6.10706C1 5.70107 1 5.17636 1 4.12695ZM2.5 3.30195C2.5 3.02193 2.5 2.88191 2.5545 2.77496C2.60243 2.68088 2.67892 2.60439 2.773 2.55645C2.87996 2.50195 3.01997 2.50195 3.3 2.50195H4.95C5.23003 2.50195 5.37004 2.50195 5.477 2.55645C5.57108 2.60439 5.64757 2.68088 5.6955 2.77496C5.75 2.88191 5.75 3.02193 5.75 3.30195V4.95195C5.75 5.23198 5.75 5.37199 5.6955 5.47895C5.64757 5.57303 5.57108 5.64952 5.477 5.69746C5.37004 5.75195 5.23003 5.75195 4.95 5.75195H3.3C3.01997 5.75195 2.87996 5.75195 2.773 5.69746C2.67892 5.64952 2.60243 5.57303 2.5545 5.47895C2.5 5.37199 2.5 5.23198 2.5 4.95195V3.30195ZM1 11.877C1 10.8275 1 10.3028 1.19202 9.89684C1.38986 9.47856 1.7266 9.14181 2.14489 8.94397C2.55088 8.75195 3.07559 8.75195 4.125 8.75195C5.17441 8.75195 5.69912 8.75195 6.10511 8.94397C6.5234 9.14181 6.86014 9.47856 7.05798 9.89684C7.25 10.3028 7.25 10.8275 7.25 11.877C7.25 12.9264 7.25 13.4511 7.05798 13.8571C6.86014 14.2753 6.5234 14.6121 6.10511 14.8099C5.69912 15.002 5.17441 15.002 4.125 15.002C3.07559 15.002 2.55088 15.002 2.14489 14.8099C1.7266 14.6121 1.38986 14.2753 1.19202 13.8571C1 13.4511 1 12.9264 1 11.877ZM2.5 11.052C2.5 10.7719 2.5 10.6319 2.5545 10.525C2.60243 10.4309 2.67892 10.3544 2.773 10.3064C2.87996 10.252 3.01997 10.252 3.3 10.252H4.95C5.23003 10.252 5.37004 10.252 5.477 10.3064C5.57108 10.3544 5.64757 10.4309 5.6955 10.525C5.75 10.6319 5.75 10.7719 5.75 11.052V12.702C5.75 12.982 5.75 13.122 5.6955 13.2289C5.64757 13.323 5.57108 13.3995 5.477 13.4475C5.37004 13.502 5.23003 13.502 4.95 13.502H3.3C3.01997 13.502 2.87996 13.502 2.773 13.4475C2.67892 13.3995 2.60243 13.323 2.5545 13.2289C2.5 13.122 2.5 12.982 2.5 12.702V11.052ZM8.94202 2.14684C8.75 2.55284 8.75 3.07754 8.75 4.12695C8.75 5.17636 8.75 5.70107 8.94202 6.10706C9.13986 6.52535 9.4766 6.8621 9.89489 7.05993C10.3009 7.25195 10.8256 7.25195 11.875 7.25195C12.9244 7.25195 13.4491 7.25195 13.8551 7.05993C14.2734 6.8621 14.6101 6.52535 14.808 6.10706C15 5.70107 15 5.17636 15 4.12695C15 3.07754 15 2.55284 14.808 2.14684C14.6101 1.72856 14.2734 1.39181 13.8551 1.19397C13.4491 1.00195 12.9244 1.00195 11.875 1.00195C10.8256 1.00195 10.3009 1.00195 9.89489 1.19397C9.4766 1.39181 9.13986 1.72856 8.94202 2.14684ZM10.3045 2.77496C10.25 2.88191 10.25 3.02193 10.25 3.30195V4.95195C10.25 5.23198 10.25 5.37199 10.3045 5.47895C10.3524 5.57303 10.4289 5.64952 10.523 5.69746C10.63 5.75195 10.77 5.75195 11.05 5.75195H12.7C12.98 5.75195 13.12 5.75195 13.227 5.69746C13.3211 5.64952 13.3976 5.57303 13.4455 5.47895C13.5 5.37199 13.5 5.23198 13.5 4.95195V3.30195C13.5 3.02193 13.5 2.88191 13.4455 2.77496C13.3976 2.68088 13.3211 2.60439 13.227 2.55645C13.12 2.50195 12.98 2.50195 12.7 2.50195H11.05C10.77 2.50195 10.63 2.50195 10.523 2.55645C10.4289 2.60439 10.3524 2.68088 10.3045 2.77496ZM8.80727 9.13518C8.75 9.26242 8.75 9.4256 8.75 9.75195C8.75 10.0783 8.75 10.2415 8.80727 10.3687C8.87245 10.5136 8.9884 10.6295 9.13323 10.6947C9.26047 10.752 9.42365 10.752 9.75 10.752C10.0764 10.752 10.2395 10.752 10.3668 10.6947C10.5116 10.6295 10.6276 10.5136 10.6927 10.3687C10.75 10.2415 10.75 10.0783 10.75 9.75195C10.75 9.4256 10.75 9.26242 10.6927 9.13518C10.6276 8.99035 10.5116 8.8744 10.3668 8.80922C10.2395 8.75195 10.0764 8.75195 9.75 8.75195C9.42365 8.75195 9.26047 8.75195 9.13323 8.80922C8.9884 8.8744 8.87245 8.99035 8.80727 9.13518ZM10.87 11.8771C10.87 11.546 10.87 11.3805 10.9289 11.2517C10.9938 11.1098 11.1077 10.9959 11.2497 10.931C11.3784 10.8721 11.5439 10.8721 11.875 10.8721C12.2061 10.8721 12.3716 10.8721 12.5003 10.931C12.6423 10.9959 12.7562 11.1098 12.8211 11.2517C12.88 11.3805 12.88 11.546 12.88 11.8771C12.88 12.2081 12.88 12.3737 12.8211 12.5024C12.7562 12.6444 12.6423 12.7583 12.5003 12.8232C12.3716 12.8821 12.2061 12.8821 11.875 12.8821C11.5439 12.8821 11.3784 12.8821 11.2497 12.8232C11.1077 12.7583 10.9938 12.6444 10.9289 12.5024C10.87 12.3737 10.87 12.2081 10.87 11.8771ZM8.80727 13.3852C8.75 13.5124 8.75 13.6756 8.75 14.002C8.75 14.3283 8.75 14.4915 8.80727 14.6187C8.87245 14.7636 8.9884 14.8795 9.13323 14.9447C9.26047 15.002 9.42365 15.002 9.75 15.002C10.0764 15.002 10.2395 15.002 10.3668 14.9447C10.5116 14.8795 10.6276 14.7636 10.6927 14.6187C10.75 14.4915 10.75 14.3283 10.75 14.002C10.75 13.6756 10.75 13.5124 10.6927 13.3852C10.6276 13.2404 10.5116 13.1244 10.3668 13.0592C10.2395 13.002 10.0764 13.002 9.75 13.002C9.42365 13.002 9.26047 13.002 9.13323 13.0592C8.9884 13.1244 8.87245 13.2404 8.80727 13.3852ZM13 9.75195C13 9.4256 13 9.26242 13.0573 9.13518C13.1224 8.99035 13.2384 8.8744 13.3832 8.80922C13.5105 8.75195 13.6736 8.75195 14 8.75195C14.3264 8.75195 14.4895 8.75195 14.6168 8.80922C14.7616 8.8744 14.8776 8.99035 14.9427 9.13518C15 9.26242 15 9.4256 15 9.75195C15 10.0783 15 10.2415 14.9427 10.3687C14.8776 10.5136 14.7616 10.6295 14.6168 10.6947C14.4895 10.752 14.3264 10.752 14 10.752C13.6736 10.752 13.5105 10.752 13.3832 10.6947C13.2384 10.6295 13.1224 10.5136 13.0573 10.3687C13 10.2415 13 10.0783 13 9.75195ZM13.0573 13.3852C13 13.5124 13 13.6756 13 14.002C13 14.3283 13 14.4915 13.0573 14.6187C13.1224 14.7636 13.2384 14.8795 13.3832 14.9447C13.5105 15.002 13.6736 15.002 14 15.002C14.3264 15.002 14.4895 15.002 14.6168 14.9447C14.7616 14.8795 14.8776 14.7636 14.9427 14.6187C15 14.4915 15 14.3283 15 14.002C15 13.6756 15 13.5124 14.9427 13.3852C14.8776 13.2404 14.7616 13.1244 14.6168 13.0592C14.4895 13.002 14.3264 13.002 14 13.002C13.6736 13.002 13.5105 13.002 13.3832 13.0592C13.2384 13.1244 13.1224 13.2404 13.0573 13.3852Z">');const Bp=e=>{const t=Bh();return n=Wp(),r=n.firstChild,Od((()=>mh(r,"fill",e.fill||t.colors.icon.secondary))),n;var n,r},Xp=Hh.button`
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: transparent;
    border: none;
    cursor: pointer;

    transition: transform 0.125s ease-in-out;

    ${hf} {
        &:hover {
            transform: scale(1.04);
        }
    }

    &:active {
        transform: scale(0.96);
    }

    ${df} {
        &:active {
            transform: scale(0.92);
        }
    }
`,Hp=e=>{const t=fp(e),n=()=>e.icon||"close";return Gd(Xp,th({get class(){return e.class},onClick:()=>e.onClick(),"data-tc-icon-button":"true"},t,{get children(){return[Gd(ih,{get when(){return!!e.children},get children(){return e.children}}),Gd(ih,{get when(){return!e.children},get children(){return Gd(sh,{get children(){return[Gd(ah,{get when(){return"close"===n()},get children(){return Gd(Op,{get fill(){return e.fill}})}}),Gd(ah,{get when(){return"arrow"===n()},get children(){return Gd(Cp,{get fill(){return e.fill}})}}),Gd(ah,{get when(){return"question"===n()},get children(){return Gd(Lp,{get fill(){return e.fill}})}}),Gd(ah,{get when(){return"string"!=typeof n()},get children(){return n()}})]}})}})]}}))},Fp={m:"24px",s:"16px",none:"0"},qp=Hh.div`
  display: flex;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.4);
  padding: 20px 0;
  overflow-y: auto;

  ${uf("mobile")} {
    padding-bottom: 0;
  }
`,Jp=Lh`
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08), 0 16px 64px rgba(0, 0, 0, 0.16);
  width: fit-content;
  margin: auto;

  ${uf("mobile")} {
    width: 100%;
    height: fit-content;
    margin: auto 0 0 0;
  }
`,zp=Hh.div`
  position: relative;
  min-height: 100px;
  width: 416px;
  padding: 44px 56px 24px;

  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.04);

  background-color: ${e=>e.theme.colors.background.primary};
  border-radius: ${e=>Fp[e.theme.borderRadius]};

  ${uf("mobile")} {
    width: 100%;
    border-radius: 24px 24px 0px 0px;
  }
`,Vp=Hh(Hp)`
  position: absolute;
  right: 16px;
  top: 12px;
`;Hh.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 16px 16px 18px;
  border-radius: 0 0 ${e=>Fp[e.theme.borderRadius]}
    ${e=>Fp[e.theme.borderRadius]};
`,Hh(Hp)`
  background-color: ${e=>$h(e.theme.colors.icon.secondary,.12)};
`;class $p{constructor(){rd(this,"currentTime",0)}}const Gp=class{constructor(){rd(this,"currentTime",0),rd(this,"playbackRate",1),rd(this,"startTime",null),rd(this,"timeline",new $p),rd(this,"finished",Promise.resolve(this)),rd(this,"effect",null),rd(this,"id",""),rd(this,"pending",!1),rd(this,"playState","finished"),rd(this,"replaceState","active"),rd(this,"ready",Promise.resolve(this)),rd(this,"oncancel",null),rd(this,"onfinish",null),rd(this,"onremove",null)}static create(){return Gp._instance||(!function(...e){Va.logWarning(e)}("Animation is not supported in this environment: please consider using the `web-animations-js` polyfill to provide a fallback implementation of the Web Animations API."),Gp._instance=new Gp),Gp._instance}cancel(){}finish(){}pause(){}play(){}reverse(){}addEventListener(e,t,n){}dispatchEvent(e){return!1}removeEventListener(e,t,n){}updatePlaybackRate(e){}commitStyles(){}persist(){}};let Qp=Gp;function Yp(e,t,n){return"animate"in e?e.animate(t,n):Qp.create()}rd(Qp,"_instance",null);var Zp=vh("<div>");const eg=function(e,t){const n=e=>{var n,r;"Escape"===e.key&&(null==(n=document.activeElement)||n.blur(),null==(r=t())||r())};document.body.addEventListener("keydown",n),Ad((()=>document.body.removeEventListener("keydown",n)))},tg=function(e,t){const{isEnabled:n,onClose:r}=t();if(!n)return;if(!("android"===tp().os))return;window.history.pushState(yp,"");const o=e=>{e.preventDefault(),r()};window.addEventListener("popstate",o,{once:!0}),Ad((()=>{window.removeEventListener("popstate",o),function(e){od(this,null,(function*(){yield new Promise((e=>requestAnimationFrame(e))),e()}))}((()=>{var e;!0===(null==(e=window.history.state)?void 0:e[mp])&&window.history.back()}))}))},ng=e=>{const t=Bh(),n=fp(e);return Ed((()=>{e.opened?document.documentElement.scrollHeight!==document.documentElement.clientHeight&&(document.body.style.top=Gh(-document.documentElement.scrollTop),document.body.classList.add(Jh)):(document.body.classList.remove(Jh),document.documentElement.scrollTo({top:-parseFloat(getComputedStyle(document.body).top)}),document.body.style.top="auto")})),Gd(vp,{onBeforeEnter:e=>{const t=lf("mobile")?200:100;Yp(e,[{opacity:0},{opacity:1}],{duration:t}),lf("mobile")&&Yp(e.firstElementChild,[{transform:"translateY(390px)"},{transform:"translateY(0)"}],{duration:t})},onExit:(e,t)=>{const n=lf("mobile")?200:100,r=Yp(e,[{opacity:1},{opacity:0}],{duration:n});if(lf("mobile")){const o=Yp(e.firstElementChild,[{transform:"translateY(0)"},{transform:"translateY(390px)"}],{duration:n});Promise.all([r.finished,o.finished]).then(t)}else r.finished.then(t)},get children(){return Gd(ih,{get when(){return e.opened},get children(){return Gd(qp,th({"data-tc-modal":"true"},n,{get children(){var n=Zp();return wh(tg,n,(()=>({isEnabled:!0,onClose:()=>e.onClose()}))),wh(eg,n,(()=>()=>e.onClose())),Ch(n,Gd(zp,{get class(){return e.class},get children(){return[Gd(Vp,{icon:"close",onClick:()=>e.onClose()}),Sd((()=>e.children))]}})),Od((()=>yh(n,Gc(Jp,Lh`
                                border-radius: ${Fp[t.borderRadius]};
                                background-color: ${t.colors.background.tint};

                                ${uf("mobile")} {
                                    border-radius: ${Fp[t.borderRadius]}
                                        ${Fp[t.borderRadius]} 0 0;
                                }
                            `)))),n}}))}})}})},rg=Hh.div`
    width: 52px;
    height: 52px;
    background: transparent;
    position: absolute;
    right: 0;
    bottom: 0;

    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.125s ease-in-out;
`,og=Hh.button`
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    background-color: ${e=>e.theme.colors.background.qr};
    border-radius: 0;
    padding: ${Gh(0)} 0;
    height: ${Gh(270)};
    width: ${Gh(270)};

    overflow: hidden;
    cursor: pointer;
    border: none;

    ${hf} {
        &:hover {
            ${rg.class} {
                transform: scale(1.04);
            }
        }
    }

    &:active {
        ${rg.class} {
            transform: scale(0.96);
        }
    }

    ${df} {
        &:active {
            ${rg.class} {
                transform: scale(0.92);
            }
        }
    }
`,ig=Hh.div`
    position: relative;
  
    width: fit-content;
    margin: 0 auto;

    > div:first-child {
        display: flex;
        align-items: center;
        justify-content: center;
    }
`,sg=Hh.div`
    position: absolute;
    width: ${Gh(56)};
    height: ${Gh(56)};
    background: lightgray;

    display: flex;
    align-items: center;
    justify-content: center;
`,ag=Hh(lp)`
    width: ${e=>Gh(e.size)};
    height: ${e=>Gh(e.size)};
    border-radius: 100000px;
    background-color: transparent;
`;Hh.div`
    position: absolute;
    bottom: 14px;
    left: 50%;
    transform: translate(-50%, 0);

    display: flex;
    gap: 6px;
    align-items: center;
    border-radius: 18px;
    min-width: 126px;
    padding: 9px 16px 9px 10px;

    filter: drop-shadow(0px 2px 8px rgba(0, 0, 0, 0.08));
    background-color: ${e=>e.theme.colors.background.segment};
`;var cg={exports:{}};!function(e){var t=function(){var e=function(e,t){var n=e,r=u[t],o=null,i=0,s=null,a=[],c={},l=function(e,t){o=function(e){for(var t=new Array(e),n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(i=4*n+17),d(0,0),d(i-7,0),d(0,i-7),f(),h(),g(e,t),n>=7&&p(e),null==s&&(s=m(n,r,a)),v(s,t)},d=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||i<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||i<=t+r||(o[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},h=function(){for(var e=8;e<i-8;e+=1)null==o[e][6]&&(o[e][6]=e%2==0);for(var t=8;t<i-8;t+=1)null==o[6][t]&&(o[6][t]=t%2==0)},f=function(){for(var e=b.getPatternPosition(n),t=0;t<e.length;t+=1)for(var r=0;r<e.length;r+=1){var i=e[t],s=e[r];if(null==o[i][s])for(var a=-2;a<=2;a+=1)for(var c=-2;c<=2;c+=1)o[i+a][s+c]=-2==a||2==a||-2==c||2==c||0==a&&0==c}},p=function(e){for(var t=b.getBCHTypeNumber(n),r=0;r<18;r+=1){var s=!e&&1==(t>>r&1);o[Math.floor(r/3)][r%3+i-8-3]=s}for(r=0;r<18;r+=1){s=!e&&1==(t>>r&1);o[r%3+i-8-3][Math.floor(r/3)]=s}},g=function(e,t){for(var n=r<<3|t,s=b.getBCHTypeInfo(n),a=0;a<15;a+=1){var c=!e&&1==(s>>a&1);a<6?o[a][8]=c:a<8?o[a+1][8]=c:o[i-15+a][8]=c}for(a=0;a<15;a+=1){c=!e&&1==(s>>a&1);a<8?o[8][i-a-1]=c:a<9?o[8][15-a-1+1]=c:o[8][15-a-1]=c}o[i-8][8]=!e},v=function(e,t){for(var n=-1,r=i-1,s=7,a=0,c=b.getMaskFunction(t),l=i-1;l>0;l-=2)for(6==l&&(l-=1);;){for(var u=0;u<2;u+=1)if(null==o[r][l-u]){var d=!1;a<e.length&&(d=1==(e[a]>>>s&1)),c(r,l-u)&&(d=!d),o[r][l-u]=d,-1==(s-=1)&&(a+=1,s=7)}if((r+=n)<0||i<=r){r-=n,n=-n;break}}},m=function(e,t,n){for(var r=_.getRSBlocks(e,t),o=O(),i=0;i<n.length;i+=1){var s=n[i];o.put(s.getMode(),4),o.put(s.getLength(),b.getLengthInBits(s.getMode(),e)),s.write(o)}var a=0;for(i=0;i<r.length;i+=1)a+=r[i].dataCount;if(o.getLengthInBits()>8*a)throw"code length overflow. ("+o.getLengthInBits()+">"+8*a+")";for(o.getLengthInBits()+4<=8*a&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*a||(o.put(236,8),o.getLengthInBits()>=8*a));)o.put(17,8);return function(e,t){for(var n=0,r=0,o=0,i=new Array(t.length),s=new Array(t.length),a=0;a<t.length;a+=1){var c=t[a].dataCount,l=t[a].totalCount-c;r=Math.max(r,c),o=Math.max(o,l),i[a]=new Array(c);for(var u=0;u<i[a].length;u+=1)i[a][u]=255&e.getBuffer()[u+n];n+=c;var d=b.getErrorCorrectPolynomial(l),h=C(i[a],d.getLength()-1).mod(d);for(s[a]=new Array(d.getLength()-1),u=0;u<s[a].length;u+=1){var f=u+h.getLength()-s[a].length;s[a][u]=f>=0?h.getAt(f):0}}var p=0;for(u=0;u<t.length;u+=1)p+=t[u].totalCount;var g=new Array(p),v=0;for(u=0;u<r;u+=1)for(a=0;a<t.length;a+=1)u<i[a].length&&(g[v]=i[a][u],v+=1);for(u=0;u<o;u+=1)for(a=0;a<t.length;a+=1)u<s[a].length&&(g[v]=s[a][u],v+=1);return g}(o,r)};c.addData=function(e,t){var n=null;switch(t=t||"Byte"){case"Numeric":n=E(e);break;case"Alphanumeric":n=S(e);break;case"Byte":n=R(e);break;case"Kanji":n=T(e);break;default:throw"mode:"+t}a.push(n),s=null},c.isDark=function(e,t){if(e<0||i<=e||t<0||i<=t)throw e+","+t;return o[e][t]},c.getModuleCount=function(){return i},c.make=function(){if(n<1){for(var e=1;e<40;e++){for(var t=_.getRSBlocks(e,r),o=O(),i=0;i<a.length;i++){var s=a[i];o.put(s.getMode(),4),o.put(s.getLength(),b.getLengthInBits(s.getMode(),e)),s.write(o)}var u=0;for(i=0;i<t.length;i++)u+=t[i].dataCount;if(o.getLengthInBits()<=8*u)break}n=e}l(!1,function(){for(var e=0,t=0,n=0;n<8;n+=1){l(!0,n);var r=b.getLostPoint(c);(0==n||e>r)&&(e=r,t=n)}return t}())},c.createTableTag=function(e,t){e=e||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(t=void 0===t?4*e:t)+"px;",n+='">',n+="<tbody>";for(var r=0;r<c.getModuleCount();r+=1){n+="<tr>";for(var o=0;o<c.getModuleCount();o+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=c.isDark(r,o)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},c.createSvgTag=function(e,t,n,r){var o={};"object"==typeof arguments[0]&&(e=(o=arguments[0]).cellSize,t=o.margin,n=o.alt,r=o.title),e=e||2,t=void 0===t?4*e:t,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,(r="string"==typeof r?{text:r}:r||{}).text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var i,s,a,l,u=c.getModuleCount()*e+2*t,d="";for(l="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",d+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',d+=o.scalable?"":' width="'+u+'px" height="'+u+'px"',d+=' viewBox="0 0 '+u+" "+u+'" ',d+=' preserveAspectRatio="xMinYMin meet"',d+=r.text||n.text?' role="img" aria-labelledby="'+y([r.id,n.id].join(" ").trim())+'"':"",d+=">",d+=r.text?'<title id="'+y(r.id)+'">'+y(r.text)+"</title>":"",d+=n.text?'<description id="'+y(n.id)+'">'+y(n.text)+"</description>":"",d+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',d+='<path d="',s=0;s<c.getModuleCount();s+=1)for(a=s*e+t,i=0;i<c.getModuleCount();i+=1)c.isDark(s,i)&&(d+="M"+(i*e+t)+","+a+l);return d+='" stroke="transparent" fill="black"/>',d+="</svg>"},c.createDataURL=function(e,t){e=e||2,t=void 0===t?4*e:t;var n=c.getModuleCount()*e+2*t,r=t,o=n-t;return P(n,n,(function(t,n){if(r<=t&&t<o&&r<=n&&n<o){var i=Math.floor((t-r)/e),s=Math.floor((n-r)/e);return c.isDark(s,i)?0:1}return 1}))},c.createImgTag=function(e,t,n){e=e||2,t=void 0===t?4*e:t;var r=c.getModuleCount()*e+2*t,o="";return o+="<img",o+=' src="',o+=c.createDataURL(e,t),o+='"',o+=' width="',o+=r,o+='"',o+=' height="',o+=r,o+='"',n&&(o+=' alt="',o+=y(n),o+='"'),o+="/>"};var y=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r}}return t};return c.createASCII=function(e,t){if((e=e||1)<2)return function(e){e=void 0===e?2:e;var t,n,r,o,i,s=1*c.getModuleCount()+2*e,a=e,l=s-e,u={"â–ˆâ–ˆ":"â–ˆ","â–ˆ ":"â–€"," â–ˆ":"â–„","  ":" "},d={"â–ˆâ–ˆ":"â–€","â–ˆ ":"â–€"," â–ˆ":" ","  ":" "},h="";for(t=0;t<s;t+=2){for(r=Math.floor((t-a)/1),o=Math.floor((t+1-a)/1),n=0;n<s;n+=1)i="â–ˆ",a<=n&&n<l&&a<=t&&t<l&&c.isDark(r,Math.floor((n-a)/1))&&(i=" "),a<=n&&n<l&&a<=t+1&&t+1<l&&c.isDark(o,Math.floor((n-a)/1))?i+=" ":i+="â–ˆ",h+=e<1&&t+1>=l?d[i]:u[i];h+="\n"}return s%2&&e>0?h.substring(0,h.length-s-1)+Array(s+1).join("â–€"):h.substring(0,h.length-1)}(t);e-=1,t=void 0===t?2*e:t;var n,r,o,i,s=c.getModuleCount()*e+2*t,a=t,l=s-t,u=Array(e+1).join("â–ˆâ–ˆ"),d=Array(e+1).join("  "),h="",f="";for(n=0;n<s;n+=1){for(o=Math.floor((n-a)/e),f="",r=0;r<s;r+=1)i=1,a<=r&&r<l&&a<=n&&n<l&&c.isDark(o,Math.floor((r-a)/e))&&(i=0),f+=i?u:d;for(o=0;o<e;o+=1)h+=f+"\n"}return h.substring(0,h.length-1)},c.renderTo2dContext=function(e,t){t=t||2;for(var n=c.getModuleCount(),r=0;r<n;r++)for(var o=0;o<n;o++)e.fillStyle=c.isDark(r,o)?"black":"white",e.fillRect(r*t,o*t,t,t)},c};e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}},e.stringToBytes=e.stringToBytesFuncs.default,e.createStringToBytes=function(e,t){var n=function(){for(var n=A(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},o=0,i={};;){var s=n.read();if(-1==s)break;var a=r(),c=r()<<8|r();i[String.fromCharCode(s<<8|a)]=c,o+=1}if(o!=t)throw o+" != "+t;return i}(),r="?".charCodeAt(0);return function(e){for(var t=[],o=0;o<e.length;o+=1){var i=e.charCodeAt(o);if(i<128)t.push(i);else{var s=n[e.charAt(o)];"number"==typeof s?(255&s)==s?t.push(s):(t.push(s>>>8),t.push(255&s)):t.push(r)}}return t}};var t,n,r,o,i,s=1,a=2,c=4,l=8,u={L:1,M:0,Q:3,H:2},d=0,h=1,f=2,p=3,g=4,v=5,m=6,y=7,b=(t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,r=7973,i=function(e){for(var t=0;0!=e;)t+=1,e>>>=1;return t},(o={}).getBCHTypeInfo=function(e){for(var t=e<<10;i(t)-i(n)>=0;)t^=n<<i(t)-i(n);return 21522^(e<<10|t)},o.getBCHTypeNumber=function(e){for(var t=e<<12;i(t)-i(r)>=0;)t^=r<<i(t)-i(r);return e<<12|t},o.getPatternPosition=function(e){return t[e-1]},o.getMaskFunction=function(e){switch(e){case d:return function(e,t){return(e+t)%2==0};case h:return function(e,t){return e%2==0};case f:return function(e,t){return t%3==0};case p:return function(e,t){return(e+t)%3==0};case g:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case v:return function(e,t){return e*t%2+e*t%3==0};case m:return function(e,t){return(e*t%2+e*t%3)%2==0};case y:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},o.getErrorCorrectPolynomial=function(e){for(var t=C([1],0),n=0;n<e;n+=1)t=t.multiply(C([1,w.gexp(n)],0));return t},o.getLengthInBits=function(e,t){if(1<=t&&t<10)switch(e){case s:return 10;case a:return 9;case c:case l:return 8;default:throw"mode:"+e}else if(t<27)switch(e){case s:return 12;case a:return 11;case c:return 16;case l:return 10;default:throw"mode:"+e}else{if(!(t<41))throw"type:"+t;switch(e){case s:return 14;case a:return 13;case c:return 16;case l:return 12;default:throw"mode:"+e}}},o.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var o=0;o<t;o+=1){for(var i=0,s=e.isDark(r,o),a=-1;a<=1;a+=1)if(!(r+a<0||t<=r+a))for(var c=-1;c<=1;c+=1)o+c<0||t<=o+c||0==a&&0==c||s==e.isDark(r+a,o+c)&&(i+=1);i>5&&(n+=3+i-5)}for(r=0;r<t-1;r+=1)for(o=0;o<t-1;o+=1){var l=0;e.isDark(r,o)&&(l+=1),e.isDark(r+1,o)&&(l+=1),e.isDark(r,o+1)&&(l+=1),e.isDark(r+1,o+1)&&(l+=1),0!=l&&4!=l||(n+=3)}for(r=0;r<t;r+=1)for(o=0;o<t-6;o+=1)e.isDark(r,o)&&!e.isDark(r,o+1)&&e.isDark(r,o+2)&&e.isDark(r,o+3)&&e.isDark(r,o+4)&&!e.isDark(r,o+5)&&e.isDark(r,o+6)&&(n+=40);for(o=0;o<t;o+=1)for(r=0;r<t-6;r+=1)e.isDark(r,o)&&!e.isDark(r+1,o)&&e.isDark(r+2,o)&&e.isDark(r+3,o)&&e.isDark(r+4,o)&&!e.isDark(r+5,o)&&e.isDark(r+6,o)&&(n+=40);var u=0;for(o=0;o<t;o+=1)for(r=0;r<t;r+=1)e.isDark(r,o)&&(u+=1);return n+=Math.abs(100*u/t/t-50)/5*10},o),w=function(){for(var e=new Array(256),t=new Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;var r={glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e[t]}};return r}();function C(e,t){if(void 0===e.length)throw e.length+"/"+t;var n=function(){for(var n=0;n<e.length&&0==e[n];)n+=1;for(var r=new Array(e.length-n+t),o=0;o<e.length-n;o+=1)r[o]=e[o+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var o=0;o<e.getLength();o+=1)t[n+o]^=w.gexp(w.glog(r.getAt(n))+w.glog(e.getAt(o)));return C(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=w.glog(r.getAt(0))-w.glog(e.getAt(0)),n=new Array(r.getLength()),o=0;o<r.getLength();o+=1)n[o]=r.getAt(o);for(o=0;o<e.getLength();o+=1)n[o]^=w.gexp(w.glog(e.getAt(o))+t);return C(n,0).mod(e)}};return r}var _=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},n={};return n.getRSBlocks=function(n,r){var o=function(t,n){switch(n){case u.L:return e[4*(t-1)+0];case u.M:return e[4*(t-1)+1];case u.Q:return e[4*(t-1)+2];case u.H:return e[4*(t-1)+3];default:return}}(n,r);if(void 0===o)throw"bad rs block @ typeNumber:"+n+"/errorCorrectionLevel:"+r;for(var i=o.length/3,s=[],a=0;a<i;a+=1)for(var c=o[3*a+0],l=o[3*a+1],d=o[3*a+2],h=0;h<c;h+=1)s.push(t(l,d));return s},n}(),O=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){var n=Math.floor(t/8);return 1==(e[n]>>>7-t%8&1)},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},E=function(e){var t=s,n=e,r={getMode:function(){return t},getLength:function(e){return n.length},write:function(e){for(var t=n,r=0;r+2<t.length;)e.put(o(t.substring(r,r+3)),10),r+=3;r<t.length&&(t.length-r==1?e.put(o(t.substring(r,r+1)),4):t.length-r==2&&e.put(o(t.substring(r,r+2)),7))}},o=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+i(e.charAt(n));return t},i=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return r},S=function(e){var t=a,n=e,r={getMode:function(){return t},getLength:function(e){return n.length},write:function(e){for(var t=n,r=0;r+1<t.length;)e.put(45*o(t.charAt(r))+o(t.charAt(r+1)),11),r+=2;r<t.length&&e.put(o(t.charAt(r)),6)}},o=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return r},R=function(t){var n=c,r=e.stringToBytes(t),o={getMode:function(){return n},getLength:function(e){return r.length},write:function(e){for(var t=0;t<r.length;t+=1)e.put(r[t],8)}};return o},T=function(t){var n=l,r=e.stringToBytesFuncs.SJIS;if(!r)throw"sjis not supported.";!function(){var e=r("å‹");if(2!=e.length||38726!=(e[0]<<8|e[1]))throw"sjis not supported."}();var o=r(t),i={getMode:function(){return n},getLength:function(e){return~~(o.length/2)},write:function(e){for(var t=o,n=0;n+1<t.length;){var r=(255&t[n])<<8|255&t[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)}};return i},N=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n=n||0,r=r||e.length;for(var o=0;o<r;o+=1)t.writeByte(e[o+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+="]"}};return t},A=function(e){var t=e,n=0,r=0,o=0,i={read:function(){for(;o<8;){if(n>=t.length){if(0==o)return-1;throw"unexpected end of file./"+o}var e=t.charAt(n);if(n+=1,"="==e)return o=0,-1;e.match(/^\s$/)||(r=r<<6|s(e.charCodeAt(0)),o+=6)}var i=r>>>o-8&255;return o-=8,i}},s=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return i},P=function(e,t,n){for(var r=function(e,t){var n=e,r=t,o=new Array(e*t),i={setPixel:function(e,t,r){o[t*n+e]=r},write:function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=s(2);e.writeByte(2);for(var o=0;t.length-o>255;)e.writeByte(255),e.writeBytes(t,o,255),o+=255;e.writeByte(t.length-o),e.writeBytes(t,o,t.length-o),e.writeByte(0),e.writeString(";")}},s=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,i=a(),s=0;s<t;s+=1)i.add(String.fromCharCode(s));i.add(String.fromCharCode(t)),i.add(String.fromCharCode(n));var c,l,u,d,h=N(),f=(c=h,l=0,u=0,d={write:function(e,t){if(e>>>t!=0)throw"length over";for(;l+t>=8;)c.writeByte(255&(e<<l|u)),t-=8-l,e>>>=8-l,u=0,l=0;u|=e<<l,l+=t},flush:function(){l>0&&c.writeByte(u)}},d);f.write(t,r);var p=0,g=String.fromCharCode(o[p]);for(p+=1;p<o.length;){var v=String.fromCharCode(o[p]);p+=1,i.contains(g+v)?g+=v:(f.write(i.indexOf(g),r),i.size()<4095&&(i.size()==1<<r&&(r+=1),i.add(g+v)),g=v)}return f.write(i.indexOf(g),r),f.write(n,r),f.flush(),h.toByteArray()},a=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return void 0!==e[t]}};return n};return i}(e,t),o=0;o<t;o+=1)for(var i=0;i<e;i+=1)r.setPixel(i,o,n(i,o));var s=N();r.write(s);for(var a=function(){var e=0,t=0,n=0,r="",o={},i=function(e){r+=String.fromCharCode(s(63&e))},s=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return o.writeByte=function(r){for(e=e<<8|255&r,t+=8,n+=1;t>=6;)i(e>>>t-6),t-=6},o.flush=function(){if(t>0&&(i(e<<6-t),e=0,t=0),n%3!=0)for(var o=3-n%3,s=0;s<o;s+=1)r+="="},o.toString=function(){return r},o}(),c=s.toByteArray(),l=0;l<c.length;l+=1)a.writeByte(c[l]);return a.flush(),"data:image/gif;base64,"+a};return e}();t.stringToBytesFuncs["UTF-8"]=function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}(e)},e.exports=t}(cg);const lg=cg.exports;var ug=vh("<div>");const dg=e=>{let t,n,r;_d(!1);const[o,i]=_d(54);return Ed((()=>{const o=lg(0,"M");if(o.addData(e.sourceUrl),o.make(),t){const e=o.getModuleCount(),s=5*e,a=Bh().theme==id.DARK?"white":"black",c=(t,n)=>t<7&&n<7||(t<7&&n>=e-7||t>=e-7&&n<7),l=5*e,u=Math.round(270/l*1e5)/1e5,d=t=>{const n=Math.ceil(56/(5*t));return{sizeCells:n,offsetCells:Math.ceil((e-n)/2)}},h=(t,n)=>{const{sizeCells:r}=d(u),o=Math.floor(e/2),i=(r+3)/2;return Math.sqrt(Math.pow(t-o,2)+Math.pow(n-o,2))<=i};let f=`<svg width="${s}" height="${s}" viewBox="0 0 ${s} ${s}" fill="none" xmlns="http://www.w3.org/2000/svg">`;const p=(e,t)=>{f+=`<rect \n            x="${5*t}" \n            y="${5*e}" \n            width="35" \n            height="5" \n            fill="${a}"\n            rx="4"\n        />`,f+=`<rect \n            x="${5*t}" \n            y="${5*(e+6)}" \n            width="35" \n            height="5" \n            fill="${a}"\n            rx="4"\n        />`,f+=`<rect \n            x="${5*t}" \n            y="${5*e}" \n            width="5" \n            height="35" \n            fill="${a}"\n            rx="4"\n        />`,f+=`<rect \n            x="${5*(t+6)}" \n            y="${5*e}" \n            width="5" \n            height="35" \n            fill="${a}"\n            rx="4"\n        />`,f+=`<rect \n            x="${5*(t+2)}" \n            y="${5*(e+2)}" \n            width="15" \n            height="15" \n            rx="4"\n            fill="${a}"\n        />`};p(0,0),p(0,e-7),p(e-7,0);const g=(e,t)=>{const n=4.25;return`<rect \n        x="${e+.375}" \n        y="${t+.375}" \n        width="4.25" \n        height="4.25" \n        rx="${n/3}"\n        fill="${a}"\n    />`};for(let t=0;t<e;t++)for(let n=0;n<e;n++)!o.isDark(t,n)||c(t,n)||h(t,n)||(f+=g(5*n,5*t));if(f+="</svg>",t.innerHTML=f,r){const{sizeCells:e,offsetCells:t}=d(u),n=5*e,o=5*t;r.style.top=Gh(o),r.style.left=Gh(o),r.style.height=Gh(n),r.style.width=Gh(n),r.style.borderRadius=Gh(1e6),i(Math.round(54/u))}n&&(n.style.transform=`scale(${u})`)}})),Gd(og,{get class(){return e.class},get children(){return[Gd(ig,{ref(e){"function"==typeof n?n(e):n=e},get children(){return[(n=ug(),"function"==typeof t?wh(t,n):t=n,n),Gd(ih,{get when(){return e.imageUrl},get children(){return Gd(sg,{ref(e){"function"==typeof r?r(e):r=e},get children(){return Gd(ag,{get src(){return e.imageUrl},alt:"",get size(){return o()}})}})}})];var n}}),Gd(vp,{onBeforeEnter:e=>{Yp(e,[{opacity:0,transform:"translate(-50%, 44px)"},{opacity:1,transform:"translate(-50%, 0)"}],{duration:150,easing:"ease-out"})},onExit:(e,t)=>{Yp(e,[{opacity:1,transform:"translate(-50%, 0)"},{opacity:0,transform:"translate(-50%, 44px)"}],{duration:150,easing:"ease-out"}).finished.then((()=>{t()}))}})]}})};function hg(e,t,n){const r=e[t]||t.trim().split(".").reduce(((e,t)=>e?e[t]:void 0),e);return void 0!==r?r:n}var fg=(e={},t=("undefined"!=typeof navigator&&navigator.language in e?navigator.language:(t=>null!=(t=Object.keys(e)[0])?t:"")()))=>{const[n,r]=_d(t),[o,i]=Pf(e);return[(e,t,r)=>{const i=hg(o[n()],e,r||"");return"function"==typeof i?i(t):"string"==typeof i?((e,t,n=/{{([^{}]+)}}/g)=>e.replace(n,((e,n)=>hg(t,n,""))))(i,t||{}):i},{add(e,t){i(e,(e=>Object.assign(e||{},t)))},locale:e=>e?r(e):n(),dict:e=>hg(o,e)}]},pg=xd({}),gg=()=>Id(pg);const vg=Hh.div`
    font-style: normal;
    font-weight: ${e=>e.fontWeight};
    font-size: ${e=>e.fontSize};
    line-height: ${e=>e.lineHeight};

    color: ${e=>e.color};
`,mg=e=>{const t=Bh(),[n]=gg();let r;const o=th({fontSize:"14px",fontWeight:"510",lineHeight:"130%"},e);return Ed((()=>{r&&"unset"!==o.cursor&&"pointer"!==getComputedStyle(r).cursor&&(r.style.cursor="default")})),Gd(vg,{get fontSize(){return o.fontSize},get fontWeight(){return o.fontWeight},get lineHeight(){return o.lineHeight},get color(){return e.color||t.colors.text.primary},get class(){return o.class},ref(e){"function"==typeof r?r(e):r=e},"data-tc-text":"true",get children(){var e;return Sd((()=>!!o.translationKey))()?n(o.translationKey,o.translationValues,null==(e=o.children)?void 0:e.toString()):o.children}})},yg=Hh.div`
    position: relative;

    &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        border: 0.5px solid rgba(0, 0, 0, 0.08);

        border-radius: inherit;
    }
`,bg=Hh(lp)`
    width: 100%;
    height: 100%;
    border-radius: inherit;
`,wg=e=>Gd(yg,{get class(){return e.class},get children(){return Gd(bg,{get src(){return e.src}})}}),Cg={m:"16px",s:"12px",none:"0"},_g={m:"6px",s:"6px",none:"0"};Hh.button`
    position: relative;
    cursor: pointer;
    border: none;
    background-color: unset;
    padding: 8px 4px;
    width: 92px;
    display: flex;
    flex-direction: column;
    align-items: center;

    transition: transform 0.125s ease-in-out;

    ${hf} {
        &:hover {
            transform: scale(1.04);
        }
    }

    &:active {
        transform: scale(0.96);
    }

    ${uf("mobile")} {
        padding: 8px 4px;
        width: 82px;
    }

    ${df} {
        &:active {
            transform: scale(0.92);
        }
    }
`,Hh(wg)`
    width: 60px;
    height: 60px;
    border-radius: ${e=>Cg[e.theme.borderRadius]};

    margin-bottom: 8px;
`,Hh(lp)`
    position: absolute;
    right: 10px;
    top: 50px;
    width: 24px;
    height: 24px;
    border-radius: ${e=>_g[e.theme.borderRadius]};
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.08);
`,Hh(mg)`
    max-width: 90px;
    font-weight: 510;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;

    ${uf("mobile")} {
        max-width: 80px;
    }
`,Hh(mg)`
    font-weight: ${e=>e.colorPrimary?"510":"400"};
    max-width: 90px;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    color: ${e=>e.colorPrimary?e.theme.colors.text.primary:e.theme.colors.text.secondary};

    ${uf("mobile")} {
        max-width: 80px;
    }
`;const Og=Hh.h1`
    font-style: normal;
    font-weight: 590;
    font-size: 20px;
    line-height: 28px;

    text-align: center;

    color: ${e=>e.theme.colors.text.primary};

    margin-top: 0;
    margin-bottom: 0;

    cursor: default;
`,Eg=e=>{const[t]=gg();return Gd(Og,{get class(){return e.class},"data-tc-h1":"true",get children(){var n;return Sd((()=>!!e.translationKey))()?t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString()):e.children}})},Sg=Hh.h2`
    font-style: normal;
    font-weight: 400;
    font-size: 16px;
    line-height: 22px;

    text-align: center;

    color: ${e=>e.theme.colors.text.secondary};

    margin-top: 0;
    margin-bottom: 32px;

    cursor: default;
`,Rg=e=>{const[t]=gg();return Gd(Sg,{get class(){return e.class},"data-tc-h2":"true",get children(){var n;return Sd((()=>!!e.translationKey))()?t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString()):e.children}})},Tg=Hh.h3`
    font-style: normal;
    font-weight: 510;
    font-size: 16px;
    line-height: 20px;

    color: ${e=>e.theme.colors.text.primary};

    margin-top: 0;
    margin-bottom: 0;

    cursor: default;
`,Ng=e=>{const[t]=gg();return Gd(Tg,{"data-tc-h3":"true",get class(){return e.class},get children(){var n;return Sd((()=>!!e.translationKey))()?t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString()):e.children}})},Ag={m:"16px",s:"12px",none:"0"},Pg={m:"6px",s:"6px",none:"0"};Hh.div`
    width: 60px;
    height: 60px;
    padding: 8px;
    margin-bottom: 8px;
    border-radius: ${e=>Ag[e.theme.borderRadius]};
    background-color: ${e=>e.theme.colors.background.tint};
    display: grid;
    grid-template: 1fr 1fr / 1fr 1fr;
    gap: 4px;
`,Hh(wg)`
    width: 20px;
    height: 20px;
    border-radius: ${e=>Pg[e.theme.borderRadius]};
`;const xg=Hh.a`
    display: block;
    text-decoration: unset;
`;var Ig=vh('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path fill-rule=evenodd clip-rule=evenodd d="M7.76228 2.09998H10.2378C11.0458 2.09997 11.7067 2.09996 12.2438 2.14384C12.7997 2.18926 13.3017 2.28614 13.7706 2.52505C14.5045 2.89896 15.1011 3.49558 15.475 4.22941C15.7139 4.6983 15.8108 5.20038 15.8562 5.75629C15.9001 6.29337 15.9001 6.95422 15.9001 7.76227V8.1H16.2377C17.0457 8.09999 17.7066 8.09998 18.2437 8.14386C18.7996 8.18928 19.3017 8.28616 19.7705 8.52507C20.5044 8.89898 21.101 9.4956 21.4749 10.2294C21.7138 10.6983 21.8107 11.2004 21.8561 11.7563C21.9 12.2934 21.9 12.9542 21.9 13.7623V16.2377C21.9 17.0458 21.9 17.7066 21.8561 18.2437C21.8107 18.7996 21.7138 19.3017 21.4749 19.7706C21.101 20.5044 20.5044 21.101 19.7705 21.4749C19.3017 21.7138 18.7996 21.8107 18.2437 21.8561C17.7066 21.9 17.0458 21.9 16.2378 21.9H13.7623C12.9543 21.9 12.2934 21.9 11.7563 21.8561C11.2004 21.8107 10.6983 21.7138 10.2294 21.4749C9.49561 21.101 8.89898 20.5044 8.52508 19.7706C8.28616 19.3017 8.18928 18.7996 8.14386 18.2437C8.09998 17.7066 8.09999 17.0458 8.1 16.2377V15.9H7.76227C6.95426 15.9 6.29335 15.9 5.75629 15.8561C5.20038 15.8107 4.6983 15.7138 4.22941 15.4749C3.49558 15.101 2.89896 14.5044 2.52505 13.7705C2.28614 13.3017 2.18926 12.7996 2.14384 12.2437C2.09996 11.7066 2.09997 11.0458 2.09998 10.2377V7.76228C2.09997 6.95424 2.09996 6.29336 2.14384 5.75629C2.18926 5.20038 2.28614 4.6983 2.52505 4.22941C2.89896 3.49558 3.49558 2.89896 4.22941 2.52505C4.6983 2.28614 5.20038 2.18926 5.75629 2.14384C6.29336 2.09996 6.95425 2.09997 7.76228 2.09998ZM8.1 14.1V13.7623C8.09999 12.9542 8.09998 12.2934 8.14386 11.7563C8.18928 11.2004 8.28616 10.6983 8.52508 10.2294C8.89898 9.4956 9.49561 8.89898 10.2294 8.52507C10.6983 8.28616 11.2004 8.18928 11.7563 8.14386C12.2934 8.09998 12.9542 8.09999 13.7623 8.1H14.1001V7.79998C14.1001 6.94505 14.0994 6.35798 14.0622 5.90287C14.0259 5.45827 13.9593 5.21944 13.8712 5.0466C13.6699 4.65146 13.3486 4.3302 12.9535 4.12886C12.7806 4.04079 12.5418 3.97419 12.0972 3.93786C11.6421 3.90068 11.055 3.89998 10.2001 3.89998H7.79998C6.94505 3.89998 6.35798 3.90068 5.90287 3.93786C5.45827 3.97419 5.21944 4.04079 5.0466 4.12886C4.65146 4.3302 4.3302 4.65146 4.12886 5.0466C4.04079 5.21944 3.97419 5.45827 3.93786 5.90287C3.90068 6.35798 3.89998 6.94505 3.89998 7.79998V10.2C3.89998 11.0549 3.90068 11.642 3.93786 12.0971C3.97419 12.5417 4.04079 12.7805 4.12886 12.9534C4.3302 13.3485 4.65146 13.6698 5.0466 13.8711C5.21944 13.9592 5.45827 14.0258 5.90287 14.0621C6.35798 14.0993 6.94505 14.1 7.79998 14.1H8.1ZM11.0466 10.1289C11.2195 10.0408 11.4583 9.97421 11.9029 9.93788C12.358 9.9007 12.9451 9.9 13.8 9.9H16.2C17.0549 9.9 17.642 9.9007 18.0971 9.93788C18.5417 9.97421 18.7805 10.0408 18.9534 10.1289C19.3485 10.3302 19.6698 10.6515 19.8711 11.0466C19.9592 11.2195 20.0258 11.4583 20.0621 11.9029C20.0993 12.358 20.1 12.9451 20.1 13.8V16.2C20.1 17.0549 20.0993 17.642 20.0621 18.0971C20.0258 18.5417 19.9592 18.7805 19.8711 18.9534C19.6698 19.3485 19.3485 19.6698 18.9534 19.8711C18.7805 19.9592 18.5417 20.0258 18.0971 20.0621C17.642 20.0993 17.0549 20.1 16.2 20.1H13.8C12.9451 20.1 12.358 20.0993 11.9029 20.0621C11.4583 20.0258 11.2195 19.9592 11.0466 19.8711C10.6515 19.6698 10.3302 19.3485 10.1289 18.9534C10.0408 18.7805 9.97421 18.5417 9.93788 18.0971C9.9007 17.642 9.9 17.0549 9.9 16.2V13.8C9.9 12.9451 9.9007 12.358 9.93788 11.9029C9.97421 11.4583 10.0408 11.2195 10.1289 11.0466C10.3302 10.6515 10.6515 10.3302 11.0466 10.1289Z">');const kg=e=>{const t=Bh();return n=Ig(),r=n.firstChild,Od((o=>{var i=e.class,s=e.fill||t.colors.icon.primary;return i!==o.e&&mh(n,"class",o.e=i),s!==o.t&&mh(r,"fill",o.t=s),o}),{e:void 0,t:void 0}),n;var n,r};var Dg=vh('<svg width=24 height=24 viewBox="0 0 24 24"fill=none xmlns=http://www.w3.org/2000/svg><path d="M8.7624 3.10001C7.95435 3.1 7.29349 3.09999 6.75642 3.14387C6.2005 3.18929 5.69842 3.28617 5.22954 3.52508C4.4957 3.89899 3.89908 4.49561 3.52517 5.22944C3.28626 5.69833 3.18938 6.20041 3.14396 6.75632C3.10008 7.2934 3.10009 7.95424 3.1001 8.76229V15.2377C3.10009 16.0458 3.10008 16.7066 3.14396 17.2437C3.18938 17.7996 3.28626 18.3017 3.52517 18.7706C3.89908 19.5044 4.4957 20.101 5.22954 20.4749C5.69842 20.7138 6.2005 20.8107 6.75642 20.8561C7.29349 20.9 7.95434 20.9 8.76239 20.9H12.0001C12.4972 20.9 12.9001 20.4971 12.9001 20C12.9001 19.503 12.4972 19.1 12.0001 19.1H8.8001C7.94517 19.1 7.3581 19.0993 6.90299 19.0621C6.45839 19.0258 6.21956 18.9592 6.04672 18.8711C5.65158 18.6698 5.33032 18.3485 5.12898 17.9534C5.04092 17.7805 4.97431 17.5417 4.93798 17.0971C4.9008 16.642 4.9001 16.0549 4.9001 15.2V8.80001C4.9001 7.94508 4.9008 7.35801 4.93798 6.9029C4.97431 6.4583 5.04092 6.21947 5.12898 6.04663C5.33032 5.65149 5.65158 5.33023 6.04672 5.12889C6.21956 5.04082 6.45839 4.97422 6.90299 4.93789C7.3581 4.90071 7.94517 4.90001 8.8001 4.90001H12.0001C12.4972 4.90001 12.9001 4.49706 12.9001 4.00001C12.9001 3.50295 12.4972 3.10001 12.0001 3.10001H8.7624Z"></path><path d="M17.6364 7.3636C17.2849 7.01212 16.7151 7.01212 16.3636 7.3636C16.0121 7.71507 16.0121 8.28492 16.3636 8.63639L18.8272 11.1H9.00001C8.50295 11.1 8.10001 11.5029 8.10001 12C8.10001 12.497 8.50295 12.9 9.00001 12.9H18.8272L16.3636 15.3636C16.0121 15.7151 16.0121 16.2849 16.3636 16.6364C16.7151 16.9879 17.2849 16.9879 17.6364 16.6364L21.6364 12.6364C21.9879 12.2849 21.9879 11.7151 21.6364 11.3636L17.6364 7.3636Z">');const Kg=e=>{const t=Bh(),n=()=>e.fill||t.colors.icon.primary;return r=Dg(),o=r.firstChild,i=o.nextSibling,Od((e=>{var t=n(),r=n();return t!==e.e&&mh(o,"fill",e.e=t),r!==e.t&&mh(i,"fill",e.t=r),e}),{e:void 0,t:void 0}),r;var r,o,i};function Mg(e){return od(this,null,(function*(){try{if(!(null==navigator?void 0:navigator.clipboard))throw new sd("Clipboard API not available");return yield navigator.clipboard.writeText(e)}catch(AT){}!function(e){const t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}(e)}))}const Lg={m:"8px",s:"4px",none:"0"},Ug={m:"16px",s:"8px",none:"0"},jg=Hh.div`
    width: 256px;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.16);
    border-radius: ${e=>Ug[e.theme.borderRadius]};

    background-color: ${e=>e.theme.colors.background.primary}
           
    color: ${e=>e.theme.colors.text.primary}
`,Wg=Hh.ul`
    background-color: ${e=>e.theme.colors.background.primary};
    padding: 8px;
`,Bg=Hh.button`
    display: flex;
    align-items: center;
    gap: 8px;
    height: 40px;
    padding-left: 8px;
    width: 100%;

    background-color: ${e=>e.theme.colors.background.primary};
    border: none;
    border-radius: ${e=>Lg[e.theme.borderRadius]};
    cursor: pointer;

    transition: background-color, transform 0.1s ease-in-out;

    &:hover {
        background-color: ${e=>e.theme.colors.background.secondary};
    }

    &:active {
        transform: scale(0.96);
    }
`,Xg=xd();var Hg=vh("<li>");const Fg=e=>Gd(mg,{get translationKey(){return e.translationKey},fontSize:"15px",fontWeight:"590",get children(){return e.children}}),qg=Hh(pp)`
    background-color: ${e=>e.theme.colors.connectButton.background};
    color: ${e=>e.theme.colors.connectButton.foreground};
    box-shadow: ${e=>`0 4px 24px ${$h(e.theme.colors.constant.black,.16)}`};
    padding: 8px 16px 8px 12px;

    display: flex;
    align-items: center;
    gap: 4px;
    height: 40px;
`;Hh(qg)`
    padding: 12px 16px;
    min-width: 148px;
    justify-content: center;
    background-color: ${e=>e.theme.colors.background.primary};
`,Hh(pp)`
    min-width: 148px;
    height: 40px;

    background-color: ${e=>e.theme.colors.background.primary};
    color: ${e=>e.theme.colors.connectButton.foreground};
    box-shadow: ${e=>`0 4px 24px ${$h(e.theme.colors.constant.black,.16)}`};

    display: flex;
    align-items: center;
    justify-content: center;
`,Hh(Kp)`
    height: 18px;
    width: 18px;
`,Hh.div`
    width: fit-content;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
`,Hh((e=>{const t=Id(Xg),[n,r]=_d(!1);return Gd(jg,{ref(t){var n=e.ref;"function"==typeof n?n(t):e.ref=t},get class(){return e.class},"data-tc-dropdown":"true",get children(){return Gd(Wg,{get children(){return[(i=Hg(),Ch(i,Gd(Bg,{onClick:()=>od(void 0,null,(function*(){const e=Hc.toUserFriendlyAddress(t.account.address);yield Mg(e),r(!0),setTimeout((()=>r(!1)),1e3)})),get children(){return[Gd(kg,{}),Gd(ih,{get when(){return!n()},get children(){return Gd(Fg,{translationKey:"button.dropdown.copy",children:"Copy address"})}}),Gd(ih,{get when(){return n()},get children(){return Gd(Fg,{translationKey:"button.dropdown.copied",children:"Address copied!"})}})]}})),i),(o=Hg(),Ch(o,Gd(Bg,{onClick:()=>(t.disconnect(),void e.onClose()),get children(){return[Gd(Kg,{}),Gd(Fg,{translationKey:"button.dropdown.disconnect",children:"Disconnect"})]}})),o)];var o,i}})}})}))`
    box-sizing: border-box;
    overflow: hidden;
    margin-top: 12px;
`;const Jg=xd(),zg=Hh(ng)`
  padding-left: 0;
  padding-right: 0;
  padding-top: 0;

  ${uf("mobile")} {
    padding-left: 0;
    padding-right: 0;
    min-height: 364px;
  }
`,Vg=Hh(Eg)`
  padding: 12px 24px;
  text-align: left;
`,$g=Hh.div``,Gg=Hh.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: ${e=>e.isDeclined?"200px":"325px"};;
  gap: 24px;
`,Qg=Hh(Hp)`
  position: absolute;
  top: 12px;
  left: 16px;
`,Yg=Hh(Rg)`
  margin-bottom: 0;
  padding: 16px 24px 24px 24px;
  min-height: 44px;
  font-color: ${e=>e.theme.colors.text.contrast};
`,Zg=Hh.div`
  margin-top: 24px;
  margin-left: 24px;
  margin-right: 24px;
  display: flex;
  justify-content: center;
`,ev=Hh.div`
  display: flex;
  justify-content: center;
  align-items: center;
`;function tv(e,t){let n;n=t;const r=function(e,t,n){const r=new URL(e);return r.searchParams.append(t,n),r.toString()}(e,"ret",n);if(!Va.isTelegramUrl(e))return r;const o=r.slice(r.lastIndexOf("&")+1);return r.slice(0,r.lastIndexOf("&"))+"-"+Va.encodeTelegramUrlParameters(o)}const nv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAleSURBVHgB7V27chNJFG3LPGweLhkDZV7l2S9Yk5FhZ2TY4UaGbDPwFxhHSwZkZLa/wHZGJpGx0Wq/YIcqMK7iJYN5G7TnNH1Fe/TW9IzGUp+qUc+MJXl0T/e5/bw9pDKKIAjye3t705VKZRqXU0gD3saRHxoayuM6b78f98q4V0YaSorbT5GWDh06VArDsKwyiCGVEdDg3759m8PpVRhwRv00tkuUSAbSx4cPHy6CkFBlAD0lwBj9Bk6vG6NXgWv1/ft3hb/r48ePHzrlfZ7zsJHL5fQxPDxcTXnA2OrIkSM1/xtkFJGs9ZqMnhBw8eLFGRhyyTY6DUsDf/78WX358kWfu8TRo0c1GSMjI/UI2cCxtrW1taFSRmoESG6HoW8pIy9i9A8fPmijR3N1UmAJISGjo6OaEAshSsby8+fPV1VKSIUA5PhbMPYdcZyUlo8fP2rDp2X0RqBMkYyTJ0/qc4PUiEiUAEoNDLyiTI7/+vWrev/+vc7tWcSxY8dSJyIRAiA3AYx9D6es1egcXy6XM2v4KKJEgIRV+I/lJJz1sHKMCxcuLCDX05mxDq92d3fVmzdvNAkHBeKX+PzGYU/j+efGxsZ2UIJLyiGcEUAne/z48b/w0HdxOUK5ef36ta7VHFTwN3z69Ek7bZQA+i+SkJ+YmPgbJdrJD3MiQUZyCjxlrnn37p3OQf2EEydOaFmCHPEyRMmYdSFJsQmA5LCroMAaDmXm1atXB0puOgF9wunTp8U30EHPw0HHkqRYEkS9h+Ef4XSEUkOt73W1MkmwdFOS0LfEg5L0JyQphF/4V3WJrgkwdfuHPGfVcmdnRz9gv0NIINh+AOYgTzuobDxRXaArAmh85PT7PKfxeQwa6KAJkgAputYtCR0TYGSnmvMH0fiCKAndyFFHTpgOF8b/h+eDbnwbrB3xIEDE5U4cc67dN7KqCeOv89wbfz9se8BGBdqq3c+2RQAbWVLPZ23HG78WtIlpdGpb0WbtfK4tAtA0X0ISSJ+OR33QNqYNFBibtURLJwzdZx/+XVa/Xr582df1/LigjVgK0CXDyyvtOOWmJcDovmaS3QvttnDX19f1w8Q5+B2ukObz0EaWP7jfyh80rQUh96/gS25w8KQT6XHVIDP9LrHRi+dhl4XpSd3AUOd8o/c1LAFGenh4p9sF3r59K8TPcWCq0fsaEtCN9Hj8Am3GsRDCjArWRV0CmPuVqfX0W7dymqBySK3o3Llzt+u9py4Bkvu99MSH+E74j6V6bYMaAuzcT+frEQ8cBzd9Rnmc34j+vYYAn/vdQ2yJUnAr+rd9BFy6dImzGHzudwyWAvEF0RrRPgKQ+xeY+tzvHpKhRWEEVQLYYkN1Sc/jOSjzdw4SZJoL58PazrhKADqPZpiyL8PX+91DZncTtjO2JUjLj9f+5CBtqlwud13uaQJMp9sMz2WYzcM9KO1RGdIEiPzQ+L67OTnYMmRWA1Ul6CpfZLqFR3KQqZooBdrmQgBnt6m9vT3lkSwsiZ/hS45aZFYiOqt+bmzEX+nj4jtcfper5yEBpps60H6ALbPz589XMIDAu5k6VlY4HhQPhUIhc7/r7NmzFdqcth9C59ttPOc9VpE4vTBLyNrImivk83m9CAS/b5E+IOBNr//pQWyN9kCQQ+6Y4oVv/aYHqeqjBAS5ilm56Kq4e7SGpTZTJCCI3PRIGJba5ClBvgSkDMvW+aoE+S6I9GDZOt/27GiPZOAJ6DE8AT0GnbCeuMLFyB7pwLJ1mU5YE5C15no/w7J12ZeAHoDrjAnGtcuZ4HY6mpRHOpDMDvXZoQQ95YWXoPRghcEJSUXIC18C0oMQgAaZliC9pjWLBKytram4KBaLKmsQW4OIkl6CytGZyclJZyM+6+vrlbjgd/Tr89DePGh7Lfy4+A9JwFWQLsJFVvwasYZgWIOJiQmelra2ti5L3fMxX+oFOPVwC0vqtfRrAkwUWR1H0yNZSJxS2Fxnek0AWNFzLthA8A2y5EDbispgUKao7/GFkcVZCuw3eLiHCfCkFWd7ezvkuZ3dN/nC4HQeyYBTUQyq9esqAZChVaZehpIB7SolQOSHqFraliETbMLDISxp3xT5IfZldcZJZmoVFQ9HkIhawKp9fx8Bz549KyIJJaK4hxswQ0us0egeBTVij1LwgKnFmEdMWPHklqN/qyGAzpiDNNQsXwriw8799cLg1xBgdhvSTHEWr0c8NMv9+n6jD0oHXTcREn1n3E+wTTU2NsZTav9v9d7TsMKP6uhNpqySyhimR/ugzVrlfqIhAaZGtMF2gZeizmGFul9ttgVK0yYvhswWxSF30jgb9DVilB7TsxzChsvN3ttS1EzsuBVOKOXeAH4ae3NQes6cOaNzP46brTYAahk3lHumwJGM48uusC+ba4krfip7XVCuGS2RKdtTMP7dlp9RbQBtgzvKtJC9P2gM2kbq/MZmLdEWAWwbQIJm6Q9YCnwruRa0iRntou7Ptrt7a9v9zqYHb1b+mSfhFyLh6+ft3s5W6GgDB/iDbfgDzqSbk26KQY+uEjE+ne6jTj7f8Q4axilzRfe1QSfBNj4qJoto7T5UHaKrPWRAwpNBJyFq/BcvXtxXXaDrXZQMCVU54nwXCUjUz2AVc3x8vNowpex0k/MFTjZyq/zc2kSHu+T2hf3aWGMji7PaWNU06ypm427k5qS7cXJyMkDOKOCUkRd172m/b2XIqmYntZ1GcLKZ5+7ubhk5Yw0PNSotZuYWloSDvv6Yv+PUqVN6YMV0LzxA39gf6KzcVg7gfFWG6TtaUn1QGpjjmfON4Sk5i643d3a+nzCrqXBQm3hg9h9NszSY2DhOZl6nAVYq2KfDZzeSs4HMNI+aTlE5RqLrkuzSwGvZXyWrsUllb3lrDk/IgSkzNpIIUlkY1ogIth16XWOSiWjW4LmWG/bjd1u37wSprsyLEkEwjCNLRJoxS2USMvWd7RdrrJd7BD/gzJB2O9PioidLIxkmH6VgAadz9n2SQELoK1wHEKehKTHU9YjR9WxljtsmKTWN0NO1qWw/oNjP4HShYkIn2yAhJIOSRamiI+c5S0q0tDBXm4EQbWCzD7xsvlwzo8EsStlMM7fXQ2YWBwsZJALG+b1iYpk6RGiM/pgLUnppdBuZXZ3NFYTI9dOGCAYXn2J0L6SBSfcNzdFx4l7ZpDQ2+6mYllACSlkxeBT/A6Mt6rTZ7SrDAAAAAElFTkSuQmCC";var rv=vh('<svg><path fill-rule=evenodd clip-rule=evenodd d="M96 51C96 75.8528 75.8528 96 51 96C26.1472 96 6 75.8528 6 51C6 26.1472 26.1472 6 51 6C75.8528 6 96 26.1472 96 51ZM102 51C102 79.1665 79.1665 102 51 102C22.8335 102 0 79.1665 0 51C0 22.8335 22.8335 0 51 0C79.1665 0 102 22.8335 102 51Z"fill-opacity=0.2></svg>',!1,!0),ov=vh('<svg><path fill-rule=evenodd clip-rule=evenodd d="M6 51H0C0 79.1665 22.8335 102 51 102V96C26.1472 96 6 75.8528 6 51Z"></svg>',!1,!0);const iv=e=>Gd(av,{get children(){return[Gd(cv,{}),Gd(lv,{src:nv})]}}),sv=e=>Gd(av,{get children(){return Gd(lv,{src:nv})}}),av=Hh.div`
  position: relative;
  height: 102px;
  width: 102px;
`,cv=Hh((e=>{const t=Bh(),n=Uh`
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    `;return Gd(Hh.svg`
    animation: ${n} 2s linear infinite;
    transform-origin: center;
  `,{xmlns:"http://www.w3.org/2000/svg",width:"102",height:"102",viewBox:"0 0 102 102",fill:"none",get children(){return[(n=rv(),Od((()=>mh(n,"fill",t.colors.text.primary))),n),(e=ov(),Od((()=>mh(e,"fill",t.colors.text.primary))),e)];var e,n}})}))`
  height: 102px;
  width: 102px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,lv=Hh(lp)`
  position: absolute;
  width: 86px;
  height: 86px;
  border-radius: 44px;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,uv=e=>[Gd(Vg,{translationKey:"walletModal.mobileConnectionModal.OKXConnect"}),Gd(Zg,{get children(){return[Gd(ih,{get when(){return e.sessionConnecting()},get children(){return Gd(ev,{get children(){return Gd(iv,{})}})}}),Gd(ih,{get when(){return Sd((()=>null!==e.universalLink))()&&!e.sessionConnecting()},get children(){return Gd(dg,{imageUrl:nv,get sourceUrl(){return tv(e.universalLink,"none")},disableCopy:!0})}})]}}),Gd(Yg,{translationKey:"walletModal.mobileConnectionModal.scanQR",get translationValues(){return{name:e.walletInfo.name}},get children(){return["Scan the QR code below with your phoneâ€™s or ",Sd((()=>e.walletInfo.name)),"â€™s camera"]}})];Hh(Eg)`
  padding: 12px 64px;
`;const dv=Hh(Eg)`
  max-width: 262px;
`,hv=Hh(dv)`
  font-size: 14px;
  color: ${e=>e.theme.colors.text.primary};
`,fv=Hh(pp)`
  background-color: transparent;
  color: ${e=>e.theme.colors.text.primary};
  padding: 0px;
`,pv=Hh.div`
  margin: 30px 0;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 16px;

  ${uf("mobile")} {
    height: 160px;
    align-items: center;
  }
`,gv=Hh(xp)`
  margin-bottom: 16px;
`,vv=Hh.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 12px;
  width: 100%;
`,mv=Hh.div`
  background-color: ${e=>e.theme.colors.text.primary};
  height: 48px;
  width: calc(100% - 48px);
  justify-content: center;
  border-radius: 24px;
  display: flex;
  align-items: center;
  gap: 8px;
`;Hh(mg)`
  max-width: 262px;
  font-weight: 400;
  font-size: 16px;
  line-height: 20px;
  text-align: center;
  margin-top: 10px;
  color: ${e=>e.theme.colors.text.contrast};
`;const yv=Hh(pp)`
  height: 48px;
  width: 262px;
  border-radius: 999px;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 12px 24px;
`;Hh(yv)`
  background-color: ${e=>e.theme.colors.text.primary};
`,Hh(yv)`
  background-color: transparent;
  border-color: ${e=>e.theme.colors.border.secondary};
  border-width: 0.5px;
  border-style: solid;
`;const bv=Hh(dv)`
  font-size: 14px;
  color: ${e=>e.theme.colors.background.primary};
`;Hh(dv)`
  font-size: 14px;
  color: ${e=>e.theme.colors.text.primary};
`;const wv=Hh.div`
  padding-top: 16px;
  padding-left: 16px;
  padding-right: 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  border-top: 0.5px solid
    ${e=>$h(e.theme.colors.icon.secondary,.2)};
  margin-top: 24px;
`,Cv=Hh(lp)`
  width: 32px;
  height: 32px;
  border-radius: 16px;
`,_v=Hh((e=>Gd(xg,th({get href(){return e.href},get target(){return e.blank?"_blank":"_self"},get class(){return e.class},get onClick(){return e.onClick}},(()=>e.blank?{rel:"noreferrer noopener"}:{}),{get children(){return e.children}}))))`
  margin-left: auto;
  display: flex;
`,Ov=Hh.div`
  display: flex;
  margin-top: 24px;
  gap: 8px;
  align-items: center;
  justify-content: center;
`,Ev=Hh(lp)`
  width: 27px;
  height: 21px;
  object-fit: contain;
`,Sv=e=>Gd(pv,{get children(){return[Gd(iv,{}),Gd(ih,{get when(){return e.loadingTextTranslationKey||e.loadingTextTranslationKey},get children(){return Gd(dv,{get translationKey(){return e.loadingTextTranslationKey},get children(){return e.loadingText}})}})]}}),Rv=e=>{const[t]=gg();return Sd((()=>{var n;return t(e.translationKey,e.translationValues,null==(n=e.children)?void 0:n.toString())}))};var Tv=vh('<svg width=40 height=12 viewBox="0 0 40 12"fill=none xmlns=http://www.w3.org/2000/svg><g clip-path=url(#clip0_4356_43883)><path d="M11.7336 0H0.269322C0.198282 0 0.130151 0.0282212 0.0799182 0.0784542C0.0296852 0.128687 0.00146484 0.196817 0.00146484 0.267857V11.7321C0.00146484 11.8032 0.0296852 11.8713 0.0799182 11.9215C0.130151 11.9718 0.198282 12 0.269322 12H11.7336C11.8046 12 11.8728 11.9718 11.923 11.9215C11.9732 11.8713 12.0015 11.8032 12.0015 11.7321V0.267857C12.0015 0.196817 11.9732 0.128687 11.923 0.0784542C11.8728 0.0282212 11.8046 0 11.7336 0ZM8.00129 7.73303C8.00129 7.80407 7.97307 7.87221 7.92283 7.92244C7.8726 7.97267 7.80447 8.00089 7.73343 8.00089H4.26736C4.19632 8.00089 4.12819 7.97267 4.07795 7.92244C4.02772 7.87221 3.9995 7.80407 3.9995 7.73303V4.26643C3.9995 4.19539 4.02772 4.12726 4.07795 4.07702C4.12819 4.02679 4.19632 3.99857 4.26736 3.99857H7.73343C7.80447 3.99857 7.8726 4.02679 7.92283 4.07702C7.97307 4.12726 8.00129 4.19539 8.00129 4.26643V7.73303Z"></path><path d="M35.7391 4.00018H32.2725C32.2015 4.00018 32.1333 4.0284 32.0831 4.07864C32.0329 4.12887 32.0046 4.197 32.0046 4.26804V7.73465C32.0046 7.80569 32.0329 7.87382 32.0831 7.92405C32.1333 7.97428 32.2015 8.0025 32.2725 8.0025H35.7391C35.8101 8.0025 35.8783 7.97428 35.9285 7.92405C35.9787 7.87382 36.007 7.80569 36.007 7.73465V4.26697C36.0067 4.19611 35.9783 4.12826 35.9281 4.07826C35.8779 4.02825 35.81 4.00018 35.7391 4.00018Z"></path><path d="M31.7379 0H28.2713C28.2002 0 28.1321 0.0282212 28.0819 0.0784542C28.0316 0.128687 28.0034 0.196817 28.0034 0.267857V3.73446C28.0034 3.8055 28.0316 3.87364 28.0819 3.92387C28.1321 3.9741 28.2002 4.00232 28.2713 4.00232H31.7379C31.8089 4.00232 31.8771 3.9741 31.9273 3.92387C31.9775 3.87364 32.0057 3.8055 32.0057 3.73446V0.267857C32.0057 0.196817 31.9775 0.128687 31.9273 0.0784542C31.8771 0.0282212 31.8089 0 31.7379 0Z"></path><path d="M39.7376 0H36.271C36.2 0 36.1319 0.0282212 36.0816 0.0784542C36.0314 0.128687 36.0032 0.196817 36.0032 0.267857V3.73446C36.0032 3.8055 36.0314 3.87364 36.0816 3.92387C36.1319 3.9741 36.2 4.00232 36.271 4.00232H39.7376C39.8087 4.00232 39.8768 3.9741 39.927 3.92387C39.9773 3.87364 40.0055 3.8055 40.0055 3.73446V0.267857C40.0055 0.232682 39.9986 0.19785 39.9851 0.165352C39.9716 0.132854 39.9519 0.103327 39.927 0.0784542C39.9022 0.0535813 39.8726 0.0338512 39.8401 0.0203901C39.8076 0.00692902 39.7728 0 39.7376 0Z"></path><path d="M31.7379 7.99982H28.2713C28.2002 7.99982 28.1321 8.02804 28.0819 8.07827C28.0316 8.1285 28.0034 8.19663 28.0034 8.26767V11.7321C28.0034 11.8032 28.0316 11.8713 28.0819 11.9215C28.1321 11.9718 28.2002 12 28.2713 12H31.7379C31.8089 12 31.8771 11.9718 31.9273 11.9215C31.9775 11.8713 32.0057 11.8032 32.0057 11.7321V8.2666C32.0055 8.19575 31.9771 8.12789 31.9269 8.07789C31.8767 8.02789 31.8087 7.99982 31.7379 7.99982Z"></path><path d="M39.7376 7.99982H36.271C36.2 7.99982 36.1319 8.02804 36.0816 8.07827C36.0314 8.1285 36.0032 8.19663 36.0032 8.26767V11.7321C36.0032 11.8032 36.0314 11.8713 36.0816 11.9215C36.1319 11.9718 36.2 12 36.271 12H39.7376C39.8087 12 39.8768 11.9718 39.927 11.9215C39.9773 11.8713 40.0055 11.8032 40.0055 11.7321V8.2666C40.0052 8.19575 39.9769 8.12789 39.9267 8.07789C39.8765 8.02789 39.8085 7.99982 39.7376 7.99982Z"></path><path d="M25.733 0H22.2664C22.1954 0 22.1272 0.0282212 22.077 0.0784542C22.0268 0.128687 21.9985 0.196817 21.9985 0.267857V3.73446C21.9985 3.8055 22.0268 3.87364 22.077 3.92387C22.1272 3.9741 22.1954 4.00232 22.2664 4.00232H25.733C25.804 4.00232 25.8722 3.9741 25.9224 3.92387C25.9726 3.87364 26.0009 3.8055 26.0009 3.73446V0.267857C26.0009 0.196817 25.9726 0.128687 25.9224 0.0784542C25.8722 0.0282212 25.804 0 25.733 0Z"></path><path d="M25.733 7.99982H22.2664C22.1954 7.99982 22.1272 8.02804 22.077 8.07827C22.0268 8.1285 21.9985 8.19663 21.9985 8.26767V11.7321C21.9985 11.8032 22.0268 11.8713 22.077 11.9215C22.1272 11.9718 22.1954 12 22.2664 12H25.733C25.804 12 25.8722 11.9718 25.9224 11.9215C25.9726 11.8713 26.0009 11.8032 26.0009 11.7321V8.2666C26.0006 8.19575 25.9722 8.12789 25.922 8.07789C25.8718 8.02789 25.8039 7.99982 25.733 7.99982Z"></path><path d="M21.9996 4.26375C21.9996 4.19271 21.9714 4.12458 21.9212 4.07435C21.8709 4.02411 21.8028 3.99589 21.7317 3.99589H17.9994V0.267857C17.9994 0.196817 17.9712 0.128687 17.921 0.0784542C17.8707 0.0282212 17.8026 0 17.7316 0H14.2687C14.1977 0 14.1295 0.0282212 14.0793 0.0784542C14.0291 0.128687 14.0009 0.196817 14.0009 0.267857V11.7273C14.0009 11.7984 14.0291 11.8665 14.0793 11.9167C14.1295 11.967 14.1977 11.9952 14.2687 11.9952H17.7353C17.8064 11.9952 17.8745 11.967 17.9247 11.9167C17.975 11.8665 18.0032 11.7984 18.0032 11.7273V7.99661H21.7366C21.8076 7.99661 21.8757 7.96839 21.926 7.91815C21.9762 7.86792 22.0044 7.79979 22.0044 7.72875L21.9996 4.26375Z"></path></g><defs><clipPath id=clip0_4356_43883><rect width=40.0039 height=12 fill=white>');const Nv=e=>{const t=Bh(),n=()=>e.fill||t.colors.disable;return r=Tv(),o=r.firstChild.firstChild,i=o.nextSibling,s=i.nextSibling,a=s.nextSibling,c=a.nextSibling,l=c.nextSibling,u=l.nextSibling,d=u.nextSibling,h=d.nextSibling,Od((e=>{var t=n(),r=n(),f=n(),p=n(),g=n(),v=n(),m=n(),y=n(),b=n();return t!==e.e&&mh(o,"fill",e.e=t),r!==e.t&&mh(i,"fill",e.t=r),f!==e.a&&mh(s,"fill",e.a=f),p!==e.o&&mh(a,"fill",e.o=p),g!==e.i&&mh(c,"fill",e.i=g),v!==e.n&&mh(l,"fill",e.n=v),m!==e.s&&mh(u,"fill",e.s=m),y!==e.h&&mh(d,"fill",e.h=y),b!==e.r&&mh(h,"fill",e.r=b),e}),{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),r;var r,o,i,s,a,c,l,u,d,h},Av=e=>{const t=Bh(),n=()=>{Va.reportEvent(Va.OKXReportType.CLICK,Va.Report_ChooseType_Download_Click,"")};return[Gd(ih,{get when(){return!$f()},get children(){return Gd(wv,{get children(){return[Gd(Cv,{src:nv}),Gd(Ng,{get children(){return e.wallet.name}}),Gd(_v,{href:Va.downloadUrl,onClick:n,blank:!0,get children(){return[Gd(mg,{get color(){return t.colors.text.contrast},get children(){return Gd(Rv,{translationKey:"common.get",children:"GET"})}}),Gd(Cp,{direction:"right"})]}})]}})}}),Gd(Ov,{get children(){return[Gd(mg,{get color(){return t.colors.disable},get children(){return Gd(Rv,{translationKey:"walletModal.mobileConnectionModal.PoweredBy",children:"PoweredBy"})}}),Gd(Nv,{})]}})]},Pv=e=>Gd(fv,{get leftIcon(){return Gd(jp,{})},get onClick(){return e.onRetry},get children(){return Gd(hv,{translationKey:"common.retry",children:"Retry"})}}),xv=e=>[Gd(gv,{size:"s"}),Gd(dv,{translationKey:"walletModal.mobileConnectionModal.connectionDeclined",children:"Connection declined"}),Gd(ih,{get when(){return e.showRetry},get children(){return Gd(vv,{get children(){return Gd(Pv,{get onRetry(){return e.onRetry}})}})}})],Iv=e=>{const t=Bh();return[Gd(vv,{get children(){return[Gd(iv,{}),Gd(dv,{translationKey:"walletModal.mobileConnectionModal.continueIn",children:"Continue the transaction in OKX Wallet"})]}}),Gd(vv,{get children(){return[Gd(mv,{get onClick(){return e.onOpenQR},get children(){return[Gd(Bp,{get fill(){return t.colors.background.primary}}),Gd(bv,{translationKey:"walletModal.mobileConnectionModal.showQR",children:"Show QR Codes"})]}}),Gd(Pv,{get onRetry(){return e.onRetry}})]}})]},kv=Hh.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  gap: 12px;
`,Dv=Hh(mg)`
  max-width: 262px;
  font-weight: 400;
  font-size: 16px;
  line-height: 20px;
  text-align: center;
  margin-top: 10px;
  color: ${e=>e.theme.colors.text.contrast};
`,Kv=Hh(yv)`
  background-color: ${e=>e.theme.colors.text.primary};
  margin-left: 24px;
  width: calc(100% - 48px);
  margin-right: 24px;
`,Mv=Hh(dv)`
  font-size: 14px;
  color: ${e=>e.theme.colors.background.primary};
`,Lv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKuSURBVHgB7d3RcdpAFIXhYyfvUIKowHQQUkFEBQwVABXIVAAd4BJIBXIqEOlAHSAqUPYCiZmMsfHo4rNozjdzkzxkPGt+Wxit177D2wZhfhz/TsJ0IZeowmyO8zPMMz5oECYPU2tcpsDhA/giGUBfcFsnwztWESyy7bPCGVlkC23zZP899vvr060svi0zOA1QRL7YNk5uD/wdXr7ikc/3/T78kUJYUgvwAGH5ZpegLfQKl6WyADWE5h5CpQBkCkCmAGQKQKYAZApApgBkX+Gs3+8jyzJ0u81eXM9mM2w2G3hI0xSj0ajRmqqq2q+pLEt4c73Nmud57WG9XrutqSiK2sNqtXK/LR3tJajT6cBL08/Ga9JzAJkCkCkAmQKQKQCZApApAJkCkCkAmQKQKQCZApApAJkCkLkHsI2LttrtdvDm/q2JtiO2WCzQhEWcz+f7fze9l287WLamyWSCJm5mR8xrkiSpPWy32zpEjPJ9RMw7YiEAPNhnkHbE5CwFIFMAMgUgUwAyBSBTADIFIFMAMgUgUwAyBSBTADIFIFMAsmgD2Pkwj+1N28GKeZvU/ZCeHYjz2JJcLpfo9XqNN1PsbdkBvel0iibs7YzHY7eDg6dct9h0SK8lW5I6pCefQgHIFIBMAcgUgEwByBSATAHIFIBMAcgUgEwByBSATAHIdEjvA65xSM99R8wOsnlE+HtIz8NwOGx8SM/YLp03/QIHMj0HkCkAmQKQKQCZApApAJkCkCkAmQVo772D+FUWoISwbCzALwjLbwuwhrD8e+xzXPGnQmleneK0xCDihbZ1EnvgvxwDlHj5/fJyfbbZ8eql/wm39VF0i/OEdzyCv8i2ziMulODwJHFL71zMk+PM5f0ObxuEScM8hOmHifewVVzs7kKJw2ssu9Y/n/uPfwA3U3U3Q3Ht+AAAAABJRU5ErkJggg==",Uv=e=>[Gd(kv,{get children(){return[Gd(sv,{}),Gd(Dv,{translationKey:"walletModal.mobileConnectionModal.appAndTelegram.text",children:"OKX Wallet supports OKX app and Telegram Mini Apps"})]}}),Gd(kv,{get children(){return Gd(oh,{get each(){return e.connector},children:t=>Gd(Kv,{get leftIcon(){return(e=>{switch(e.getTag()){case Va.OKX_APP_WALLET:return Gd(Ev,{src:Lv});case Va.OKX_INJECT_WALLET:return Gd(Ev,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAAoCAYAAABerrI1AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAZOSURBVHgB7VlrbFNVHP/dR2/XPVv26tYyOwmogGE8RMg06xJjIDzcEKOEKOOLiR/c+GIiH8zYF1ATw5QYjY8wEyJiEDcfkcSEbfrFYLKNx4cJCW0GOMbG7LDr+rr3+D+37Vbm2nU41mL4Jb/d2557zs7v/F/n3AIzw0k8THQR2QKxl3iU6MA8wxwVw9LMw9G5zIugXgAsQ9iLeRCWCRaayWJ3DQcAlqF0Yo4Qo9dmZC7qcJfIpFiaThfmCCF6ZchsCHN5WE7loaqqKtTVzewFbrcbbW1tCfs6HA40NDQkbOd9+Rj3AkldgP4xSwaaeMK+TqczaV8SnIoLzgki/od4IOp+wQNR9wvmRZTH40EmIaXiy2sN50zggpqamhK2d3d3o6urC4nQ19d3x6LkyxL2lizCkxVWVIxP4KFF+YCqQcjP8Ughrc/HQh3lI952U1+/G/9F1GxwuVwJRXFBtbW1mA12iwXvlhej2myCGgrrM5NEPj0RgsCIdE/kV0kVEDQIbfljvhbLDOIyIqZetlvxXUUJ1mfLCIeCsz6vSQyKxhq8RXm917Y9s296e9pFNVaU460yC/KUuU2FkeHkkGoWx4YPD9Y91RzfllZRr9isaCyKxsxdBoAoyhA94wdcW5yTFkubKLssorG4ACrTIvGSCBq1a2QZJuqRz+gzv6FtI/8LjfHPInK8480Thw45eJeUdun3AtZdK1FwMUBudKcgSgWQ8nKRvXUr8ra/BBSVQDSSNt8lCENfQbzRRpb1kyj+dPx+VzWr0uWjdFObkiiz2axzJvB0nOzowNumZ8ZxKQi2ZSnac25g+9mRqcMSzVQpK0PhkU8wnGPDsZ4wLvzih9cno/qRR1G/qhk2+6sIX6yHODEwNaCuUIQsMifrNJtTSumtra16LUoEC6XjRAWYjh7o7Oy847uTl0/j4O+fIscfxoefXYEpGIIoUOpWDCg//i16/GXYd9KP66PhuKkx2CwyPtiVjXXFV4HzNUDQO9kWEaYhCKUlpZhKZKVU26fjzOBZPSbGFQltzqJJF8yt24mbWVa8fsKH63/FC+IQ6DsVrx334UbIDsG6h2cJ+ppLiF6JRsVWk5ZEcfXWoC5KI/68ogBXi7N0F8zetA0dF0MYvK1GV/7fGCax3/TQTemeSF7ngsRIYebCtfCAIz2ifEOR7MUnrjF8UV0ETQ3D8PBS/PpHMGl6p70FLgxMUPKwQdNnL0TE6bsNcmGY0iPKSKsbS8kCiTpnM+HMCqpXgQCyjdKs/f8OcOtQfWJGEiIRDSRGJm3UV2TpqVMFxmgMamzSDY+tL8SY34NVdpG8KUndorpU85iEsK8/aiRBtx6XQsUATLJ40iJqZWGlXkR191NJGO0oRk0yjvf/iB1rslCal9j/ShcZsG2FAuHmCUT2DuJkPHGSD/SlVKfa29sjE0iAZHWKHy2mv0Ib8FCNyWdTcQXo12PXOrFjbT1adxej8esJDN0KIHaQYGQhq0XCRy9mozhnEOFLp2CIitHHECLuHBLVjrS8zJSyDXj8yGYEtVCkxGBKWFluKT7fehBCYBF+OB9A9yUVuSYJq+0Snl8jIyiO4lrPbmxUXHo86gMIalQEgzzuqYyJcuEe/NiVDEvffBrKklw9nqa8ILLqCpNRv/xZvLBsE5ZY7JhgQdzy38aXPacwcrMT7y0+R/mAXC1acFk0qsJU9ozV1/fGRLUSm7CAyC01w7Z/HYSsSNFk+qoL+gRjIrngEFQ97iipUX4TcGblMMqMPsR2ESK0iJ+JWZ5gSFhtqu13xxJFOxYY3iEPxr53Q99za7GtaVQQi7giX3FZo2RNolXizhIvbFl+vR7psUZXjS8IxZYqyy1cEB87VhT4BwtxAxYQXtcoFFmBcZlFL7jcWjFhOrWp+0KDhvcrPciRo64aTfuMLKkppS3GDX1vx8aNr3S/ETcRrVhAePtHYAgIyKqks5UQZ6k4NwSdpd5YHMRGc4DERzKeIOqW9KiyaX9WnCCOeFF+Ik/+Jiy0xa6MwnP2T9r8iTAtLpi0WMQnGZaIfryzzAeJm1O3kBFhg9ZlMNZuNjzx0+np4yUq3Q7iAeIqYhUWBm5ih7K2pOvRvWsdQUV6zhhiVd7ghPnj5T7U5I+7BbnArYVHuhW/v1WodSd82fgPHg20OjkMhvcAAAAASUVORK5CYII="});case Va.OKX_TG_WALLET:return Gd(Ev,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAoCAYAAACxbNkLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAnUSURBVHgBrVlrbFxHFT5z967tddx4/Urc4LrrVirETogJBCFBGic/UqAVsSXUCNFAgtQKCQmFfwUJjIVUIfGjEVRFqIi2ilBDEbFDS6GAlKSlaoJ4mMY0CaHOJrZSnMTxOvF7d+cwrzMz17vr9RpOctf3zp3HeX7nzFwGy+iVbG8PD/L7AFgvIKYYY4gIDAoJGQPx0jWIZ9VXDZFvbbt+UZIYDDNkw/kYG+hjQ2n4H8guOoi9yYDn+8W6h2WzZAo8QdB1tgKyQDTrbqyoxKiEBH8OmojRM2hFyEnkc8DgSD6IScEysFaBpDCM506KGbeh1rNdSGmacWSekazFDCPebGh/I21uTrcqg4I2tNYcxjDcvRahAvUjLcOxmwvutcZBcYpKa1wtJN/pS7aZf+KZ7lUn+Q7tWyW67KNG2zZtYkSu72k11O2mZzfksv2wBmKD870piC1dVg+BWsdonxn3cM4mFwyMrjHiZwysg1F31MyqTmQJ5uax7dZaZEdkbr5gT1/81VNQAQVCmH6jX+BGGK19TlYyAc0VV9JKih9wca76qnbJleihxnIjHkeaX1sGTXxGrKjulYfoFZXCOEhwqowCZV7nZGpax6vHinInboapfvovchvrxAhhn3NbrRBEci/0lKXdFJzrMbs2sooFCsVk3VKTXEc/WCeQmiYXMrEq/6Jp1cCgejNtPe1PhjcN3TyCksxEH4IBGuO04kk7p3U7iUFqVeyACikEbRMPkZ17y2XS79yBP//6umyQWG7BSPbeeG8Cdh3YpJam8DYhoQS+fmUeTh69RlODGU9RyXoOfAA2pKpB5yzyX2A2yhAqphAVp8b0BpuNRyir/OaHackUKzXB5p1JaBGCWQuqCXQ2lgK9/L1/l1y8ub0GdrdvUpYjbaCHEmuQR1gIVTQwFkkVyLQbAis7A9POrmPHWJBiDcuzhBoOrXNrmNcTM4YVyxQimKD107jydAtkKwqFOufqBKvQjXmsluPHvdfAQImA8tUqFFogkNKm4IVx63p2Ura6GaVQpE1fw+UspIAe0cQsGjAicQgZKhTITK2zvJrR5AoV2QS5KxBzVQOzRRq6eFqJ1DIcNQAZUSw2wFrkUaAQbeFoq0Wj4hUn5px7KGLgCahKKDNejuMmb5mecnlZjRikXYvL+YWorXGorWxc1yXjNlZssjTQz8t4DWq3NouhXV9lKFv+VEbs2FwP+rUY7WV0lDO4IaD3xtUFW1Vrt9Q3UpjXnhmT74nDiD06BaR3PthgRWVUCRrvSn24DmqTMdt/IbcOzow+DJnbW+DKdDPML26EnOhXG0JGjB/O59iJ0VwwlPlCQ7qkQC8JgQiwfb+l2LR7H+aerTXFm69vPiuEXig6eeeDSfj277rNIC+1+glCvFpY2giDw1+Dq5NbYJGvbBRVmDF4IYjHBi70FQoWyC60NSB/Ibchl6CaTPUxrmFRfiWyKkDU8+u6xG49xN1f0g/D0yd/AJeud8JingMVeKUuuaeMIR6MZ3N/7/rljcOFAvmFofp1RSfayhpRwztaANA5h5cHMjkHp3KGqnKtkLff289eGzkI2WwtVErCFZMCj57+2OBkf0QgTpsyKxg4AVFnfW4YkM8cXVlSHoVMla0E0eFP6/xVWOb3734eaLO31mtmMffdzcecpYLl2dpdumIG5liBZdsA2uusJI6LQXJkwFuzTfjGvx6F/xflgPcf/O1UigSiXQolSFt4SNhVDKGNKBNbKjRXlSci23WTQU9f3M/uLCTKxstqLxFTybOZhefleiGdC/hk8pxys7lMDuan8/aswey71U+iPgYt7dUlhWm5txpupOfBP/pZiLfC8FiPAPCy4Reh2jiDR9oT0LOpGt76zyL8/NJc5H0YsJ7U4OVkSPmH9Ol+Nd/HnxrD1599v6QlfjL+caitD/1RNhudf/M2fGPL3yL9Wz77BDQ+huUR0lBXQxV87r4a6E0loL5KnenApelsQc7N5sXzTNXhEE3Bod2HSnZmt8Vz07kV3Wo2k4XE+hiYaswANaP9a0H/+h0PQTlpQjF4W0scDm9dDzs2VKk2H09Hp3NF52hNBLtC9LfP6siKMVdWllejCXZmY0pnG62gIsPX39cFsyWmXScssP/+WvjSB9dBa62uIMZmcvDc+Rl4orMO2tbpWvrynVxR1iYWeSpEs4/xj5gsRaC8OPkwbrp6x4iFtdxcvA7cYYum9roQHu+8C/aKGEkat5L04sUZOD46B099osEKI+nmXM7kyyglGEuFlmHKoKy4ZksTRhl34VHUVePi5aLHy862BPy0pynS5+Z8Hp58+xZcyOThpYea4R5PmJwYOz6bK7o3yYvG0PgGoTMrZBfKCeRZ1cQOmhOjIprJXL8CieY2+/zm+Cwc+EMePnl3DWxtroZ/Ti3B0fN3oDrG4NjelohlJP1jchEY8qKc1MaDTGiczEK3fwa6qjxjtghIZRGaA4qIoI7WT1+DJU8gSWcnFtTl03N7NkBbXVgwflQgXCkdZzkMh27LbBiEqDAfeaTeBH1xahK5RgGLOSRBk+zk7T1bE/CpLzZF3DF/1ztwE3dAOfrOmUl4dlcLdDVVRdpHJpdKuk02z0+wn2W2o90sGF3TSbM9PDFh7rYZXnYFf+vBXCzaGLJneep3MbsOf/T6UbZUvq5VYf+VzevhWx9ttJny4B8n4K335wv7iumu8ZqOQGg0Dbb85OacOXqW4BevSPKqolX3peMufaYNrsxRGGO3C+qqCmdZW+M5tVy5KyauF9+9DTuPj8HIrSUYFxA+cnOxaF/BwwsLh+5OB0GAQ8QAWsZ84UxsqT2NruPM4ZacxvgmFazaCvbO7KGWV/L7tj8DYTijoHc118RsFvpeHYddv7oK00u5gveCt4zY0g7I2QMBgyec0fRBvUqx3JWjagvBiTFtITov8C3qFEDjyF+NLc1VUz0Buz/0i4rrUAKs5VcuwIHMoY60EujxhuFT4u8Rt1GgzyKIVJCSZrX2kXDRMknHyWCRzh2XIOQR3XiyOm7veAX2dL2M4Am6lisRg4HRx+4/Qlyq+qLvydazwnifFret9IJ552rMiyV6RnM+YET2cg612TzEwB0gMX/KtsYRVlM1ixNTD7BsPg6VkAAM8bky/82LX37g+367hdTnp7qTwrH6ufxoTFsFD598ScD7Tqeblh940UE5o70Ii3yWsF/LtRNNz22ANy48ys5d3SPPhVakULwXwH1q28bw0NBntJsVFYjox1PdqZj45ioLXvntyO8T/TxvRCGgtuBRmJDdOF3No39ypP+nxfPQmff2nv7Tua+mauKxfaK1ezaXT8rKbkkgcWN1mJ6cz56GoOpI+lBHyY/J/wUwVKGzeWclZQAAAABJRU5ErkJggg=="});default:return Gd(Ev,{src:Lv})}})(t)},onClick:()=>e.walletConnectClick(t),get children(){return Gd(Mv,{get translationKey(){return t.walletNameKey},get children(){return t.walletName}})}})})}})],jv=e=>{Bh();const[t,n]=_d(!1),[r,o]=_d(!1),i=Sd((()=>(e.walletConnector.length>1||1==e.walletConnector.length&&e.walletConnector[0].getTag()!==Va.OKX_APP_WALLET)&&!r())),[s,a]=_d(null),c=Id(Xg);var l,u;var d;Ed((()=>{var r=e.universalLinkParams();const o=i(),s=t(),c=null===e.universalLinkParams()&&!e.connectError();if(o==l||s||c||(o?(Va.reportEvent(Va.OKXReportType.PAGE_IN,Va.Report_Proceed_Proceed_View,""),Va.reportEvent(Va.OKXReportType.PAGE_OUT,Va.Report_ChooseType_ConnectWallet_View,"")):(Va.reportEvent(Va.OKXReportType.PAGE_OUT,Va.Report_Proceed_Proceed_View,""),Va.reportEvent(Va.OKXReportType.PAGE_IN,Va.Report_ChooseType_ConnectWallet_View,"")),l=o),s==u||c||(s?Va.reportEvent(Va.OKXReportType.PAGE_IN,Va.Report_Proceed_QRCode_View,""):Va.reportEvent(Va.OKXReportType.PAGE_OUT,Va.Report_Proceed_QRCode_View,""),u=s),c!=d&&(c?Va.reportEvent(Va.OKXReportType.PAGE_IN,Va.Report_Loading_ConnectWallet_View,""):Va.reportEvent(Va.OKXReportType.PAGE_OUT,Va.Report_Loading_ConnectWallet_View,""),d=c),r){e.setLastSelectedWalletInfo(nd(td({},e.wallet),{openMethod:"universal-link"})),Va.logDebug(`createEffect  ${JSON.stringify(r)}`);var h=r.connectRequest;if(h){var f=Va.getAppWalletShortDeepLink(h.topic,h.clientId);a(f)}}e.connectError()&&n(!1)})),Nd((()=>od(void 0,null,(function*(){try{yield e.connect().catch((e=>Va.logDebug(`MobileConnectionModal onMount error ${JSON.stringify(e)}`)))}catch(Ye){console.error("Error while connecting:",Ye)}}))));const h=()=>{o(!1),Va.reportEvent(Va.OKXReportType.CLICK,Va.Report_Proceed_Retry_Click,"");try{e.connect()}catch(Ye){console.error("Error while connecting:",Ye)}},f=()=>{Va.reportEvent(Va.OKXReportType.CLICK,Va.Report_Proceed_QRCode_Click,""),n(!0),e.setLastSelectedWalletInfo(nd(td({},e.wallet),{openMethod:"qrcode"}))},p=()=>{t()?(n(!1),e.setLastSelectedWalletInfo(nd(td({},e.wallet),{openMethod:"universal-link"}))):e.onBackClick()},g=t=>{var n=e.universalLinkParams();switch(t.getTag()){case Va.OKX_APP_WALLET:return Va.reportEvent(Va.OKXReportType.CLICK,Va.Report_ChooseType_ConnectWallet_Click,JSON.stringify({Report_WalletType_Key:"app"})),void(ff()?(o(!0),n&&t.openWallet(n)):f());case Va.OKX_TG_WALLET:Va.reportEvent(Va.OKXReportType.CLICK,Va.Report_ChooseType_ConnectWallet_Click,JSON.stringify({Report_WalletType_Key:"tgminiwallet"})),null==c||c.closeModal(),n&&t.openWallet(n);break;case Va.OKX_INJECT_WALLET:null==c||c.closeModal(),n&&t.openWallet(n)}};return _d(!1),Ed((()=>{})),Gd($g,{"data-tc-wallets-modal-connection-mobile":"true",get children(){return[Gd(ih,{get when(){return!e.backDisabled},get children(){return Gd(Qg,{icon:"arrow",onClick:p})}}),Gd(ih,{get when(){return Sd((()=>null===e.universalLinkParams()))()&&!e.connectError()},get children(){return[Gd(Vg,{children:"OKX Connect"}),Gd(Sv,{}),Gd(Av,{get wallet(){return e.wallet}})]}}),Gd(ih,{get when(){return null!==e.universalLinkParams()||e.connectError()},get children(){return[Gd(ih,{get when(){return Sd((()=>!!t()))()&&!e.connectError()},get children(){return Gd(uv,{get universalLink(){return s()},get walletInfo(){return e.wallet},get sessionConnecting(){return e.sessionConnecting}})}}),Gd(ih,{get when(){return!t()},get children(){return[Gd(Vg,{children:"OKX Connect"}),Gd(Gg,{get isDeclined(){return e.connectError()},get children(){return[Gd(ih,{get when(){return e.connectError()},get children(){return Gd(xv,{onRetry:h,get showRetry(){return e.showRetry}})}}),Gd(ih,{get when(){return!e.connectError()},get children(){return[Gd(ih,{get when(){return i()},get children(){return Gd(Uv,{get connector(){return e.walletConnector},walletConnectClick:g})}}),Gd(ih,{get when(){return!i()},get children(){return Gd(Iv,{onOpenQR:f,onRetry:h})}})]}})]}}),Gd(Av,{get wallet(){return e.wallet}})]}})]}})]}})},Wv=Hh.div``,Bv=Hh.div`
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  margin-bottom: 16px;
`,Xv=Hh(Rg)`
  margin-bottom: 0;
  padding: 10px 24px 0px 24px;
  font-size: 14px;
  font-color: ${e=>e.theme.colors.text.contrast};
`,Hv=Hh.div`
  margin-top: 24px;
  margin-left: 24px;
  margin-right: 24px;
  margin-bottom: 10px;
`,Fv=Hh.div`
  display: flex;
  justify-content: center;
  align-items: center;
`,qv=e=>[Gd(Hv,{get children(){return[Gd(ih,{get when(){return e.sessionConnecting()},get children(){return Gd(Fv,{get children(){return Gd(iv,{})}})}}),Gd(ih,{get when(){return Sd((()=>null!==e.universalLink))()&&!e.sessionConnecting()},get children(){return Gd(dg,{imageUrl:nv,get sourceUrl(){return tv(e.universalLink,"none")},disableCopy:!0})}})]}}),Gd(Xv,{translationKey:"walletModal.mobileConnectionModal.scanQR",get translationValues(){return{name:e.walletInfo.name}},get children(){return["Scan the QR code below with your phoneâ€™s or ",Sd((()=>e.walletInfo.name)),"â€™s camera"]}})],Jv=Hh.div`
  display: flex;
  flex-direction: row;
  justify-content: center;
  align-items: center;
  padding-bottom: 20px;
  margin-top: 10px;
  border-bottom: 0.5px solid ${e=>$h(e.theme.colors.icon.secondary,.2)};
  width: 100%;
`,zv=Hh.div`
  flex: 1;
  margin-left: 16px;
  display: flex;
  flex-direction: column;
`,Vv=Hh(Eg)`
  font-weight: 500;
  font-size: 18px;
  text-align: left;
`,$v=Hh(mg)`
  font-weight: 500;
  font-size: 14px;
  margin-top: 5px;
  color: ${e=>e.theme.colors.text.contrast};
`,Gv=Hh(lp)`
  width: 48px;
  height: 48px;
  margin-left: 24px;
`,Qv=Hh(pp)`
  border-radius: 20px;
  padding: 6px 14px;
  margin-right: 24px;
  display: inline-flex;
  background-color: transparent;
  border: 0.5px solid ${e=>e.theme.colors.text.secondary};;
  white-space: nowrap;
  cursor: pointer;
`,Yv=Hh(mg)`
  font-size: 12px;
  font-weight: 400;
  color: ${e=>e.theme.colors.text.primary};
`,Zv=e=>Gd(Jv,{get children(){return[Gd(Gv,{src:Lv}),Gd(zv,{get children(){return[Gd(Vv,{translationKey:"walletModal.mobileConnectionModal.connectInjectedOpening",children:"Opening OKX Wallet..."}),Gd($v,{translationKey:"walletModal.mobileConnectionModal.connectInjectedConfirm",children:"Confirm in OKX Wallet extension"})]}}),Gd(Qv,{get onClick(){return e.injectedRetry},get children(){return Gd(Yv,{translationKey:"common.retry",children:"Retry"})}})]}}),em=e=>{const t=e.connector.some((e=>e.getTag()===Va.OKX_APP_WALLET));return[Gd(ih,{get when(){return e.injectedOpen()},get children(){return Gd(Zv,{get injectedRetry(){return e.injectedRetry}})}}),Gd(ih,{when:t,get children(){return Gd(qv,{get universalLink(){return e.qrLink()},get walletInfo(){return e.wallet},get sessionConnecting(){return e.sessionConnecting}})}})]},tm=e=>{Bh(),Id(Xg);const[t,n]=_d(null),r=Sd((()=>null===t())),[o,i]=_d(!1);var s;var a;e.setLastSelectedWalletInfo(nd(td({},e.wallet),{openMethod:"qrcode"}));const c=Sd((()=>null===e.universalLinkParams()&&!e.connectError())),l=Sd((()=>null!==e.universalLinkParams()||e.connectError())),u=Sd((()=>l()&&e.connectError())),d=Sd((()=>l()&&!e.connectError()));Ed((()=>{Va.logDebug("TON customEvent.detail  :::",Ed);var t=e.universalLinkParams();Va.logDebug("TON customEvent.detail  :::",JSON.stringify(t));const n=r(),o=null===e.universalLinkParams()&&!e.connectError();if(n==s||o||(n?(Va.reportEvent(Va.OKXReportType.PAGE_IN,Va.Report_ChooseType_ConnectWallet_View,""),Va.reportEvent(Va.OKXReportType.PAGE_OUT,Va.Report_Proceed_QRCode_View,"")):(Va.reportEvent(Va.OKXReportType.PAGE_OUT,Va.Report_ChooseType_ConnectWallet_View,""),Va.reportEvent(Va.OKXReportType.PAGE_IN,Va.Report_Proceed_QRCode_View,"")),s=n),o!=a&&(o?Va.reportEvent(Va.OKXReportType.PAGE_IN,Va.Report_Loading_ConnectWallet_View,""):Va.reportEvent(Va.OKXReportType.PAGE_OUT,Va.Report_Loading_ConnectWallet_View,""),a=o),t){e.setLastSelectedWalletInfo(nd(td({},e.wallet),{openMethod:"universal-link"}));var c=t.connectRequest;if(c){var l=Va.getAppWalletShortDeepLink(c.topic,c.clientId);f(l)}var u=e.walletConnector.find((e=>e.getTag()===Va.OKX_INJECT_WALLET));u&&(u.openWallet(t),i(!0),e.setLastSelectedWalletInfo(nd(td({},e.wallet),{openMethod:"inject"})))}}));const[h,f]=_d(null);Nd((()=>od(void 0,null,(function*(){try{yield e.connect().catch((e=>Va.logDebug("DesktopConnectionModal connect catch error ",JSON.stringify(e))))}catch(Ye){Va.logDebug("DesktopConnectionModal connect  error ",JSON.stringify(Ye))}}))));const p=()=>{n(null),Va.reportEvent(Va.OKXReportType.CLICK,Va.Report_Proceed_Retry_Click,"");try{e.connect()}catch(Ye){console.error("Error while connecting:",Ye)}},g=()=>{var t=e.walletConnector.find((e=>e.getTag()===Va.OKX_INJECT_WALLET));t&&v(t)},v=t=>{var n=e.universalLinkParams();n&&(t.openWallet(n),e.setLastSelectedWalletInfo(nd(td({},e.wallet),{openMethod:"inject"})))};return Gd(Wv,{"data-tc-wallets-modal-connection-mobile":"true",get children(){return[Gd(Vg,{children:"OKX Connect"}),Gd(ih,{get when(){return c()},get children(){return[Gd(Sv,{}),Gd(Av,{get wallet(){return e.wallet}})]}}),Gd(ih,{get when(){return l()},get children(){return[Gd(ih,{get when(){return u()},get children(){return Gd(Bv,{get children(){return Gd(xv,{onRetry:p,get showRetry(){return e.showRetry}})}})}}),Gd(ih,{get when(){return d()},get children(){return Gd(Bv,{get children(){return Gd(em,{get connector(){return e.walletConnector},get wallet(){return e.wallet},get sessionConnecting(){return e.sessionConnecting},qrLink:()=>h(),injectedRetry:g,injectedOpen:o})}})}}),Gd(Av,{get wallet(){return e.wallet}})]}})]}})},nm=e=>{const{locale:t}=gg()[1];Ed((()=>t(e.language)));const n=Sd((()=>ff()||Mf()));return Ed((()=>{e.opened&&gf()})),Gd(zg,{get opened(){return e.opened},onClose:()=>e.onClose("action-cancelled"),"data-tc-wallets-modal-container":"true",get children(){return[Gd(ih,{get when(){return e.loadingBeforeConnect()},get children(){return[Gd(Vg,{get children(){var t;return null==(t=e.walletInfo)?void 0:t.name}}),Gd(Sv,{})]}}),Gd(ih,{get when(){return!e.loadingBeforeConnect()},get children(){return Gd(Ah,{get component(){return n()?jv:tm},get wallet(){return e.walletInfo},onBackClick:()=>{},backDisabled:!0,get connect(){return e.connect},get universalLinkParams(){return e.universalLinkParams},get lastSelectedWalletInfo(){return e.lastSelectedWalletInfo},get setLastSelectedWalletInfo(){return e.setLastSelectedWalletInfo},get connectError(){return e.connectError},get showRetry(){return e.showRetry},get sessionConnecting(){return e.sessionConnecting},get walletConnector(){return e.walletConnector()}})}})]}})},rm={common:{openWallet:"ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ ÐºÐ¾ÑˆÐµÐ»ÐµÐº",get:"ÐŸÐžÐ›Ð£Ð§Ð˜Ð¢Ð¬",close:"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ",retry:"ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÑƒ"},button:{connectWallet:"ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ ÐºÐ¾ÑˆÐµÐ»ÐµÐº",dropdown:{copy:"Ð¡ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð°Ð´Ñ€ÐµÑ",copied:"ÐÐ´Ñ€ÐµÑ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½.",disconnect:"ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ"}},notifications:{confirm:{header:"ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ {{ name }} Ð´Ð»Ñ Ð¿Ð¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ñ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸."},transactionSent:{header:"Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð°",text:"Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ Ð±ÑƒÐ´ÐµÑ‚ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ð° Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÐµÐºÑƒÐ½Ð´."},transactionCanceled:{header:"Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½Ð°",text:"Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð² Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ðµ Ð½Ðµ Ð±ÑƒÐ´ÐµÑ‚."}},walletModal:{mobileConnectionModal:{showQR:"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ QR-ÐºÐ¾Ð´",scanQR:"ÐžÑ‚ÑÐºÐ°Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ QR-ÐºÐ¾Ð´ Ð½Ð¸Ð¶Ðµ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÐºÐ°Ð¼ÐµÑ€Ñ‹ Ð½Ð° Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ðµ Ð¸Ð»Ð¸ {{ name }}",continueIn:"ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð² ÐšÐ¾ÑˆÐµÐ»ÑŒÐºÐµ OKX",connectionDeclined:"ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"ÐšÐ¾ÑˆÐµÐ»ÐµÐº OKX Ð´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð² Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸ OKX Ð¸ Ð² Telegram"},connectApp:"ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑŽ OKX",connectMini:"ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒÑÑ Ðº Ð¼Ð¸Ð½Ð¸-ÐšÐ¾ÑˆÐµÐ»ÑŒÐºÑƒ OKX"}},actionModal:{confirmTransaction:{header:"ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ Ð² {{ name }}",text:"Ð­Ñ‚Ð¾ Ð·Ð°Ð¹Ð¼ÐµÑ‚ Ð²ÑÐµÐ³Ð¾ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÐµÐºÑƒÐ½Ð´."},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled"}},om={common:{openWallet:"æ‰“å¼€é’±åŒ…",get:"èŽ·å–",close:"å…³é—­",retry:"å†è¯•ä¸€æ¬¡"},button:{connectWallet:"è¿žæŽ¥é’±åŒ…",dropdown:{copy:"å¤åˆ¶åœ°å€",copied:"åœ°å€å·²å¤åˆ¶",disconnect:"æ–­å¼€è¿žæŽ¥"}},notifications:{confirm:{header:"æ‰“å¼€ {{ name }} è¿›è¡Œç¡®è®¤"},transactionSent:{header:"å·²å‘é€",text:"å³å°†å®Œæˆï¼Œè¯·ç¨å€™"},transactionCanceled:{header:"å·²å–æ¶ˆ",text:"è´¦æˆ·æœªå‘ç”Ÿä»»ä½•æ›´æ”¹"}},walletModal:{mobileConnectionModal:{OKXConnect:"OKX Connect",showQR:"å±•ç¤ºäºŒç»´ç ",scanQR:"ä½¿ç”¨æ‰‹æœºæˆ–æ¬§æ˜“é’±åŒ…çš„ç›¸æœºæ‰«æä¸‹æ–¹äºŒç»´ç ",continueIn:"åœ¨æ¬§æ˜“é’±åŒ…ä¸­ç»§ç»­å®Œæˆ",connectionDeclined:"è¿žæŽ¥å¤±è´¥",PoweredBy:"Powered by",appAndTelegram:{header:"è¿žæŽ¥æ¬§æ˜“é’±åŒ…",text:"æ¬§æ˜“é’±åŒ…å¯åœ¨æ¬§æ˜“ App å’Œ Telegram ä½¿ç”¨"},connectApp:"æ¬§æ˜“ App",connectMini:"æ¬§æ˜“ Mini Wallet",connectInjected:"æ¬§æ˜“é’±åŒ…æ’ä»¶",connectInjectedOpening:"æ­£åœ¨æ‰“å¼€æ¬§æ˜“é’±åŒ…...",connectInjectedConfirm:"è¯·åœ¨é’±åŒ…æ’ä»¶ç¡®è®¤è¿žæŽ¥"}},actionModal:{confirmTransaction:{header:"åœ¨ {{ name }} ä¸­ç¡®è®¤",text:"è¯·ç¨å€™"},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled"}},im={common:{openWallet:"ÙØªØ­ Ù…Ø­ÙØ¸Ø©",get:"Ø­ØµÙˆÙ„",close:"Ø¥ØºÙ„Ø§Ù‚",retry:"Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©"},button:{connectWallet:"Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©",dropdown:{copy:"Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",copied:"ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù†",disconnect:"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø±Ø¨Ø·"}},notifications:{confirm:{header:"Ø§ÙØªØ­ {{ name }} Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©."},transactionSent:{header:"Ø£ÙØ±Ø³Ù„Øª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©",text:"Ø³ØªØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø¹Ø§Ù…Ù„ØªÙƒ ÙÙŠ ØºØ¶ÙˆÙ† Ø«ÙˆØ§Ù†Ù Ù‚Ù„ÙŠÙ„Ø©."},transactionCanceled:{header:"Ø£ÙÙ„ØºÙŠØª Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©",text:"Ù„Ù† ØªØ·Ø±Ø£ Ø£ÙŠØ© ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ."}},walletModal:{mobileConnectionModal:{showQR:"Ø¹Ø±Ø¶ Ø±Ù…Ø² QR",scanQR:"Ø§Ù…Ø³Ø­ Ø±Ù…Ø² QR Ø£Ø¯Ù†Ø§Ù‡ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒØ§Ù…ÙŠØ±Ø§ Ù‡Ø§ØªÙÙƒ Ø£Ùˆ ÙƒØ§Ù…ÙŠØ±Ø§ Ù‡Ø§ØªÙ {{ name }}",continueIn:"Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙÙŠ Ù…Ø­ÙØ¸Ø© OKX",connectionDeclined:"ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"Ù…Ø­ÙØ¸Ø© OKX Ù…ØªØ§Ø­Ø© Ø¹Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚ OKX ÙˆTelegram"},connectApp:"Ø§Ù„Ø±Ø¨Ø· Ø¨ØªØ·Ø¨ÙŠÙ‚ OKX",connectMini:"Ø§Ù„Ø±Ø¨Ø· Ø¨Ù…Ø­ÙØ¸Ø© OKX Ø§Ù„Ù…ØµØºØ±Ø©"}},actionModal:{confirmTransaction:{header:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø© ÙÙŠ {{ name }}",text:"Ù„Ù† ÙŠØ³ØªØºØ±Ù‚ Ø§Ù„Ø£Ù…Ø± Ø³ÙˆÙ‰ Ù„Ø­Ø¸Ø§Øª."}}},sm={common:{openWallet:"OtevÅ™Ã­t penÄ›Å¾enku",get:"ZÃ­skat",close:"ZavÅ™Ã­t",retry:"Zkusit znovu"},button:{connectWallet:"PÅ™ipojit penÄ›Å¾enku",dropdown:{copy:"KopÃ­rovat adresu",copied:"Adresa zkopÃ­rovÃ¡na",disconnect:"Odpojit"}},notifications:{confirm:{header:"OtevÅ™ete {{ name }} a potvrÄte transakci."},transactionSent:{header:"Transakce odeslÃ¡na",text:"VaÅ¡e transakce bude zruÅ¡ena bÄ›hem nÄ›kolika sekund."},transactionCanceled:{header:"Transakce zruÅ¡ena",text:"Na vaÅ¡em ÃºÄtu nedojde k Å¾Ã¡dnÃ½m zmÄ›nÃ¡m."}},walletModal:{mobileConnectionModal:{showQR:"Zobrazit QR kÃ³d",scanQR:"Naskenujte nÃ­Å¾e uvedenÃ½ QR kÃ³d pomocÃ­ kamery telefonu nebo {{ name }}",continueIn:"PotvrÄte transakci v OKX PenÄ›Å¾ence.",connectionDeclined:"PÅ™ipojenÃ­ selhalo",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX PenÄ›Å¾enka je k dispozici v aplikaci OKX a na sÃ­ti Telegram."},connectApp:"PÅ™ipojit k aplikaci OKX",connectMini:"PÅ™ipojit k minipenÄ›Å¾ence OKX"}},actionModal:{confirmTransaction:{header:"PotvrÄte transakci na {{ name }}.",text:"Zabere to jen chvilku."}}},am={common:{openWallet:"Wallet Ã¶ffnen",get:"Erhalten",close:"SchlieÃŸen",retry:"Wiederholen"},button:{connectWallet:"Wallet verknÃ¼pfen",dropdown:{copy:"Adresse kopieren",copied:"Adresse kopiert",disconnect:"Trennen"}},notifications:{confirm:{header:"{{ name }} Ã¶ffnen und Transaktion bestÃ¤tigen."},transactionSent:{header:"Transaktion gesendet",text:"Ihre Transaktion wird in wenigen Sekunden bearbeitet."},transactionCanceled:{header:"Transaktion storniert",text:"Es werden keine Ã„nderungen an Ihrem Konto vorgenommen."}},walletModal:{mobileConnectionModal:{showQR:"QR-Code anzeigen",scanQR:"Scannen Sie den QR-Code unten mit der Kamera Ihres Telefons oder {{ name }}",continueIn:"Setzen Sie die Transaktion in der OKX Wallet fort",connectionDeclined:"Verbindung fehlgeschlagen",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet ist in der OKX App und auf Telegram verfÃ¼gbar"},connectApp:"Mit der OKX-App verbinden",connectMini:"Mit der OKX-Mini-Wallet verbinden"}},actionModal:{confirmTransaction:{header:"Transaktion in {{ name }} bestÃ¤tigen",text:"Es dauert nur einen Augenblick."}}},cm={common:{openWallet:"Abrir wallet",get:"Consigue",close:"Cerrar",retry:"Volver a intentar"},button:{connectWallet:"Conectar billetera",dropdown:{copy:"Copiar direcciÃ³n",copied:"DirecciÃ³n copiada",disconnect:"Desconectar"}},notifications:{confirm:{header:"Abre {{ name }} para confirmar la transacciÃ³n."},transactionSent:{header:"TransacciÃ³n enviada",text:"Tu transacciÃ³n se procesarÃ¡ en unos segundos."},transactionCanceled:{header:"TransacciÃ³n cancelada",text:"No se realizarÃ¡n cambios en tu cuenta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar cÃ³digo QR",scanQR:"Escanea el siguiente cÃ³digo QR con la cÃ¡mara de tu telÃ©fono o de tu {{ name }}",continueIn:"Continuar con la transacciÃ³n en OKX Wallet",connectionDeclined:"Error de conexiÃ³n",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet estÃ¡ disponible en la OKX app y en Telegram"},connectApp:"Conectarse a la OKX app",connectMini:"Conectarse a la OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirma la transacciÃ³n de {{ name }}",text:"Solo te llevarÃ¡ un momento."}}},lm={common:{openWallet:"Abrir billetera",get:"Obtener",close:"Cerrar",retry:"Reintentar"},button:{connectWallet:"Conectar billetera",dropdown:{copy:"Copiar direcciÃ³n",copied:"DirecciÃ³n copiada",disconnect:"Desconectar"}},notifications:{confirm:{header:"Abre {{ name }} para confirmar la transacciÃ³n."},transactionSent:{header:"TransacciÃ³n enviada",text:"Tu transacciÃ³n se procesarÃ¡ en unos segundos."},transactionCanceled:{header:"TransacciÃ³n cancelada",text:"No habrÃ¡ cambios en tu cuenta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar cÃ³digo QR",scanQR:"Escanea el siguiente cÃ³digo QR con la cÃ¡mara de tu telÃ©fono o {{ name }}",continueIn:"ContinÃºa la transacciÃ³n en OKX Wallet",connectionDeclined:"Error de conexiÃ³n",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet estÃ¡ disponible en la aplicaciÃ³n de OKX y Telegram"},connectApp:"ConÃ©ctate a la aplicaciÃ³n de OKX",connectMini:"ConÃ©ctate a la OKXÂ Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmar la transacciÃ³n en {{ name }}",text:"Solo tomarÃ¡ un momento."}}},um={common:{openWallet:"Portefeuille ouvert",get:"Obtenir",close:"Fermer",retry:"RÃ©essayer"},button:{connectWallet:"Connecter le portefeuille",dropdown:{copy:"Copier lâ€™adresse",copied:"Adresse copiÃ©e",disconnect:"DÃ©connecter"}},notifications:{confirm:{header:"Ouvrir {{ name }} pour confirmer la transaction."},transactionSent:{header:"Transaction envoyÃ©e",text:"Votre transaction sera traitÃ©e en quelques secondes."},transactionCanceled:{header:"Transaction annulÃ©e",text:"Aucun changement ne sera apportÃ© Ã  votre compte."}},walletModal:{mobileConnectionModal:{showQR:"Afficher le code QR",scanQR:"Scannez le code QR ci-dessous avec la camÃ©ra de votre tÃ©lÃ©phone ou de votre {{ name }}.",continueIn:"Poursuivre la transaction dans OKX Wallet",connectionDeclined:"Ã‰chec de la connexion",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet est disponible sur OKX App et Telegram"},connectApp:"Se connecter Ã  lâ€™appli OKX",connectMini:"Se connecter Ã  OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmer la transaction dans {{ name }}",text:"Cela ne prendra qu'un instant."}}},dm={common:{openWallet:"Buka wallet",get:"Dapatkan",close:"Tutup",retry:"Coba lagi"},button:{connectWallet:"Hubungkan wallet",dropdown:{copy:"Salin alamat",copied:"Alamat disalin",disconnect:"Putuskan sambungan"}},notifications:{confirm:{header:"Buka {{ name }} untuk mengonfirmasi transaksi."},transactionSent:{header:"Transaksi terkirim",text:"Transaksi Anda akan diproses dalam beberapa detik."},transactionCanceled:{header:"Transaksi dibatalkan",text:"Tidak akan ada perubahan pada akun Anda."}},walletModal:{mobileConnectionModal:{showQR:"Tampilkan Kode QR",scanQR:"Pindai kode QR di bawah dengan kamera ponsel atau {{ name }} Anda",continueIn:"Lanjutkan transaksi di OKX Wallet",connectionDeclined:"Koneksi gagal",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet tersedia di OKX App dan Telegram"},connectApp:"Hubungkan ke OKX App",connectMini:"Hubungkan ke OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Konfirmasi transaksi pada {{ name }}",text:"Hanya perlu beberapa saat."}}},hm={common:{openWallet:"Apri portafoglio",get:"Ottieni",close:"Chiudi",retry:"Riprova"},button:{connectWallet:"Connetti il portafoglio",dropdown:{copy:"Copia indirizzo",copied:"Indirizzo copiato",disconnect:"Disconnetti"}},notifications:{confirm:{header:"Apri {{ name }} per confermare la transazione."},transactionSent:{header:"Transazione inviata",text:"La transazione verrÃ  elaborata in pochi secondi."},transactionCanceled:{header:"Transazione annullata",text:"Il tuo conto non subirÃ  modifiche."}},walletModal:{mobileConnectionModal:{showQR:"Mostra il codice QR",scanQR:"Scansiona il codice QR di seguito con la fotocamera del tuo smartphone o {{ name }}",continueIn:"Continua la transazione in OKX Wallet",connectionDeclined:"Collegamento non riuscito",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet Ã¨ disponibile sull'app OKX e Telegram"},connectApp:"Connettiti all'app OKX",connectMini:"Connettiti a OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Conferma la transazione in {{ name }}",text:"Ci vorrÃ  solo un secondo."}}},fm={common:{openWallet:"Wallet openen",get:"Krijgen",close:"Sluiten",retry:"Opnieuw proberen"},button:{connectWallet:"Wallet koppelen",dropdown:{copy:"Adres kopiÃ«ren",copied:"Adres gekopieerd",disconnect:"Verbinding verbreken"}},notifications:{confirm:{header:"Open {{ name }} om de transactie te bevestigen."},transactionSent:{header:"Transactie verstuurd",text:"Je transactie wordt binnen een paar seconden verwerkt."},transactionCanceled:{header:"Transactie geannuleerd",text:"Er verandert niets aan je account."}},walletModal:{mobileConnectionModal:{showQR:"QR-code weergeven",scanQR:"Scan de QR-code hieronder met de camera van je telefoon of de camera van{{ name }}",continueIn:"Ga verder met de transactie in OKX Wallet",connectionDeclined:"Koppelen mislukt",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet is beschikbaar op OKX App en Telegram"},connectApp:"Koppelen met de OKX-app",connectMini:"Koppelen met OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"De transactie in {{ name }} bevestigen",text:"Het is zo gebeurd."}}},pm={common:{openWallet:"OtwÃ³rz portfel",get:"Otrzymaj",close:"Zamknij",retry:"SprÃ³buj ponownie"},button:{connectWallet:"PoÅ‚Ä…cz portfel",dropdown:{copy:"Kopiuj adres",copied:"Adres skopiowany",disconnect:"RozÅ‚Ä…cz"}},notifications:{confirm:{header:"OtwÃ³rz {{ name }}, aby potwierdziÄ‡ transakcjÄ™."},transactionSent:{header:"WysÅ‚ano transakcjÄ™",text:"Transakcja zostanie przetworzona w ciÄ…gu kilku sekund."},transactionCanceled:{header:"Anulowano transakcjÄ™",text:"Na koncie nie zostanÄ… wprowadzone Å¼adne zmiany."}},walletModal:{mobileConnectionModal:{showQR:"PokaÅ¼ kod QR",scanQR:"Zeskanuj poniÅ¼szy kod QR za pomocÄ… aparatu w telefonie lub {{ name }}",continueIn:"Kontynuuj transakcjÄ™ w OKX Wallet",connectionDeclined:"PoÅ‚Ä…czenie nieudane",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet jest dostÄ™pny w aplikacji OKX i Telegramie"},connectApp:"PoÅ‚Ä…cz z aplikacjÄ… OKX",connectMini:"PoÅ‚Ä…cz z OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"PotwierdÅº transakcjÄ™ w {{ name }}",text:"To zajmie tylko chwilÄ™."}}},gm={common:{openWallet:"Abrir carteira",get:"Receber",close:"Fechar",retry:"Tentar novamente"},button:{connectWallet:"Conectar carteira",dropdown:{copy:"Copiar endereÃ§o",copied:"EndereÃ§o copiado",disconnect:"Desconectar"}},notifications:{confirm:{header:"Abrir {{ name }} para confirmar a transaÃ§Ã£o."},transactionSent:{header:"TransaÃ§Ã£o enviada",text:"Sua transaÃ§Ã£o serÃ¡ processada em alguns segundos."},transactionCanceled:{header:"TransaÃ§Ã£o cancelada",text:"NÃ£o haverÃ¡ alteraÃ§Ãµes em sua conta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar CÃ³digo QR",scanQR:"Digitalize o cÃ³digo QR abaixo com a cÃ¢mera do seu telefone ou do {{ name }}",continueIn:"Continuar a transaÃ§Ã£o na OKX Wallet",connectionDeclined:"Falha na conexÃ£o",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"A OKX Wallet estÃ¡ disponÃ­vel na OKX App e no Telegram"},connectApp:"Conecte-se Ã  OKX App",connectMini:"Conecte-se Ã  OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmar a transaÃ§Ã£o em {{ name }}",text:"Isso levarÃ¡ apenas um momento."}}},vm={common:{openWallet:"Abrir carteira",get:"Receber",close:"Fechar",retry:"Tentar novamente"},button:{connectWallet:"Associar carteira",dropdown:{copy:"Copiar endereÃ§o",copied:"EndereÃ§o copiado",disconnect:"Desassociar"}},notifications:{confirm:{header:"Abra {{ name }} para confirmar a transaÃ§Ã£o."},transactionSent:{header:"TransaÃ§Ã£o efetuada",text:"A sua transaÃ§Ã£o serÃ¡ processada dentro de poucos segundos."},transactionCanceled:{header:"TransaÃ§Ã£o cancelada",text:"NÃ£o serÃ£o feitas alteraÃ§Ãµes Ã  sua conta."}},walletModal:{mobileConnectionModal:{showQR:"Mostrar cÃ³digo QR",scanQR:"Leia o cÃ³digo QR abaixo com a cÃ¢mara do seu telemÃ³vel ou {{ name }}",continueIn:"Continuar a transaÃ§Ã£o na OKX Wallet",connectionDeclined:"Falha na ligaÃ§Ã£o",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"A OKX Wallet estÃ¡ disponÃ­vel na AplicaÃ§Ã£o da OKX e no Telegram"},connectApp:"Associar Ã  AplicaÃ§Ã£o da OKX",connectMini:"Associar Ã  OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"Confirmar a transaÃ§Ã£o na {{ name }}",text:"Demora apenas um momento."}}},mm={common:{openWallet:"DeschideÈ›i portofelul",get:"PrimiÈ›i",close:"ÃŽnchideÈ›i",retry:"ReÃ®ncercaÈ›i"},button:{connectWallet:"ConectaÈ›i portofelul",dropdown:{copy:"CopiaÈ›i adresa",copied:"AdresÄƒ copiatÄƒ",disconnect:"DeconectaÈ›i"}},notifications:{confirm:{header:"DeschideÈ›i {{ name }} pentru a confirma tranzacÈ›ia."},transactionSent:{header:"TranzacÈ›ie trimisÄƒ",text:"TranzacÈ›ia dvs. va fi procesatÄƒ Ã®n cÃ¢teva secunde."},transactionCanceled:{header:"TranzacÈ›ie anulatÄƒ",text:"Nu va exista nicio modificare Ã®n cont."}},walletModal:{mobileConnectionModal:{showQR:"ScanaÈ›i codul QR",scanQR:"ScanaÈ›i codul QR mai jos cu camera telefonului sau a {{ name }}",continueIn:"ContinuaÈ›i tranzacÈ›ia Ã®n OKX Wallet",connectionDeclined:"Conexiunea a eÈ™uat",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet este disponibil din aplicaÈ›ia OKX È™i Telegram"},connectApp:"ConectaÈ›i-vÄƒ la aplicaÈ›ia OKX",connectMini:"ConectaÈ›i-vÄƒ la OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"ConfirmaÈ›i tranzacÈ›ia Ã®n {{ name }}",text:"Va dura doar un moment."}}},ym={common:{openWallet:"CÃ¼zdanÄ± aÃ§",get:"Al",close:"Kapat",retry:"Tekrar Dene"},button:{connectWallet:"CÃ¼zdanÄ± baÄŸla",dropdown:{copy:"Adresi kopyala",copied:"Adres kopyalandÄ±!",disconnect:"BaÄŸlantÄ±yÄ± kes"}},notifications:{confirm:{header:"Ä°ÅŸlemi onaylamak iÃ§in {{ name }} Ã¶gesini aÃ§Ä±n."},transactionSent:{header:"Ä°ÅŸlem gÃ¶nderildi.",text:"Ä°ÅŸleminiz birkaÃ§ saniye iÃ§inde gerÃ§ekleÅŸtirilecek."},transactionCanceled:{header:"Ä°ÅŸlem iptal edildi!",text:"HesabÄ±nÄ±zda deÄŸiÅŸiklik olmayacak."}},walletModal:{mobileConnectionModal:{showQR:"QR Kodunu GÃ¶ster",scanQR:"AÅŸaÄŸÄ±daki QR kodunu telefonunuzun veya {{ name }} cihazÄ±nÄ±zÄ±n kamerasÄ±yla tarayÄ±n.",continueIn:"Ä°ÅŸleme OKX Web3 CÃ¼zdanâ€™da devam edin.",connectionDeclined:"BaÄŸlantÄ± baÅŸarÄ±sÄ±z.",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Web3 CÃ¼zdan, OKX UygulamasÄ±nda ve Telegramâ€™da kullanÄ±ma sunuldu"},connectApp:"OKX UygulamasÄ±na BaÄŸlan",connectMini:"OKX Mini CÃ¼zdanÄ±na BaÄŸlan"}},actionModal:{confirmTransaction:{header:"{{ name }} Konumunda Ä°ÅŸlemi OnaylayÄ±n",text:"Bu yalnÄ±zca bir dakikanÄ±zÄ± alacak."}}},bm={common:{openWallet:"Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸Ð¹ Ð³Ð°Ð¼Ð°Ð½ÐµÑ†ÑŒ",get:"ÐžÑ‚Ñ€Ð¸Ð¼Ð°Ñ‚Ð¸",close:"Ð—Ð°ÐºÑ€Ð¸Ñ‚Ð¸",retry:"ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ð¸ ÑÐ¿Ñ€Ð¾Ð±Ñƒ"},button:{connectWallet:"ÐŸÑ–Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ð¸ Ð³Ð°Ð¼Ð°Ð½ÐµÑ†ÑŒ",dropdown:{copy:"ÐšÐ¾Ð¿Ñ–ÑŽÐ²Ð°Ñ‚Ð¸ Ð°Ð´Ñ€ÐµÑÑƒ",copied:"ÐÐ´Ñ€ÐµÑÑƒ ÑÐºÐ¾Ð¿Ñ–Ð¹Ð¾Ð²Ð°Ð½Ð¾",disconnect:"Ð’Ñ–Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ð¸"}},notifications:{confirm:{header:"Ð’Ñ–Ð´ÐºÑ€Ð¸Ð¹Ñ‚Ðµ {{ name }}, Ñ‰Ð¾Ð± Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ñ–ÑŽ."},transactionSent:{header:"Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ñ–ÑŽ Ð½Ð°Ð´Ñ–ÑÐ»Ð°Ð½Ð¾",text:"Ð’Ð°ÑˆÑƒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ñ–ÑŽ Ð±ÑƒÐ´Ðµ Ð¾Ð±Ñ€Ð¾Ð±Ð»ÐµÐ½Ð¾ Ñ‡ÐµÑ€ÐµÐ· ÐºÑ–Ð»ÑŒÐºÐ° ÑÐµÐºÑƒÐ½Ð´."},transactionCanceled:{header:"Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ñ–ÑŽ ÑÐºÐ°ÑÐ¾Ð²Ð°Ð½Ð¾",text:"Ð£ Ð²Ð°ÑˆÐ¾Ð¼Ñƒ Ð°ÐºÐ°ÑƒÐ½Ñ‚Ñ– Ð½Ðµ Ð±ÑƒÐ´Ðµ Ð·Ð¼Ñ–Ð½."}},walletModal:{mobileConnectionModal:{showQR:"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚Ð¸ QR-ÐºÐ¾Ð´",scanQR:"Ð’Ñ–Ð´ÑÐºÐ°Ð½ÑƒÐ¹Ñ‚Ðµ Ð½Ð°Ð²ÐµÐ´ÐµÐ½Ð¸Ð¹ Ð½Ð¸Ð¶Ñ‡Ðµ QR-ÐºÐ¾Ð´ Ð·Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð¾ÑŽ ÐºÐ°Ð¼ÐµÑ€Ð¸ ÑÐ²Ð¾Ð³Ð¾ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð° Ð°Ð±Ð¾ {{ name }}",continueIn:"ÐŸÑ€Ð¾Ð´Ð¾Ð²Ð¶Ñ‚Ðµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ñ–ÑŽ Ð² OKX Wallet",connectionDeclined:"ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ° Ð¿Ñ–Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð½Ñ",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Ð“Ð°Ð¼Ð°Ð½ÐµÑ†ÑŒ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹ Ñƒ Ð·Ð°ÑÑ‚Ð¾ÑÑƒÐ½ÐºÑƒ OKX Ñ– Telegram"},connectApp:"ÐŸÑ–Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ð¸ÑÑ Ð´Ð¾ Ð·Ð°ÑÑ‚Ð¾ÑÑƒÐ½ÐºÐ° OKX",connectMini:"ÐŸÑ–Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ð¸ÑÑ Ð´Ð¾ Ð¼Ñ–Ð½Ñ–Ð³Ð°Ð¼Ð°Ð½Ñ†Ñ OKX"}},actionModal:{confirmTransaction:{header:"ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´ÑŒÑ‚Ðµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ñ–ÑŽ Ð² {{ name }}",text:"Ð¦Ðµ Ð·Ð°Ð¹Ð¼Ðµ Ð»Ð¸ÑˆÐµ Ð¼Ð¸Ñ‚ÑŒ."}}},wm={common:{openWallet:"Má»Ÿ vÃ­",get:"Nháº­n",close:"ÄÃ³ng",retry:"Thá»­ láº¡i"},button:{connectWallet:"Káº¿t ná»‘i vÃ­",dropdown:{copy:"Sao chÃ©p Ä‘á»‹a chá»‰",copied:"ÄÃ£ sao chÃ©p Ä‘á»‹a chá»‰",disconnect:"Ngáº¯t káº¿t ná»‘i"}},notifications:{confirm:{header:"Má»Ÿ {{ name }} Ä‘á»ƒ xÃ¡c nháº­n giao dá»‹ch."},transactionSent:{header:"ÄÃ£ gá»­i giao dá»‹ch",text:"Giao dá»‹ch cá»§a báº¡n sáº½ Ä‘Æ°á»£c xá»­ lÃ½ trong vÃ i giÃ¢y."},transactionCanceled:{header:"ÄÃ£ há»§y giao dá»‹ch",text:"KhÃ´ng cÃ³ thay Ä‘á»•i nÃ o vá»›i tÃ i khoáº£n cá»§a báº¡n."}},walletModal:{mobileConnectionModal:{showQR:"Hiá»ƒn thá»‹ mÃ£ QR",scanQR:"QuÃ©t mÃ£ QR bÃªn dÆ°á»›i báº±ng mÃ¡y áº£nh Ä‘iá»‡n thoáº¡i hoáº·c {{ name }} cá»§a báº¡n",continueIn:"Tiáº¿p tá»¥c giao dá»‹ch trÃªn VÃ­ Web3 OKX",connectionDeclined:"Káº¿t ná»‘i khÃ´ng thÃ nh cÃ´ng",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"VÃ­ Web3 OKX hiá»‡n cÃ³ trÃªn cáº£ á»¨ng dá»¥ng OKX vÃ  Telegram"},connectApp:"Káº¿t ná»‘i á»¨ng dá»¥ng OKX",connectMini:"Káº¿t ná»‘i VÃ­ Web3 OKX Mini"}},actionModal:{confirmTransaction:{header:"XÃ¡c nháº­n giao dá»‹ch trong {{ name }}",text:"NÃ³ chá»‰ máº¥t chÃºt thá»i gian."}}},Cm={common:{openWallet:"æ‰“é–‹éŒ¢åŒ…",get:"ç²å–",close:"é—œé–‰",retry:"é‡è©¦"},button:{connectWallet:"é€£æŽ¥éŒ¢åŒ…",dropdown:{copy:"è¤‡è£½åœ°å€",copied:"åœ°å€å·²è¤‡è£½",disconnect:"æ–·é–‹é€£æŽ¥"}},notifications:{confirm:{header:"æ‰“é–‹ {{ name }} ä»¥ç¢ºèªäº¤æ˜“"},transactionSent:{header:"äº¤æ˜“å·²ç™¼é€",text:"äº¤æ˜“å³å°‡å®Œæˆï¼Œè«‹ç¨å€™"},transactionCanceled:{header:"äº¤æ˜“å·²å–æ¶ˆ",text:"è³¬æˆ¶æœªç™¼ç”Ÿä»»ä½•æ›´æ”¹"}},walletModal:{mobileConnectionModal:{OKXConnect:"OKX Connect",showQR:"å±•ç¤ºäºŒç¶­ç¢¼",scanQR:"ä½¿ç”¨æ‰‹æ©Ÿæˆ– OKX éŒ¢åŒ…çš„ç›¸æ©ŸæŽƒæä¸‹æ–¹äºŒç¶­ç¢¼",continueIn:"åœ¨ OKX éŒ¢åŒ…ä¸­ç¹¼çºŒå®Œæˆ",connectionDeclined:"é€£æŽ¥å¤±æ•—",PoweredBy:"Powered by",appAndTelegram:{header:"é€£æŽ¥ OKX éŒ¢åŒ…",text:" OKX éŒ¢åŒ…å¯åœ¨ OKX App å’Œ Telegram ä½¿ç”¨"},connectApp:"é€£æŽ¥ OKX App",connectMini:"é€£æŽ¥ OKX Mini Wallet"}},actionModal:{confirmTransaction:{header:"åœ¨ {{ name }} ä¸­ç¢ºèªäº¤æ˜“",text:"è«‹ç¨å€™"}}},_m={en_US:Om({common:{openWallet:"Open wallet",get:"Get",close:"Close",retry:"Retry"},button:{connectWallet:"Connect wallet",dropdown:{copy:"Copy address",copied:"Address copied",disconnect:"Disconnect"}},notifications:{confirm:{header:"Open {{ name }} toÂ confirm."},transactionSent:{header:"Sent",text:"This actionÂ will beÂ completed inÂ aÂ few seconds."},transactionCanceled:{header:"Canceled",text:"Thereâ€™ll be no changes to your account."},transactionError:{header:"Error",text:"Thereâ€™ll be no changes to your account."}},walletModal:{mobileConnectionModal:{OKXConnect:"OKX Connect",showQR:"Show QR Code",scanQR:"Scan theÂ QR code below with your phoneâ€™sÂ orÂ {{ name }}â€™s camera",continueIn:"Proceed in OKX Wallet",connectionDeclined:"Connection failed",PoweredBy:"Powered by",appAndTelegram:{header:"Connect to OKX Wallet",text:"OKX Wallet is available on OKX App and Telegram"},connectApp:"OKX App",connectMini:"OKX Mini Wallet",connectInjected:"OKX Wallet extension",connectInjectedOpening:"Opening OKX Wallet...",connectInjectedConfirm:"Confirm in OKX Wallet extension"}},actionModal:{confirmTransaction:{header:"Confirm inÂ {{ name }}",text:"Itâ€™ll only take a moment."},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled"}}),ru_RU:Om(rm),zh_CN:Om(om),zh:Om(om),ar_AE:Om(im),cs_CZ:Om(sm),de_DE:Om(am),es_ES:Om(cm),es_LAT:Om(lm),fr_FR:Om(um),id_ID:Om(dm),it_IT:Om(hm),nl_NL:Om(fm),pl_PL:Om(pm),pt_BR:Om(gm),pt_PT:Om(vm),ro_RO:Om(mm),tr_TR:Om(ym),uk_UA:Om(bm),vi_VN:Om(wm),zh_TW:Om(Cm)};function Om(e){const t=n=>{Object.entries(n).forEach((([r,o])=>{if("object"==typeof o&&o)return t(o);if("string"==typeof o){if("$"===o[0]){const t=o.slice(1).split(".");let i=e;t.forEach((e=>{if(!(e in i))throw new Error(`Cannot parse translations: there is no property ${e} in translation`);i=i[e]})),n[r]=i}"\\$"===o.slice(0,2)&&(n[r]=o.slice(1))}}))};return t(e),e}const Em=Hh.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 8px;
`,Sm=Hh(Eg)`
    margin-top: 16px;
`,Rm=Hh(mg)`
    font-weight: 400;
    font-size: 16px;
    line-height: 20px;
    text-align: center;
    max-width: 250px;
    margin-top: 10px;
    color: ${e=>e.theme.colors.text.contrast};
`;Hh(pp)`
    min-width: 112px;
    margin-top: 32px;
`,Hh(Kp)`
    height: 16px;
    width: 16px;
`;const Tm=Hh.div`
    margin-top: 24px;
  background-color: ${e=>e.theme.colors.text.primary};
  height: 48px;
  width: 262px;
  justify-content: center;
  border-radius: 24px;
  display: flex;
  align-items: center;
  gap: 8px;
`,Nm=e=>{const t=fp(e),n=Id(Xg);_d(!0);const[r,o]=_d(!1),i=Bh(),{action:s}=Id(km);Ed((()=>{o(!!s&&"sent"in s&&s.sent)}));const a=()=>{Va.logDebug("ActionModal ====> onOpenWallet "),null==n||n.openWallet()};return Gd(Em,th(t,{get children(){return[Sd((()=>e.icon)),Gd(Sm,{get translationKey(){return e.headerTranslationKey},get translationValues(){return e.headerTranslationValues},get children(){return e.headDefaultString}}),Gd(Rm,{get translationKey(){return e.textTranslationKey},get translationValues(){return e.textTranslationValues}}),Gd(ih,{get when(){return null==n?void 0:n.showActionButton()},get children(){return[Gd(ih,{get when(){return"close"===e.showButton},get children(){return Gd(Tm,{onClick:()=>e.onClose(),get children(){return Gd(mg,{fontWeight:700,fontSize:"16px",get color(){return i.colors.background.primary},get children(){return Gd(Rv,{translationKey:"common.close",children:"Close"})}})}})}}),Gd(ih,{get when(){return"open-wallet"===e.showButton},get children(){return Gd(Tm,{onClick:a,get children(){return Gd(mg,{fontWeight:700,fontSize:"16px",get color(){return i.colors.background.primary},get children(){return Gd(Rv,{translationKey:"common.openWallet",children:"Open wallet"})}})}})}})]}})]}}))},Am=e=>{const t=Id(Xg),[n]=gg();return Gd(Nm,{headerTranslationKey:"actionModal.confirmTransaction.header",get headerTranslationValues(){return{name:t.walletName?t.walletName:n("common.yourWallet",{},"Your wallet")}},textTranslationKey:"actionModal.confirmTransaction.text",get icon(){return Gd(iv,{})},onClose:()=>e.onClose(),get showButton(){return ff()?"open-wallet":void 0},"data-tc-confirm-modal":"true"})},Pm=e=>Gd(Nm,{headerTranslationKey:"actionModal.transactionCanceled.header",textTranslationKey:"actionModal.transactionCanceled.text",get icon(){return Gd(xp,{size:"m"})},onClose:()=>e.onClose(),get showButton(){return ff()?"close":void 0},"data-tc-transaction-canceled-modal":"true"}),xm=e=>Gd(Nm,{headerTranslationKey:"actionModal.transactionSent.header",textTranslationKey:"actionModal.transactionSent.text",get icon(){return Gd(Tp,{size:"m"})},onClose:()=>e.onClose(),get showButton(){return ff()?"close":void 0},"data-tc-transaction-sent-modal":"true"}),Im=e=>Gd(Nm,{headerTranslationKey:"actionModal.transactionError.header",textTranslationKey:"actionModal.transactionCanceled.text",headDefaultString:"Error",get icon(){return Gd(xp,{size:"m"})},onClose:()=>e.onClose(),get showButton(){return ff()?"close":void 0},"data-tc-transaction-error-modal":"true"}),km=xd({action:null}),Dm=e=>(Ed((()=>{console.log("ActionsModal",e.action)})),Gd(km.Provider,{get value(){return{action:e.action}},get children(){return Gd(ng,{get opened(){var t;return null!==e.action&&!0===(null==(t=e.action)?void 0:t.openModal)},onClose:()=>e.setAction(null),"data-tc-actions-modal-container":"true",get children(){return Gd(sh,{get children(){return[Gd(ah,{get when(){return"transaction-sent"===e.action.name},get children(){return Gd(xm,{onClose:()=>e.setAction(null)})}}),Gd(ah,{get when(){return"transaction-canceled"===e.action.name},get children(){return Gd(Pm,{onClose:()=>e.setAction(null)})}}),Gd(ah,{get when(){return"confirm-transaction"===e.action.name},get children(){return Gd(Am,{onClose:()=>e.setAction(null)})}}),Gd(ah,{get when(){return"transaction-error"===e.action.name},get children(){return Gd(Im,{onClose:()=>e.setAction(null)})}})]}})}})}})),Km={constant:{black:"#000000",white:"#FFFFFF"},connectButton:{background:"#0098EA",foreground:"#FFFFFF"},accent:"#0098EA",telegramButton:"#0098EA",qrFill:"#000000",icon:{primary:"#0F0F0F",secondary:"#7A8999",tertiary:"#C1CAD2",success:"#29CC6A",error:"#F5A73B"},background:{primary:"#FFFFFF",secondary:"#F1F3F5",segment:"#FFFFFF",tint:"#F1F3F5",qr:"#FFFFFF"},text:{primary:"#000000",secondary:"#6A7785",contrast:"#909090"},border:{primary:"#00000014",secondary:"#00000024"},disable:"#B3B3B3"},Mm={constant:{black:"#000000",white:"#FFFFFF"},connectButton:{background:"#0098EA",foreground:"#FFFFFF"},accent:"#E5E5EA",telegramButton:"#31A6F5",qrFill:"#FFFFFF",icon:{primary:"#E5E5EA",secondary:"#909099",tertiary:"#434347",success:"#29CC6A",error:"#F5A73B"},background:{primary:"#121214",secondary:"#18181A",segment:"#262629",tint:"#222224",qr:"#121214"},text:{primary:"#FFFFFF",secondary:"#7D7D85",contrast:"#909090"},border:{primary:"#FFFFFF1F",secondary:"#FFFFFF30"},disable:"#5B5B5B"};
/*!
     * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
     *
     * Copyright (c) 2014-2017, Jon Schlinkert.
     * Released under the MIT License.
     */
function Lm(e){return"[object Object]"===Object.prototype.toString.call(e)}function Um(e){var t,n;return!1!==Lm(e)&&(void 0===(t=e.constructor)||!1!==Lm(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}function jm(e,t){if(!e)return t;return Zc(t,e,{arrayMerge:(e,t,n)=>t,isMergeableObject:Um})}Pf({theme:id.LIGHT,colors:Km,borderRadius:"m"}),id.LIGHT,id.DARK,id.LIGHT,id.DARK;const Wm=["en_US","ru_RU","zh_CN","zh","ar_AE","cs_CZ","de_DE","es_ES","es_LAT","fr_FR","id_ID","it_IT","nl_NL","pl_PL","pt_BR","pt_PT","ro_RO","tr_TR","uk_UA","vi_VN","zh_TW"];const[Bm,Xm]=_d({status:"closed",closeReason:null});Sd((()=>"opened"===Bm().status));const[Hm,Fm]=_d({status:"closed",closeReason:null}),qm=Sd((()=>"opened"===Hm().status)),Jm=Sd((()=>{const e=Hm();return"opened"===e.status?e.walletInfo:null}));let zm="undefined"!=typeof window?new np:void 0;const[Vm,$m]=_d((null==zm?void 0:zm.getLastSelectedWalletInfo())||null),Gm=e=>{zm||(zm=new np),e?(Zh(`modals-state.ts: setLastSelectedWalletInfo ${JSON.stringify(e)}`),zm.setLastSelectedWalletInfo(e)):(Zh("modals-state.ts: setLastSelectedWalletInfo    removeLastSelectedWalletInfo"),zm.removeLastSelectedWalletInfo()),$m(e)},[Qm,Ym]=_d(null),Zm=()=>{const e=Id(Xg),t=Id(Jg),[n,r]=_d(null),[o,i]=_d(!1),[s,a]=_d(!1),c=t=>{e.closeModal(t)};return null==t||t.on("okx_engine_connect_params",(e=>{Va.logDebug(`UniversalSigneWalletModal  okx_engine_connect_params  ${JSON.stringify(e)}`),r(e)})),null==t||t.on("session_connecting",(()=>{Va.logDebug("UniversalSigneWalletModal  session_connecting  }"),a(!0)})),Ed((()=>{qm()||(i(!1),r(null),a(!1))})),Gd(nm,{get opened(){return qm()},get walletInfo(){return Jm()},loadingBeforeConnect:()=>!1,connect:()=>new Promise(((n,o)=>{var s,l;xf.connectRequestParameters&&new sd("connect params is nil");let u=td({},JSON.parse(JSON.stringify(xf.connectRequestParameters)));var d,h;u.sessionConfig={},u.sessionConfig.openUniversalUrl=(d=null==(s=xf.connectRequestParameters)?void 0:s.namespaces,h=null==(l=xf.connectRequestParameters)?void 0:l.optionalNamespaces,!$f()&&!Bf(d,h)&&ff()),i(!1),r(null),a(!1),e.handleConnect((e=>(u.sessionConfig.tmaReturnUrl=null==e?void 0:e.tmaReturnUrl,u.sessionConfig.redirect=null==e?void 0:e.returnStrategy,t.connect(u)))).then((e=>{e?(c("wallet-selected"),n(e)):(i(!0),c("action-cancelled"))})).catch((e=>{i(!0),Va.logDebug("UniversalSingleWalletModal connect  error",JSON.stringify(e)),o(e)}))})),onClose:c,universalLinkParams:n,get lastSelectedWalletInfo(){return Vm()},setLastSelectedWalletInfo:Gm,connectError:o,showRetry:!1,walletConnector:()=>(Ff(),xf.walletConnector.filter((e=>e.enable))),get language(){return xf.language},sessionConnecting:s})},[ey,ty]=Pf({theme:id.LIGHT,colors:Km,borderRadius:"m"}),ny={[id.LIGHT]:Km,[id.DARK]:Mm};function ry(e){ty({theme:e,colors:ny[e]})}id.LIGHT,id.DARK;const oy=e=>{const t=fg(_m,xf.language);return document.body.getElementsByTagName(qh)||customElements.define(qh,class extends HTMLElement{}),document.body.hasAttribute("ontouchstart")||document.body.setAttribute("ontouchstart",""),Gd(pg.Provider,{value:t,get children(){return Gd(Xg.Provider,{get value(){return e.connectUI},get children(){return Gd(Jg.Provider,{get value(){return xf.connector},get children(){return[Gd(Vh,{}),Gd(Wh,{theme:ey,get children(){return Gd(Ah,{component:qh,style:{position:"relative","z-index":3001},get children(){return[Gd(Zm,{}),Gd(Dm,{get action(){return Qm()},setAction:Ym})]}})}})]}})}})}})},iy=e=>{Va.logDebug(`universalWidgetController : openSingleWalletModal : ${JSON.stringify(e)}`),setTimeout((()=>Fm({status:"opened",closeReason:null,walletInfo:e})))},sy=e=>{setTimeout((()=>Fm({status:"closed",closeReason:e})))},ay=e=>{setTimeout((()=>Ym(e)))},cy=(e,t)=>function(e,t,n,r={}){let o;return Cd((r=>{o=r,t===document?e():Ch(t,e(),t.firstChild?null:void 0,n)}),r.owner),()=>{o(),t.textContent=""}}((()=>Gd(oy,{connectUI:t})),document.getElementById(e));class ly{constructor(){rd(this,"listeners",[])}listen(e){this.listeners.push(e)}trigger(e){this.listeners.forEach((t=>t(e)))}}class uy{constructor(e){rd(this,"consumers",[]),rd(this,"getWalltsInfo"),rd(this,"connectSignal",new ly),rd(this,"state",Hm()),this.getWalltsInfo=e.getWalltsInfo,Ed((()=>{const e=Hm();this.state=e,this.consumers.forEach((t=>t(e)))}))}open(e,t){return od(this,null,(function*(){Va.logDebug(`UniversalSingleWalletModalManager : open : ${JSON.stringify(t)}`);const n=this.getWalltsInfo().find((t=>Kf(t,e)));if(n)return this.openSingleWalletModal(n,t);throw new sd(`Trying to open modal window with unknown wallet "${e}".`)}))}close(e="action-cancelled"){sy(e)}onStateChange(e){return this.consumers.push(e),()=>{this.consumers=this.consumers.filter((t=>t!==e))}}handleConnect(e,t){return od(this,null,(function*(){return new Promise(((n,r)=>{try{e(t).then((e=>{n(e),Va.logDebug("UniversalSingleWalletModalManager  result >>>",JSON.stringify(e)),this.connectSignal.trigger(e)})).catch((e=>{r(e),Va.logDebug("UniversalSingleWalletModalManager  error >>>",JSON.stringify(e)),this.connectSignal.trigger(e)}))}catch(Ye){r(Ye),Va.logDebug("UniversalSingleWalletModalManager  catch error >>>",JSON.stringify(Ye)),this.connectSignal.trigger(Ye)}}))}))}openSingleWalletModal(e,t){return od(this,null,(function*(){var n;if(Va.logDebug(`UniversalSingleWalletModalManager : openSingleWalletModal : ${JSON.stringify(t)}`),rf()&&of(),If({connectRequestParameters:t}),Ff(),!xf.walletConnector.some((e=>e.enable)))throw new Va.OKXConnectError(Va.OKX_CONNECT_ERROR_CODES.CHAIN_NOT_SUPPORTED);const r=new Promise(((e,t)=>{this.connectSignal.listen((n=>{n instanceof Error?t(n):e(n)}))}));if(1!=xf.walletConnector.length||(null==(n=xf.walletConnector[0])?void 0:n.getTag())!==Va.OKX_INJECT_WALLET)return iy(e),r;{let e=xf.walletConnector[0];t.sessionConfig={};const n=xf.connector;if(n)return null==n||n.once("okx_engine_connect_params",(t=>{e.openWallet(t)})),null==n?void 0:n.connect(t)}}))}}var dy=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var o=e.charAt(r),i=o.charCodeAt(0);if(255!==t[i])throw new TypeError(o+" is ambiguous");t[i]=r}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,o=0;e[n]===a;)r++,n++;for(var i=(e.length-n)*c+1>>>0,l=new Uint8Array(i);e[n];){var u=t[e.charCodeAt(n)];if(255===u)return;for(var d=0,h=i-1;(0!==u||d<o)&&-1!==h;h--,d++)u+=s*l[h]>>>0,l[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");o=d,n++}for(var f=i-o;f!==i&&0===l[f];)f++;for(var p=new Uint8Array(r+(i-f)),g=r;f!==i;)p[g++]=l[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,o=0,i=t.length;o!==i&&0===t[o];)o++,n++;for(var c=(i-o)*l+1>>>0,u=new Uint8Array(c);o!==i;){for(var d=t[o],h=0,f=c-1;(0!==d||h<r)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");r=h,o++}for(var p=c-r;p!==c&&0===u[p];)p++;for(var g=a.repeat(n);p<c;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+s+" character")}}};var hy,fy=dy("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),py={};hy=py,Object.defineProperty(hy,"__esModule",{value:!0}),hy.OKXInjectWalletName=hy.OKXMiniWalletName=hy.OKXWalletName=void 0,hy.creatOKXWalletInfo=function(){return{appName:"okxAppWallet",name:hy.OKXWalletName,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png"}},hy.creatOKXMiniAppWalletInfo=function(){return{appName:"okxMiniApp",name:hy.OKXMiniWalletName,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png"}},hy.creatOKXInjectWalletInfo=function(){return{appName:"okxInjectWallet",name:hy.OKXInjectWalletName,imageUrl:""}},hy.OKXWalletName="OKX Wallet",hy.OKXMiniWalletName="OKX Mini Wallet",hy.OKXInjectWalletName="OKX Inject Wallet";const gy=class{constructor(e,t){rd(this,"singleWalletModal"),rd(this,"actionsConfiguration"),rd(this,"systemThemeChangeUnsubscribe",null),rd(this,"universalProvider"),Va.logDebug("OKXUniversalConnectUI constructor options:",JSON.stringify(e)),this.singleWalletModal=new uy({getWalltsInfo:()=>gy.getWallets()});const n=this.normalizeWidgetRoot(void 0);this.universalProvider=t,this.uiOptions=jm(e,{uiPreferences:{theme:"SYSTEM"},dappMetaData:e.dappMetaData}),If({connector:t,walletConnector:e.connector,dappMetaData:e.dappMetaData}),cy(n,this)}static getWallets(){return[Va.creatOKXWalletInfo(),Va.creatOKXMiniAppWalletInfo(),py.creatOKXInjectWalletInfo()]}set uiOptions(e){var t,n,r,o;Va.logDebug("OKXUniversalConnectUI uiOptions() called"),this.actionsConfiguration=e.actionsConfiguration,(null==(t=e.uiPreferences)?void 0:t.theme)&&("SYSTEM"!==(null==(n=e.uiPreferences)?void 0:n.theme)?(null==(r=this.systemThemeChangeUnsubscribe)||r.call(this),ry(e.uiPreferences.theme)):(ry(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?id.LIGHT:id.DARK),this.systemThemeChangeUnsubscribe||(this.systemThemeChangeUnsubscribe=function(e){const t=t=>e(t.matches?id.DARK:id.LIGHT);return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",t)}(ry)))),e.language&&(o=e.language.toString(),!Wm.includes(o))&&(e.language="en_US"),If((t=>{var n;return jm(td(td({},e.language&&{language:e.language}),!!(null==(n=e.actionsConfiguration)?void 0:n.returnStrategy)&&{returnStrategy:e.actionsConfiguration.returnStrategy}),_f(t))}))}request(e,t,n){return od(this,null,(function*(){var r,o,i,s,a;if(Va.logDebug("OKXUniversalConnectUI request() called"),!this.session)throw new sd("Connect wallet to send a transaction.");const c={returnStrategy:lf("mobile")&&"qrcode"!==(null==(r=Vm())?void 0:r.openMethod)?null==n?void 0:n.returnStrategy:"none",modals:null==n?void 0:n.modals,tmaReturnUrl:null!=(o=null==n?void 0:n.tmaReturnUrl)?o:"back"},{modals:l,returnStrategy:u,tmaReturnUrl:d}=this.getModalsAndNotificationsConfiguration(c),h=nd(td({},e),{redirect:u}),f=this.universalProvider.showRequestModal(h,t);var p;Vf(this.getConnectWallet())||ay({name:"confirm-transaction",openModal:l.includes("before")&&f,sent:!1}),(null==(i=this.session.sessionConfig)?void 0:i.openUniversalUrl)||!f||(p=this.getConnectWallet(),"qrcode"===(null==(s=Vm())?void 0:s.openMethod)||Vf(p))||zf(this.getConnectWallet(),d,this.session.namespaces),this.session.sessionConfig&&(this.session.sessionConfig.openUniversalUrl=this.session.sessionConfig.openUniversalUrl&&ff()&&"qrcode"!==(null==(a=Vm())?void 0:a.openMethod));try{const e=yield this.universalProvider.request(h,t);return ay({name:"transaction-sent",openModal:l.includes("success")&&f}),e}catch(AT){throw Va.logDebug(`OKXUniversalConnectUI  request  ==>  ${typeof AT} ==> is core OKXConnectError: ${AT instanceof Va.OKXConnectError} ==> is universal-provider OKXConnectError: ${AT instanceof zu.OKXConnectError} ==>  ${JSON.stringify(AT)}`),AT instanceof Va.OKXConnectError||AT instanceof zu.OKXConnectError?(Va.logDebug(`OKXUniversalConnectUI  request  ==> ${JSON.stringify(AT)}`),AT.code===Va.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR?ay({name:"transaction-canceled",openModal:l.includes("error")&&f}):ay({name:"transaction-error",openModal:l.includes("error")&&f}),AT):(ay({name:"transaction-error",openModal:l.includes("error")&&f}),new sd("Unhandled error:"+AT))}}))}getModalsAndNotificationsConfiguration(e){var t,n,r;const o=["before","success","error"];let i=["before"];(null==(t=this.actionsConfiguration)?void 0:t.modals)&&(i="all"===this.actionsConfiguration.modals?o:this.actionsConfiguration.modals),(null==e?void 0:e.modals)&&(i="all"===e.modals?o:e.modals);const s=(null==e?void 0:e.returnStrategy)||(null==(n=this.actionsConfiguration)?void 0:n.returnStrategy)||"back";return{modals:i,tmaReturnUrl:(null==e?void 0:e.tmaReturnUrl)||(null==(r=this.actionsConfiguration)?void 0:r.tmaReturnUrl)||"back",returnStrategy:s}}static init(e){return od(this,null,(function*(){if(Va.logDebug("OKXUniversalConnectUI init() called"),window&&window.okxConnectUniversalUIinwindow instanceof gy)return Va.logDebug("OKXUniversalConnectUI init() old called"),window.okxConnectUniversalUIinwindow;if(this.initPromise)return Va.logDebug("OKXUniversalConnectUI init() is waiting for ongoing initialization"),this.initPromise;this.initPromise=(()=>od(this,null,(function*(){if(!e||!e.dappMetaData)throw new sd("You have to specify a `dappMetaData` in the options.");Va.logDebug("OKXUniversalConnectUI init() new called"),e.connector&&0!==e.connector.length||(e.connector=Qf());const t=yield zu.OKXUniversalProvider.init({dappMetaData:e.dappMetaData,connector:e.connector}),n=new gy(e,t);return window&&(window.okxConnectUniversalUIinwindow=n),n})))();try{return yield this.initPromise}finally{this.initPromise=null}}))}normalizeWidgetRoot(e){if(!e||!document.getElementById(e)){e="universal-widget-root";const t=document.createElement("div");t.id=e,document.body.appendChild(t)}return e}getWallets(){return gy.getWallets()}handleConnect(e){return od(this,null,(function*(){return this.singleWalletModal.handleConnect(e,this.actionsConfiguration)}))}checkConnectMethods(e,t){return od(this,null,(function*(){if(Va.logDebug("checkConnectMethods connectParams>>>>",JSON.stringify(e)),Va.logDebug("checkConnectMethods responseItems>>>>",JSON.stringify(t)),this.universalProvider.session&&e&&e.length>0&&(!t||0===t.length)){var n=e[0];if(n){if("sync_all_addresses"===n.method)return;let e=[];try{let t=yield zu.connectMethodsAdaptOldVersion(n,this.universalProvider.session);Va.logDebug("checkConnectMethods callBackParams111>>>>",JSON.stringify(t));let r={};rf()&&(r.returnStrategy="tg://resolve"),Va.logDebug("checkConnectMethods requestItem>>>>",JSON.stringify(n)),Va.logDebug("checkConnectMethods callBackParams222>>>>",JSON.stringify(t)),this.request(n,n.chainId,r).then((r=>{let o=r;if(Va.logDebug(`checkConnectMethods then resultItem ====> ${JSON.stringify(o)}`),"wallet_addEthereumChain"===n.method)o={method:n.method,chainId:n.chainId,result:""};else if("personal_sign"===n.method)o={method:n.method,chainId:n.chainId,result:o};else if("btc_signMessage"===n.method)o.chainId=n.chainId;else if("solana_signMessage"===n.method){let e=o.result;o.chainId=n.chainId,o.result=nd(td({},t),{signature:fy.decode(e)})}else if("sui_signMessage"===n.method||"sui_signPersonalMessage"===n.method){const e=o.result;o.chainId=n.chainId,o.result=nd(td({},t),{signature:e})}else if("aptos_signMessage"===n.method){let e=o.result;e.startsWith("0x")&&(e=e.slice(2,e.length)),o.chainId=n.chainId,o.result=nd(td({},t),{signature:e})}else"cosmos_signArbitrary"===n.method&&"string"==typeof o.result&&(o.chainId=n.chainId,o.result=JSON.parse(o.result));e.push(o),Va.logDebug(`OKXUniversalConnectUI checkConnectMethods success result ====> ${JSON.stringify(e)}`),this.universalProvider.events.emit("connect_signResponse",e)})).catch((t=>{let r=zu.creatNotSupportMethodItemReplay(n);e.push(r),Va.logDebug(`OKXUniversalConnectUI checkConnectMethods error ====> ${JSON.stringify(t)}`),this.universalProvider.events.emit("connect_signResponse",e)}))}catch(r){let t=zu.creatNotSupportMethodItemReplay(n);e.push(t),Va.logDebug(`OKXUniversalConnectUI checkConnectMethods error ====> ${JSON.stringify(r)}`),this.universalProvider.events.emit("connect_signResponse",e)}}else console.log("checkConnectMethods requestItem is nil",JSON.stringify(e))}}))}openModalAndSign(e,t){return od(this,null,(function*(){Va.logDebug("OKXUniversalConnectUI openModalAndSign() called");const n=nd(td({},e),{signRequest:t});return Va.logDebug("OKXUniversalConnectUI openModalAndSign() opts:",JSON.stringify(e)),Va.logDebug("OKXUniversalConnectUI openModalAndSign() signRequest:",JSON.stringify(t)),yield this.openModal(n)}))}openModal(e){return od(this,null,(function*(){Va.logDebug("OKXUniversalConnectUI openModal() called");try{if(this.connected())return this.session;var t=yield this.singleWalletModal.open("okxAppWallet",e);return this.checkConnectMethods(e.signRequest,null==t?void 0:t.signResponse),t}catch(Ye){throw Ye}}))}closeModal(e){this.singleWalletModal.close(e)}openWallet(e,t){this.universalProvider.openWallet(e,t)}onSingleWalletModalStateChange(e){return console.log("ui - onSingleWalletModalStateChange",e),this.singleWalletModal.onStateChange(e)}onModalStateChange(e){return console.log("ui - onModalStateChange",e),this.onSingleWalletModalStateChange(e)}showActionButton(){return Jf(this.getConnectWallet())&&ff()}getUniversalProvider(){return this.universalProvider}getConnectWallet(){var e,t;return Va.logDebug(`this.session?.wallet?.appName ${null==(t=null==(e=this.universalProvider.session)?void 0:e.wallet)?void 0:t.appName}`),this.getWallets().find((e=>{var t,n;return Kf(e,null==(n=null==(t=this.universalProvider.session)?void 0:t.wallet)?void 0:n.appName)}))}get session(){return this.universalProvider.session}setDefaultChain(e,t){this.universalProvider.setDefaultChain(e,t)}on(e,t){this.universalProvider.on(e,t)}once(e,t){this.universalProvider.once(e,t)}removeListener(e,t){this.universalProvider.removeListener(e,t)}off(e,t){this.universalProvider.off(e,t)}get walletName(){var e,t;return Va.logDebug(`this.getConnectWallet()?.walletName ${null==(e=this.getConnectWallet())?void 0:e.name}`),null==(t=this.getConnectWallet())?void 0:t.name}disconnect(){return this.universalProvider.disconnect()}connected(){return this.universalProvider.connected()}requestAccountsWithNamespace(e){return this.universalProvider.requestAccountsWithNamespace(e)}requestDefaultChainWithNamespace(e){return this.universalProvider.requestDefaultChainWithNamespace(e)}};let vy=gy;var my;rd(vy,"initPromise",null),function(e){e.invalidRequest="-32600",e.methodNotFound="-32601",e.invalidParams="-32602",e.internal="-32603",e.parse="-32700"}(my||(my={}));var yy={"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."}},by=-32001,wy=function(e){function n(t,r,o){var i=this,s=Number.parseInt(t);if(isNaN(s))throw new Error('"code" must be an integer.');var a=null!=r?r:yy[my.invalidRequest].message;return(i=e.call(this,a)||this).code=s,o&&(i.data=o),Object.setPrototypeOf(i,n.prototype),i}return t(n,e),n}(Error),Cy=function(e){function n(t,n){return e.call(this,my.internal,t,n)||this}return t(n,e),n}(wy);function _y(e){return e instanceof Hc.OKXConnectError&&300===e.code&&e.message.includes("user rejects error")?{code:by,message:"User canceled"}:"string"==typeof e?{code:Number.parseInt(my.internal),message:e}:e instanceof wy||e instanceof l?{code:e.code,message:e.message,data:e.data}:{code:Number.parseInt(my.internal),message:yy[my.internal].message}}function Oy(){var e=globalThis.klaytn;if(!e)throw new Cy("Extension is not installed");return e}function Ey(e){return/Line/.test(e)}function Sy(e){return/iPad|iPhone|iPod/.test(e)}var Ry="walletType",Ty="selectedWalletAddress",Ny="deviceId",Ay=function(){function e(e){this.chainId=e}return e.prototype.clear=function(){this.removeItem(Ry),this.removeItem(Ty)},e.prototype.setWalletType=function(e){this.setItem(Ry,e)},e.prototype.getWalletType=function(){return this.getItem(Ry)},e.prototype.setSelectedWallet=function(e){this.setItem(Ty,e)},e.prototype.getConnectedWallet=function(){return this.getItem(Ty)},e.prototype.getDeviceId=function(){return this.getItem(Ny)},e.prototype.setDeviceId=function(e){this.setItem(Ny,e)},e.prototype.getKeyWithPrefix=function(e){return"".concat("sdk.dappportal.io",":").concat(this.chainId,":").concat(e)},e.prototype.setItem=function(e,t){localStorage.setItem(this.getKeyWithPrefix(e),t)},e.prototype.getItem=function(e){return localStorage.getItem(this.getKeyWithPrefix(e))},e.prototype.removeItem=function(e){localStorage.removeItem(this.getKeyWithPrefix(e))},e}();function Py(e){return e.replace(/^klay_/,"kaia_")}var xy=function(){function e(e,t){this.eventBus=e,this.config=t,this.setExtensionEventProxy()}return e.prototype.request=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s;return i(this,(function(i){switch(i.label){case 0:return t=e.method,n=e.params,r="kaia_signLegacy"===(a=t)?"klay_sign":a.replace(/^kaia_/,"klay_"),o=n?this.appendTxTypeParam(r,n):n,s=o?this.convertToLegacyParam(r,o):o,[4,this.requestWithConverter({method:r,params:s})];case 1:return[2,i.sent()]}var a}))}))},e.prototype.switchChain=function(e){return o(this,void 0,void 0,(function(){var e,t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return e=Oy(),t=e.networkVersion.toString().toLowerCase(),n=this.config.chainId.toString().toLowerCase(),t===n?[2]:(r="0x".concat(parseInt(n,10).toString(16)),o=this.awaitNetworkChange(e,n),[4,e.request({method:"wallet_switchKlaytnChain",params:[{chainId:r}]})]);case 1:return i.sent(),[4,o];case 2:return i.sent(),[2]}}))}))},e.prototype.awaitNetworkChange=function(e,t){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(n){return[2,new Promise((function(n,r){var o=function(i){"loading"!==i&&(i.toString().toLowerCase()===t.toString().toLowerCase()&&(e.eventBus.removeListener("chainChanged",o),n(null)),e.eventBus.removeListener("chainChanged",o),r("Invalid chain id"))};e.eventBus.on("chainChanged",o)}))]}))}))},e.prototype.requestWithConverter=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Oy().request(e)];case 1:return t=n.sent(),[2,(r=e.method,o=t,"klay_signTransaction"!==r?o:function(e){var t=e;return{raw:t.rawTransaction}}(o))];case 2:throw function(e){if(!function(e){return"object"==typeof e&&null!==e&&"number"==typeof e.code&&"string"==typeof e.message}(e))return e;var t=e.code,n=e.message;return-32603===t&&n.includes("User denied")?new l({code:by,message:n}):-32603===t&&n.includes('Invalid "from" address')?new l({code:-32004,message:n}):new l({code:e.code,message:e.message})}(n.sent());case 3:return[2]}var r,o}))}))},e.prototype.setExtensionEventProxy=function(){var e=this,t=Oy();t.removeAllListeners(),t.on("accountsChanged",(function(t){e.eventBus.emit("accountsChanged",t)})),t.on("networkChanged",(function(t){e.eventBus.emit("chainChanged",t)})),t.on("disconnected",(function(){e.eventBus.emit("disconnect")}))},e.prototype.appendTxTypeParam=function(e,t){var n=this;return-1===this.config.methodsShouldAttachTxTypeParamsWhenRequestToExtension.indexOf(e)?t:Array.isArray(t)&&t.every((function(e){return"object"==typeof e}))?t.map((function(e){return n.appendTxTypeToObj(e)})):t},e.prototype.convertToLegacyParam=function(e,t){var n=this;return-1===this.config.methodsShouldConvertInputFieldToDataFieldWhenRequestToExtension.indexOf(e)?t:Array.isArray(t)&&t.every((function(e){return"object"==typeof e}))?t.map((function(e){return n.convertInputFieldToDataField(e)})):t},e.prototype.appendTxTypeToObj=function(e){var t=e;return"typeInt"in t?n(n({},t),{type:t.typeInt}):e},e.prototype.convertInputFieldToDataField=function(e){var t,o=e;if("typeInt"in o&&(t=o.typeInt),!t)return e;if(-1===this.config.txTypesShouldConvertInputFieldToDataFieldWhenRequestToExtension.indexOf(t))return e;if(!("input"in o))return e;o.input;var i=r(o,["input"]);return n(n({},i),{data:o.input})},e}(),Iy=function(){function e(e){this.chainRpcUrl=e.chainNodeRpcEndpoint}return e.prototype.requestRpc=function(e){return o(this,void 0,void 0,(function(){var t,r,o,s;return i(this,(function(i){switch(i.label){case 0:return t=n({id:0,jsonrpc:"2.0"},e),[4,fetch(this.chainRpcUrl,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})];case 1:return[4,i.sent().json()];case 2:if(r=i.sent(),o=r.result,s=r.error)throw console.error("Error in RPC request",s),s;return[2,o]}}))}))},e}();function ky(){var e=document.getElementById("iframeDiv");null==e||e.remove()}var Dy,Ky=function(){function e(e){this.resolveWalletType=function(){},this.rejectWalletType=function(){},this.walletSelectUIUrl=e.sdkUIUrls.miniDappConnectWeb}return e.prototype.setupListeners=function(){var e=this,t=function(t){var n=e.iframe;if(n&&t.source===n.contentWindow){var r=t.data;if(r&&"object"==typeof r){var o=r.event;if(o)switch(o){case"Loaded":break;case"WalletTypeSelected":var i=r.walletType;e.onWalletTypeSelected(i);break;case"Canceled":e.cancel()}}}};window.addEventListener("message",t),this.eventListener=t},e.prototype.clearListeners=function(){var e=this.eventListener;e&&(window.removeEventListener("message",e),this.eventListener=void 0)},e.prototype.onWalletTypeSelected=function(e){this.resolveWalletType&&this.resolveWalletType(e)},e.prototype.reset=function(){this.resolveWalletType=void 0,this.rejectWalletType=void 0,ky(),this.clearListeners()},e.prototype.selectType=function(){return o(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){switch(r.label){case 0:return e=new Promise((function(e,t){n.resolveWalletType=e,n.rejectWalletType=t})),this.setupListeners(),this.iframe=function(e,t,n){var r=document.createElement("div");r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="rgba(0, 0, 0, 0.35)",r.style.zIndex="9999999",r.id="iframeDiv";var o=document.createElement("iframe");o.src=e,o.width=t,o.height=n,o.style.border="none",o.style.zIndex="99999999";var i=r.appendChild(o);return document.body.appendChild(r),i}(this.walletSelectUIUrl,"100%","100%"),[4,e];case 1:return t=r.sent(),this.reset(),[2,t]}}))}))},e.prototype.cancel=function(){this.rejectWalletType&&this.rejectWalletType(new l({code:by,message:"User canceled"})),this.reset()},e}();!function(e){e.Web="Web",e.Liff="Liff",e.Extension="Extension",e.Mobile="Mobile",e.OKX="OKX"}(Dy||(Dy={}));var My=d(pt()),Ly=function(){function e(e,t){this.communicator=t,this.sdkLocalStorage=new Ay(e.chainId)}return e.prototype.request=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return t=this.sdkLocalStorage.getConnectedWallet(),n=e.method,t?[3,4]:"kaia_requestAccounts"!==n&&"klay_requestAccounts"!==n&&"eth_requestAccounts"!==n?[3,2]:[4,this.communicator.postRequestAndWaitForResponse({method:Py(e.method),params:e.params})];case 1:return r=i.sent(),(o=r[0])&&this.sdkLocalStorage.setSelectedWallet(o),[2,r];case 2:if("kaia_accounts"===n||"klay_accounts"===n||"eth_accounts"===n)return[2,[]];i.label=3;case 3:throw new l({code:-32006,data:null,message:"Wallet is not connected"});case 4:return"kaia_requestAccounts"===n||"klay_requestAccounts"===n||"eth_requestAccounts"===n||"kaia_accounts"===n||"klay_accounts"===n||"eth_accounts"===n?[2,[t]]:[4,this.communicator.postRequestAndWaitForResponse({method:Py(e.method),params:e.params})];case 5:return[2,i.sent()]}}))}))},e.prototype.switchChain=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e}();function Uy(e,t){return function(){return e.apply(t,arguments)}}const{toString:jy}=Object.prototype,{getPrototypeOf:Wy}=Object,By=(Xy=Object.create(null),e=>{const t=jy.call(e);return Xy[t]||(Xy[t]=t.slice(8,-1).toLowerCase())});var Xy;const Hy=e=>(e=e.toLowerCase(),t=>By(t)===e),Fy=e=>t=>typeof t===e,{isArray:qy}=Array,Jy=Fy("undefined");const zy=Hy("ArrayBuffer");const Vy=Fy("string"),$y=Fy("function"),Gy=Fy("number"),Qy=e=>null!==e&&"object"==typeof e,Yy=e=>{if("object"!==By(e))return!1;const t=Wy(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},Zy=Hy("Date"),eb=Hy("File"),tb=Hy("Blob"),nb=Hy("FileList"),rb=Hy("URLSearchParams"),[ob,ib,sb,ab]=["ReadableStream","Request","Response","Headers"].map(Hy);function cb(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),qy(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(r=0;r<i;r++)s=o[r],t.call(null,e[s],s,e)}}function lb(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const ub="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,db=e=>!Jy(e)&&e!==ub;const hb=(fb="undefined"!=typeof Uint8Array&&Wy(Uint8Array),e=>fb&&e instanceof fb);var fb;const pb=Hy("HTMLFormElement"),gb=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),vb=Hy("RegExp"),mb=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};cb(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},yb="abcdefghijklmnopqrstuvwxyz",bb="0123456789",wb={DIGIT:bb,ALPHA:yb,ALPHA_DIGIT:yb+yb.toUpperCase()+bb};const Cb=Hy("AsyncFunction"),_b=(Ob="function"==typeof setImmediate,Eb=$y(ub.postMessage),Ob?setImmediate:Eb?(Sb=`axios@${Math.random()}`,Rb=[],ub.addEventListener("message",(({source:e,data:t})=>{e===ub&&t===Sb&&Rb.length&&Rb.shift()()}),!1),e=>{Rb.push(e),ub.postMessage(Sb,"*")}):e=>setTimeout(e));var Ob,Eb,Sb,Rb;const Tb="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ub):"undefined"!=typeof process&&process.nextTick||_b;var Nb={isArray:qy,isArrayBuffer:zy,isBuffer:function(e){return null!==e&&!Jy(e)&&null!==e.constructor&&!Jy(e.constructor)&&$y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||$y(e.append)&&("formdata"===(t=By(e))||"object"===t&&$y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&zy(e.buffer),t},isString:Vy,isNumber:Gy,isBoolean:e=>!0===e||!1===e,isObject:Qy,isPlainObject:Yy,isReadableStream:ob,isRequest:ib,isResponse:sb,isHeaders:ab,isUndefined:Jy,isDate:Zy,isFile:eb,isBlob:tb,isRegExp:vb,isFunction:$y,isStream:e=>Qy(e)&&$y(e.pipe),isURLSearchParams:rb,isTypedArray:hb,isFileList:nb,forEach:cb,merge:function e(){const{caseless:t}=db(this)&&this||{},n={},r=(r,o)=>{const i=t&&lb(n,o)||o;Yy(n[i])&&Yy(r)?n[i]=e(n[i],r):Yy(r)?n[i]=e({},r):qy(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&cb(arguments[o],r);return n},extend:(e,t,n,{allOwnKeys:r}={})=>(cb(t,((t,r)=>{n&&$y(t)?e[r]=Uy(t,n):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Wy(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:By,kindOfTest:Hy,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(qy(e))return e;let t=e.length;if(!Gy(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:pb,hasOwnProperty:gb,hasOwnProp:gb,reduceDescriptors:mb,freezeMethods:e=>{mb(e,((t,n)=>{if($y(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];$y(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return qy(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:lb,global:ub,isContextDefined:db,ALPHABET:wb,generateString:(e=16,t=wb.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&$y(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Qy(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=qy(e)?[]:{};return cb(e,((e,t)=>{const i=n(e,r+1);!Jy(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:Cb,isThenable:e=>e&&(Qy(e)||$y(e))&&$y(e.then)&&$y(e.catch),setImmediate:_b,asap:Tb};function Ab(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Nb.inherits(Ab,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Nb.toJSONObject(this.config),code:this.code,status:this.status}}});const Pb=Ab.prototype,xb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{xb[e]={value:e}})),Object.defineProperties(Ab,xb),Object.defineProperty(Pb,"isAxiosError",{value:!0}),Ab.from=(e,t,n,r,o,i)=>{const s=Object.create(Pb);return Nb.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ab.call(s,e.message,t,n,r,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};function Ib(e){return Nb.isPlainObject(e)||Nb.isArray(e)}function kb(e){return Nb.endsWith(e,"[]")?e.slice(0,-2):e}function Db(e,t,n){return e?e.concat(t).map((function(e,t){return e=kb(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Kb=Nb.toFlatObject(Nb,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Mb(e,t,n){if(!Nb.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Nb.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Nb.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Nb.isSpecCompliantForm(t);if(!Nb.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Nb.isDate(e))return e.toISOString();if(!a&&Nb.isBlob(e))throw new Ab("Blob is not supported. Use a Buffer instead.");return Nb.isArrayBuffer(e)||Nb.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let a=e;if(e&&!o&&"object"==typeof e)if(Nb.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Nb.isArray(e)&&function(e){return Nb.isArray(e)&&!e.some(Ib)}(e)||(Nb.isFileList(e)||Nb.endsWith(n,"[]"))&&(a=Nb.toArray(e)))return n=kb(n),a.forEach((function(e,r){!Nb.isUndefined(e)&&null!==e&&t.append(!0===s?Db([n],r,i):null===s?n:n+"[]",c(e))})),!1;return!!Ib(e)||(t.append(Db(o,n,i),c(e)),!1)}const u=[],d=Object.assign(Kb,{defaultVisitor:l,convertValue:c,isVisitable:Ib});if(!Nb.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Nb.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Nb.forEach(n,(function(n,i){!0===(!(Nb.isUndefined(n)||null===n)&&o.call(t,n,Nb.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function Lb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Ub(e,t){this._pairs=[],e&&Mb(e,this,t)}const jb=Ub.prototype;function Wb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Bb(e,t,n){if(!t)return e;const r=n&&n.encode||Wb;Nb.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):Nb.isURLSearchParams(t)?t.toString():new Ub(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}jb.append=function(e,t){this._pairs.push([e,t])},jb.toString=function(e){const t=e?function(t){return e.call(this,t,Lb)}:Lb;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class Xb{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Nb.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}var Hb={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fb={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ub,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const qb="undefined"!=typeof window&&"undefined"!=typeof document,Jb="object"==typeof navigator&&navigator||void 0,zb=qb&&(!Jb||["ReactNative","NativeScript","NS"].indexOf(Jb.product)<0),Vb="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,$b=qb&&window.location.href||"http://localhost";var Gb={...Object.freeze({__proto__:null,hasBrowserEnv:qb,hasStandardBrowserEnv:zb,hasStandardBrowserWebWorkerEnv:Vb,navigator:Jb,origin:$b}),...Fb};function Qb(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;if(i=!i&&Nb.isArray(r)?r.length:i,a)return Nb.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!s;r[i]&&Nb.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&Nb.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!s}if(Nb.isFormData(e)&&Nb.isFunction(e.entries)){const n={};return Nb.forEachEntry(e,((e,r)=>{t(function(e){return Nb.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const Yb={transitional:Hb,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=Nb.isObject(e);o&&Nb.isHTMLForm(e)&&(e=new FormData(e));if(Nb.isFormData(e))return r?JSON.stringify(Qb(e)):e;if(Nb.isArrayBuffer(e)||Nb.isBuffer(e)||Nb.isStream(e)||Nb.isFile(e)||Nb.isBlob(e)||Nb.isReadableStream(e))return e;if(Nb.isArrayBufferView(e))return e.buffer;if(Nb.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Mb(e,new Gb.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Gb.isNode&&Nb.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Nb.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Mb(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t){if(Nb.isString(e))try{return(t||JSON.parse)(e),Nb.trim(e)}catch(AO){if("SyntaxError"!==AO.name)throw AO}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Yb.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Nb.isResponse(e)||Nb.isReadableStream(e))return e;if(e&&Nb.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(AO){if(n){if("SyntaxError"===AO.name)throw Ab.from(AO,Ab.ERR_BAD_RESPONSE,this,null,this.response);throw AO}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Gb.classes.FormData,Blob:Gb.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Nb.forEach(["delete","get","head","post","put","patch"],(e=>{Yb.headers[e]={}}));const Zb=Nb.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ew=Symbol("internals");function tw(e){return e&&String(e).trim().toLowerCase()}function nw(e){return!1===e||null==e?e:Nb.isArray(e)?e.map(nw):String(e)}function rw(e,t,n,r,o){return Nb.isFunction(r)?r.call(this,t,n):(o&&(t=n),Nb.isString(t)?Nb.isString(r)?-1!==t.indexOf(r):Nb.isRegExp(r)?r.test(t):void 0:void 0)}class ow{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=tw(t);if(!o)throw new Error("header name must be a non-empty string");const i=Nb.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=nw(e))}const i=(e,t)=>Nb.forEach(e,((e,n)=>o(e,n,t)));if(Nb.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Nb.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Zb[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Nb.isHeaders(e))for(const[s,a]of e.entries())o(a,s,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=tw(e)){const n=Nb.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Nb.isFunction(t))return t.call(this,e,n);if(Nb.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=tw(e)){const n=Nb.findKey(this,e);return!(!n||void 0===this[n]||t&&!rw(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=tw(e)){const o=Nb.findKey(n,e);!o||t&&!rw(0,n[o],o,t)||(delete n[o],r=!0)}}return Nb.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!rw(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return Nb.forEach(this,((r,o)=>{const i=Nb.findKey(n,o);if(i)return t[i]=nw(r),void delete t[o];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();s!==o&&delete t[o],t[s]=nw(r),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Nb.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Nb.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[ew]=this[ew]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=tw(e);t[r]||(!function(e,t){const n=Nb.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return Nb.isArray(e)?e.forEach(r):r(e),this}}function iw(e,t){const n=this||Yb,r=t||n,o=ow.from(r.headers);let i=r.data;return Nb.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function sw(e){return!(!e||!e.__CANCEL__)}function aw(e,t,n){Ab.call(this,null==e?"canceled":e,Ab.ERR_CANCELED,t,n),this.name="CanceledError"}function cw(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Ab("Request failed with status code "+n.status,[Ab.ERR_BAD_REQUEST,Ab.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}ow.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Nb.reduceDescriptors(ow.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),Nb.freezeMethods(ow),Nb.inherits(aw,Ab,{__CANCEL__:!0});const lw=(e,t,n=3)=>{let r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[s];o||(o=c),n[i]=a,r[i]=c;let u=s,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const s=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-o;a>=i?s(e,t):(n=e,r||(r=setTimeout((()=>{r=null,s(n)}),i-a)))},()=>n&&s(n)]}((n=>{const i=n.loaded,s=n.lengthComputable?n.total:void 0,a=i-r,c=o(a);r=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},uw=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},dw=e=>(...t)=>Nb.asap((()=>e(...t)));var hw=Gb.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Gb.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Gb.origin),Gb.navigator&&/(msie|trident)/i.test(Gb.navigator.userAgent)):()=>!0,fw=Gb.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const s=[e+"="+encodeURIComponent(t)];Nb.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Nb.isString(r)&&s.push("path="+r),Nb.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function pw(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const gw=e=>e instanceof ow?{...e}:e;function vw(e,t){t=t||{};const n={};function r(e,t,n,r){return Nb.isPlainObject(e)&&Nb.isPlainObject(t)?Nb.merge.call({caseless:r},e,t):Nb.isPlainObject(t)?Nb.merge({},t):Nb.isArray(t)?t.slice():t}function o(e,t,n,o){return Nb.isUndefined(t)?Nb.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!Nb.isUndefined(t))return r(void 0,t)}function s(e,t){return Nb.isUndefined(t)?Nb.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,n)=>o(gw(e),gw(t),0,!0)};return Nb.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,s=i(e[r],t[r],r);Nb.isUndefined(s)&&i!==a||(n[r]=s)})),n}var mw=e=>{const t=vw({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=ow.from(a),t.url=Bb(pw(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Nb.isFormData(r))if(Gb.hasStandardBrowserEnv||Gb.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Gb.hasStandardBrowserEnv&&(o&&Nb.isFunction(o)&&(o=o(t)),o||!1!==o&&hw(t.url))){const e=i&&s&&fw.read(s);e&&a.set(i,e)}return t};var yw="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=mw(e);let o=r.data;const i=ow.from(r.headers).normalize();let s,a,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let g=new XMLHttpRequest;function v(){if(!g)return;const r=ow.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());cw((function(e){t(e),p()}),(function(e){n(e),p()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=v:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(v)},g.onabort=function(){g&&(n(new Ab("Request aborted",Ab.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new Ab("Network Error",Ab.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||Hb;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Ab(t,o.clarifyTimeoutError?Ab.ETIMEDOUT:Ab.ECONNABORTED,e,g)),g=null},void 0===o&&i.setContentType(null),"setRequestHeader"in g&&Nb.forEach(i.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),Nb.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),d&&"json"!==d&&(g.responseType=r.responseType),f&&([c,u]=lw(f,!0),g.addEventListener("progress",c)),h&&g.upload&&([a,l]=lw(h),g.upload.addEventListener("progress",a),g.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=t=>{g&&(n(!t||t.type?new aw(null,e,g):t),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);m&&-1===Gb.protocols.indexOf(m)?n(new Ab("Unsupported protocol "+m+":",Ab.ERR_BAD_REQUEST,e)):g.send(o||null)}))};const bw=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Ab?t:new aw(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Ab(`timeout ${t} of ms exceeded`,Ab.ETIMEDOUT))}),t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:a}=r;return a.unsubscribe=()=>Nb.asap(s),a}},ww=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},Cw=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},_w=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of Cw(e))yield*ww(n,t)}(e,t);let i,s=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},Ow="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Ew=Ow&&"function"==typeof ReadableStream,Sw=Ow&&("function"==typeof TextEncoder?(Rw=new TextEncoder,e=>Rw.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Rw;const Tw=(e,...t)=>{try{return!!e(...t)}catch(AO){return!1}},Nw=Ew&&Tw((()=>{let e=!1;const t=new Request(Gb.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Aw=Ew&&Tw((()=>Nb.isReadableStream(new Response("").body))),Pw={stream:Aw&&(e=>e.body)};var xw;Ow&&(xw=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Pw[e]&&(Pw[e]=Nb.isFunction(xw[e])?t=>t[e]():(t,n)=>{throw new Ab(`Response type '${e}' is not supported`,Ab.ERR_NOT_SUPPORT,n)})})));const Iw=async(e,t)=>{const n=Nb.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Nb.isBlob(e))return e.size;if(Nb.isSpecCompliantForm(e)){const t=new Request(Gb.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Nb.isArrayBufferView(e)||Nb.isArrayBuffer(e)?e.byteLength:(Nb.isURLSearchParams(e)&&(e+=""),Nb.isString(e)?(await Sw(e)).byteLength:void 0)})(t):n};var kw=Ow&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=mw(e);l=l?(l+"").toLowerCase():"text";let f,p=bw([o,i&&i.toAbortSignal()],s);const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let v;try{if(c&&Nw&&"get"!==n&&"head"!==n&&0!==(v=await Iw(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Nb.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=uw(v,lw(dw(c)));r=_w(n.body,65536,e,t)}}Nb.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(f);const s=Aw&&("stream"===l||"response"===l);if(Aw&&(a||s&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=Nb.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&uw(t,lw(dw(a),!0))||[];i=new Response(_w(i.body,65536,n,(()=>{r&&r(),g&&g()})),e)}l=l||"text";let m=await Pw[Nb.findKey(Pw,l)||"text"](i,e);return!s&&g&&g(),await new Promise(((t,n)=>{cw(t,n,{data:m,headers:ow.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})}))}catch(m){if(g&&g(),m&&"TypeError"===m.name&&/fetch/i.test(m.message))throw Object.assign(new Ab("Network Error",Ab.ERR_NETWORK,e,f),{cause:m.cause||m});throw Ab.from(m,m&&m.code,e,f)}});const Dw={http:null,xhr:yw,fetch:kw};Nb.forEach(Dw,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(AO){}Object.defineProperty(e,"adapterName",{value:t})}}));const Kw=e=>`- ${e}`,Mw=e=>Nb.isFunction(e)||null===e||!1===e;var Lw=e=>{e=Nb.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Mw(n)&&(r=Dw[(t=String(n)).toLowerCase()],void 0===r))throw new Ab(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new Ab("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Kw).join("\n"):" "+Kw(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Uw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new aw(null,e)}function jw(e){Uw(e),e.headers=ow.from(e.headers),e.data=iw.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Lw(e.adapter||Yb.adapter)(e).then((function(t){return Uw(e),t.data=iw.call(e,e.transformResponse,t),t.headers=ow.from(t.headers),t}),(function(t){return sw(t)||(Uw(e),t&&t.response&&(t.response.data=iw.call(e,e.transformResponse,t.response),t.response.headers=ow.from(t.response.headers))),Promise.reject(t)}))}const Ww="1.7.9",Bw={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Bw[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Xw={};Bw.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new Ab(r(o," has been removed"+(t?" in "+t:"")),Ab.ERR_DEPRECATED);return t&&!Xw[o]&&(Xw[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},Bw.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};var Hw={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Ab("options must be an object",Ab.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],s=t[i];if(s){const t=e[i],n=void 0===t||s(t,i,e);if(!0!==n)throw new Ab("option "+i+" must be "+n,Ab.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Ab("Unknown option "+i,Ab.ERR_BAD_OPTION)}},validators:Bw};const Fw=Hw.validators;class qw{constructor(e){this.defaults=e,this.interceptors={request:new Xb,response:new Xb}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(AO){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=vw(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Hw.assertOptions(n,{silentJSONParsing:Fw.transitional(Fw.boolean),forcedJSONParsing:Fw.transitional(Fw.boolean),clarifyTimeoutError:Fw.transitional(Fw.boolean)},!1),null!=r&&(Nb.isFunction(r)?t.paramsSerializer={serialize:r}:Hw.assertOptions(r,{encode:Fw.function,serialize:Fw.function},!0)),Hw.assertOptions(t,{baseUrl:Fw.spelling("baseURL"),withXsrfToken:Fw.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&Nb.merge(o.common,o[t.method]);o&&Nb.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=ow.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[jw.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(Ye){t.call(this,Ye);break}}try{l=jw.call(this,h)}catch(Ye){return Promise.reject(Ye)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return Bb(pw((e=vw(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Nb.forEach(["delete","get","head","options"],(function(e){qw.prototype[e]=function(t,n){return this.request(vw(n||{},{method:e,url:t,data:(n||{}).data}))}})),Nb.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(vw(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}qw.prototype[e]=t(),qw.prototype[e+"Form"]=t(!0)}));class Jw{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new aw(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Jw((function(t){e=t}));return{token:t,cancel:e}}}const zw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zw).forEach((([e,t])=>{zw[t]=e}));const Vw=function e(t){const n=new qw(t),r=Uy(qw.prototype.request,n);return Nb.extend(r,qw.prototype,n,{allOwnKeys:!0}),Nb.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(vw(t,n))},r}(Yb);Vw.Axios=qw,Vw.CanceledError=aw,Vw.CancelToken=Jw,Vw.isCancel=sw,Vw.VERSION=Ww,Vw.toFormData=Mb,Vw.AxiosError=Ab,Vw.Cancel=Vw.CanceledError,Vw.all=function(e){return Promise.all(e)},Vw.spread=function(e){return function(t){return e.apply(null,t)}},Vw.isAxiosError=function(e){return Nb.isObject(e)&&!0===e.isAxiosError},Vw.mergeConfig=vw,Vw.AxiosHeaders=ow,Vw.formToJSON=e=>Qb(Nb.isHTMLForm(e)?new FormData(e):e),Vw.getAdapter=Lw,Vw.HttpStatusCode=zw,Vw.default=Vw;var $w=function(e){function n(t){var r=e.call(this,t)||this;return r.name="LongPollingTimeoutException",Object.setPrototypeOf(r,n.prototype),r}return t(n,e),n}(Error),Gw=function(e){var t=this;this.request=function(e,n){return o(t,void 0,void 0,(function(){var t,r;return i(this,(function(o){switch(o.label){case 0:t="".concat(this.baseUrl,"/api/v1/request-session/request/").concat(n),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Vw.post(t,e,{headers:{"x-client-id":this.clientId,"Content-Type":"application/json"},timeout:this.relaySessionTimeout})];case 2:return o.sent(),[3,4];case 3:throw r=o.sent(),console.error("Fail to request - ",r),r;case 4:return[2]}}))}))},this.waitForResponse=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=1,r.label=1;case 1:if(!(t<this.maxRetryCount))return[3,6];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.fetchWithTimeout(e)];case 3:return[2,r.sent()];case 4:if((n=r.sent())instanceof l)throw n;return t++,[3,5];case 5:return[3,1];case 6:throw new Error("Fail to wait for response")}}))}))},this.fetchWithTimeout=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:t="".concat(this.baseUrl,"/api/v1/request-session/response/").concat(e,"/wait"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Vw.get(t,{headers:{"x-client-id":this.clientId,"Content-Type":"application/json"},timeout:this.relaySessionTimeout})];case 2:return[2,i.sent().data];case 3:throw n=i.sent(),Vw.isAxiosError(n)&&408===n.status?new $w:Vw.isAxiosError(n)&&403===n.status&&2011===(null===(o=null===(r=n.response)||void 0===r?void 0:r.data)||void 0===o?void 0:o.code)?new l({code:by,data:null,message:"User closed popup"}):(console.error("Unexpected Error - ",n),n);case 4:return[2]}}))}))},this.clientId=e.clientId,this.baseUrl=e.relayServerConfig.baseUrl,this.relaySessionTimeout=e.relayServerConfig.relaySessionTimeout,this.maxRetryCount=e.relayServerConfig.maxRetryCount};const Qw=[];for(let xT=0;xT<256;++xT)Qw.push((xT+256).toString(16).slice(1));let Yw;const Zw=new Uint8Array(16);var eC={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function tC(e,t,n){if(eC.randomUUID&&!e)return eC.randomUUID();const r=(e=e||{}).random??e.rng?.()??function(){if(!Yw){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yw=crypto.getRandomValues.bind(crypto)}return Yw(Zw)}();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(Qw[e[t+0]]+Qw[e[t+1]]+Qw[e[t+2]]+Qw[e[t+3]]+"-"+Qw[e[t+4]]+Qw[e[t+5]]+"-"+Qw[e[t+6]]+Qw[e[t+7]]+"-"+Qw[e[t+8]]+Qw[e[t+9]]+"-"+Qw[e[t+10]]+Qw[e[t+11]]+Qw[e[t+12]]+Qw[e[t+13]]+Qw[e[t+14]]+Qw[e[t+15]]).toLowerCase()}(r)}var nC=function(){function e(e){this.config=e,this.relayRequestClient=new Gw(e)}return e.prototype.handleRpcResponse=function(e){if(function(e){return void 0!==e.error}(e))throw new l(e.error);return e.result},e.prototype.createRequestKey=function(){return tC()},e}(),rC="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},oC="URLSearchParams"in rC,iC="Symbol"in rC&&"iterator"in Symbol,sC="FileReader"in rC&&"Blob"in rC&&function(){try{return new Blob,!0}catch(AO){return!1}}(),aC="FormData"in rC,cC="ArrayBuffer"in rC;if(cC)var lC=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],uC=ArrayBuffer.isView||function(e){return e&&lC.indexOf(Object.prototype.toString.call(e))>-1};function dC(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function hC(e){return"string"!=typeof e&&(e=String(e)),e}function fC(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return iC&&(t[Symbol.iterator]=function(){return t}),t}function pC(e){this.map={},e instanceof pC?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function gC(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function vC(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function mC(e){var t=new FileReader,n=vC(t);return t.readAsArrayBuffer(e),n}function yC(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function bC(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:sC&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:aC&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:oC&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():cC&&sC&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=yC(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):cC&&(ArrayBuffer.prototype.isPrototypeOf(e)||uC(e))?this._bodyArrayBuffer=yC(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):oC&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},sC&&(this.blob=function(){var e=gC(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=gC(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(sC)return this.blob().then(mC);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,o,i=gC(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=vC(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),o=r?r[1]:"utf-8",t.readAsText(e,o),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},aC&&(this.formData=function(){return this.text().then(_C)}),this.json=function(){return this.text().then(JSON.parse)},this}pC.prototype.append=function(e,t){e=dC(e),t=hC(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},pC.prototype.delete=function(e){delete this.map[dC(e)]},pC.prototype.get=function(e){return e=dC(e),this.has(e)?this.map[e]:null},pC.prototype.has=function(e){return this.map.hasOwnProperty(dC(e))},pC.prototype.set=function(e,t){this.map[dC(e)]=hC(t)},pC.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},pC.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),fC(e)},pC.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),fC(e)},pC.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),fC(e)},iC&&(pC.prototype[Symbol.iterator]=pC.prototype.entries);var wC=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function CC(e,t){if(!(this instanceof CC))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof CC){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new pC(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new pC(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),wC.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in rC)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _C(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function OC(e,t){if(!(this instanceof OC))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new pC(t.headers),this.url=t.url||"",this._initBody(e)}CC.prototype.clone=function(){return new CC(this,{body:this._bodyInit})},bC.call(CC.prototype),bC.call(OC.prototype),OC.prototype.clone=function(){return new OC(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new pC(this.headers),url:this.url})},OC.error=function(){var e=new OC(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var EC=[301,302,303,307,308];OC.redirect=function(e,t){if(-1===EC.indexOf(t))throw new RangeError("Invalid status code");return new OC(null,{status:t,headers:{location:e}})};var SC,RC=rC.DOMException;try{new RC}catch(PT){RC=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},RC.prototype=Object.create(Error.prototype),RC.prototype.constructor=RC}function TC(e,t){return new Promise((function(n,r){var o=new CC(e,t);if(o.signal&&o.signal.aborted)return r(new RC("Aborted","AbortError"));var i=new XMLHttpRequest;function s(){i.abort()}if(i.onload=function(){var e,t,r={statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new pC,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{t.append(r,o)}catch(Ye){console.warn("Response "+Ye.message)}}})),t)};0===o.url.indexOf("file://")&&(i.status<200||i.status>599)?r.status=200:r.status=i.status,r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var s="response"in i?i.response:i.responseText;setTimeout((function(){n(new OC(s,r))}),0)},i.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request timed out"))}),0)},i.onabort=function(){setTimeout((function(){r(new RC("Aborted","AbortError"))}),0)},i.open(o.method,function(e){try{return""===e&&rC.location.href?rC.location.href:e}catch(AO){return e}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(sC?i.responseType="blob":cC&&(i.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof pC||rC.Headers&&t.headers instanceof rC.Headers)){var a=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){a.push(dC(e)),i.setRequestHeader(e,hC(t.headers[e]))})),o.headers.forEach((function(e,t){-1===a.indexOf(t)&&i.setRequestHeader(t,e)}))}else o.headers.forEach((function(e,t){i.setRequestHeader(t,e)}));o.signal&&(o.signal.addEventListener("abort",s),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",s)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}TC.polyfill=!0,rC.fetch||(rC.fetch=TC,rC.Headers=pC,rC.Request=CC,rC.Response=OC),function(e){e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR"}(SC||(SC={}));var NC,AC=function(){function e(e){void 0===e&&(e=SC.INFO),this.logLevel=e,this._debug=console.debug,this._info=console.info,this._warn=console.warn,this._error=console.error}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=SC.DEBUG&&(e.unshift("[DEBUG]"),this._debug.apply(this,c([],a(e),!1)))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=SC.INFO&&(e.unshift("[INFO]"),this._info.apply(this,c([],a(e),!1)))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=SC.WARN&&(e.unshift("[WARN]"),this._warn.apply(this,c([],a(e),!1)))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<=SC.ERROR&&(e.unshift("[ERROR]"),this._error.apply(this,c([],a(e),!1)))},e}(),PC=new AC(Number("3")),xC=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks,this.internalHooks=this._driver.internalHooks},IC=function(e,t){this._driver=e,this.liff=t,this.hooks=this._driver.hooks},kC=function(){function e(e,t){this.pluginCtx=new IC(e,t),this.moduleCtx=new xC(e,t)}return Object.defineProperty(e.prototype,"pluginContext",{get:function(){return this.pluginCtx},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moduleContext",{get:function(){return this.moduleCtx},enumerable:!1,configurable:!0}),e}(),DC=function(){function e(){this.modules=new Map,this.hooks={},this.internalHooks={}}return e.prototype.addModule=function(e,t){this.modules.set(e,t),t.hooks&&(this.hooks[e]=Object.entries(t.hooks).reduce((function(e,t){var r,o=a(t,2),i=o[0],s=o[1];return n(n({},e),((r={})[i]=s.on.bind(s),r))}),{})),"internalHooks"in t&&t.internalHooks&&(this.internalHooks[e]=Object.entries(t.internalHooks).reduce((function(e,t){var r,o=a(t,2),i=o[0],s=o[1];return n(n({},e),((r={})[i]=s.on.bind(s),r))}),{}))},e.prototype.hasModule=function(e){return this.modules.has(e)},e}(),KC=function(){},MC=function(e){return e instanceof KC},LC=function(e){function n(t,n,r){var o=e.call(this)||this;return o.driver=t,o.contextHolder=n,o.option=r,o}return t(n,e),n.prototype.install=function(){return this.factory(this.driver,this.contextHolder)},Object.defineProperty(n.prototype,"name",{get:function(){return"use"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"defaultOption",{get:function(){return{namespacePrefix:"$"}},enumerable:!1,configurable:!0}),n.prototype.factory=function(e,t){var n=Object.assign({},this.defaultOption,this.option).namespacePrefix;return function(r,o){if(!r||"function"!=typeof r.install||"string"!=typeof r.name)return PC.warn("To install the plugin, you need to define the `name` property and the `install` method."),this;var i=MC(r)?r.name:"".concat(n).concat(r.name);if(e.hasModule(i))return this;var s=MC(r)?r.install.call(r,t.moduleContext,o):r.install.call(r,t.pluginContext,o);return this["".concat(i)]?(PC.warn("There is a duplicate plugin name. `".concat(i,"` plugin namespace will be override.")),this["".concat(i)]=s):void 0!==s&&(this["".concat(i)]=s),e.addModule(i,r),this}},n}(KC),UC=new Promise((function(e){NC=e})),jC="UNKNOWN",WC="UNAUTHORIZED",BC="INVALID_ARGUMENT",XC="INIT_FAILED",HC="FORBIDDEN",FC="INVALID_CONFIG",qC="INVALID_ID_TOKEN",JC="CREATE_SUBWINDOW_FAILED",zC="EXCEPTION_IN_SUBWINDOW",VC="liffEvent",$C="LIFF_STORE",GC="https://liff.".concat("line.me","/"),QC="https://miniapp.".concat("line.me","/"),YC={ACCESS_TOKEN:"accessToken",ID_TOKEN:"IDToken",DECODED_ID_TOKEN:"decodedIDToken",FEATURE_TOKEN:"featureToken",LOGIN_TMP:"loginTmp",CONFIG:"config",CONTEXT:"context",EXPIRES:"expires",RAW_CONTEXT:"rawContext",CLIENT_ID:"clientId",IS_SUBSEQUENT_LIFF_APP:"isSubsequentLiffApp",MST_CHALLENGE:"mstChallenge",MSIT:"msit",MST:"mst",MST_VERIFIER:"mstVerifier",APP_DATA:"appData"},ZC="isInClient",e_=["context_token","feature_token","access_token","id_token","client_id","mst_verifier","mst_challenge","msit"],t_=["liff.ref.source","liff.ref.medium","liff.ref.campaign","liff.ref.term","liff.ref.content"],n_={INIT:"init",SUBMIT:"submit",CANCEL:"cancel",CLOSE:"close",ERROR:"error"},r_="liff.subwindow",o_="healthCheck",i_=["profile","chat_message.write","openid","email"];function s_(e){return window.atob(e.replace(/-/g,"+").replace(/_/g,"/"))}var a_={decode:s_,encode:function(e){return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decodeUnicode:function(e){var t=s_(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("");return decodeURIComponent(t)}};function c_(e,t){if(e===t)return 0;for(var n=e.split("."),r=t.split("."),o=Math.max(n.length,r.length),i=0;i<o;i++){n[i]||(n[i]="0"),r[i]||(r[i]="0");var s=parseInt(n[i])-parseInt(r[i]);if(0!==s)return s>0?1:-1}return 0}function l_(e){var t=e.replace("#","").match(/.{2}/g)||[];if(4!==t.length)return PC.warn("convertArgbToRgba: Received invalid ARGB color"),"";var n=function(e){var t=u_(e);return Math.round(t/255*100)/100}(t[0]),r=u_(t[1]),o=u_(t[2]),i=u_(t[3]);return"rgba(".concat(r,", ").concat(o,", ").concat(i,", ").concat(n,")")}function u_(e){return parseInt(e,16)}function d_(e){var t=e.replace("#","").match(/.{2}/g)||[];if(3!==t.length)return PC.warn("convertArgbToRgba: Received invalid hex color"),"";var n=u_(t[0]),r=u_(t[1]),o=u_(t[2]);return"".concat(n,", ").concat(r,", ").concat(o)}function h_(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}var f_=function(e){var t=new RegExp("(?:(?:^|.*;\\s*)".concat(e,"\\s*\\=\\s*([^;]*).*$)|^.*$"));return document.cookie.replace(t,"$1")},p_=function(e,t,n){var r=e+"="+t;if(n)for(var o in n){var i=n[o]?"=".concat(n[o]):"";r+="; ".concat(o).concat(i)}PC.debug("set cookie",r),document.cookie=r},g_=function(e,t){var n="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 GMT");if(t)for(var r in t)n+="; ".concat(r,"=").concat(t[r]);document.cookie=n},v_=new Set(["400","401","403","404","429","500"]),m_=function(e){function n(t,n,r){var o=e.call(this,n,r)||this;return o.code=t,o}return t(n,e),n}(Error);function y_(e,t,n){return(null==n?void 0:n.cause)&&console.error("This is the cause of LiffError described below.",n.cause),new m_(e,t||"",n||{})}function b_(e){var t=e.match(/([^-]+)-[^-]+/);return t&&t[1]}var w_,C_=function(){function e(){this.map={}}return e.prototype.clear=function(){this.map={}},e.prototype.getItem=function(e){var t=this.map[e];return void 0===t?null:t},e.prototype.setItem=function(e,t){this.map[e]=t},e.prototype.removeItem=function(e){delete this.map[e]},e.prototype.key=function(e){var t=Object.keys(this.map)[e];return void 0===t?null:t},Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.map).length},enumerable:!1,configurable:!0}),e}(),__=function(e){return e.replace(/^\?/,"").replace(/^#\/?/,"").split(/&+/).filter((function(e){return e.length>0})).reduce((function(e,t){var n=a(t.split("=").map(decodeURIComponent),2),r=n[0],o=n[1],i=e[r];return Array.isArray(i)?i.push(o):Object.prototype.hasOwnProperty.call(e,r)?e[r]=[i,o]:e[r]=o,e}),{})},O_=function(e){return Object.keys(e).map((function(t){var n=e[t],r=function(e){return void 0!==e?"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e)):encodeURIComponent(t)};return Array.isArray(n)?n.map((function(e){return r(e)})).join("&"):r(n)})).join("&")},E_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function S_(e){for(var t="",n=0;n<e;n++)t+=E_[Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967296*62)];return t}function R_(e){var t=new URL(e),n=t.hash.slice(1).split("&").filter((function(e){return!e_.some((function(t){return e.startsWith("".concat(t,"="))}))})).join("&");return t.hash=n,t.toString()}function T_(e){var t=new URL(e);return t.toString().replace(new RegExp(String.raw(A_||(A_=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["^",""],["^",""])),t.origin)),"")}function N_(e,t){if(!e)throw new Error("addParamsToUrl: invalid URL");var n=new URL(e);return Object.entries(t).forEach((function(e){var t=a(e,2),r=t[0],o=t[1];n.searchParams.set(r,o)})),n.toString()}var A_,P_=((w_={})[GC]=function(){var e=I_(GC);return new RegExp("^".concat(e,"(\\d+-\\w+)"))},w_[QC]=function(){var e=I_(QC);return new RegExp("^".concat(e,"((\\d+-\\w+)|(\\w+$))"))},w_);function x_(e){for(var t in P_){var n=e.match(P_[t]());if(n)return n[1]}return null}function I_(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function k_(e){return e.startsWith("line:")}function D_(e){return void 0===e&&(e=window.navigator.userAgent),/ipad/.test(e.toLowerCase())}function K_(e){return void 0===e&&(e=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+/.test(e)}function M_(e){return void 0===e&&(e=window.navigator.userAgent),/Line\/\d+\.\d+\.\d+ LIFF/.test(e)}var L_=function(){return"undefined"==typeof window},U_=null;function j_(){return null===U_&&(U_=M_()||K_()&&/[#|&]access_token=/.test(location.hash)||"1"===sessionStorage.getItem("".concat($C,":").concat(ZC)),sessionStorage.setItem("".concat($C,":").concat(ZC),U_?"1":"0")),!!U_}function W_(){var e;return null!==(e=window.__liffConfig)&&void 0!==e?e:{}}function B_(e){return function(e,t){if(!t)throw y_(FC,"liffId is necessary for liff.init()");var n=(j_()?sessionStorage:localStorage).getItem("".concat($C,":").concat(t,":").concat(e));try{return null===n?null:JSON.parse(n)}catch(BR){return null}}(e,W_().liffId)}function X_(e,t){var n=W_().liffId;if(!n)throw y_(FC,"liffId is necessary for liff.init()");(j_()?sessionStorage:localStorage).setItem("".concat($C,":").concat(n,":").concat(e),JSON.stringify(t))}function H_(){return B_(YC.CONTEXT)}function F_(e){X_(YC.CONTEXT,e)}function q_(){return((H_()||{}).d||{}).aId}function J_(){return((H_()||{}).d||{}).autoplay||!1}function z_(){return(H_()||{}).profilePlus}function V_(e){X_(YC.APP_DATA,e)}function $_(){return B_(YC.MST)}function G_(){return B_(YC.MST_CHALLENGE)}function Q_(e){X_(YC.CLIENT_ID,e)}function Y_(){return B_(YC.FEATURE_TOKEN)}function Z_(e){X_(YC.FEATURE_TOKEN,e)}function eO(){return B_(YC.ID_TOKEN)}function tO(e){X_(YC.ID_TOKEN,e)}function nO(){return B_(YC.ACCESS_TOKEN)}function rO(e){X_(YC.ACCESS_TOKEN,e)}function oO(e){var t=W_().liffId;if(!t)throw y_(FC,"liffId is necessary for liff.init()");(j_()?sessionStorage:localStorage).removeItem("".concat($C,":").concat(t,":").concat(e))}function iO(){return B_(YC.LOGIN_TMP)}function sO(){oO(YC.LOGIN_TMP)}function aO(e){var t=W_();p_("".concat($C,":").concat(YC.EXPIRES,":").concat(t.liffId),e.getTime(),{expires:e.toUTCString(),path:"/",secure:null})}function cO(){return B_(YC.DECODED_ID_TOKEN)}function lO(e){X_(YC.DECODED_ID_TOKEN,e)}function uO(){Object.keys(YC).forEach((function(e){oO(YC[e])})),function(){var e=W_();g_("".concat($C,":").concat(YC.EXPIRES,":").concat(e.liffId),{path:"/"})}()}function dO(){return!!nO()}function hO(){return"2.25.1"}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isInClient"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return j_()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getContext"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return H_()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getAId"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return q_()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getIsVideoAutoPlay"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return J_()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getProfilePlus"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return z_()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getIDToken"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return eO()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getAccessToken"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return nO()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getDecodedIDToken"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return cO()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isLoggedIn"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return dO()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getVersion"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return"2.25.1"}}}(KC);var fO,pO=function(){function e(){}return e.prototype.invoke=function(){return function(e){return void 0===e&&(e=window.navigator.userAgent),/LIFF\/SubWindow/.test(e)}()},e}(),gO=function(){function e(e){this.storage=e}return Object.defineProperty(e,"IN_SUB_WINDOW_KEY",{get:function(){return"inSubWindow"},enumerable:!1,configurable:!0}),e.prototype.invoke=function(){return new URLSearchParams(window.location.search).has(r_)&&this.setInSubWindow(!0),!(!this.getInSubWindow()&&!this.getSubWindowIdentifier())},e.prototype.getInSubWindow=function(){var t=this.storage.getItem("".concat($C,":").concat(this.getLiffId(),":").concat(e.IN_SUB_WINDOW_KEY));return null!==t&&JSON.parse(t)},e.prototype.getSubWindowIdentifier=function(){var e,t,n="liff.subwindow.identifier",r=new URLSearchParams(window.location.search);return r.get(n)||(e=n,(t=r.get("liff.state"))?new URLSearchParams(t).get(e):null)||null},e.prototype.setInSubWindow=function(t){this.storage.setItem("".concat($C,":").concat(this.getLiffId(),":").concat(e.IN_SUB_WINDOW_KEY),String(t))},e.prototype.getLiffId=function(){var e=W_().liffId;if(!e)throw y_(FC,"liffId is necessary for liff.init()");return e},e}(),vO=function(e){function n(){var t=e.call(this)||this;return L_()?t.impl={invoke:function(){return!1}}:j_()?t.impl=new pO:t.impl=new gO(window.sessionStorage),t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isSubWindow"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return this.impl.invoke.bind(this.impl)},n}(KC),mO=new vO,yO=mO.install();function bO(){var e=navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);return e?e[0].slice(5):null}function wO(){if(!fO){var e=window.navigator.userAgent.toLowerCase();fO=/iphone|ipad|ipod/.test(e)?"ios":/android/.test(e)?"android":"web"}return fO}function CO(e){var t,n=H_();return null===(t=null==n?void 0:n.availability)||void 0===t?void 0:t[e]}function _O(e,t,n){var r=CO(e),o=n||e;if(!r)return{available:!1,error:{code:HC,message:"".concat(o," is not allowed in this LIFF app")}};var i=r.minVer,s=r.unsupportedFromVer,a=!i||function(e,t){var n=bO();return!!n&&!(t&&c_(n,t)>0)&&c_(n,e)>=0}(i,s),c=j_();return c&&!a?{available:!1,error:{code:HC,message:"".concat(o," is unavailable in this client version.")}}:r.permission?c&&a||t?{available:!0}:{available:!1,error:{code:HC,message:"".concat(o," is not allowed in external browser")}}:{available:!1,error:{code:HC,message:"".concat(o," is not allowed in this LIFF app")}}}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getLineVersion"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return bO()}}}(KC),function(e){function n(){return e.call(this)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getOS"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return wO()}}}(KC);var OO=function(){return dO()?!M_()&&K_()?{available:!1,error:{code:HC,message:"Subwindow is not supported in this browser"}}:yO()?{available:!1,error:{code:HC,message:"this api can be only called in parent window"}}:_O("subwindowOpen",!0):{available:!1,error:{code:WC,message:"Need access_token for api call, Please login first"}}},EO=["subwindowOpen","shareTargetPicker","multipleLiffTransition","scanCode","scanCodeV2","getAdvertisingId","addToHomeScreen","bluetoothLeFunction","skipChannelVerificationScreen","createShortcutOnHomeScreen","internalCreateShortcutOnHomeScreen"],SO={scanCode:function(){return _O("scanCode")},getAdvertisingId:function(){return _O("getAdvertisingId")},bluetoothLeFunction:function(){return _O("bluetoothLeFunction")},shareTargetPicker:function(){return yO()?{available:!1,error:{code:HC,message:"this api can be only called in parent window"}}:dO()?_O("shareTargetPicker",!0):{available:!1,error:{code:WC,message:"Need access_token for api call, Please login first"}}},multipleLiffTransition:function(){var e=CO("multipleLiffTransition");return e&&e.permission?j_()?{available:!0}:{available:!1,error:{code:HC,message:"multipleLiffTransition is available only in the LINE App browser"}}:{available:!1,error:{code:HC,message:"multipleLiffTransition is not allowed in this LIFF app"}}},subwindowOpen:OO,scanCodeV2:function(){if(!dO())return{available:!1,error:{code:WC,message:"Need access_token for api call, Please login first"}};var e=OO();return e.available?_O("scanCodeV2",!0):e},addToHomeScreen:function(){return yO()?{available:!1,error:{code:HC,message:"this api can be only called in parent window"}}:_O("addToHomeScreen")},skipChannelVerificationScreen:function(){var e=H_();return e?"square_chat"===e.type?{available:!1,error:{code:HC,message:"skipChannelVerificationScreen is not allowed in OpenChat"}}:_O("skipChannelVerificationScreen"):{available:!1,error:{code:HC,message:"Context is not found"}}},createShortcutOnHomeScreen:function(){if(yO())return{available:!1,error:{code:HC,message:"this api can be only called in parent window"}};if(!dO())return{available:!1,error:{code:WC,message:"Need access_token for api call, Please login first"}};var e=wO();return"android"!==e&&"ios"!==e?{available:!1,error:{code:HC,message:"this api can be only called in mobile device"}}:_O("addToHomeV2",!0,"createShortcutOnHomeScreen")},internalCreateShortcutOnHomeScreen:function(){if(yO())return{available:!1,error:{code:HC,message:"this api can be only called in parent window"}};if(!dO())return{available:!1,error:{code:WC,message:"Need access_token for api call, Please login first"}};var e=wO();if("android"!==e&&"ios"!==e)return{available:!1,error:{code:HC,message:"this api can be only called in mobile device"}};var t=_O("addToHomeV2",!0,"internalCreateShortcutOnHomeScreen");return t.available?_O("addToHomeLineScheme",!0,"internalCreateShortcutOnHomeScreen"):t}},RO=function(e){return function(){var t=e();if(!t.available)throw y_(t.error.code,t.error.message)}},TO={scanCode:RO(SO.scanCode),getAdvertisingId:RO(SO.getAdvertisingId),bluetoothLeFunction:RO(SO.bluetoothLeFunction),shareTargetPicker:RO(SO.shareTargetPicker),multipleLiffTransition:RO(SO.multipleLiffTransition),subwindowOpen:RO(SO.subwindowOpen),scanCodeV2:RO(SO.scanCodeV2),addToHomeScreen:RO(SO.addToHomeScreen),skipChannelVerificationScreen:RO(SO.skipChannelVerificationScreen),createShortcutOnHomeScreen:RO(SO.createShortcutOnHomeScreen),internalCreateShortcutOnHomeScreen:RO(SO.internalCreateShortcutOnHomeScreen)};function NO(e){if(!function(e){return EO.some((function(t){return t===e}))}(e))throw y_(BC,"Unexpected API name.");var t=SO[e];return!t||t().available}!function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hooks={},t}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"isApiAvailable"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return NO(e)}}}(KC);var AO=function(){function e(){}return e.prototype.invoke=function(e){var t=TO[e];return!!t&&(t(),!0)},e}(),PO=function(){function e(e){this.liff=e}return e.prototype.invoke=function(e){return this.liff.checkFeature(e)},e}(),xO=function(){function e(t){c_("2.25.1",e.SDK_VERSION_SUPPORTING_NEW)>=0?this.impl=new AO:this.impl=new PO(t)}return Object.defineProperty(e,"SDK_VERSION_SUPPORTING_NEW",{get:function(){return"2.11.0"},enumerable:!1,configurable:!0}),e.prototype.invoke=function(e){return this.impl.invoke(e)},e}(),IO=function(e,t){return IO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},IO(e,t)};var kO=!1,DO=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}IO(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return"_legacyExtensionsEnabled"},enumerable:!1,configurable:!0}),t.prototype.install=function(){kO=!0},t}(KC);function KO(){return kO?function(){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(t){i(t)}}function a(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,[])).next())}))}(this,0,void 0,(function(){return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(e){switch(e.label){case 0:return[3,2];case 1:return[2,e.sent().default];case 2:return[2,new Promise((function(e,t){var n=document.createElement("script"),r=function(){var e;return"ios"===wO()?(e=bO())&&c_(e,"9.19.0")<0?"https://static.line-scdn.net/liff/edge/2/ios-918-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/ios-extensions_2_22_0.js":"https://static.line-scdn.net/liff/edge/2/non-ios-extensions_2_22_0.js"}();n.onload=function(){var n=window.liffClientExtension;n?e(n):t(y_(XC,"Unable to load client features. (Extension is empty)"))},n.onerror=function(e){t(y_(XC,"Unable to load client features.",{cause:e}))},n.src=r,n.type="text/javascript",document.body.appendChild(n)}))]}}))}))}():Promise.resolve(void 0)}function MO(){uO()}function LO(e){return o(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:if(!e.ok)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.json()];case 2:return[2,o.sent()];case 3:return o.sent(),[2,e];case 4:return t=String(e.status),n=v_.has(t)?t:jC,[4,e.json().catch((function(){throw y_(n,e.statusText)}))];case 5:throw y_((r=o.sent()).error||n,r.error_description||r.message)}}))}))}function UO(e){var t=function(e){if(e)return e;var t=nO();if(!t)throw y_(WC,"Need access_token for api call, Please login first");return{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}}(e&&e.headers);return n(n({},e),{headers:t})}function jO(e,t){var n;try{n=UO(t)}catch(UR){return Promise.reject(UR)}return fetch(e,n).then(LO)}function WO(e,t){var n;try{n=UO(t)}catch(UR){return Promise.reject(UR)}return fetch(e,n)}function BO(e){var t=e.subdomain,n=void 0===t?"api":t,r=e.pathname;return"https://".concat(n,".").concat("line.me","/").concat(r)}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"logout"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return MO()}}}(KC);var XO={token:BO({pathname:"oauth2/v2.1/token"}),certs:BO({pathname:"oauth2/v2.1/certs"}),"openid-configuration":BO({subdomain:"access",pathname:".well-known/openid-configuration"}),authorize:BO({subdomain:"access",pathname:"liff/v1/authorize"}),profile:BO({pathname:"v2/profile"}),message:BO({pathname:"message/v3/share"}),friendship:BO({pathname:"friendship/v1/status"}),shareTargetPicker:BO({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker"}),shareTargetPickerOtt:BO({pathname:"liff/v2/apps"}),shareTargetPickerResult:BO({subdomain:"access",pathname:"oauth2/v2.1/liff/shareTargetPicker/result"}),apps:BO({pathname:"liff/v2/apps"}),subWindowGetMSIT:BO({pathname:"liff/v2/sub/msit"}),subWindowGetMSTByMSIT:BO({pathname:"liff/v2/sub/mst"}),subWindowSubscribe:BO({subdomain:"liff",pathname:"liff/v2/sub/waitResult"}),subWindowPost:BO({pathname:"liff/v2/sub/result"}),subWindowGetAppData:BO({pathname:"liff/v2/sub/appData"}),subWindowGetOrigin:function(e){return BO({pathname:"liff/v2/sub/".concat(e,"/origin")})},accessTokenVerify:BO({pathname:"oauth2/v2.1/verify"}),unauthorizedPermissions:BO({subdomain:"liff",pathname:"liff/v2/incrementalAgreement/unauthorizedPermissions"}),permanentLink:BO({subdomain:"liff",pathname:"liff/v2/permanentLink"}),createShortcutOnHomeScreen:BO({subdomain:"liff-shortcut",pathname:"api/shortcut"})};function HO(e){return XO[e]}function FO(e){return jO("".concat(HO("accessTokenVerify"),"?access_token=").concat(encodeURIComponent(e)),{headers:{"Content-Type":"application/json",Accept:"application/json"}})}var qO="liff.subwindow.identifier",JO="liff.subwindow.cryptokey",zO=n(n({},n_),{GET_DATA:"getData",SET_DATA:"setData",NOT_FOUND:"notFound",TEARDOWN:"teardown"}),VO="broadcast",$O="command",GO="main",QO="sub",YO=function(e){return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,window.crypto.subtle.importKey("jwk",{kty:"oct",k:e,alg:"A128GCM",ext:!0},{name:"AES-GCM"},!1,["encrypt","decrypt"])];case 1:return[2,n.sent()];case 2:throw t=n.sent(),y_(jC,t);case 3:return[2]}}))}))},ZO=function(e,t,n){return o(void 0,void 0,void 0,(function(){var r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),r=(new TextEncoder).encode(e),[4,YO(t)];case 1:return o=i.sent(),[4,window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},o,(new TextEncoder).encode(n))];case 2:return s=i.sent(),[2,btoa(new Uint8Array(s).reduce((function(e,t){return e+String.fromCharCode(t)}),""))];case 3:throw a=i.sent(),y_(jC,a);case 4:return[2]}}))}))},eE=function(e,t,n){return o(void 0,void 0,void 0,(function(){var r,o,s,a,c,l,u;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),r=(new TextEncoder).encode(e),[4,YO(t)];case 1:for(o=i.sent(),s=atob(n),a=new Uint8Array(s.length),c=0;c<s.length;c++)a[c]=s.charCodeAt(c);return[4,window.crypto.subtle.decrypt({name:"AES-GCM",iv:r},o,a.buffer)];case 2:return l=i.sent(),[2,(new TextDecoder).decode(new Uint8Array(l))];case 3:throw u=i.sent(),y_(jC,u);case 4:return[2]}}))}))},tE=function(e){return"".concat(e.identifier,"-").concat(e.action,"-").concat(e.timestamp)},nE=function(e){return Object.keys(n_).map((function(e){return n_[e]})).includes(e)?VO:$O};function rE(){var e=document.createElement("form");e.method="POST",e.action="$MESSAGE_HANDLER_URL";var t=document.createElement("input");t.type="hidden",t.name="identifier",t.value="$IDENTIFIER",e.appendChild(t),document.body.appendChild(e),e.submit()}var oE=function(e){void 0===e&&(e=GO);var t=this;this.identification={identifier:"",cryptoKey:""},this.messageHandlerInstance=null,this.listeners=new Map,this.sentMessages=[],this.generateIdentification=function(){return o(t,void 0,void 0,(function(){var e,t,n,r,s;return i(this,(function(a){switch(a.label){case 0:return e=new URLSearchParams(window.location.search),t=function(t){var n=e.get("liff.state");return n?new URLSearchParams(n).get(t):null},n=this,s={identifier:this.windowType===GO?S_(12):e.get("liff.subwindow.identifier")||t("liff.subwindow.identifier")||""},this.windowType!==GO?[3,2]:[4,o(void 0,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,window.crypto.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])];case 1:return e=r.sent(),[4,window.crypto.subtle.exportKey("jwk",e)];case 2:if(!(t=r.sent())||!t.k)throw y_(jC,"failed to generate key");return[2,t.k];case 3:throw n=r.sent(),y_(jC,n);case 4:return[2]}}))}))];case 1:return r=a.sent(),[3,3];case 2:r=e.get(JO)||t(JO)||"",a.label=3;case 3:return n.identification=(s.cryptoKey=r,s),[2]}}))}))},this.hasIdentification=function(){var e=t.identification,n=e.identifier,r=e.cryptoKey;return"string"==typeof n&&"string"==typeof r&&n.length>0&&r.length>0},this.isReady=function(){return t.hasIdentification()&&!!t.messageHandlerInstance},this.setup=function(){return o(t,void 0,void 0,(function(){var e,t,n,r,o,s=this;return i(this,(function(i){switch(i.label){case 0:return this.messageHandlerInstance?[2]:[4,this.generateIdentification()];case 1:if(i.sent(),!(e=this.identification.identifier))return[2];if(t=/^[a-zA-Z0-9]+$/gm,!e.match(t))throw y_(jC,"Invalid identifier");return(n=document.createElement("iframe")).style.display="none",n.src="about:blank",document.body.appendChild(n),null===(o=null==n?void 0:n.contentWindow)||void 0===o||o.window.eval("(".concat(rE.toString().replace("$MESSAGE_HANDLER_URL","".concat("https://liff-subwindow.line.me/liff/v2/sub/messageHandler")).replace("$IDENTIFIER",e.split("'")[0]),")()")),r="iframe-".concat(e,"-ready"),[4,new Promise((function(e){var t=function(o){o.data[r]&&(s.messageHandlerInstance=n,window.addEventListener("message",s.proxyToListeners),e(),document.removeEventListener("message",t))};window.addEventListener("message",t)}))];case 2:return[2,i.sent()]}}))}))},this.teardown=function(){return o(t,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return this.isReady()?[4,this.send({eventName:zO.TEARDOWN})]:[3,2];case 1:n.sent(),window.removeEventListener("message",this.proxyToListeners),this.listeners.clear(),null===(t=null===(e=this.messageHandlerInstance)||void 0===e?void 0:e.parentNode)||void 0===t||t.removeChild(this.messageHandlerInstance),this.messageHandlerInstance=null,n.label=2;case 2:return[2]}}))}))},this.listen=function(e){t.listeners.set(e,e)},this.listenRepliedEvent=function(e,n){var r=function(o){o.replyTarget&&function(e,t){return tE(e)===tE(t)}(o.replyTarget,e)&&(n(o),t.listeners.delete(r))};t.listeners.set(r,r)},this.send=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,s=this;return i(this,(function(i){switch(i.label){case 0:if(!this.isReady())throw y_("message bus is not ready to send message");return n={action:nE(e.eventName),identifier:this.identification.identifier||"",timestamp:(new Date).getTime()},[4,this.getEncryptedContext(e)];case 1:return n.context=i.sent(),t=n,null===(o=null===(r=this.messageHandlerInstance)||void 0===r?void 0:r.contentWindow)||void 0===o||o.postMessage({messageBusEvent:t},"*"),this.sentMessages.push(tE(t)),[4,new Promise((function(e){s.listenRepliedEvent(t,(function(t){e(t.context)}))}))];case 2:return[2,i.sent()]}}))}))},this.reply=function(e,n){return o(t,void 0,void 0,(function(){var t,r,o,s;return i(this,(function(i){switch(i.label){case 0:if(!this.isReady())throw y_("message bus is not ready to send message");if(!e.identifier||!e.timestamp)throw y_(jC,"target message is not valid");return r={action:VO},[4,this.getEncryptedContext(n)];case 1:return r.context=i.sent(),r.identifier=this.identification.identifier||"",r.timestamp=(new Date).getTime(),r.replyTarget={action:e.action,identifier:e.identifier,timestamp:e.timestamp},t=r,null===(s=null===(o=this.messageHandlerInstance)||void 0===o?void 0:o.contentWindow)||void 0===s||s.postMessage({messageBusEvent:t},"*"),this.sentMessages.push(tE(t)),[2]}}))}))},this.setData=function(e,n){void 0===e&&(e="appData"),t.send({eventName:zO.SET_DATA,key:e,data:n})},this.getData=function(e){return void 0===e&&(e="appData"),o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.send({eventName:zO.GET_DATA,key:e})];case 1:return[2,t.sent()]}}))}))},this.proxyToListeners=function(e){return o(t,void 0,void 0,(function(){var t,r=this;return i(this,(function(s){return t=e.data.messageBusEvent,"https://liff-subwindow.line.me"!==e.origin?[2]:t?(this.sentMessages.includes(tE(t))||t.identifier!==this.identification.identifier||t.action!==VO&&!t.replyTarget||this.listeners.forEach((function(e){return o(r,void 0,void 0,(function(){var r,o,s;return i(this,(function(i){switch(i.label){case 0:return r=e,o=[n({},t)],s={},[4,this.getDecryptedContext(t.context)];case 1:return r.apply(void 0,[n.apply(void 0,o.concat([(s.context=i.sent(),s)]))]),[2]}}))}))})),[2]):[2]}))}))},this.getEncryptedContext=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=this.identification,n=t.identifier,r=t.cryptoKey,s=(o=JSON).stringify,c={eventName:e.eventName,key:e.key?e.key:void 0},e.data?[4,ZO(n,r,JSON.stringify(e.data))]:[3,2];case 1:return a=i.sent(),[3,3];case 2:a=void 0,i.label=3;case 3:return[2,s.apply(o,[(c.data=a,c)])]}}))}))},this.getDecryptedContext=function(e){return o(t,void 0,void 0,(function(){var t,r,o,s,a,c,l,u;return i(this,(function(i){switch(i.label){case 0:return t=this.identification,r=t.identifier,o=t.cryptoKey,(s=JSON.parse(e)).data&&"string"==typeof s.data?(u=(l=JSON).parse,[4,eE(r,o,s.data)]):[3,2];case 1:return c=u.apply(l,[i.sent()]),[3,3];case 2:c=void 0,i.label=3;case 3:return a=c,[2,n(n({},s),{data:a})]}}))}))},this.windowType=e};!function(){if("undefined"!=typeof window&&"function"!=typeof window.CustomEvent){function e(e,t){var n=t||{},r=n.bubbles,o=void 0!==r&&r,i=n.cancelable,s=void 0!==i&&i,a=n.detail,c=void 0===a?void 0:a,l=document.createEvent("CustomEvent");return l.initCustomEvent(e,o,s,c),l}e.prototype=Event.prototype,window.CustomEvent=e}}();var iE={},sE=!1;function aE(e,t){sE||(sE=!0,window.addEventListener(VC,(function(e){e&&e.detail&&e.detail.type&&iE[e.detail.type]&&iE[e.detail.type].forEach((function(t){return t(e)}))}))),iE[e]?iE[e].push(t):iE[e]=[t]}function cE(e,t){var n=iE[e];if(n&&Array.isArray(n)){var r=n.indexOf(t);r>=0&&n.splice(r,1)}}function lE(e,t,n){void 0===t&&(t={}),void 0===n&&(n="");var r=Y_();if(!r)throw y_(HC,"Invalid featureToken for client features");if(!window._liff||!window._liff.postMessage)throw y_(BC,"postMessage is not available from client");PC.debug("[js postMessage to client]",e,n,t),window._liff.postMessage(e,r,n,JSON.stringify(t))}function uE(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={once:!0}),Y_()?(r=n({callbackId:S_(12),once:!0},r),new Promise((function(n,o){var i=function(t){if(t&&t.detail){var s=t.detail.callbackId===r.callbackId,a="string"!=typeof t.detail.callbackId;(s||a)&&(r.once&&cE(e,i),PC.debug("[callback detail]",t.detail),t.detail.error?o(t.detail.error):t.detail.data?n(t.detail.data):o(t.detail))}o()};aE(e,i),lE(e,t,r.callbackId)}))):Promise.reject(y_(HC,"Invalid featureToken for client features"))}function dE(){var e=bO();null!==e&&("ios"===wO()&&c_(e,"9.19")>=0||"android"===wO()&&c_(e,"11.6.0")>=0)?location.href="liff://close":window._liff&&window._liff.postMessage?null!==e&&c_(e,"10.15.0")>=0?"ios"===wO()?window._liff.postMessage("closeWindow",""):window._liff.postMessage("closeWindow","","",""):uE("closeWindow"):window.close()}function hE(e){return jO(HO("subWindowGetOrigin")(e))}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"closeWindow"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return dE()}}}(KC);var fE={};function pE(e,t){e&&fE[e]&&fE[e].forEach((function(e){e(t)}))}function gE(e,t){fE[e]||(fE[e]=[]),fE[e].push(t)}function vE(e,t){if(fE[e]){var n=fE[e].indexOf(t);n>=0&&fE[e].splice(n,1)}}var mE,yE,bE,wE,CE,_E=function(){function e(e){this.storage=e}return e.prototype.getItem=function(e){return this.storage.getItem("".concat(this.getKeyPrefix(),":").concat(e))},e.prototype.setItem=function(e,t){this.storage.setItem("".concat(this.getKeyPrefix(),":").concat(e),t)},e.prototype.removeItem=function(e){this.storage.removeItem("".concat(this.getKeyPrefix(),":").concat(e))},e.prototype.clear=function(){this.storage.clear()},e.prototype.getKeyPrefix=function(){return"".concat($C,":").concat(this.getLiffId())},e.prototype.getLiffId=function(){var e=W_().liffId;if(!e)throw y_(FC,"liffId is necessary for liff.init()");return e},e}(),OE=new _E(new C_);function EE(){var e=OE.getItem("subWindowStatusUpdated");return null!==e&&JSON.parse(e)}function SE(e){OE.setItem("subWindowStatusUpdated",String(e))}function RE(e){mE=e}function TE(){return mE}function NE(){return bE}function AE(){return wE}function PE(e){return void 0===e&&(e=GO),o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,(CE=new oE(e)).setup()];case 1:return t.sent(),[2,CE]}}))}))}function xE(){return CE}var IE=new C_,kE=new _E(L_()?IE:window.sessionStorage);function DE(){return kE.getItem("mainWindowOrigin")}function KE(e,t){return void 0===t&&(t={}),o(this,void 0,void 0,(function(){var n,r,o,s,a,c,l,u;return i(this,(function(i){switch(i.label){case 0:if(null==(n=xE())?void 0:n.isReady())return[3,5];if(r=JSON.stringify(t),o=W_().liffId,s=DE(),!window.opener||!s||!o)throw y_(zC);a=!1,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,hE(o)];case 2:return c=i.sent(),a=c.subwindowCommonModule,[3,4];case 3:throw l=i.sent(),PC.debug(l),y_(zC);case 4:return u=a?s:location.origin,[2,new Promise((function(t){window.addEventListener("message",(function n(o){(function(e){return!(!e.data||"string"!=typeof e.data.type||![n_.SUBMIT,n_.CANCEL].includes(e.data.type))})(o)&&(window.removeEventListener("message",n),t({status:e,result:r}))})),window.opener.postMessage({status:e,result:r},u)}))];case 5:return n.send({eventName:e,data:t}),[4,new Promise((function(e){setTimeout(e,500)}))];case 6:return i.sent(),[2,{status:e,result:JSON.stringify(t)}]}}))}))}function ME(e){var t,n=AE();if(e.origin===n){var r=e.data;if(r){var o,i=r.status,s=r.result;try{o=JSON.parse(s||"{}")}catch(FR){o={}}switch(i){case o_:window.clearInterval(NE()),WE();break;case n_.CANCEL:case n_.SUBMIT:SE(!0),window.clearInterval(NE()),window.removeEventListener("message",ME),pE(i,o),null===(t=TE())||void 0===t||t.postMessage({type:i},AE());break;default:PC.debug("unexpected message")}}}}var LE=function(e){return o(void 0,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){if(EE())return[2];switch(t=e.context,n=t.eventName,r=t.data,o=xE(),n){case n_.INIT:jE(!r.hasOpener);break;case n_.CANCEL:case n_.SUBMIT:SE(!0),pE(n,r),null==o||o.reply(e,{eventName:n});break;case n_.CLOSE:!1===EE()&&(SE(!0),pE(n_.CLOSE,{})),WE()}return[2]}))}))};function UE(){window.clearInterval(yE),window.clearInterval(NE()),window.removeEventListener("message",ME)}function jE(e){if(void 0===e&&(e=!1),UE(),SE(!1),e){var t=TE();t&&(t.close(),RE(null))}}function WE(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return(e=xE())?[4,e.teardown()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}var BE=null;function XE(e){return o(this,void 0,void 0,(function(){var t,n,r,s,l,u,d,h,f,p,g,v,m,y,b=this;return i(this,(function(w){switch(w.label){case 0:if(t=e.msit,n=e.mstChallenge,r=e.reconnectCount,s=void 0===r?0:r,l=function(){return o(b,void 0,void 0,(function(){return i(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 1:return r.sent(),[4,XE({msit:t,mstChallenge:n,onSuccess:e.onSuccess,onError:e.onError,reconnectCount:s+1})];case 2:return r.sent(),[2]}}))}))},u=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];BE=null,e.onSuccess.apply(e,c([],a(t),!1))},d=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];BE=null,e.onError.apply(e,c([],a(t),!1))},h=Date.now(),null===BE&&(BE=h),f=h-BE,s>=10||f>6e5)return d(y_(jC,"Failed to connect")),[2];w.label=1;case 1:return w.trys.push([1,3,,5]),[4,WO(HO("subWindowSubscribe"),{method:"POST",body:JSON.stringify({msit:t,mstChallenge:n})})];case 2:return p=w.sent(),[3,5];case 3:return w.sent(),[4,l()];case 4:return w.sent(),[2];case 5:return p.status>=500?[4,l()]:[3,7];case 6:return w.sent(),[3,17];case 7:return p.status>=400&&500>p.status?[4,HE(p)]:[3,9];case 8:return v=w.sent(),g=v?y_(BC,v.errorDetail):y_(jC,"Some error happened in the server"),d(g),[3,17];case 9:return 200!==p.status?[3,16]:[4,HE(p)];case 10:if(!(v=w.sent()))return d(y_(jC,"Some error happened in the server")),[2];switch(m=v.status,y=v.result,m){case n_.ERROR:return[3,11];case n_.CLOSE:case n_.CANCEL:case n_.SUBMIT:return[3,13]}return[3,14];case 11:return[4,l()];case 12:return w.sent(),[3,15];case 13:return u(m,y),[3,15];case 14:d(y_(jC,"Some error happened in the server")),w.label=15;case 15:return[3,17];case 16:d(y_(jC,"Some error happened in the server")),w.label=17;case 17:return[2]}}))}))}function HE(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e.json()];case 1:return[2,t.sent()];case 2:return t.sent(),[2,null];case 3:return[2]}}))}))}function FE(e){var t={};return Object.keys(e).forEach((function(n){"closeButtonColor"===n?"white"===e[n]?t[n]="#ffffff":t[n]="#000000":t[n]=e[n]})),t}var qE={height:"full",closeButtonPosition:"right",closeButtonColor:"black",closeButtonLabel:""};function JE(e){var t=e.appData,n=e.native,r=W_().liffId,s=G_(),a=x_(e.url);if(!r)return Promise.reject(y_(WC,"liffId is invalid"));if(!s)return Promise.reject(y_(WC,"mst_challenge is invalid"));if(!a)return Promise.reject(y_(BC,"params.url must be liff url or mini url"));var c=Object.assign({},qE,n);return function(e){var t=e.mainLiffId,n=e.subLiffId,r=e.mstChallenge,o=e.appData,i=e.view;return t&&r?jO(HO("subWindowGetMSIT"),{method:"POST",body:JSON.stringify({mainLiffId:t,subLiffId:n,mstChallenge:r,appData:o,view:i})}):Promise.reject(y_(BC,"no proper argument"))}({mainLiffId:r,subLiffId:a,mstChallenge:s,appData:t,view:FE(c)}).then((function(e){var t=e.msit;return XE({msit:t,mstChallenge:s,onSuccess:function(e,t){pE(e,t)},onError:function(e){pE(n_.ERROR,e)}}),t})).then((function(t){return function(e,t){var n;return o(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return r=e.url,(o=new URLSearchParams).set("msit",t),[4,null===(n=e.onBeforeTransition)||void 0===n?void 0:n.call(e)];case 1:return i.sent(),location.href="".concat("liff://subwindow","?url=").concat(encodeURIComponent(r),"&").concat(o.toString()),[2]}}))}))}(e,t)}))}function zE(e){return TO.subwindowOpen(),j_()?JE(e):function(e){var t;return o(this,void 0,void 0,(function(){var n,r,o,s,l,u,d,h,f,p,g;return i(this,(function(i){switch(i.label){case 0:return(n=x_(e.url))?(jE(!0),[4,WE()]):[2,Promise.reject(y_(BC,"params.url must be liff url or mini url"))];case 1:return i.sent(),RE("ios"!==wO()||D_()?window.open("","liffsubwindow","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):window.open()),r=e.url,o=e.appData,(s=new URL(r)).searchParams.append(r_,"true"),[4,PE()];case 2:return l=i.sent(),s.searchParams.append(qO,l.identification.identifier),s.searchParams.append(JO,l.identification.cryptoKey),s.hostname=function(e){var t=a(e.split(".")),n=t[0],r=t.slice(1);return c(["".concat(n,"-ext")],a(r),!1).join(".")}(s.hostname),u=s.toString(),[4,hE(n)];case 3:if(d=i.sent(),h=d.origin,f=d.subwindowCommonModule,!(p=TE()))throw y_(JC);if(!f)return p.close(),[2];!function(e){wE=e}(h),l.listen(LE),l.setData("appData",o),window.addEventListener("message",ME),i.label=4;case 4:return i.trys.push([4,6,,7]),[4,null===(t=e.onBeforeTransition)||void 0===t?void 0:t.call(e)];case 5:return i.sent(),[3,7];case 6:throw g=i.sent(),p.close(),g;case 7:return p.location.href=u,v=function(e,t){var n=TE(),r={type:o_};return t&&(r.message=JSON.stringify(t)),window.setInterval((function(){null==n||n.postMessage(r,e)}),100)}(h,o),bE=v,function(e){yE=e}(window.setInterval((function(){var e=TE();e&&e.closed&&(UE(),RE(null),!1===EE()&&(SE(!0),pE(n_.CLOSE,{})))}),100)),[2]}var v}))}))}(e)}function VE(e){if(!e.mst||!e.status)return Promise.reject(y_(BC,"no proper argument"));var t=JSON.stringify(e);return jO(HO("subWindowPost"),{method:"POST",body:t})}function $E(){if(!yO())throw y_(WC,"this api can be only called in child window")}function GE(e){return void 0===e&&(e={}),$E(),j_()?function(e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return(t=$_())?[4,VE({mst:t,status:n_.CANCEL,result:e})]:[2,Promise.reject(y_(WC,"mst is invalid"))];case 1:return n=r.sent(),SE(!0),[2,n]}}))}))}(e):function(e){return void 0===e&&(e={}),KE(n_.CANCEL,e)}(e)}function QE(e){return void 0===e&&(e={}),$E(),j_()?function(e){return void 0===e&&(e={}),o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return(t=$_())?[4,VE({mst:t,status:n_.SUBMIT,result:e})]:[2,Promise.reject(y_(WC,"mst is invalid"))];case 1:return n=r.sent(),SE(!0),[2,n]}}))}))}(e):function(e){return void 0===e&&(e={}),KE(n_.SUBMIT,e)}(e)}function YE(){return $E(),j_()?function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return!1!==EE()?[3,2]:(e=$_())?[4,VE({mst:e,status:n_.CLOSE,result:{}})]:[2,Promise.reject(y_(WC,"mst is invalid"))];case 1:t.sent(),t.label=2;case 2:return dE(),[2]}}))}))}():function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){return(null==(e=xE())?void 0:e.isReady())?(e.send({eventName:n_.CLOSE}),[2,new Promise((function(e){setTimeout((function(){dE(),e()}),100)}))]):(dE(),[2,Promise.resolve()])}))}))}()}function ZE(){return $E(),function(){var e,t=B_(YC.APP_DATA);try{e=t?JSON.parse(t):{}}catch(UR){e={}}return Promise.resolve(e)}()}function eS(e){var t=e.msit,n=e.mstVerifier;return t&&n?jO(HO("subWindowGetMSTByMSIT"),{method:"POST",body:JSON.stringify({msit:t,mstVerifier:n})}):Promise.reject(y_(BC,"no proper argument"))}function tS(e){var t=e.mst;return t?jO(HO("subWindowGetAppData"),{method:"POST",body:JSON.stringify({mst:t})}):Promise.reject(y_(BC,"no proper argument"))}var nS={on:gE,off:vE,open:zE,cancel:GE,submit:QE,close:YE,getAppData:ZE};!function(e){function r(){return null!==e&&e.apply(this,arguments)||this}t(r,e),Object.defineProperty(r.prototype,"name",{get:function(){return"subWindow"},enumerable:!1,configurable:!0}),r.prototype.install=function(){var e=this;return{on:gE.bind(this),off:vE.bind(this),open:function(t){return zE.call(e,n(n({},t),{onBeforeTransition:void 0}))},cancel:GE.bind(this),submit:QE.bind(this),close:YE.bind(this),getAppData:ZE.bind(this)}}}(KC);var rS,oS={exports:{}},iS=oS.exports;var sS,aS=(rS||(rS=1,function(e){!function(t,n){e.exports?e.exports=n():t.sha256=n()}(iS,(function(){var e=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var r,o,i=Math.pow,s=i(2,32),a="length",c="",l=[],u=8*t[a],d=e.h=e.h||[],h=e.k=e.k||[],f=h[a],p={},g=2;f<64;g++)if(!p[g]){for(r=0;r<313;r+=g)p[r]=g;d[f]=i(g,.5)*s|0,h[f++]=i(g,1/3)*s|0}for(t+="Â€";t[a]%64-56;)t+="\0";for(r=0;r<t[a];r++){if((o=t.charCodeAt(r))>>8)return;l[r>>2]|=o<<(3-r)%4*8}for(l[l[a]]=u/s|0,l[l[a]]=u,o=0;o<l[a];){var v=l.slice(o,o+=16),m=d;for(d=d.slice(0,8),r=0;r<64;r++){var y=v[r-15],b=v[r-2],w=d[0],C=d[4],_=d[7]+(n(C,6)^n(C,11)^n(C,25))+(C&d[5]^~C&d[6])+h[r]+(v[r]=r<16?v[r]:v[r-16]+(n(y,7)^n(y,18)^y>>>3)+v[r-7]+(n(b,17)^n(b,19)^b>>>10)|0);(d=[_+((n(w,2)^n(w,13)^n(w,22))+(w&d[1]^w&d[2]^d[1]&d[2]))|0].concat(d))[4]=d[4]+_|0}for(r=0;r<8;r++)d[r]=d[r]+m[r]|0}for(r=0;r<8;r++)for(o=3;o+1;o--){var O=d[r]>>8*o&255;c+=(O<16?0:"")+O.toString(16)}return c};return e.code='var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};',e}))}(oS)),oS.exports),cS=d(aS),lS=function(){var e=this;this.type="sync",this.fns=new Set,this.on=function(t){e.fns.add(t)},this.call=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];try{for(var i=s(e.fns),l=i.next();!l.done;l=i.next()){l.value.apply(void 0,c([],a(r),!1))}}catch(FR){t={error:FR}}finally{try{l&&!l.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},uS=function(){var e=this;this.type="async",this.fns=new Set,this.on=function(t){e.fns.add(t)},this.call=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o(e,void 0,void 0,(function(){var e,n,r,o,l,u;return i(this,(function(i){switch(i.label){case 0:e=[];try{for(n=s(this.fns),r=n.next();!r.done;r=n.next())o=r.value,e.push(o.apply(void 0,c([],a(t),!1)))}catch(FR){l={error:FR}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(l)throw l.error}}return[4,Promise.all(e)];case 1:return i.sent(),[2]}}))}))}},dS=function(e){var t,n=S_(43),r=function(e){var t="";return e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").forEach((function(e){t+=String.fromCharCode(parseInt(e))})),window.btoa(t)}(cS(n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),o=W_();if(!o||!o.liffId)throw y_(FC,"You need to define `liffId` for liff.login()");var i={app_id:o.liffId,state:S_(12),response_type:"code",code_challenge_method:"S256",code_challenge:r,liff_sdk_version:"2.25.1"};e&&e.redirectUri&&(i.redirect_uri=e.redirectUri),yO()&&!j_()&&((null===(t=xE())||void 0===t?void 0:t.isReady())?i.redirect_uri=window.location.href:i.disable_auto_login="true"),function(e){X_(YC.LOGIN_TMP,e)}({codeVerifier:n});var s=HO("authorize")+"?"+O_(i);PC.debug("[Redirect] ".concat(s)),window.location.href=s},hS=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hooks={before:new lS},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"login"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return this._login.bind(this)},n.prototype._login=function(e){this.hooks.before.call(e),dS(e)},n}(KC),fS="undefined"==typeof navigator?"en":null!==(sS=navigator.language)&&void 0!==sS?sS:"en",pS=null;function gS(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return fS=e,[4,vS()];case 1:return t.sent(),[2]}}))}))}function vS(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,jO("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"),{method:"GET",headers:{Accept:"application/json"}})];case 1:return e=n.sent(),t="".concat(fS),!e.languages[t]&&fS.includes("-")&&(t=fS.split("-")[0]),e.languages[t]||(t="en"),[4,jO("".concat("https://liffsdk.line-scdn.net/xlt","/").concat(e.languages[t]),{method:"GET",headers:{Accept:"application/json"}})];case 2:return pS=n.sent(),[2]}}))}))}function mS(e){if(null===pS)throw y_(XC,"please call xlt after liff.init");return pS[e]}var yS=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"i18n"},enumerable:!1,configurable:!0}),n.prototype.install=function(e){return e.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:gS}},n.prototype.beforeInitFinished=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,vS()];case 1:return e.sent(),[2]}}))}))},n}(KC),bS=new yS,wS={iconColor:"#111111",statusBarColor:"BLACK",titleTextColor:"#111111",titleSubtextColor:"#B7B7B7",titleButtonColor:"#111111",titleBackgroundColor:"#FFFFFF",progressBarColor:"#06C755",progressBackgroundColor:"#FFFFFF",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#FFFFFF",baseTextColor:"#000000",lightButtonBorderColor:"rgba(0, 0, 0, 0.15)"},CS={iconColor:"#FFFFFF",statusBarColor:"WHITE",titleTextColor:"#FFFFFF",titleSubtextColor:"#949494",titleButtonColor:"#FFFFFF",titleBackgroundColor:"#111111",progressBarColor:"#06C755",progressBackgroundColor:"#111111",titleButtonAreaBackgroundColor:"#1FFFFFFF",titleButtonAreaBorderColor:"#26000000",baseBackgroundColor:"#000000",baseTextColor:"#FFFFFF",lightButtonBorderColor:"rgba(255, 255, 255, 0.5)"};function _S(e){var t=H_(),r=(null==t?void 0:t.menuColorSetting)||{adaptableColorSchemes:["light"],lightModeColor:wS,darkModeColor:CS},o=r.adaptableColorSchemes,i=r.lightModeColor,s=r.darkModeColor,a=o.includes("dark");e.matches&&a?OS(n(n({},CS),s)):OS(n(n({},wS),i))}function OS(e){var t=e.iconColor,n=e.statusBarColor,r=e.titleTextColor,o=e.titleSubtextColor,i=e.titleButtonColor,s=e.titleBackgroundColor,a=e.progressBarColor,c=e.progressBackgroundColor,l=e.titleButtonAreaBackgroundColor,u=e.titleButtonAreaBorderColor,d=e.baseBackgroundColor,h=e.baseTextColor,f=e.lightButtonBorderColor;ES("--liff-base-background-color",d),ES("--liff-base-text-color",h),ES("--liff-base-background-rgb-color",d_(d)),ES("--liff-base-text-rgb-color",d_(h)),ES("--liff-light-button-border-color",f),ES("--liff-title-text-color",r),ES("--liff-title-background-color",s),ES("--liff-title-button-color",i),ES("--liff-icon-color",t),ES("--liff-status-bar-color",n),ES("--liff-title-subtext-color",o),ES("--liff-progress-bar-color",a),ES("--liff-progress-background-color",c),ES("--liff-title-button-area-background-color",l_(l)),ES("--liff-title-button-area-border-color",l_(u))}function ES(e,t){document.documentElement.style.setProperty(e,t)}var SS={addToHomeScreen:function(e){if(!new xO(e).invoke("addToHomeScreen"))throw y_(HC,"No permission for liff.addToHomeScreen()")},scanCode:function(e){if(!new xO(e).invoke("scanCode"))return Promise.reject(y_(HC,"No permission for liff.scanCode()"))},getAdvertisingId:function(e){if(!new xO(e).invoke("getAdvertisingId"))return Promise.reject(y_(HC,"No permission for liff.getAdvertisingId()"))},initPlugins:function(){}};function RS(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,KO()];case 1:return(t=n.sent())?(t.install(e,SS),[2]):[2]}}))}))}function TS(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,jO(HO("certs"))];case 1:return[2,e.sent()]}}))}))}function NS(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return[4,crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"])];case 1:return r=o.sent(),[4,crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},r,n,t)];case 2:return[2,o.sent()]}}))}))}function AS(e,t){return o(this,void 0,void 0,(function(){var n,r,o,s,c,l,u,d,h,f,p,g,v,m,y,b;return i(this,(function(i){switch(i.label){case 0:return n=e.split("."),r=a(n,3),o=r[0],s=r[1],c=r[2],l=JSON.parse(a_.decode(o)),u=JSON.parse(a_.decodeUnicode(s)),d=h_(a_.decode(c)),h=h_("".concat(o,".").concat(s)),[4,TS()];case 1:if(f=i.sent(),!(p=f.keys.find((function(e){return e.kid===l.kid}))))return[3,6];if(delete p.alg,"ES256"!==l.alg)throw y_(qC,'Invalid "alg" value in ID_TOKEN');g=void 0,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,NS(p,h,d)];case 3:return g=i.sent(),[3,5];case 4:throw v=i.sent(),y_(qC,"".concat("Failed to use Crypto API to verify ID_TOKEN",": ").concat(v));case 5:if(g){if(m=u.iss!=="https://access.".concat("line.me"),y=u.aud!==t,b=1e3*u.exp<Date.now(),m)throw y_(qC,'Invalid "iss" value in ID_TOKEN');if(y)throw y_(qC,'Invalid "aud" value in ID_TOKEN');if(b)throw y_(qC,'Invalid "exp" value in ID_TOKEN');return[2,u]}throw y_(qC,"Invalid signature in ID_TOKEN");case 6:throw y_(qC,'Invalid "kid" value in ID_TOKEN');case 7:return[2]}}))}))}function PS(e){var t=e.split(".");if(t[1])try{var n=t[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(window.atob(n))}catch(UR){return null}return null}function xS(e){var t=e.pathname,n=e.query,r=n?"?".concat(O_(n)):"",o="".concat("liff://").concat(t).concat(r);location.href=o}var IS=null;function kS(){"boolean"==typeof IS&&PC.warn("liff.init is not expected to be called more than once"),IS=!!Boolean(B_(YC.IS_SUBSEQUENT_LIFF_APP))||!(!j_()||__(window.location.hash).feature_token||Y_())&&(function(e){X_(YC.IS_SUBSEQUENT_LIFF_APP,e)}(!0),!0)}function DS(){return Boolean(IS)}function KS(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return(n=$_())?[2,n]:e&&t?[4,eS({msit:e,mstVerifier:t})]:[3,2];case 1:return[2,r.sent().mst];case 2:return[2,null]}}))}))}function MS(e){return jO("".concat(HO("apps"),"/").concat(e,"/featureToken"))}function LS(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return t=__(window.location.hash),n=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var i=function(t){Object.keys(t).filter((function(e){return null!==t[e]&&void 0!==t[e]})).forEach((function(n){e[n]=t[n]}))};try{for(var a=s(r),c=a.next();!c.done;c=a.next())i(c.value)}catch(MR){t={error:MR}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return e}({access_token:nO(),context_token:B_(YC.RAW_CONTEXT),feature_token:Y_(),id_token:eO(),client_id:B_(YC.CLIENT_ID),mst_challenge:G_(),mst_verifier:B_(YC.MST_VERIFIER),msit:B_(YC.MSIT)},t),DS()?dO()?[4,MS(e)]:[3,2]:[3,3];case 1:r=i.sent().featureToken,n.feature_token||(n.feature_token=r),i.label=2;case 2:(o=b_(e))&&(n.client_id=o),i.label=3;case 3:return[2,n]}}))}))}function US(e){if(e.persisted&&NO("multipleLiffTransition"))if("ios"===wO())window.location.reload();else{var t=W_().liffId,n=Y_();if(!t)throw y_(XC,"Invalid LIFF ID.");if(!n)throw y_(HC,"Invalid featureToken for client features");xS({pathname:"app/".concat(t),query:{feature_token:n}})}}function jS(e){var t,n;return o(this,void 0,void 0,(function(){var r,o,s,a,c,l,u,d,h,f,p,g,v,m,y,b,w;return i(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(e){var t=bO();if(!t||c_(t,"9.5.0")<0)e();else if(window._liff&&window._liff.features)e();else{PC.debug("cannot find window._liff.features, listen to ready event");var n=function(){PC.debug("ready event is fired"),cE("ready",n),e()};aE("ready",n)}}))];case 1:return i.sent(),kS(),[4,LS(e.liffId)];case 2:if(r=i.sent(),o=r.access_token,s=r.context_token,a=r.feature_token,c=r.id_token,l=r.client_id,u=r.mst_verifier,d=r.mst_challenge,h=r.msit,s){if("string"!=typeof s)throw y_(XC,"Cannot get context token, perhaps there is an incorrect parameter in permanent link");F_(PS(s))}if(void 0!==(null===(t=H_())||void 0===t?void 0:t.liffId)&&(null===(n=H_())||void 0===n?void 0:n.liffId)!==e.liffId)throw y_(XC,"Invalid LIFF ID");return!yO()&&a&&(function(e,t){NO("multipleLiffTransition")&&xS({pathname:"app/".concat(e),query:{feature_token:t}})}(e.liffId,a),DS()&&Z_(a)),d&&function(e){X_(YC.MST_CHALLENGE,e)}(d),u&&function(e){X_(YC.MST_VERIFIER,e)}(u),l&&Q_(l),h&&function(e){X_(YC.MSIT,e)}(h),window.addEventListener("pageshow",US),dO()||a&&o?[3,5]:DS()?(f=N_(location.href,{"liff.hback":"2"}),dS({redirectUri:f}),[4,new Promise((function(){}))]):[3,4];case 3:i.sent(),i.label=4;case 4:throw dS(),y_(XC,"Failed to parse feature_token or access_token");case 5:return o&&a?[4,FO(o)]:[3,7];case 6:if(p=i.sent(),g=p.client_id,v=p.expires_in,m=b_(e.liffId),g!==m)throw dS(),y_(XC,"Failed to verify access_token");Z_(a),aO(new Date(Date.now()+1e3*v)),rO(o),i.label=7;case 7:return[4,KS(h,u)];case 8:return(y=i.sent())?(function(e){X_(YC.MST,e)}(y),[4,tS({mst:y})]):[3,10];case 9:(b=i.sent().data)&&V_(JSON.stringify(b)),i.label=10;case 10:return c&&!eO()&&tO(c),c&&l&&!cO()?[4,AS(c,l)]:[3,12];case 11:(w=i.sent())&&lO(w),i.label=12;case 12:return[2]}}))}))}function WS(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=HO("apps"),n="".concat(t,"/").concat(e,"/contextToken"),r=nO(),o={"Content-Type":"application/json",Accept:"application/json"},r&&(o.Authorization="Bearer ".concat(r)),[4,jO(n,{headers:o})];case 1:if(s=i.sent(),!(a=s.contextToken))throw y_(XC,"Can not get context from server.");if(!(c=PS(a)))throw y_(XC,"Invalid context token.");return[2,c]}}))}))}function BS(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:if(!(e=W_().liffId))throw y_(XC,"Invalid LIFF ID.");return[4,WS(e)];case 1:return F_(t.sent()),[2]}}))}))}function XS(e){return o(this,void 0,void 0,(function(){var t,n,r,s=this;return i(this,(function(a){switch(a.label){case 0:t=function(){return o(s,void 0,void 0,(function(){var t,n,r,o,s,a;return i(this,(function(i){switch(i.label){case 0:return[4,(c=W_(),l=__(window.location.search),u=iO(),d={grant_type:"authorization_code",client_id:l.liffClientId,appId:c.liffId,code:l.code,code_verifier:u.codeVerifier,redirect_uri:c.redirectUri||l.liffRedirectUri,id_token_key_type:"JWK"},h=O_(d),jO(HO("token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:h}))];case 1:return t=i.sent(),n=t.access_token,r=t.id_token,o=t.expires_in,Q_(e),rO(n),aO(new Date(Date.now()+1e3*o)),sO(),r?(tO(r),[4,AS(r,e)]):[3,3];case 2:(s=i.sent())&&lO(s),i.label=3;case 3:return(a=__(location.hash).context_token)?(F_(PS(a)),[3,6]):[3,4];case 4:return[4,BS()];case 5:i.sent(),i.label=6;case 6:return[2]}var c,l,u,d,h}))}))},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,t()];case 2:return a.sent(),[3,4];case 3:throw n=a.sent(),r=n,sO(),r;case 4:return[2]}}))}))}function HS(){return o(this,void 0,void 0,(function(){var e,t,n,r,s,a,c=this;return i(this,(function(l){switch(l.label){case 0:return(t=xE())?[3,2]:[4,PE(QO)];case 1:t=l.sent(),l.label=2;case 2:return(e=t).isReady()?(n=S_(8),[4,e.getData("appData")]):[3,8];case 3:return r=l.sent(),s=r.eventName,a=r.data,s!==zO.NOT_FOUND?[3,6]:[4,e.teardown()];case 4:return l.sent(),[4,HS()];case 5:return[2,l.sent()];case 6:a&&V_(JSON.stringify(a)),l.label=7;case 7:return e.listen((function(t){return o(c,void 0,void 0,(function(){var r,o;return i(this,(function(i){return r=t.context,o=r.data,r.eventName===n_.INIT&&(null==o?void 0:o.subWindowId)!==n&&dE(),r.eventName!==n_.CANCEL&&r.eventName!==n_.SUBMIT||e.teardown(),[2]}))}))})),dO()&&e.send({eventName:n_.INIT,data:{subWindowId:n,hasOpener:!!window.opener}}),[3,10];case 8:return DE()?[3,10]:[4,new Promise((function(e){window.addEventListener("message",function(e){return function t(n){var r=n.data,o=n.source,i=n.origin;if(r){var s=r.type,a=r.message;s===o_&&(window.removeEventListener("message",t),a&&V_(a),function(e){kE.setItem("mainWindowOrigin",e)}(i),o&&o.postMessage&&o.postMessage({status:o_},i),e())}}}(e))}))];case 9:return[2,l.sent()];case 10:return[2]}}))}))}var FS=new(function(){function e(){var e=this;this.getAndValidateContext=function(){var e=H_();if(!e)throw y_(XC,"Could not get Context from server.");if(!e.endpointUrl)throw y_(XC,"Could not get endpointUrl from server.");if(!e.permanentLinkPattern)throw y_(XC,"Could not get permanentLinkPattern from server.");return e},this.decodeState=function(t){var n=e.getAndValidateContext();t=t.replace(/\n/g,"%0D%0A");var r=!n.endpointUrl.startsWith("/?")&&n.endpointUrl.includes("/?")||!n.endpointUrl.startsWith("/#")&&n.endpointUrl.includes("/#")||n.endpointUrl.endsWith("/")||!t.startsWith("/?")&&t.includes("/?")||!t.startsWith("/#")&&t.includes("/#")||t.endsWith("/"),o=new URL(n.endpointUrl),i=o.origin,s=o.pathname,a=o.search,c=new URL("".concat(i).concat(e.attachSlashAtStart(t))),l=c.pathname,u=c.search,d=c.hash,h="".concat(a).concat(a?u.replace(/\?/g,"&"):u),f="".concat(s).concat(e.attachSlashAtStart(l)).replace("//","/");return(f=e.attachSlashAtStart("".concat(f))).endsWith("/")&&!r&&(f=f.substring(0,f.length-1)),"".concat(i).concat(f).concat(h).concat(d).replace(/%0D%0A/g,"\n")}}return e.prototype.attachSlashAtStart=function(e){return"".concat(e&&e.length>0&&!e.startsWith("/")?"/":"").concat(e)},e.prototype.invoke=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,o;return i(this,(function(i){switch(i.label){case 0:if(e=__(window.location.search),"string"!=typeof(t=e["liff.state"]))return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),n=location.href,(r=this.decodeState(t))===n?[3,3]:(e["liff.hback"]?location.replace(N_(r,{"liff.hback":e["liff.hback"]})):location.replace(r),[4,new Promise((function(){}))]);case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if((o=i.sent()).code===XC)throw o;return PC.debug(o),[3,5];case 5:return[2]}}))}))},e}());function qS(e,t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:if(!e.liffId)throw y_(FC,"liffId is necessary for liff.init()");return function(e){window.__liffConfig=e}(e),!j_()&&dO()&&(function(){var e=W_();return f_("".concat($C,":").concat(YC.EXPIRES,":").concat(e.liffId))}()||MO()),n=__(window.location.search),!yO()||j_()?[3,2]:[4,HS()];case 1:r.sent(),r.label=2;case 2:if(n.error&&n.liffOAuth2Error)throw s=n.error,a=n.error_description.replace(/\+/g," "),c="".concat(s,": ").concat(a),y_(XC,c);return o=n.code,i=iO(),Boolean(o&&!dO()&&i&&i.codeVerifier)?[4,XS(n.liffClientId)]:[3,4];case 3:r.sent(),r.label=4;case 4:return j_()?[4,jS(e)]:[3,6];case 5:return r.sent(),[3,8];case 6:return dO()?[3,8]:[4,BS()];case 7:r.sent(),r.label=8;case 8:return[4,FS.invoke()];case 9:return r.sent(),[4,t()];case 10:return r.sent(),function(e){var t=T_(R_(e));window.history.replaceState(history.state,"",t)}(window.location.href),[2]}var o,i,s,a,c}))}))}var JS=function(e,t){return new Promise((function(n,r){if(e){var o=document.createElement("script");o.type="module",o.onload=function(){n()},o.src=e,document.head.appendChild(o)}else r(y_(FC,t))}))},zS=function(e){var t="https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";return t&&e&&(t=t.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/,e)),JS(t,"LUI_ALERT_URL is not defined")},VS=function(){return o(void 0,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=function(){var e,t=document.querySelector('script[src*="luivendor.js"]');if(t&&(null===(e=t.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g))||void 0===e?void 0:e.length))return t.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0]}(),e?[3,2]:[4,JS("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js","LUI_VENDOR_URL is not defined")];case 1:t.sent(),t.label=2;case 2:return[4,zS(e)];case 3:return t.sent(),[4,(n=S_(6),new Promise((function(){var e=document.createElement("div");e.innerHTML='<lui-alert id="'.concat("liffAlert","-").concat(n,'" shown title="').concat(mS("alert.android.extBrowser.autoLoginWorkaround.title"),'" message="').concat(mS("alert.android.extBrowser.autoLoginWorkaround.desc"),'" button="').concat(mS("alert.android.extBrowser.autoLoginWorkaround.button.text"),'"></lui-alert>'),document.body.appendChild(e);var t=document.getElementById("".concat("liffAlert","-").concat(n));t&&t.addEventListener("lui-button-click",(function(){var e=window.open(N_(window.location.href,{liffIsEscapedFromApp:"true"}),"_blank");e&&(e.location.href=N_(window.location.href,{liffIsEscapedFromApp:"true"}),window.close())}))})))];case 4:return t.sent(),[2]}var n}))}))},$S=function(e){try{return new URL(e).searchParams.get("lineAppVersion")}catch(WC){return null}};function GS(){var e;return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return(t=null!==(e=$S(window.location.href))&&void 0!==e?e:$S(window.document.referrer))&&c_(t,"13.10.0")>=0||j_()||"android"!==wO()||(n=__(window.location.search))[qO]||n.liffIsEscapedFromApp?[2]:n.liffClientId&&document.referrer.includes("access.".concat("line.me"))?(window.location.href=N_(window.location.href,{liffIsEscapedFromApp:"true"}),[2]):n.liffClientId&&document.referrer.includes("android-app://")?[4,VS()]:[3,2];case 1:r.sent(),r.label=2;case 2:return n.liffClientId&&""===document.referrer&&1===window.history.length?[4,VS()]:[3,4];case 3:r.sent(),r.label=4;case 4:return!document.referrer.includes("liffClientId")||document.referrer.includes("liffIsEscapedFromApp")?[3,6]:[4,VS()];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}var QS=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.hooks={before:new uS,after:new uS},t.internalHooks={beforeFinished:new uS,beforeSuccess:new uS,error:new uS},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"init"},enumerable:!1,configurable:!0}),n.prototype.install=function(e){var t=e.liff;return this.liffForWindow=t,this.init.bind(this)},n.prototype.init=function(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){switch(o.label){case 0:return[4,this.hooks.before.call()];case 1:o.sent(),i=this.liffForWindow,window&&!window.liff&&(window.liff=i),o.label=2;case 2:return o.trys.push([2,9,,11]),[4,Promise.all([RS(this.liffForWindow),qS(e,this.internalHooks.beforeFinished.call)])];case 3:return o.sent(),function(){var e;ES("color-scheme",((null==(e=H_())?void 0:e.menuColorSetting)||{adaptableColorSchemes:["light"]}).adaptableColorSchemes.join(" "));var t=window.matchMedia("(prefers-color-scheme: dark)");_S({matches:null==t?void 0:t.matches,media:null==t?void 0:t.media}),t.addEventListener?t.addEventListener("change",_S):t.addListener&&t.addListener(_S)}(),[4,this.internalHooks.beforeSuccess.call()];case 4:return o.sent(),!e.withLoginOnExternalBrowser||dO()?[3,6]:(dS(),[4,new Promise((function(){}))]);case 5:o.sent(),o.label=6;case 6:return[4,GS()];case 7:return o.sent(),[4,this.hooks.after.call()];case 8:return o.sent(),"function"==typeof t&&t(),NC(),[3,11];case 9:return r=o.sent(),[4,this.internalHooks.error.call(r)];case 10:throw o.sent(),"function"==typeof n&&n(r),r;case 11:return[2]}var i}))}))},n}(KC);function YS(){return navigator.language}function ZS(){var e=bO();if(!e||!j_()||"ios"!==wO())return navigator.language;if(c_(e,"14.11.0")>=0){var t=window.prompt("LIFF:GET_APP_LANGUAGE");if(t)return t}return navigator.language}function eR(e){return o(this,void 0,void 0,(function(){var t,n,r,o,a,c,l;return i(this,(function(i){switch(i.label){case 0:return function(e){if(!i_.includes(e))throw y_(BC,"Unexpected permission name.");var t=H_();return!!(null==t?void 0:t.scope.includes(e))}(e)?(t=nO())?[4,FO(t)]:[3,2]:[2,{state:"unavailable"}];case 1:n=i.sent(),r=unescape(n.scope).split(" ");try{for(o=s(r),a=o.next();!a.done;a=o.next())if(a.value.includes(e))return[2,{state:"granted"}]}catch(u){c={error:u}}finally{try{a&&!a.done&&(l=o.return)&&l.call(o)}finally{if(c)throw c.error}}return[2,{state:"prompt"}];case 2:throw y_(WC,"LiffId is not found.")}}))}))}function tR(){var e,t,n=H_();return!!n&&"square_chat"!==n.type&&(NO("skipChannelVerificationScreen")||!j_()&&(null===(t=null===(e=n.availability)||void 0===e?void 0:e.skipChannelVerificationScreen)||void 0===t?void 0:t.permission))}function nR(){var e=W_().liffId;if(e)return jO("".concat(HO("unauthorizedPermissions"),"?liffId=").concat(e),{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(nO())}});throw y_(WC,"liffId is required")}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getLanguage"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return YS()}}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getAppLanguage"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(){return ZS()}}}(KC);var rR,oR=nS.on,iR=nS.off,sR=nS.open,aR=function(){function e(e,t){var n=this;this.onSubmit=function(e){var t=e.newAccessToken,r=e.ICA_ERROR;return o(n,void 0,void 0,(function(){return i(this,(function(e){return t?this.resolve({newAccessToken:t}):r&&this.reject(y_(jC,r)),this.teardown(),[2]}))}))},this.onClose=function(){return o(n,void 0,void 0,(function(){return i(this,(function(e){return this.reject(y_(WC,"user didn't allow the agreement")),this.teardown(),[2]}))}))},this.onCancel=function(){return o(n,void 0,void 0,(function(){return i(this,(function(e){return this.reject(y_(WC,"user didn't allow the agreement")),this.teardown(),[2]}))}))},this.onError=function(e){return o(n,void 0,void 0,(function(){return i(this,(function(t){return this.reject(e),this.teardown(),[2]}))}))},this.resolve=e,this.reject=t,this.setup()}return e.prototype.setup=function(){oR("submit",this.onSubmit),oR("close",this.onClose),oR("cancel",this.onCancel),oR("error",this.onError)},e.prototype.teardown=function(){iR("submit",this.onSubmit),iR("close",this.onClose),iR("cancel",this.onCancel),iR("error",this.onError),rR=void 0},e.prototype.open=function(e){var t=W_().liffId;t?sR({url:"".concat("https://liff.line.me/1656032314-Xgrw5Pmk"),appData:{liffId:t,channelId:b_(t),accessToken:nO()},onBeforeTransition:e}).catch(this.reject):this.reject(y_(WC,"liffId is required"))},e}();function cR(){return o(this,void 0,void 0,(function(){var e,t=this;return i(this,(function(n){switch(n.label){case 0:if(!tR())throw y_(HC,"SkipChannelVerificationScreen is unavailable.");return rR&&rR.teardown(),e=function(){return o(t,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,nR()];case 1:if(e=t.sent(),(j_()?e:e.filter((function(e){return"chat_message.write"!==e}))).length<=0)throw y_(HC,"All permissions have already been approved.");return[2]}}))}))},[4,new Promise((function(t,n){(rR=new aR(t,n)).open(e)}))];case 1:return rO(n.sent().newAccessToken),[2]}}))}))}function lR(e,t){var n=this;return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return o(n,void 0,void 0,(function(){var n,o,s;return i(this,(function(i){switch(i.label){case 0:return n=(r.length>0?r[r.length-1]:{}).ignorePermissionCheck,o=void 0!==n&&n,[4,eR(t)];case 1:if("unavailable"!==(s=i.sent().state))return[3,2];throw y_(HC,"The permission is not in LIFF app scope.");case 2:return"prompt"!==s||!tR()||o||!j_()&&"chat_message.write"===t?[3,4]:[4,cR()];case 3:return i.sent(),[3,5];case 4:o&&r.pop(),i.label=5;case 5:return[4,e.apply(void 0,c([],a(r),!1))];case 6:return[2,i.sent()]}}))}))}}var uR=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"permission"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return{query:eR,requestAll:cR}},n}(KC),dR=new uR;function hR(){return jO(HO("profile"))}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getProfile"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return lR(hR,"profile")}}(KC);function fR(e){if(!function(e){if(!e||"object"!=typeof e)return!1;var t=e,n=t.url,r=a([typeof n,typeof t.external],2),o=r[0],i=r[1];return"string"===o&&""!==n&&("undefined"===i||"boolean"===i)}(e))throw y_(BC,"Invalid parameters for liff.openWindow()");var t=bO();if(j_())if(null!==t&&"ios"===wO()&&c_(t,"9.19")>=0||!window._liff.postMessage){var n=e.url,r=e.external,o=void 0!==r&&r;window.open(function(e,t){var n,r,o,i,s,c,l,u,d;(function(e){return-1!==e.indexOf("#")&&-1!==e.indexOf("?")&&e.indexOf("#")<e.indexOf("?")})(e)||function(e){return-1===e.indexOf("?")&&-1!==e.indexOf("#")}(e)?(l=(n=a(e.split("#"),2))[0],u=(o=a((void 0===(r=n[1])?"":r).split("?"),2))[0],d=o[1]):(l=(i=a(e.split("?"),2))[0],d=(c=a((void 0===(s=i[1])?"":s).split("#"),2))[0],u=c[1]);var h=function(e,t){return e?"&".concat(e.split("&").filter((function(e){return-1===e.indexOf("is_liff_external_open_window")})).join("&").concat("".concat(t?"#".concat(t):""))):"".concat(t?"#".concat(t):"")}(d,u);return"".concat(l,"?").concat("is_liff_external_open_window","=").concat(!!t).concat(h)}(n,o))}else uE("openWindow",e);else window.open(e.url,"_blank")}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"openWindow"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return fR(e)}}}(KC);var pR=function(e){return"object"==typeof e&&null!==e&&function(e){return"string"==typeof e||e instanceof String}(e.type)};function gR(e){return Promise.reject(y_(BC,e))}function vR(e){if(!function(e){return Array.isArray(e)&&e.every(pR)}(e))return gR("Parameter 'messages' must be an array of { type, ... }");var t=e.length;return t<1||t>5?gR("Number of messages should be in range 1 to ".concat(5,".")):jO(HO("message"),{method:"POST",body:JSON.stringify({messages:e})}).catch(mR)}var mR=function(e){if("403"===e.code){var t="12.0.0"===bO(),n="ios"===wO(),r=D_();t&&(n||r)&&window.alert("LINEã‚¢ãƒ—ãƒªã‚’LINE 12.0.1ä»¥é™ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ãã ã•ã„ã€‚\nPlease update your LINE app to LINE 12.0.1 or later.")}throw e};function yR(){return jO(HO("friendship"))}function bR(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:if(!dO())return[3,6];n.label=1;case 1:return n.trys.push([1,5,,6]),(e=cO())&&e.sub?[2,e.sub]:[3,2];case 2:return[4,hR()];case 3:if((t=n.sent())&&t.userId)return[2,t.userId];n.label=4;case 4:return[3,6];case 5:return n.sent(),PC.debug("can't retrieve Mid/Uid because of something wrong"),[3,6];case 6:return[2]}}))}))}function wR(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,bR()];case 1:return(e=t.sent())&&"u"===e.substring(0,1)?[2,e]:[2]}}))}))}!function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"sendMessages"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return lR(vR,"chat_message.write")}}(KC),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"getFriendship"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return lR(yR,"profile")}}(KC);var CR,_R=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.utsExtra={isLiffSuccessful:!1,isLoggedIn:!1,id:"",version:""},t.injected=!1,t}return t(r,e),Object.defineProperty(r,"CUSTOMPLACEID_INIT",{get:function(){return"liff.init"},enumerable:!1,configurable:!0}),Object.defineProperty(r,"CUSTOMTYPE",{get:function(){return"liffSdk"},enumerable:!1,configurable:!0}),Object.defineProperty(r,"LiffUtsLoginStatus",{get:function(){return{isLoggedIn:1,isLiffSuccessful:2}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return"analytics"},enumerable:!1,configurable:!0}),r.prototype.install=function(e){var t=e.liff,n=e.internalHooks;this.liffCore=t,n.init.beforeFinished(this.beforeInitFinished.bind(this)),n.init.beforeSuccess(this.beforeInitSuccess.bind(this)),n.init.error(this.initError.bind(this))},r.prototype.changeRatioToUTSFormat=function(e){if(e&&Number.isFinite(e))return Math.round(100*e)},r.prototype.setExtra=function(){var e,t=this.utsExtra,n=t.isLiffSuccessful,o=t.isLoggedIn,i=t.id,s=t.version,a=(o?r.LiffUtsLoginStatus.isLoggedIn:0)|(n?r.LiffUtsLoginStatus.isLiffSuccessful:0);null===(e=this.uts)||void 0===e||e.setExtra("liff",{id:i,loginStatus:a,version:s})},r.prototype.assignUtsExtra=function(e){Object.assign(this.utsExtra,e)},r.prototype.setVersion=function(e){this.assignUtsExtra({version:e}),PC.debug("[LIFFUTS][SDK version] ".concat(e)),this.setExtra()},r.prototype.setLiffId=function(e){this.assignUtsExtra({id:e}),PC.debug("[LIFFUTS][LIFFID] ".concat(e)),this.setExtra()},r.prototype.setIsLoggedIn=function(e){this.assignUtsExtra({isLoggedIn:e}),PC.debug("[LIFFUTS][isLoggedIn] ".concat(e)),this.setExtra()},r.prototype.sendLiffInit=function(){var e;PC.debug("[LIFFUTS][sendCustom] liff.init"),null===(e=this.uts)||void 0===e||e.sendCustom({type:r.CUSTOMTYPE,params:{placeId:r.CUSTOMPLACEID_INIT}})},r.prototype.setIsLiffSuccessful=function(e){this.assignUtsExtra({isLiffSuccessful:e}),PC.debug("[LIFFUTS][isLiffInitSuccessful] ".concat(e)),this.setExtra()},r.prototype.prepareReferrer=function(e){var t={};Object.keys(e).forEach((function(n){if(t_.includes(n)){var r=e[n];"string"==typeof r&&r&&(t[n.replace(/^liff\.ref\./,"")]=r)}})),Object.keys(t).length>0&&(this.referrer=t)},r.prototype.beforeInitFinished=function(){return o(this,void 0,void 0,(function(){var e,t,r,o,s,a,c,l,u,d,h,f;return i(this,(function(i){switch(i.label){case 0:if(e=__(window.location.search),this.prepareReferrer(e),t=H_(),!(r=null==t?void 0:t.utsTracking))return[2];if(o=W_(),s=o.liffId,a=o.analytics,"auto"!==r.mode||!a)return[3,6];PC.debug("[LIFFUTS] ".concat((new Date).toUTCString())),i.label=1;case 1:return i.trys.push([1,3,,4]),c=this,[4,new Promise((function(e,t){var n=window.uts,r=document.createElement("script");r.type="text/javascript",r.src="https://static.line-scdn.net/uts/edge/4.1.0/uts.js",r.onload=function(){var t=window.uts;e(t),window.uts=n},r.onerror=function(e){t(e)},document.getElementsByTagName("head")[0].appendChild(r)}))];case 2:return c.uts=i.sent(),[3,4];case 3:return l=i.sent(),PC.debug("[LIFFUTS] cannot load UTS, reason: ".concat(l)),[2];case 4:return u=n(n({},a.context),{utsId:a.context.utsId,appName:a.context.appName,appEnv:a.context.appEnv||"release"}),d=n(n({endpoint:"https://uts-front.line-apps.com"},a.options),{sampleRate:this.changeRatioToUTSFormat(r.sendRatio),version:"current"}),this.uts.init(u,d),[4,wR()];case 5:(h=i.sent())&&(PC.debug("[LIFFUTS][mid] ".concat(h)),this.uts.setMid(h)),(null==t?void 0:t.tid)&&(PC.debug("[LIFFUTS][tid] ".concat(t.tid)),this.uts.setTid(t.tid)),this.referrer&&(PC.debug("liff.ref.referrer",this.referrer),this.uts.setSessionParams(this.referrer)),s&&this.setLiffId(s),this.setIsLoggedIn(dO()),this.setVersion("2.25.1"),f=R_(location.href),PC.debug("[LIFFUTS][url] ".concat(f)),this.uts.setUrl(f),this.liffCore.analytics=this.uts,this.injected=!0,i.label=6;case 6:return[2]}}))}))},r.prototype.beforeInitSuccess=function(){return this.injected&&(this.setIsLiffSuccessful(!0),this.sendLiffInit()),Promise.resolve()},r.prototype.initError=function(){return this.injected&&(this.setIsLiffSuccessful(!1),this.sendLiffInit()),Promise.resolve()},r}(KC),OR=/([\x90\x9D\x81\x8D\x8F<"{|}>\\^`â€œâ€ºâ€žâ€¢â€šÅ½Å â€¦â€™â€”Å¾â€“â€˜â€â€¡â„¢â€°Å’Å¡Å¸â€¹Å“â€ Â¥Â¿Â©Ã¡Ã„Ã½ÃÃŽÃ°Ã´]|\n|.*#.*#|%(?![0-9A-Fa-f]{2})[^%]{0,2})/,ER=function(e){if(OR.test(e))throw y_(BC,"invalid URL.");var t=new URL(e),n=t.username,r=t.password,o=t.hash,i=t.search;return{username:n,password:r,pathname:t.pathname,hash:o,origin:t.origin,search:i}},SR=function(e){return e.substring(1).split("&").filter((function(e){return!/^liff\./.test(e)&&Boolean(e)}))},RR=function(e,t){var n=e.substring(t.length);return"/"===n?"":(n.length>0&&"/"!==n[0]&&(n="/"+n),n)},TR=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))},NR=function(e,t){var n=function(e,t){for(var n=c([],a(e),!1),r=0;r<t.length;r++){var o=t[r],i=n.indexOf(o);i>-1&&n.splice(i,1)}return n}(function(e){var t,n,r=e.replace(/\+/g,"%2B"),o=new URLSearchParams(r),i=[];try{for(var c=s(o.entries()),l=c.next();!l.done;l=c.next()){var u=a(l.value,2),d=u[0],h=u[1];i.push("".concat(TR(d),"=").concat(TR(h)))}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}if(0===i.length)return[""];var f=e.split("&");return i.map((function(e,t){return e.endsWith("=")&&!f[t].endsWith("=")?e.slice(0,-1):e}))}(SR(e).join("&")),SR(t)).join("&");return""!==n?"?".concat(n):""},AR=function(e){var t=new RegExp("^".concat(e_.join("|"))),n=e.substring(1).split("&").filter((function(e){return!t.test(e)&&Boolean(e)})).join("&");return n?"#".concat(n):""},PR=function(e,t){return 0===t.indexOf(e)&&(e.endsWith("/")&&(e=e.substring(0,e.length-1)),void 0===t[e.length]||"/"===t[e.length])},xR=function(e,t){var n=ER(e),r=new URL(t);if(n.username!==r.username||n.password!==r.password)throw y_(BC,"invalid URL.");if(r.origin!==n.origin||!PR(r.pathname,n.pathname))throw y_(BC,"invalid URL.")},IR=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.extraParams="",t.getAndValidateContext=function(){var e=H_();if(!e)throw y_(XC,"Could not get Context from server.");if(!e.endpointUrl)throw y_(XC,"Could not get endpointUrl from server.");if(!e.permanentLinkPattern)throw y_(XC,"Could not get permanentLinkPattern from server.");return e},t.createUrl=function(){var e=t.getAndValidateContext(),n=window.location,r=n.pathname,o=n.search,i=n.hash,s=n.origin,a=new URL(e.endpointUrl);if(a.origin!==s||!PR(a.pathname,r))throw y_(FC,"Current page is not under entrypoint.");var c=r.substring(a.pathname.length);c.length>0&&"/"!==c[0]&&(c="/"+c);var l=new RegExp("^".concat(e_.join("|"))),u=i.substring(1).split("&").filter((function(e){return!l.test(e)&&Boolean(e)})).join("&"),d=u===a.hash.substring(1)?"":u,h=function(e){return e.substring(1).split("&").filter((function(e){return!/liff\.state/.test(e)&&Boolean(e)}))},f=h(o),p=h(a.search);t.extraParams&&f.push(t.extraParams);for(var g=0;g<p.length;g++){var v=p[g],m=f.indexOf(v);m>-1&&f.splice(m,1)}var y=f.join("&"),b="".concat(c).concat(""!==y?"?".concat(y):"").concat(d?"#".concat(d):"");return"".concat(GC).concat(W_().liffId).concat(b)},t.createUrlBy=function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,s,a;return i(this,(function(i){if(!(t=W_().liffId))throw y_(XC,"Should run after liff init.");return n=this.getAndValidateContext(),xR(e,n.endpointUrl),r=ER(e),o=new URL(n.endpointUrl),s=n.miniDomainAllowed?QC:GC,a=n.miniDomainAllowed&&n.miniAppId?n.miniAppId:t,[2,s.concat(a,RR(r.pathname,o.pathname),NR(r.search,o.search),AR(r.hash))]}))}))},t.setExtraQueryParam=function(e){t.extraParams=e},t.install=function(){return{createUrl:t.createUrl,createUrlBy:t.createUrlBy,setExtraQueryParam:t.setExtraQueryParam}},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"permanentLink"},enumerable:!1,configurable:!0}),n}(KC),kR=new IR,DR=function(){function e(e,t){var n=this;this.resolve=e,this.reject=t,this.onSubmit=function(e){var t=e.message;n.resolve({value:t}),n.destroy()},this.onClose=function(){n.resolve({value:null}),n.destroy()},this.onCancel=function(){n.resolve({value:null}),n.destroy()},this.onError=function(e){n.reject(e),n.destroy()},this.start()}return e.prototype.start=function(){nS.on("submit",this.onSubmit),nS.on("close",this.onClose),nS.on("cancel",this.onCancel),nS.on("error",this.onError)},e.prototype.destroy=function(){nS.off("submit",this.onSubmit),nS.off("close",this.onClose),nS.off("cancel",this.onCancel),nS.off("error",this.onError),CR=void 0},e}();function KR(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return TO.scanCodeV2(),CR&&CR.destroy(),[2,new Promise((function(e,t){CR=new DR(e,t),nS.open({url:"https://liff.line.me/1656359117-jxmx5e11"}).catch((function(e){null==CR||CR.destroy(),t(e)}))}))]}))}))}var MR=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"scanCodeV2"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return KR},n}(KC),LR=new MR,UR={};function jR(){return UR}function WR(e,t){var n=jR(),r=a(t.split("."),1)[0],o=n[t];o&&e.removeEventListener(r,o),n[t]=null}var BR=!1,XR=!1;function HR(e,t,n,r){BR||(XR=function(){var e=!1;try{var n=Object.defineProperty({},"passive",{get:function(){return e=!0,!1}});window.addEventListener("test",n,n),window.removeEventListener("test",n,n)}catch(t){e=!1}return e}(),BR=!0);var o=a(t.split("."),1)[0];return new Promise((function(i){var s=function(e){i(e),n(e)};!function(e,t){UR[e]=t}(t,s),e.addEventListener(o,s,!!XR&&r)}))}function FR(e,t,n,r){if(void 0===n&&(n={}),"object"!=typeof e||!e.postMessage)throw y_(BC,"target must be window object");if("string"!=typeof t)throw y_(BC,"keyname must be string");if("object"!=typeof n)throw y_(BC,"incorrect body format. It should be Object or Array comprised of Object");if(!r)throw y_(BC,"serverEndPointUrl isn't passed. please fill up with proper url");if("*"===r)throw new Error("serverEndPointUrl doesn't allow to set '*'");var o={name:t,body:n};e.postMessage(o,r)}var qR=function(){function e(){this.payloadToShareTargetPicker=null,this.popupWindow=null,this.doesWaitForSubwindowResult=!1}return e.getInstance=function(){return e.instance?e.instance.reset():e.instance=new e,e.instance},e.prototype.init=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.liffId=e.referrer.liffId,this.doesWaitForSubwindowResult=!(!e.options||!e.options.waitForSubwindowResult),this.allowPostMessageOrigin=this.initAllowPostMessageOrigin(),this.payloadToShareTargetPicker=this.buildPayloadToShareTargetPicker(e),window.AbortController&&(this.abortController=new window.AbortController),this.prepareAnotherWindow(),[4,this.initOtt()];case 1:return r.sent(),this.initListener(),this.openAnotherWindow(),this.doesWaitForSubwindowResult?[4,this.pollingShareResult()]:[3,3];case 2:return t=r.sent(),this.finalize(),[2,t];case 3:case 6:return[2];case 4:return[3,6];case 5:if(n=r.sent(),this.finalize(),"AbortError"!==n.name)throw n;return[3,6]}}))}))},e.prototype.resetAllVariables=function(){this.liffId="",this.allowPostMessageOrigin="",this.payloadToShareTargetPicker=null,this.ott="",this.popupWindow=null,this.timeoutIDForHealthCheck=null,this.abortController=null,this.internalError=null,this.doesWaitForSubwindowResult=!1},e.prototype.reset=function(){this.finalize(),this.resetAllVariables()},e.prototype.finalize=function(){var e,t;this.abortController&&this.abortController.abort(),j_()||(e=this.timeoutIDForHealthCheck,t=this.popupWindow,WR(window,"message.receivedHealthcheck"),e&&clearTimeout(e),t&&!t.closed&&t.close())},e.prototype.buildPayloadToShareTargetPicker=function(e){return{messages:e.messages,isMultiple:e.isMultiple,referrer:e.referrer}},e.prototype.initAllowPostMessageOrigin=function(e){return void 0===e&&(e=HO("shareTargetPicker")),function(e){var t=e.match(/^(https?:\/\/.*?)\//);return t&&t[1]||""}(e)},e.prototype.initOtt=function(){return o(this,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return this.abortController&&(e=this.abortController.signal),t="".concat(HO("shareTargetPickerOtt"),"/").concat(this.liffId,"/ott"),n=this,[4,jO(t,{method:"GET",signal:e}).then((function(e){return e.ott}))];case 1:return n.ott=r.sent(),[2]}}))}))},e.prototype.prepareAnotherWindow=function(){j_()||("ios"!==wO()||D_()?this.popupWindow=window.open("","liffpopup","width=480, height=640, menubar=no, toolbar=no, scrollbars=yes"):this.popupWindow=window.open())},e.prototype.openAnotherWindow=function(){if(j_()&&this.payloadToShareTargetPicker)e=this.liffId,t=this.ott,n=this.payloadToShareTargetPicker,r={liffId:e,ott:t,data:JSON.stringify(n),closeModals:!1},location.href="".concat("line://picker","?").concat(O_(r));else{if(this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),!this.popupWindow)throw y_(JC);!function(e,t,n){var r={liffId:t,ott:n};e.location.href="".concat(HO("shareTargetPicker"),"?").concat(O_(r))}(this.popupWindow,this.liffId,this.ott)}var e,t,n,r},e.prototype.initListener=function(){var e,t;j_()||(e=this.onReceivedHealthcheck.bind(this),t=this.allowPostMessageOrigin,function(e,t,n,r){HR(e,"message.".concat(t),function(e,t,n){return function(r){PC.debug("messageReceive",r),r.origin===n&&r.data.name===e&&t(r)}}(t,n,r))}(window,"receivedHealthcheck",e,t))},e.prototype.healthCheck=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:if(this.popupWindow&&!this.popupWindow.closed)return[3,7];if(!this.doesWaitForSubwindowResult)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.onCanceled()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this.internalError=e,[3,4];case 4:return[3,6];case 5:this.finalize(),t.label=6;case 6:return[3,8];case 7:FR(this.popupWindow,"healthcheck",void 0,this.allowPostMessageOrigin),this.timeoutIDForHealthCheck=window.setTimeout(this.healthCheck.bind(this),1e3),t.label=8;case 8:return[2]}}))}))},e.prototype.onReceivedHealthcheck=function(){if(!this.popupWindow||!this.payloadToShareTargetPicker)throw y_(JC);FR(this.popupWindow,"ready",this.payloadToShareTargetPicker,this.allowPostMessageOrigin)},e.prototype.onCanceled=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:if(j_()||!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),t={liffId:this.liffId,ott:this.ott},[4,jO("".concat(HO("shareTargetPickerResult"),"?").concat(O_(t)),{method:"POST",signal:e,headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:"result=CANCEL"})];case 1:return[2,"ok"===n.sent().status]}}))}))},e.prototype.getShareResult=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){if(!this.ott)throw new Error("need to call with ott in client");return this.abortController&&(e=this.abortController.signal),t={liffId:this.liffId,ott:this.ott},PC.debug("fetch: getShareResult"),[2,jO("".concat(HO("shareTargetPickerResult"),"?").concat(O_(t)),{method:"GET",headers:{Accept:"application/json"},signal:e})]}))}))},e.isPollingTimeOut=function(e,t){return(t-e)/6e4>=10},e.prototype.pollingShareResult=function(){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=Date.now(),r.label=1;case 1:if(e.isPollingTimeOut(t,Date.now()))return[3,4];if(this.internalError)throw this.internalError;return[4,this.getShareResult()];case 2:if((n=r.sent())&&n.result)switch(n.result){case"SUCCESS":return[2,{status:"success"}];case"CANCEL":return[2];default:throw new Error(n.resultDescription)}return[4,new Promise((function(e){setTimeout(e,500)}))];case 3:return r.sent(),[3,1];case 4:throw new Error("Timeout: not finished within ".concat(10,"min"))}}))}))},e}(),JR=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.shareTargetPicker=function(e,n){return void 0===n&&(n={}),o(t,void 0,void 0,(function(){var t,r,o,s,a,c,l;return i(this,(function(i){switch(i.label){case 0:if(TO.shareTargetPicker(),!e||!Array.isArray(e)||0===e.length)throw y_(BC,"no proper argument");if(e.length>5)throw y_(BC,"exceed the limit of num of messages");if(!(t=W_().liffId))throw y_(FC);window.liff&&(r=window.liff).analytics&&function(e){PC.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"),e.sendCustom({type:"liffSdk",params:{placeId:"liff.shareTargetPicker"}})}(r.analytics),o=void 0===n.isMultiple||n.isMultiple,i.label=1;case 1:return i.trys.push([1,3,,4]),s=qR.getInstance(),a=bO(),c={waitForSubwindowResult:!0},j_()&&a&&c_(a,"10.11.0")<0&&(c.waitForSubwindowResult=!1),[4,s.init({messages:e,isMultiple:o,referrer:{liffId:t,url:location.origin},options:c})];case 2:return[2,i.sent()];case 3:throw(l=i.sent())instanceof m_?l:y_(zC,l.message);case 4:return[2]}}))}))},t}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"shareTargetPicker"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return this.shareTargetPicker},n}(KC),zR=new JR;function VR(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return n=HO("createShortcutOnHomeScreen"),(r=new URL(n)).searchParams.append("liffId",e),r.searchParams.append("url",t.url),t.description&&r.searchParams.append("description",t.description),[4,jO(r.toString())];case 1:return[2,o.sent().shortcutPageUrl]}}))}))}function $R(e){if(k_(e))throw y_(BC,"LINE URL scheme are not supported in the current environment.")}function GR(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return j_()?[2]:[4,new Promise((function(e){setTimeout(e,1e3)}))];case 1:return n.sent(),"hidden"===document.visibilityState?[2]:($R(t.url),[4,VR(e,t)]);case 2:return fR({url:n.sent(),external:!0}),[2]}}))}))}function QR(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return n={liffId:e,targetUrl:t.url,description:t.description},r="".concat("line://shortcut/liff","?").concat(O_(n)),location.href=r,[4,GR(e,t)];case 1:return o.sent(),[2]}}))}))}function YR(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return $R(t.url),[4,VR(e,t)];case 1:return fR({url:n.sent(),external:!0}),[2]}}))}))}function ZR(e){var t;if(void 0===e.url||null===e.url||""===e.url)throw y_(BC,"no proper argument");var n=H_();if(!(null===(t=null==n?void 0:n.availability.addToHomeLineScheme)||void 0===t?void 0:t.permission)){if(k_(e.url))throw y_(HC,"No permission to specify line schema in url.");if(e.description)throw y_(HC,"No permission to specify description.")}if(!k_(e.url)){if(!n)throw y_(HC,"Could not get Context from server.");n.liffId!==x_(e.url)&&xR(e.url,n.endpointUrl)}}function eT(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:if(!(t=W_().liffId))throw y_(XC,"Invalid LIFF ID.");return"ios"===wO()?[4,YR(t,e)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,QR(t,e)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}var tT=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"createShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return ZR(e),TO.createShortcutOnHomeScreen(),[4,eT(e)];case 1:return t.sent(),[2]}}))}))}(e)}},n}(KC),nT=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),Object.defineProperty(n.prototype,"name",{get:function(){return"internalCreateShortcutOnHomeScreen"},enumerable:!1,configurable:!0}),n.prototype.install=function(){return function(e){return function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return ZR(e),TO.internalCreateShortcutOnHomeScreen(),[4,eT(e)];case 1:return t.sent(),[2]}}))}))}(e)}},n}(KC),rT=Object.defineProperties({},{getOS:{value:wO,enumerable:!0,writable:!0},getVersion:{value:hO,enumerable:!0,writable:!0},getLanguage:{value:YS,enumerable:!0,writable:!0},getAppLanguage:{value:ZS,enumerable:!0,writable:!0},isInClient:{value:j_,enumerable:!0,writable:!0},isLoggedIn:{value:dO,enumerable:!0,writable:!0},logout:{value:MO,enumerable:!0,writable:!0},getAccessToken:{value:nO,enumerable:!0,writable:!0},getIDToken:{value:eO,enumerable:!0,writable:!0},getDecodedIDToken:{value:cO,enumerable:!0,writable:!0},getContext:{value:H_,enumerable:!0,writable:!0},openWindow:{value:fR,enumerable:!0,writable:!0},closeWindow:{value:dE,enumerable:!0,writable:!0},getFriendship:{value:lR(yR,"profile"),enumerable:!0,writable:!0},getAId:{value:q_,enumerable:!0,writable:!0},getProfilePlus:{value:z_,enumerable:!0,writable:!0},getIsVideoAutoPlay:{value:J_,enumerable:!0,writable:!0},getLineVersion:{value:bO,enumerable:!0,writable:!0},isApiAvailable:{value:NO,enumerable:!0,writable:!0},getProfile:{value:lR(hR,"profile"),enumerable:!0,writable:!0},sendMessages:{value:lR(vR,"chat_message.write"),enumerable:!0,writable:!0},subWindow:{value:nS,enumerable:!0,writable:!0},ready:{value:UC,enumerable:!0,writable:!0},id:{get:function(){return W_().liffId||null},enumerable:!0},_dispatchEvent:{value:function(e){var t={};try{t=JSON.parse(e)}catch(YS){throw y_(BC,YS.message)}var n=function(e){return new CustomEvent(VC,{detail:e})}(t);PC.debug("[client dispatchEvent to js]",{type:n.type,detail:n.detail}),window.dispatchEvent(n)},enumerable:!0,writable:!0},_call:{value:uE,enumerable:!0,writable:!0},_addListener:{value:aE,enumerable:!0,writable:!0},_removeListener:{value:cE,enumerable:!0,writable:!0},_postMessage:{value:lE,enumerable:!0,writable:!0}}),oT=new DC,iT=new kC(oT,rT),sT=new LC(oT,iT).install();[new LC(oT,iT),new hS,new QS,new _R,LR,kR,mO,dR,zR,bS,new DO,new tT,new nT].forEach((function(e){sT.call(rT,e)}));var aT=rT;function cT(e,t){var n;switch(null!==(n=e.liffTypeByRequestMethod[t])&&void 0!==n?n:e.defaultLiffType){case"compact":return e.baseUrl.compact;case"tall":return e.baseUrl.tall;case"full":return e.baseUrl.full;default:return e.baseUrl[e.defaultLiffType]}}var lT,uT=function(e){function n(t){var n=e.call(this,t)||this;return n.postRequestAndWaitForResponse=function(e){return o(n,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=this.createRequestKey(),[4,this.relayRequestClient.request(e,t)];case 1:return r.sent(),[4,this.openWallet(t,e.method)];case 2:return r.sent(),[4,this.waitForResponse(t)];case 3:return n=r.sent(),[2,this.handleRpcResponse(n)]}}))}))},n.waitForResponse=function(e){return o(n,void 0,void 0,(function(){var t,n,r,o,s;return i(this,(function(i){switch(i.label){case 0:t=1,n=!1,r=0,o=function(){aT.subWindow.off("close",o),n=!0},aT.subWindow.on("close",o),i.label=1;case 1:if(!(t<this.config.relayServerConfig.maxRetryCount))return[3,6];i.label=2;case 2:if(i.trys.push([2,4,,5]),n){if(!(r<=0))throw new l({code:by,message:"User canceled"});r++}return[4,this.relayRequestClient.fetchWithTimeout(e)];case 3:return[2,i.sent()];case 4:if((s=i.sent())instanceof l)throw s;return t++,[3,5];case 5:return[3,1];case 6:throw new Error("Fail to wait for response")}}))}))},n.openWallet=function(e,t){return o(n,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return n=cT(this.config.liffWalletConfig,t)+"/r/".concat(e,"?chainId=").concat(this.config.chainId),[4,aT.subWindow.open({url:n})];case 1:return r.sent(),[2]}}))}))},n}return t(n,e),n}(nC);!function(e){e.POPUP_BLOCKED="POPUP_BLOCKED",e.PAYMENT_HISTORY_SIGN="PAYMENT_HISTORY_SIGN",e.PAYMENT_HISTORY_OPEN="PAYMENT_HISTORY_OPEN"}(lT||(lT={}));var dT={ko:{payment_reqeust_verification_title:"ë³¸ì¸ ì¸ì¦",payment_reqeust_verification_desc:"ê±°ëž˜ë‚´ì—­ì„ í™•ì¸í•˜ë ¤ë©´ ë³¸ì¸ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤. ì•„ëž˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì„œëª…ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.",payment_reqeust_verification_cancel:"ì·¨ì†Œ",payment_reqeust_verification_submit:"ì§„í–‰í•˜ê¸°"},en:{payment_reqeust_verification_title:"Identity verification",payment_reqeust_verification_desc:"Identity verification is required to view your transaction history. Click the button below to sign.",payment_reqeust_verification_cancel:"Cancel",payment_reqeust_verification_submit:"Proceed"},ja:{payment_reqeust_verification_title:"æœ¬äººèªè¨¼",payment_reqeust_verification_desc:"å–å¼•å±¥æ­´ã‚’ç¢ºèªã™ã‚‹ã«ã¯æœ¬äººèªè¨¼ãŒå¿…è¦ã§ã™ã€‚ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ç½²åã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",payment_reqeust_verification_cancel:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",payment_reqeust_verification_submit:"æ¬¡ã«é€²ã‚€"},zh:{payment_reqeust_verification_title:"æœ¬äººé©—è­‰",payment_reqeust_verification_desc:"è‹¥è¦æŸ¥çœ‹äº¤æ˜“è¨˜éŒ„ï¼Œéœ€é€²è¡Œæœ¬äººé©—è­‰ã€‚è«‹é»žæ“Šä¸‹æ–¹æŒ‰éµé€²è¡Œç°½åã€‚",payment_reqeust_verification_cancel:"å–æ¶ˆ",payment_reqeust_verification_submit:"é€²è¡Œ"},th:{payment_reqeust_verification_title:"à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™",payment_reqeust_verification_desc:"à¸ˆà¸³à¹€à¸›à¹‡à¸™à¸•à¹‰à¸­à¸‡à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™à¹€à¸žà¸·à¹ˆà¸­à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“ à¸„à¸¥à¸´à¸à¸›à¸¸à¹ˆà¸¡à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸¥à¸‡à¸¥à¸²à¸¢à¸¡à¸·à¸­à¸Šà¸·à¹ˆà¸­",payment_reqeust_verification_cancel:"à¸¢à¸à¹€à¸¥à¸´à¸",payment_reqeust_verification_submit:"à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"}},hT={ko:{payment_complete_verification_title:"ì¸ì¦ ì™„ë£Œ",payment_complete_verification_desc:"ë³¸ì¸ ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì•„ëž˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ê±°ëž˜ë‚´ì—­ì„ í™•ì¸í•˜ì„¸ìš”.",payment_complete_verification_cancel:"ì·¨ì†Œ",payment_complete_verification_submit:"ì§„í–‰í•˜ê¸°"},en:{payment_complete_verification_title:"Verification complete",payment_complete_verification_desc:"Identity verification complete. Click the button below to view your transaction history.",payment_complete_verification_cancel:"Cancel",payment_complete_verification_submit:"Proceed"},ja:{payment_complete_verification_title:"èªè¨¼å®Œäº†",payment_complete_verification_desc:"æœ¬äººèªè¨¼ãŒå®Œäº†ã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦å–å¼•å±¥æ­´ã‚’ã”ç¢ºèªãã ã•ã„ã€‚",payment_complete_verification_cancel:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",payment_complete_verification_submit:"æ¬¡ã«é€²ã‚€"},zh:{payment_complete_verification_title:"é©—è­‰å®Œæˆ",payment_complete_verification_desc:"å·²å®Œæˆæœ¬äººé©—è­‰ã€‚è«‹é»žæ“Šä¸‹æ–¹æŒ‰éµæŸ¥çœ‹äº¤æ˜“è¨˜éŒ„ã€‚",payment_complete_verification_cancel:"å–æ¶ˆ",payment_complete_verification_submit:"é€²è¡Œ"},th:{payment_complete_verification_title:"à¸¢à¸·à¸™à¸¢à¸±à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ",payment_complete_verification_desc:"à¸¢à¸·à¸™à¸¢à¸±à¸™à¸•à¸±à¸§à¸•à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸„à¸¥à¸´à¸à¸—à¸µà¹ˆà¸›à¸¸à¹ˆà¸¡à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡à¹€à¸žà¸·à¹ˆà¸­à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸˜à¸¸à¸£à¸à¸£à¸£à¸¡à¸‚à¸­à¸‡à¸„à¸¸à¸“",payment_complete_verification_cancel:"à¸¢à¸à¹€à¸¥à¸´à¸",payment_complete_verification_submit:"à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"}},fT={ko:{wallet_block_popup_title:"íŒì—… ì°¨ë‹¨",wallet_block_popup_desc:"íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ê³„ì† ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",wallet_block_popup_cancel:"ì·¨ì†Œ",wallet_block_popup_submit:"ì§„í–‰í•˜ê¸°"},en:{wallet_block_popup_title:"Block pop-ups",wallet_block_popup_desc:"Pop-ups have been blocked. Do you want to continue?",wallet_block_popup_cancel:"Cancel",wallet_block_popup_submit:"Proceed"},ja:{wallet_block_popup_title:"ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ–ãƒ­ãƒƒã‚¯",wallet_block_popup_desc:"ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ",wallet_block_popup_cancel:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«",wallet_block_popup_submit:"æ¬¡ã«é€²ã‚€"},zh:{wallet_block_popup_title:"å°éŽ–å½ˆå‡ºè¦–çª—",wallet_block_popup_desc:"å·²å°éŽ–å½ˆå‡ºè¦–çª—ã€‚è¦ç¹¼çºŒé€²è¡Œå—Žï¼Ÿ",wallet_block_popup_cancel:"å–æ¶ˆ",wallet_block_popup_submit:"é€²è¡Œ"},th:{wallet_block_popup_title:"à¸šà¸¥à¹‡à¸­à¸à¸›à¹‡à¸­à¸šà¸­à¸±à¸›",wallet_block_popup_desc:"à¸›à¹‡à¸­à¸šà¸­à¸±à¸›à¸–à¸¹à¸à¸šà¸¥à¹‡à¸­à¸à¹à¸¥à¹‰à¸§ à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¸•à¹ˆà¸­à¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?",wallet_block_popup_cancel:"à¸¢à¸à¹€à¸¥à¸´à¸",wallet_block_popup_submit:"à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"}},pT=function(){function e(){this.resolvePromise=function(){},this.rejectPromise=function(){}}return e.prototype.setupListeners=function(){var e=this,t=function(t){var n=e.iframe;if(n&&t.source===n.contentWindow){var r=t.data;if(r&&"object"==typeof r){var o=r.event;if(o)switch(o){case"Clicked":e.resolvePromise&&e.resolvePromise();break;case"Canceled":e.rejectPromise&&(e.rejectPromise(new Error("User canceled")),e.reset())}}}};window.addEventListener("message",t),this.eventListener=t},e.prototype.clearListeners=function(){var e=this.eventListener;e&&(window.removeEventListener("message",e),this.eventListener=void 0)},e.prototype.reset=function(){this.resolvePromise=void 0,this.rejectPromise=void 0,ky(),this.clearListeners()},e.prototype.awaitUserClick=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return i(this,(function(r){switch(r.label){case 0:return t=new Promise((function(e,t){n.resolvePromise=e,n.rejectPromise=t})),this.setupListeners(),this.iframe=function(e,t,n){var r=document.createElement("div");r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.backgroundColor="rgba(0, 0, 0, 0.35)",r.style.zIndex="9999999",r.id="iframeDiv";var o=document.createElement("iframe");o.srcdoc=e,o.width=t,o.height=n,o.style.border="none",o.style.zIndex="99999999";var i=r.appendChild(o);return document.body.appendChild(r),i}(function(e){var t=e===lT.POPUP_BLOCKED?fT:e===lT.PAYMENT_HISTORY_SIGN?dT:hT,n=e===lT.PAYMENT_HISTORY_SIGN?"payment_reqeust_verification_title":e===lT.PAYMENT_HISTORY_OPEN?"payment_complete_verification_title":"wallet_block_popup_title",r=e===lT.PAYMENT_HISTORY_SIGN?"payment_reqeust_verification_desc":e===lT.PAYMENT_HISTORY_OPEN?"payment_complete_verification_desc":"wallet_block_popup_desc",o=e===lT.PAYMENT_HISTORY_SIGN?"payment_reqeust_verification_submit":e===lT.PAYMENT_HISTORY_OPEN?"payment_complete_verification_submit":"wallet_block_popup_submit",i=e===lT.PAYMENT_HISTORY_SIGN?"payment_reqeust_verification_cancel":e===lT.PAYMENT_HISTORY_OPEN?"payment_complete_verification_cancel":"wallet_block_popup_cancel";return'\n    <!DOCTYPE html>\n    <html lang="en">\n    <head>\n      <meta charset="UTF-8">\n      <style>\n        .popupContainer {\n          background-color: white;\n          display: flex;\n          flex-direction: column;\n          border-radius: 20px;\n          padding: 30px 24px;\n          align-items: center;\n        }\n        .title {\n          font-size: 18px;\n          font-weight: 700;\n          text-align: center;\n        }\n        .desc {\n          margin-top: 12px;\n          font-size: 16px;\n          font-weight: 400;\n          text-align: center;\n        }\n        .btnContainer {\n          display: flex;\n          flex-direction: column;\n          width: 100%;\n        }\n        .okBtn {\n          background-color: #000000;\n          color: #ffffff;\n          font-size: 16px;\n          font-weight: 700;\n          padding: 15px 24px;\n          cursor: pointer;\n          border-radius: 100px;\n          margin-top: 24px;\n          border: none;\n          width: 100%;\n        }\n        .cancelBtn {\n          background-color: #FFFFFF;\n          color: #7B7F81;\n          font-size: 15px;\n          font-weight: 700;\n          cursor: pointer;\n          border: none;\n          margin-top: 15px;\n        }\n      </style>\n    </head>\n    <body>\n    <script>\n      const browserLang = window.navigator.language.slice(0, 2);\n      const xlt = '.concat(JSON.stringify(t),";\n      const translations = xlt[browserLang] || xlt['en'];\n      console.log(translations);\n    \n      window.onload = function() {\n        document.getElementById('dappportalsdk_popup_title').innerHTML = translations.").concat(n,";\n        document.getElementById('dappportalsdk_popup_desc').innerHTML = translations.").concat(r,";\n        document.getElementById('dappportalsdk_popup_cancel').textContent = translations.").concat(i,";\n        document.getElementById('dappportalsdk_popup_proceed').textContent = translations.").concat(o,';\n    \n        document.getElementById(\'dappportalsdk_popup_cancel\').addEventListener(\'click\', function() {\n          window.parent.postMessage({event: \'Canceled\'}, \'*\');\n        });\n        document.getElementById(\'dappportalsdk_popup_proceed\').addEventListener(\'click\', function() {\n          window.parent.postMessage({event: \'Clicked\'}, \'*\');\n        });\n      }\n    <\/script>\n    <div class="popupContainer">\n      <div id="dappportalsdk_popup_title" class="title"></div>\n      <div id="dappportalsdk_popup_desc" class="desc"></div>\n      <div class="btnContainer">\n        <button id="dappportalsdk_popup_proceed" class="okBtn"></button>\n        <button id="dappportalsdk_popup_cancel" class="cancelBtn"></button>\n      </div>\n    </div>\n    </body>\n    </html>\n    ')}(e),"300px","400px"),[4,t.catch((function(e){throw{code:"-32001",message:"User canceled popup"}}))];case 1:return r.sent(),this.reset(),[2]}}))}))},e}(),gT=function(e){function n(t){var n=e.call(this,t)||this;return n.postRequestAndWaitForResponse=function(e){return o(n,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:return t=this.createRequestKey(),[4,this.openWallet(t,e.method)];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.relayRequestClient.request(e,t)];case 3:return o.sent(),[3,5];case 4:throw n=o.sent(),this.closeWallet(),n;case 5:return[4,this.relayRequestClient.waitForResponse(t)];case 6:return r=o.sent(),this.closeWallet(),[2,this.handleRpcResponse(r)]}}))}))},n.clickEventListener=new pT,n}return t(n,e),n.prototype.openWallet=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return n=navigator.userAgent,r=this.getRequestBaseUrl(t)+"/r/".concat(e,"?chainId=").concat(this.config.chainId),Ey(n)&&Sy(n)?(window.location.href=r,[2]):window.kaiaPopUpWindow&&!window.kaiaPopUpWindow.closed?(window.kaiaPopUpWindow.focus(),window.kaiaPopUpWindow.location.href=r,[2]):(o=this.config.webWalletConfig.popupSize,window.kaiaPopUpWindow=window.open(r,"webWallet","width=".concat(o.width,",height=").concat(o.height)),window.kaiaPopUpWindow?[3,2]:[4,this.clickEventListener.awaitUserClick(lT.POPUP_BLOCKED)]);case 1:i.sent(),window.kaiaPopUpWindow=window.open(r,"webWallet","width=".concat(o.width,",height=").concat(o.height)),i.label=2;case 2:return[2]}}))}))},n.prototype.closeWallet=function(){window.kaiaPopUpWindow&&window.kaiaPopUpWindow.close(),window.kaiaPopUpWindow=null},n.prototype.getRequestBaseUrl=function(e){return Ey(navigator.userAgent)?cT(this.config.liffWalletConfig,e):this.config.webWalletConfig.baseUrl},n}(nC),vT=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.postRequestAndWaitForResponse=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=this.createRequestKey(),[4,this.relayRequestClient.request(e,t)];case 1:return r.sent(),this.openWallet(t),[4,this.relayRequestClient.waitForResponse(t)];case 2:return n=r.sent(),[2,this.handleRpcResponse(n)]}}))}))},n.prototype.openWallet=function(e){var t=this.config.sdkUIUrls.mobileWalletBridge,n="".concat(t).concat(e,"?chainId=").concat(this.config.chainId),r=encodeURIComponent(n),o="/browser?url=".concat(r);Sy(navigator.userAgent)?this.openIosWallet(o):this.openAndroidWallet(o)},n.prototype.openAndroidWallet=function(e){var t=this.config.kaiaWalletMobileConfig;window.location.href="intent://wallet".concat(e,"#Intent;scheme=kaiawallet;package=").concat(t.androidPackageName,";end")},n.prototype.openIosWallet=function(e){var t=this.config.kaiaWalletMobileConfig;window.location.href="".concat(t.urlScheme,"://wallet").concat(e)},n}(nC),mT=function(e){var t=this;this.sendWalletMetric=function(e,n,r){var o=t.sdkLocalStorage.getDeviceId();fetch("".concat(t.baseUrl,"/api/v1/metric/wallet-activity"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uuid:o,address:n,wallet_type:r,action:e,data:{clientId:t.clientId}})}).catch((function(e){return console.error(e)}))},this.baseUrl=e.metricServerConfig.baseUrl,this.clientId=e.clientId,this.sdkLocalStorage=new Ay(e.chainId)},yT=function(){function e(e){this.resolveWalletType=function(){},this.rejectWalletType=function(){},this.walletSelectUIUrl=e.sdkUIUrls.miniDappConnectLiff}return e.prototype.onWalletTypeSelected=function(e){this.resolveWalletType&&this.resolveWalletType(e)},e.prototype.selectType=function(){return o(this,void 0,void 0,(function(){var e,t,n,r=this;return i(this,(function(o){switch(o.label){case 0:return e=new Promise((function(e,t){r.resolveWalletType=e,r.rejectWalletType=t})),[4,aT.subWindow.open({url:this.walletSelectUIUrl})];case 1:return o.sent(),t=function(){aT.subWindow.off("close",t),r.cancel()},n=function(e){aT.subWindow.off("submit",n),aT.subWindow.off("close",t);var o=e.walletType;r.onWalletTypeSelected(o)},aT.subWindow.on("close",t),aT.subWindow.on("submit",n),[4,e];case 2:return[2,o.sent()]}}))}))},e.prototype.cancel=function(){this.rejectWalletType&&this.rejectWalletType(new l({code:by,message:"User canceled"}))},e}(),bT=["en_US","ru_RU","zh_CN","zh","ar_AE","cs_CZ","de_DE","es_ES","es_LAT","fr_FR","id_ID","it_IT","nl_NL","pl_PL","pt_BR","pt_PT","ro_RO","tr_TR","uk_UA","vi_VN","zh_TW"],wT=["kaia_signTransaction","klay_signTransaction"],CT=function(){function e(e,t,n){this.eventBus=e,this.config=t,this.universalUi=n,this.setOkxEventProxy()}return e.init=function(t,n){return o(this,void 0,void 0,(function(){var r,o,s;return i(this,(function(i){switch(i.label){case 0:return r=bT.filter((function(e){var t;return e.includes(null===(t=window.navigator.language)||void 0===t?void 0:t.replace("-","_"))})),o=r.length>0?r[0]:"en_US",[4,vy.init({dappMetaData:{icon:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",name:"Dapp portal"},language:o,uiPreferences:{theme:id.LIGHT}})];case 1:return(s=i.sent()).connected()?[4,s.disconnect()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2,new e(t,n,s)]}}))}))},e.prototype.request=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return t=e.method,n=e.params,!1!==this.universalUi.connected()?[3,2]:[4,this.universalUi.openModal({namespaces:{eip155:{chains:["eip155:8217"],defaultChain:"8217"}}})];case 1:i.sent(),i.label=2;case 2:return r=wT.includes(t)?t:t.replace(/^(klay_|kaia_)/,"eth_"),o=n?this.convertToEthParam(r,n):n,[2,this.universalUi.request({method:r,params:o},"eip155:8217")]}}))}))},e.prototype.switchChain=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2]}))}))},e.prototype.setOkxEventProxy=function(){var e=this;this.universalUi.on("display_uri",(function(t){e.eventBus.emit("display_uri",t)})),this.universalUi.on("session_update",(function(t){e.eventBus.emit("session_update",t)})),this.universalUi.on("session_delete",(function(t){t.topic,e.eventBus.emit("disconnect")})),this.universalUi.on("connect",(function(){e.eventBus.emit("connect",{chainId:"8217"})}))},e.prototype.convertToEthParam=function(e,t){var n=this;if(-1!==["eth_signTypedData_v4"].indexOf(e)&&Array.isArray(t)&&2===t.length){var r=this.convertSignTypedDataV4Field(t[1]);return[t[0],r]}return-1===["eth_sendTransaction","eth_signTransaction"].indexOf(e)?t:Array.isArray(t)&&t.every((function(e){return"object"==typeof e}))?t.map((function(e){return n.convertInputFieldToDataField(e)})):t},e.prototype.convertSignTypedDataV4Field=function(e){try{return JSON.parse(e)}catch(AO){return console.error(AO),e}},e.prototype.convertInputFieldToDataField=function(e){var t=e;if(!("input"in t))return e;t.input;var o=r(t,["input"]);return n(n({},o),{data:t.input})},e}(),_T=function(e){function n(t){var n=e.call(this)||this;return n.walletType=null,n.handler=null,n.initializeWalletType=function(){var e=navigator.userAgent,t=Ey(e),r=function(e){return/iPhone|iPad|iPod|Android|webOS|BlackBerry|IEMobile|Opera Mini|Mobile/.test(e)}(e),o=null!=globalThis.klaytn,i=n.sdkLocalStorage.getWalletType();switch(i){case Dy.Extension:if(t||r||!o)return null;break;case Dy.Mobile:if(!t&&!r)return null;break;case Dy.Web:if(t)return null;break;case Dy.Liff:if(!t)return null}return i},n.config=t,n.chainNodeRpcClient=new Iy(t),n.metricApiClient=new mT(t),n.sdkLocalStorage=new Ay(t.chainId),n.host=n.config.chainNodeRpcEndpoint,n.connected=!0,n.timeout=6e4,n.initialize(),n}return t(n,e),n.prototype.initialize=function(){this.walletType=this.initializeWalletType(),this.initializeHandler(this.walletType)},n.prototype.initializeHandler=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:if(!e)return[2];switch(e){case Dy.OKX:return[3,1];case Dy.Extension:return[3,3];case Dy.Liff:return[3,4];case Dy.Web:return[3,5];case Dy.Mobile:return[3,6]}return[3,7];case 1:return t=this,[4,CT.init(this,this.config)];case 2:return t.handler=r.sent(),[3,7];case 3:return this.handler=new xy(this,this.config),[3,7];case 4:return n=void 0,n=aT.isInClient()?new uT(this.config):new gT(this.config),this.handler=new Ly(this.config,n),[3,7];case 5:return this.handler=new Ly(this.config,new gT(this.config)),[3,7];case 6:return this.handler=new Ly(this.config,new vT(this.config)),[3,7];case 7:return[2]}}))}))},n.prototype.getWalletType=function(){return this.walletType},n.prototype.disconnectWallet=function(){this.sdkLocalStorage.clear()},n.prototype.request=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),t=e.method,-1===this.config.walletHandledMethods.indexOf(t)?[2,this.chainNodeRpcClient.requestRpc(e)]:(this.validateTxType(e),n=null,this.walletType?[3,4]:[4,this.selectWalletType()]);case 1:return n=i.sent(),[4,new Promise((function(e){return setTimeout(e,700)}))];case 2:return i.sent(),[4,this.initializeHandler(n)];case 3:i.sent(),i.label=4;case 4:return-1===this.config.methodsShouldSyncChain.indexOf(t)?[3,6]:[4,this.handler.switchChain(this.config.chainId)];case 5:i.sent(),i.label=6;case 6:return[4,this.handler.request(e)];case 7:return r=i.sent(),!this.walletType&&n&&(this.walletType=n,this.sdkLocalStorage.setWalletType(n)),this.sendWalletConnectMetric(t,r,this.walletType),[2,r];case 8:throw o=i.sent(),console.error("Error in WalletProvider request",o),_y(o);case 9:return[2]}}))}))},n.prototype.selectWalletType=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,(aT.isInClient()?new yT(this.config):new Ky(this.config)).selectType()];case 1:return[2,e.sent()]}}))}))},n.prototype.validateTxType=function(e){"kaia_signTransaction"!==e.method&&"klay_signTransaction"!==e.method||this.validateSignTransaction(e)},n.prototype.validateSignTransaction=function(e){var t=e.params.map((function(e){return new Map(Object.entries(e))}));if(1!==t.length)throw new Cy("Invalid params");var n=t[0].get("typeInt");if(void 0===n||"number"!=typeof n||-1===this.config.feeDelegatedTxTypes.indexOf(n))throw new Cy("Only fee delegated transaction can be signed with signTransaction request. Use 'sendTransaction' to sign transaction and send to network.")},n.prototype.send=function(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.request(e)];case 1:return n=o.sent(),t&&t(null,function(e){return{jsonrpc:"2.0",id:"",result:e}}(n)),[3,3];case 2:return r=o.sent(),t&&t(r,void 0),[3,3];case 3:return[2]}}))}))},n.prototype.supportsSubscriptions=function(){return!1},n.prototype.disconnect=function(){return!0},n.prototype.sendWalletConnectMetric=function(e,t,n){return o(this,void 0,void 0,(function(){var r;return i(this,(function(o){return"kaia_requestAccounts"!==e&&"klay_requestAccounts"!==e&&"eth_requestAccounts"!==e||(r=t,this.metricApiClient.sendWalletMetric("CONNECT",r[0],n)),[2]}))}))},n}(My);function OT(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,a,c;return i(this,(function(i){switch(i.label){case 0:return t=null!==(s=e.sdkBaseUrl)&&void 0!==s?s:"https://sdk.dappportal.io",[4,fetch("".concat(t,"/config.json?sdkVersion=").concat("1.2.4"))];case 1:return[4,i.sent().json()];case 2:if(n=i.sent(),r=null!==(a=e.chainId)&&void 0!==a?a:n.defaultChainId,!(o=null!==(c=e.chainNodeRpcEndpoint)&&void 0!==c?c:n.chainNodeRpcEndpoints[r]))throw new Error("Please set the chainNodeRpcEndpoint");return[2,{clientId:e.clientId,chainId:r,chainNodeRpcEndpoint:o,sdkUIUrls:n.sdkUIUrls,relayServerConfig:n.relayServerConfig,paymentServerConfig:n.paymentServerConfig,metricServerConfig:n.metricServerConfig,stripePopupSize:n.stripePopupSize,paymentHistoryPopupConfig:n.paymentHistoryPopupConfig,kaiaWalletMobileConfig:n.kaiaWalletMobileConfig,liffWalletConfig:n.liffWalletConfig,webWalletConfig:n.webWalletConfig,walletHandledMethods:n.walletHandledMethods,methodsShouldSyncChain:n.methodsShouldSyncChain,methodsShouldAttachTxTypeParamsWhenRequestToExtension:n.methodsShouldAttachTxTypeParamsWhenRequestToExtension,methodsShouldConvertInputFieldToDataFieldWhenRequestToExtension:n.methodsShouldConvertInputFieldToDataFieldWhenRequestToExtension,txTypesShouldConvertInputFieldToDataFieldWhenRequestToExtension:n.txTypesShouldConvertInputFieldToDataFieldWhenRequestToExtension,feeDelegatedTxTypes:n.feeDelegatedTxTypes,blockedMethods:n.blockedMethods,blockedBrowsersUserAgent:n.blockedBrowsersUserAgent}]}}))}))}var ET=function(){function e(e){this.resolveUserClose=function(){},this.rejectUserClose=function(){},this.browserGuideUIUrl=e.sdkUIUrls.browserGuide}return e.prototype.setupListeners=function(){var e=this,t=function(t){var n=e.iframe;if(n&&t.source===n.contentWindow){var r=t.data;if(r&&"object"==typeof r){var o=r.event;if(o)switch(o){case"Loaded":break;case"Close":e.onSelectedClose()}}}};window.addEventListener("message",t),this.eventListener=t},e.prototype.clearListeners=function(){var e=this.eventListener;e&&(window.removeEventListener("message",e),this.eventListener=void 0)},e.prototype.onSelectedClose=function(){this.resolveUserClose&&this.resolveUserClose(null)},e.prototype.reset=function(){this.resolveUserClose=void 0,this.rejectUserClose=void 0,ky(),this.clearListeners()},e.prototype.showBrowserGuide=function(e){return o(this,void 0,void 0,(function(){var t,n=this;return i(this,(function(r){switch(r.label){case 0:return t=new Promise((function(e,t){n.resolveUserClose=e,n.rejectUserClose=t})),this.setupListeners(),this.iframe=function(e,t,n){var r=document.createElement("div");r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100vw",r.style.height="100vh",r.style.zIndex="9999999",r.id="iframeDiv";var o=document.createElement("iframe");o.src=e,o.width=t,o.height=n,o.style.border="none",o.style.zIndex="99999999";var i=r.appendChild(o);return document.body.appendChild(r),i}("".concat(this.browserGuideUIUrl,"?browserName=").concat(e),"100%","100%"),[4,t];case 1:return r.sent(),this.reset(),[2]}}))}))},e.prototype.cancel=function(){this.rejectUserClose&&this.rejectUserClose(new Error("User canceled")),this.reset()},e}(),ST=function(e){var t=this;this.getPayment=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t="".concat(this.baseUrl,"/api/payment-v1/payment/info"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Vw.get(t,{params:{id:e},headers:{"Content-Type":"application/json"}})];case 2:return[2,r.sent().data];case 3:throw n=r.sent(),console.error("Fail to get payment info - ",n),n;case 4:return[2]}}))}))},this.waitForConfirm=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t=1,r.label=1;case 1:if(!(t<this.maxRetryCount))return[3,8];r.label=2;case 2:return r.trys.push([2,5,6,7]),[4,this.getPaymentStatus(e)];case 3:switch(r.sent().status){case"CONFIRMED":case"FINALIZED":return[2];case"CANCELED":throw new l({code:-31001,message:"Payment is canceled"});case"CONFIRM_FAILED":throw new l({code:-31002,message:"Payment is failed"})}return[4,this.delayPolling(1e3)];case 4:return r.sent(),[3,7];case 5:if((n=r.sent())instanceof l)throw console.error(n),n;return[3,7];case 6:return t++,[7];case 7:return[3,1];case 8:throw new Error("Fail to wait for response")}}))}))},this.delayPolling=function(e){return o(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout(t,e)}))];case 1:return t.sent(),[2]}}))}))},this.getPaymentStatus=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t="".concat(this.baseUrl,"/api/payment-v1/payment/status"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Vw.get(t,{params:{id:e},headers:{"Content-Type":"application/json"}})];case 2:return[2,r.sent().data];case 3:throw n=r.sent(),console.error("Fail to get payment info - ",n),n;case 4:return[2]}}))}))},this.register=function(e,n){return o(t,void 0,void 0,(function(){var t,r,o;return i(this,(function(i){switch(i.label){case 0:t="".concat(this.baseUrl,"/api/payment-v1/payment/register"),r={id:e,txHash:n},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Vw.post(t,r,{headers:{"Content-Type":"application/json"}})];case 2:return i.sent(),[3,4];case 3:throw o=i.sent(),console.error("Fail to register - ",o),o;case 4:return[2]}}))}))},this.startPayment=function(e,n,r){return o(t,void 0,void 0,(function(){var t,o;return i(this,(function(i){switch(i.label){case 0:t="".concat(this.baseUrl,"/api/payment-v1/payment/start"),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Vw.post(t,{id:e,userAgent:n,isLiff:r},{headers:{"Content-Type":"application/json"}})];case 2:return[2,i.sent().data];case 3:throw o=i.sent(),console.error("Fail to startPayment - ",o),o;case 4:return[2]}}))}))},this.getNonceForPaymentHistory=function(e){return o(t,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:t="".concat(this.baseUrl,"/api/payment-v1/auth/nonce"),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Vw.get(t,{params:{walletAddress:e},headers:{"Content-Type":"application/json"}})];case 2:return[2,r.sent().data];case 3:throw n=r.sent(),console.error("Fail to get nonce for payment history - ",n),n;case 4:return[2]}}))}))},this.getSessionTokenForPaymentHistory=function(e,n){return o(t,void 0,void 0,(function(){var t,r,o;return i(this,(function(i){switch(i.label){case 0:t="".concat(this.baseUrl,"/api/payment-v1/auth/verify"),r={walletAddress:e,signature:n,isLegacy:!1},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,Vw.post(t,r,{headers:{"Content-Type":"application/json","x-client-id":this.clientId}})];case 2:return[2,i.sent().data];case 3:throw o=i.sent(),console.error("Fail to get session token for payment history - ",o),o;case 4:return[2]}}))}))},this.baseUrl=e.paymentServerConfig.baseUrl,this.maxRetryCount=e.relayServerConfig.maxRetryCount,this.clientId=e.clientId},RT=function(){function e(e){this.paymentClient=new ST(e)}return e.prototype.getPayment=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.paymentClient.getPayment(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.startPayment=function(e){return o(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=navigator.userAgent,n=aT.isInClient(),[4,this.paymentClient.startPayment(e,t,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.waitForConfirm=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.paymentClient.waitForConfirm(e)];case 1:return n.sent(),[3,3];case 2:throw t=n.sent(),console.log("Error in PaymentProvider request",t),_y(t);case 3:return[2]}}))}))},e.prototype.registerTxHash=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this.paymentClient.register(e,t)];case 1:return n.sent(),[2]}}))}))},e.prototype.openStripePaymentPage=function(e,t,n){return window.open(e,"stripePayment","width=".concat(t,",height=").concat(n))},e.prototype.getNonceForPaymentHistory=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.paymentClient.getNonceForPaymentHistory(e)];case 1:return[2,t.sent()]}}))}))},e.prototype.getSessionTokenForPaymentHistory=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this.paymentClient.getSessionTokenForPaymentHistory(e,t)];case 1:return[2,n.sent()]}}))}))},e}(),TT=function(){function e(e,t){this.config=e,this.walletProvider=t,this.handler=new RT(e),this.clickEventListener=new pT}return e.prototype.startPayment=function(e){return o(this,void 0,void 0,(function(){var t,r,o,s,a,c,l,u,d,h,f;return i(this,(function(i){switch(i.label){case 0:return[4,this.walletProvider.request({method:"kaia_accounts"})];case 1:if(t=i.sent(),r=t[0],!t)throw new Error("Wallet is not connected");return[4,this.handler.getPayment(e)];case 2:return o=i.sent(),[4,this.handler.startPayment(e)];case 3:return s=i.sent(),"CRYPTO"!==o.pgType?[3,8]:(a=s.paymentTxDTO,[4,this.walletProvider.request({method:"kaia_gasPrice",params:[]})]);case 4:return c=i.sent(),l={typeInt:48,from:r,to:a.to,gasPrice:c,value:a.value,input:a.input},[4,this.walletProvider.request({method:"kaia_estimateGas",params:[l]})];case 5:return u=i.sent(),[4,this.walletProvider.request({method:"kaia_sendTransaction",params:[n(n({},l),{gas:u})]})];case 6:return d=i.sent(),h=d,[4,this.handler.registerTxHash(e,h)];case 7:return i.sent(),[3,10];case 8:return f=s.redirectUrl,this.handler.openStripePaymentPage(f,this.config.stripePopupSize.width,this.config.stripePopupSize.height)||aT.isInClient()?[3,10]:[4,this.clickEventListener.awaitUserClick(lT.POPUP_BLOCKED)];case 9:i.sent(),this.handler.openStripePaymentPage(f,this.config.stripePopupSize.width,this.config.stripePopupSize.height),i.label=10;case 10:return[4,this.handler.waitForConfirm(e)];case 11:return i.sent(),[2]}}))}))},e.prototype.openPaymentHistory=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,o;return i(this,(function(i){switch(i.label){case 0:return[4,this.walletProvider.request({method:"kaia_accounts"})];case 1:if(e=i.sent(),!(t=e[0]))throw new Error("Wallet is not connected");return[4,this.walletProvider.getWalletType()];case 2:if(!(n=i.sent()))throw new Error("Walet type is not initialized");return[4,this.handler.getNonceForPaymentHistory(t)];case 3:return r=i.sent(),[4,this.clickEventListener.awaitUserClick(lT.PAYMENT_HISTORY_SIGN)];case 4:return i.sent(),[4,this.issueSessionToken(r,t)];case 5:return o=i.sent(),[4,this.clickEventListener.awaitUserClick(lT.PAYMENT_HISTORY_OPEN)];case 6:return i.sent(),[4,this.openPaymentHistoryPage(n,o)];case 7:return i.sent(),this.clickEventListener.reset(),[2]}}))}))},e.prototype.issueSessionToken=function(e,t){return o(this,void 0,void 0,(function(){var n,r;return i(this,(function(o){switch(o.label){case 0:return n="0x"+this.stringToHex(e),[4,this.walletProvider.request({method:"personal_sign",params:[n,t]})];case 1:return r=o.sent(),[4,this.handler.getSessionTokenForPaymentHistory(t,r)];case 2:return[2,o.sent()]}}))}))},e.prototype.openPaymentHistoryPage=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o,s;return i(this,(function(i){switch(i.label){case 0:return n=this.getPaymentPageBaseUrl(e),r="".concat(n,"?sessionToken=").concat(t),e===Dy.Liff&&aT.isInClient()?[4,aT.subWindow.open({url:r})]:[3,2];case 1:return i.sent(),[2];case 2:return Ey(o=navigator.userAgent)&&Sy(o)?(window.location.href=r,[2]):(s=this.config.webWalletConfig.popupSize,window.open(r,"payment","width=".concat(s.width,",height=").concat(s.height)),[2])}}))}))},e.prototype.getPaymentPageBaseUrl=function(e){return e===Dy.Liff?"".concat(this.config.paymentHistoryPopupConfig.liffUrl,"/payment-history"):"".concat(this.config.paymentHistoryPopupConfig.webUrl,"/payment-history")},e.prototype.stringToHex=function(e){var t,n,r=(new TextEncoder).encode(e),o="";try{for(var i=s(r),a=i.next();!a.done;a=i.next()){o+=a.value.toString(16).padStart(2,"0")}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},e}(),NT=function(){function e(e){this.config=e,this.browserGuideUi=new ET(e),this.metricApiClient=new mT(e),this.metricApiClient.sendWalletMetric("SDK_INIT",null,null)}return e.init=function(t){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:if(aT.isInClient()&&!aT.isLoggedIn())throw console.error("liff is not initialized"),new Error("liff is not initialized");return[4,OT(t)];case 1:return n=r.sent(),[4,this.initializeDeviceId(n.chainId)];case 2:return r.sent(),[2,new e(n)]}}))}))},e.initializeDeviceId=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,a,c,l,u,d;return i(this,(function(i){switch(i.label){case 0:if(t=new Ay(e),!aT.isInClient())return(n=t.getDeviceId())||(r=tC(),t.setDeviceId(r),n=r),[2,n];if(!(o=null===(d=aT.getDecodedIDToken())||void 0===d?void 0:d.sub))throw console.error("liff is not initialized"),new Error("liff is not initialized");return s=new TextEncoder,a=s.encode(o),[4,crypto.subtle.digest("SHA-256",a)];case 1:return c=i.sent(),l=Array.from(new Uint8Array(c)),u=l.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),t.setDeviceId(u),[2]}}))}))},e.prototype.getWalletProvider=function(){return this.walletProvider||(this.walletProvider=new _T(this.config)),this.walletProvider},e.prototype.getPaymentProvider=function(){if(!this.paymentProvider){var e=this.getWalletProvider();this.paymentProvider=new TT(this.config,e)}return this.paymentProvider},e.prototype.isSupportedBrowser=function(){return null===this.getBrowserNameIfUnsupported()},e.prototype.showUnsupportedBrowserGuide=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return(e=this.getBrowserNameIfUnsupported())?[4,this.browserGuideUi.showBrowserGuide(e)]:[2];case 1:return[2,t.sent()]}}))}))},e.prototype.getBrowserNameIfUnsupported=function(){var e,t,n,r,o=navigator.userAgent;try{for(var i=s(Object.entries(this.config.blockedBrowsersUserAgent)),c=i.next();!c.done;c=i.next()){var l=a(c.value,2),u=l[0],d=l[1];try{for(var h=(n=void 0,s(d)),f=h.next();!f.done;f=h.next()){var p=f.value;if(new RegExp(p).test(o))return u}}catch(g){n={error:g}}finally{try{f&&!f.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}}}catch(v){e={error:v}}finally{try{c&&!c.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return null},e}();return NT}();